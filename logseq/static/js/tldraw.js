(function(){
shadow$provide[596]=function(za,ba,Va,P){function w(u,z,A){var C,Q={},g=null,h=null;void 0!==A&&(g=""+A);void 0!==z.key&&(g=""+z.key);void 0!==z.ref&&(h=z.ref);for(C in z)q.call(z,C)&&!c.hasOwnProperty(C)&&(Q[C]=z[C]);if(u&&u.defaultProps)for(C in z=u.defaultProps,z)void 0===Q[C]&&(Q[C]=z[C]);return{$$typeof:Y,type:u,key:g,ref:h,props:Q,_owner:y.current}}ba(19);za=ba(22);var Y=60103;P.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(ba=Symbol.for,Y=ba("react.element"),P.Fragment=ba("react.fragment"));
var y=za.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};P.jsx=w;P.jsxs=w};
shadow$provide[598]=function(za,ba,Va,P){Va.exports=ba(596)};
shadow$provide[599]=function(za,ba,Va,P){function w(gc){for(var Sc="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+gc,Vc=1;Vc<arguments.length;Vc++)Sc+="\x26args[]\x3d"+encodeURIComponent(arguments[Vc]);return"Minified React error #"+gc+"; visit "+Sc+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Y(gc){if(null==gc)return null;if("function"===typeof gc)return gc.displayName||gc.name||null;if("string"===typeof gc)return gc;
switch(gc){case S:return"Fragment";case R:return"Portal";case F:return"Profiler";case E:return"StrictMode";case ia:return"Suspense";case U:return"SuspenseList"}if("object"===typeof gc)switch(gc.$$typeof){case K:return(gc.displayName||"Context")+".Consumer";case J:return(gc._context.displayName||"Context")+".Provider";case H:var Sc=gc.render;Sc=Sc.displayName||Sc.name||"";return gc.displayName||(""!==Sc?"ForwardRef("+Sc+")":"ForwardRef");case Z:return Y(gc.type);case W:return Y(gc._render);case aa:Sc=
gc._payload;gc=gc._init;try{return Y(gc(Sc))}catch(Vc){}}return null}function y(gc,Sc){for(var Vc=gc._threadCount|0;Vc<=Sc;Vc++)gc[Vc]=gc._currentValue2,gc._threadCount=Vc+1}function q(gc,Sc,Vc,Kd){if(Kd&&(Kd=gc.contextType,"object"===typeof Kd&&null!==Kd))return y(Kd,Vc),Kd[Vc];if(gc=gc.contextTypes){Vc={};for(var dd in gc)Vc[dd]=Sc[dd];Sc=Vc}else Sc=xa;return Sc}function c(gc){if(Ja.call(bb,gc))return!0;if(Ja.call(Ma,gc))return!1;if(Aa.test(gc))return bb[gc]=!0;Ma[gc]=!0;return!1}function u(gc,
Sc,Vc,Kd){if(null!==Vc&&0===Vc.type)return!1;switch(typeof Sc){case "function":case "symbol":return!0;case "boolean":if(Kd)return!1;if(null!==Vc)return!Vc.acceptsBooleans;gc=gc.toLowerCase().slice(0,5);return"data-"!==gc&&"aria-"!==gc;default:return!1}}function z(gc,Sc,Vc,Kd){if(null===Sc||"undefined"===typeof Sc||u(gc,Sc,Vc,Kd))return!0;if(Kd)return!1;if(null!==Vc)switch(Vc.type){case 3:return!Sc;case 4:return!1===Sc;case 5:return isNaN(Sc);case 6:return isNaN(Sc)||1>Sc}return!1}function A(gc,Sc,
Vc,Kd,dd,zc,Yc){this.acceptsBooleans=2===Sc||3===Sc||4===Sc;this.attributeName=Kd;this.attributeNamespace=dd;this.mustUseProperty=Vc;this.propertyName=gc;this.type=Sc;this.sanitizeURL=zc;this.removeEmptyString=Yc}function C(gc){return gc[1].toUpperCase()}function Q(gc){if("boolean"===typeof gc||"number"===typeof gc)return""+gc;gc=""+gc;var Sc=Da.exec(gc);if(Sc){var Vc="",Kd,dd=0;for(Kd=Sc.index;Kd<gc.length;Kd++){switch(gc.charCodeAt(Kd)){case 34:Sc="\x26quot;";break;case 38:Sc="\x26amp;";break;case 39:Sc=
"\x26#x27;";break;case 60:Sc="\x26lt;";break;case 62:Sc="\x26gt;";break;default:continue}dd!==Kd&&(Vc+=gc.substring(dd,Kd));dd=Kd+1;Vc+=Sc}gc=dd!==Kd?Vc+gc.substring(dd,Kd):Vc}return gc}function g(gc,Sc){var Vc=Ia.hasOwnProperty(gc)?Ia[gc]:null,Kd;if(Kd="style"!==gc)Kd=null!==Vc?0===Vc.type:!(2<gc.length)||"o"!==gc[0]&&"O"!==gc[0]||"n"!==gc[1]&&"N"!==gc[1]?!1:!0;if(Kd||z(gc,Sc,Vc,!1))return"";if(null!==Vc){gc=Vc.attributeName;Kd=Vc.type;if(3===Kd||4===Kd&&!0===Sc)return gc+'\x3d""';Vc.sanitizeURL&&
(Sc=""+Sc);return gc+'\x3d"'+(Q(Sc)+'"')}return c(gc)?gc+'\x3d"'+(Q(Sc)+'"'):""}function h(gc,Sc){return gc===Sc&&(0!==gc||1/gc===1/Sc)||gc!==gc&&Sc!==Sc}function b(){if(null===la)throw Error(w(321));return la}function l(){if(0<Ya)throw Error(w(312));return{memoizedState:null,queue:null,next:null}}function m(){null===pa?null===wa?(qa=!1,wa=pa=l()):(qa=!0,pa=wa):null===pa.next?(qa=!1,pa=pa.next=l()):(qa=!0,pa=pa.next);return pa}function p(gc,Sc,Vc,Kd){for(;Na;)Na=!1,Ya+=1,pa=null,Vc=gc(Sc,Kd);D();
return Vc}function D(){la=null;Na=!1;wa=null;Ya=0;pa=Ra=null}function v(gc,Sc){return"function"===typeof Sc?Sc(gc):Sc}function t(gc,Sc,Vc){la=b();pa=m();if(qa){var Kd=pa.queue;Sc=Kd.dispatch;if(null!==Ra&&(Vc=Ra.get(Kd),void 0!==Vc)){Ra.delete(Kd);Kd=pa.memoizedState;do Kd=gc(Kd,Vc.action),Vc=Vc.next;while(null!==Vc);pa.memoizedState=Kd;return[Kd,Sc]}return[pa.memoizedState,Sc]}gc=gc===v?"function"===typeof Sc?Sc():Sc:void 0!==Vc?Vc(Sc):Sc;pa.memoizedState=gc;gc=pa.queue={last:null,dispatch:null};
gc=gc.dispatch=f.bind(null,la,gc);return[pa.memoizedState,gc]}function r(gc,Sc){la=b();pa=m();Sc=void 0===Sc?null:Sc;if(null!==pa){var Vc=pa.memoizedState;if(null!==Vc&&null!==Sc){var Kd=Vc[1];a:if(null===Kd)Kd=!1;else{for(var dd=0;dd<Kd.length&&dd<Sc.length;dd++)if(!ma(Sc[dd],Kd[dd])){Kd=!1;break a}Kd=!0}if(Kd)return Vc[0]}}gc=gc();pa.memoizedState=[gc,Sc];return gc}function f(gc,Sc,Vc){if(!(25>Ya))throw Error(w(301));if(gc===la)if(Na=!0,gc={action:Vc,next:null},null===Ra&&(Ra=new Map),Vc=Ra.get(Sc),
void 0===Vc)Ra.set(Sc,gc);else{for(Sc=Vc;null!==Sc.next;)Sc=Sc.next;Sc.next=gc}}function G(){}function B(gc){switch(gc){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L(gc){if(void 0===gc||null===gc)return gc;var Sc="";M.Children.forEach(gc,function(Vc){null!=Vc&&(Sc+=Vc)});return Sc}function V(gc,Sc){if(void 0===gc)throw Error(w(152,Y(Sc)||"Component"));}function I(gc,Sc,Vc){function Kd(Yc,
Mb){var pb=Mb.prototype&&Mb.prototype.isReactComponent,Gb=q(Mb,Sc,Vc,pb),Lb=[],gb=!1,ub={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Lb)return null},enqueueReplaceState:function(Zc,nd){gb=!0;Lb=[nd]},enqueueSetState:function(Zc,nd){if(null===Lb)return null;Lb.push(nd)}};if(pb){if(pb=new Mb(Yc.props,Gb,ub),"function"===typeof Mb.getDerivedStateFromProps){var Tb=Mb.getDerivedStateFromProps.call(null,Yc.props,pb.state);null!=Tb&&(pb.state=T({},pb.state,Tb))}}else if(la={},
pb=Mb(Yc.props,Gb,ub),pb=p(Mb,Yc.props,pb,Gb),null==pb||null==pb.render){gc=pb;V(gc,Mb);return}pb.props=Yc.props;pb.context=Gb;pb.updater=ub;ub=pb.state;void 0===ub&&(pb.state=ub=null);if("function"===typeof pb.UNSAFE_componentWillMount||"function"===typeof pb.componentWillMount)if("function"===typeof pb.componentWillMount&&"function"!==typeof Mb.getDerivedStateFromProps&&pb.componentWillMount(),"function"===typeof pb.UNSAFE_componentWillMount&&"function"!==typeof Mb.getDerivedStateFromProps&&pb.UNSAFE_componentWillMount(),
Lb.length){ub=Lb;var kc=gb;Lb=null;gb=!1;if(kc&&1===ub.length)pb.state=ub[0];else{Tb=kc?ub[0]:pb.state;var Hc=!0;for(kc=kc?1:0;kc<ub.length;kc++){var Rc=ub[kc];Rc="function"===typeof Rc?Rc.call(pb,Tb,Yc.props,Gb):Rc;null!=Rc&&(Hc?(Hc=!1,Tb=T({},Tb,Rc)):T(Tb,Rc))}pb.state=Tb}}else Lb=null;gc=pb.render();V(gc,Mb);if("function"===typeof pb.getChildContext&&(Yc=Mb.childContextTypes,"object"===typeof Yc)){var nc=pb.getChildContext(),Wc;for(Wc in nc)if(!(Wc in Yc))throw Error(w(108,Y(Mb)||"Unknown",Wc));
}nc&&(Sc=T({},Sc,nc))}for(;M.isValidElement(gc);){var dd=gc,zc=dd.type;if("function"!==typeof zc)break;Kd(dd,zc)}return{child:gc,context:Sc}}var T=ba(19),M=ba(22),R=60106,S=60107,E=60108,F=60114,J=60109,K=60110,H=60112,ia=60113,U=60120,Z=60115,aa=60116,W=60121,ha=60117,X=60119,fa=60129,ra=60131;"function"===typeof Symbol&&Symbol.for&&(za=Symbol.for,R=za("react.portal"),S=za("react.fragment"),E=za("react.strict_mode"),F=za("react.profiler"),J=za("react.provider"),K=za("react.context"),H=za("react.forward_ref"),
ia=za("react.suspense"),U=za("react.suspense_list"),Z=za("react.memo"),aa=za("react.lazy"),W=za("react.block"),ha=za("react.fundamental"),X=za("react.scope"),fa=za("react.debug_trace_mode"),ra=za("react.legacy_hidden"));za=M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var xa={},va=new Uint16Array(16);for(ba=0;15>ba;ba++)va[ba]=ba+1;va[15]=0;var Aa=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Ja=Object.prototype.hasOwnProperty,Ma={},bb={},Ia={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(gc){Ia[gc]=new A(gc,0,!1,gc,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(gc){var Sc=gc[0];Ia[Sc]=new A(Sc,1,!1,gc[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(gc){Ia[gc]=
new A(gc,2,!1,gc.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(gc){Ia[gc]=new A(gc,2,!1,gc,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(gc){Ia[gc]=new A(gc,3,!1,gc.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(gc){Ia[gc]=new A(gc,3,!0,gc,null,!1,!1)});["capture","download"].forEach(function(gc){Ia[gc]=new A(gc,4,!1,gc,null,!1,!1)});["cols","rows","size","span"].forEach(function(gc){Ia[gc]=new A(gc,6,!1,gc,null,!1,!1)});["rowSpan","start"].forEach(function(gc){Ia[gc]=new A(gc,5,!1,gc.toLowerCase(),null,!1,!1)});var Oa=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(gc){var Sc=
gc.replace(Oa,C);Ia[Sc]=new A(Sc,1,!1,gc,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(gc){var Sc=gc.replace(Oa,C);Ia[Sc]=new A(Sc,1,!1,gc,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(gc){var Sc=gc.replace(Oa,C);Ia[Sc]=new A(Sc,1,!1,gc,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(gc){Ia[gc]=new A(gc,1,!1,gc.toLowerCase(),null,!1,!1)});
Ia.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(gc){Ia[gc]=new A(gc,1,!1,gc.toLowerCase(),null,!0,!0)});var Da=/["'&<>]/,ma="function"===typeof Object.is?Object.is:h,la=null,wa=null,pa=null,qa=!1,Na=!1,Ra=null,Ya=0,Pa=null,Xa={readContext:function(gc){var Sc=Pa.threadID;y(gc,Sc);return gc[Sc]},useContext:function(gc){b();var Sc=Pa.threadID;y(gc,Sc);return gc[Sc]},useMemo:r,useReducer:t,useRef:function(gc){la=
b();pa=m();var Sc=pa.memoizedState;return null===Sc?(gc={current:gc},pa.memoizedState=gc):Sc},useState:function(gc){return t(v,gc)},useLayoutEffect:function(){},useCallback:function(gc,Sc){return r(function(){return gc},Sc)},useImperativeHandle:G,useEffect:G,useDebugValue:G,useDeferredValue:function(gc){b();return gc},useTransition:function(){b();return[function(gc){gc()},!1]},useOpaqueIdentifier:function(){return(Pa.identifierPrefix||"")+"R:"+(Pa.uniqueID++).toString(36)},useMutableSource:function(gc,
Sc){b();return Sc(gc._source)}},mb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Ab=T({menuitem:!0},mb),Cb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Za=["Webkit","ms","Moz","O"];Object.keys(Cb).forEach(function(gc){Za.forEach(function(Sc){Sc=Sc+gc.charAt(0).toUpperCase()+gc.substring(1);Cb[Sc]=Cb[gc]})});var lb=/([A-Z])/g,eb=/^ms-/,Ta=M.Children.toArray,
db=za.ReactCurrentDispatcher,Sa={listing:!0,pre:!0,textarea:!0},Qb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Fc={},vc={},uc=Object.prototype.hasOwnProperty,Jc={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},id=function(){function gc(Vc,Kd,dd){M.isValidElement(Vc)?Vc.type!==S?Vc=[Vc]:(Vc=Vc.props.children,Vc=M.isValidElement(Vc)?[Vc]:Ta(Vc)):Vc=Ta(Vc);Vc={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:Vc,childIndex:0,context:xa,footer:""};
var zc=va[0];if(0===zc){var Yc=va;zc=Yc.length;var Mb=2*zc;if(!(65536>=Mb))throw Error(w(304));var pb=new Uint16Array(Mb);pb.set(Yc);va=pb;va[0]=zc+1;for(Yc=zc;Yc<Mb-1;Yc++)va[Yc]=Yc+1;va[Mb-1]=0}else va[0]=va[zc];this.threadID=zc;this.stack=[Vc];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=Kd;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=dd&&dd.identifierPrefix||""}
var Sc=gc.prototype;Sc.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var Vc=this.threadID;va[Vc]=va[0];va[0]=Vc}};Sc.pushProvider=function(Vc){var Kd=++this.contextIndex,dd=Vc.type._context,zc=this.threadID;y(dd,zc);var Yc=dd[zc];this.contextStack[Kd]=dd;this.contextValueStack[Kd]=Yc;dd[zc]=Vc.props.value};Sc.popProvider=function(){var Vc=this.contextIndex,Kd=this.contextStack[Vc],dd=this.contextValueStack[Vc];this.contextStack[Vc]=null;this.contextValueStack[Vc]=
null;this.contextIndex--;Kd[this.threadID]=dd};Sc.clearProviders=function(){for(var Vc=this.contextIndex;0<=Vc;Vc--)this.contextStack[Vc][this.threadID]=this.contextValueStack[Vc]};Sc.read=function(Vc){if(this.exhausted)return null;var Kd=Pa;Pa=this;var dd=db.current;db.current=Xa;try{for(var zc=[""],Yc=!1;zc[0].length<Vc;){if(0===this.stack.length){this.exhausted=!0;var Mb=this.threadID;va[Mb]=va[0];va[0]=Mb;break}var pb=this.stack[this.stack.length-1];if(Yc||pb.childIndex>=pb.children.length){var Gb=
pb.footer;""!==Gb&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===pb.type)this.currentSelectValue=null;else if(null!=pb.type&&null!=pb.type.type&&pb.type.type.$$typeof===J)this.popProvider(pb.type);else if(pb.type===ia){this.suspenseDepth--;var Lb=zc.pop();if(Yc){Yc=!1;var gb=pb.fallbackFrame;if(!gb)throw Error(w(303));this.stack.push(gb);zc[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else zc[this.suspenseDepth]+=Lb}zc[this.suspenseDepth]+=Gb}else{var ub=pb.children[pb.childIndex++],
Tb="";try{Tb+=this.render(ub,pb.context,pb.domNamespace)}catch(kc){if(null!=kc&&"function"===typeof kc.then)throw Error(w(294));throw kc;}finally{}zc.length<=this.suspenseDepth&&zc.push("");zc[this.suspenseDepth]+=Tb}}return zc[0]}finally{db.current=dd,Pa=Kd,D()}};Sc.render=function(Vc,Kd,dd){if("string"===typeof Vc||"number"===typeof Vc){dd=""+Vc;if(""===dd)return"";if(this.makeStaticMarkup)return Q(dd);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+Q(dd);this.previousWasTextNode=!0;return Q(dd)}Kd=
I(Vc,Kd,this.threadID);Vc=Kd.child;Kd=Kd.context;if(null===Vc||!1===Vc)return"";if(!M.isValidElement(Vc)){if(null!=Vc&&null!=Vc.$$typeof){dd=Vc.$$typeof;if(dd===R)throw Error(w(257));throw Error(w(258,dd.toString()));}Vc=Ta(Vc);this.stack.push({type:null,domNamespace:dd,children:Vc,childIndex:0,context:Kd,footer:""});return""}var zc=Vc.type;if("string"===typeof zc)return this.renderDOM(Vc,Kd,dd);switch(zc){case ra:case fa:case E:case F:case U:case S:return Vc=Ta(Vc.props.children),this.stack.push({type:null,
domNamespace:dd,children:Vc,childIndex:0,context:Kd,footer:""}),"";case ia:throw Error(w(294));case X:throw Error(w(343));}if("object"===typeof zc&&null!==zc)switch(zc.$$typeof){case H:la={};var Yc=zc.render(Vc.props,Vc.ref);Yc=p(zc.render,Vc.props,Yc,Vc.ref);Yc=Ta(Yc);this.stack.push({type:null,domNamespace:dd,children:Yc,childIndex:0,context:Kd,footer:""});return"";case Z:return Vc=[M.createElement(zc.type,T({ref:Vc.ref},Vc.props))],this.stack.push({type:null,domNamespace:dd,children:Vc,childIndex:0,
context:Kd,footer:""}),"";case J:return zc=Ta(Vc.props.children),dd={type:Vc,domNamespace:dd,children:zc,childIndex:0,context:Kd,footer:""},this.pushProvider(Vc),this.stack.push(dd),"";case K:zc=Vc.type;Yc=Vc.props;var Mb=this.threadID;y(zc,Mb);zc=Ta(Yc.children(zc[Mb]));this.stack.push({type:Vc,domNamespace:dd,children:zc,childIndex:0,context:Kd,footer:""});return"";case ha:throw Error(w(338));case aa:return zc=Vc.type,Yc=zc._init,zc=Yc(zc._payload),Vc=[M.createElement(zc,T({ref:Vc.ref},Vc.props))],
this.stack.push({type:null,domNamespace:dd,children:Vc,childIndex:0,context:Kd,footer:""}),""}throw Error(w(130,null==zc?zc:typeof zc,""));};Sc.renderDOM=function(Vc,Kd,dd){var zc=Vc.type.toLowerCase();"http://www.w3.org/1999/xhtml"===dd&&B(zc);if(!Fc.hasOwnProperty(zc)){if(!Qb.test(zc))throw Error(w(65,zc));Fc[zc]=!0}var Yc=Vc.props;if("input"===zc)Yc=T({type:void 0},Yc,{defaultChecked:void 0,defaultValue:void 0,value:null!=Yc.value?Yc.value:Yc.defaultValue,checked:null!=Yc.checked?Yc.checked:Yc.defaultChecked});
else if("textarea"===zc){var Mb=Yc.value;if(null==Mb){Mb=Yc.defaultValue;var pb=Yc.children;if(null!=pb){if(null!=Mb)throw Error(w(92));if(Array.isArray(pb)){if(!(1>=pb.length))throw Error(w(93));pb=pb[0]}Mb=""+pb}null==Mb&&(Mb="")}Yc=T({},Yc,{value:void 0,children:""+Mb})}else if("select"===zc)this.currentSelectValue=null!=Yc.value?Yc.value:Yc.defaultValue,Yc=T({},Yc,{value:void 0});else if("option"===zc){pb=this.currentSelectValue;var Gb=L(Yc.children);if(null!=pb){var Lb=null!=Yc.value?Yc.value+
"":Gb;Mb=!1;if(Array.isArray(pb))for(var gb=0;gb<pb.length;gb++){if(""+pb[gb]===Lb){Mb=!0;break}}else Mb=""+pb===Lb;Yc=T({selected:void 0,children:void 0},Yc,{selected:Mb,children:Gb})}}if(Mb=Yc){if(Ab[zc]&&(null!=Mb.children||null!=Mb.dangerouslySetInnerHTML))throw Error(w(137,zc));if(null!=Mb.dangerouslySetInnerHTML){if(null!=Mb.children)throw Error(w(60));if(!("object"===typeof Mb.dangerouslySetInnerHTML&&"__html"in Mb.dangerouslySetInnerHTML))throw Error(w(61));}if(null!=Mb.style&&"object"!==
typeof Mb.style)throw Error(w(62));}Mb=Yc;pb=this.makeStaticMarkup;Gb=1===this.stack.length;Lb="\x3c"+Vc.type;a:if(-1===zc.indexOf("-"))gb="string"===typeof Mb.is;else switch(zc){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":gb=!1;break a;default:gb=!0}for(nd in Mb)if(uc.call(Mb,nd)){var ub=Mb[nd];if(null!=ub){if("style"===nd){var Tb=void 0,kc="",Hc="";for(Tb in ub)if(ub.hasOwnProperty(Tb)){var Rc=
0===Tb.indexOf("--"),nc=ub[Tb];if(null!=nc){if(Rc)var Wc=Tb;else if(Wc=Tb,vc.hasOwnProperty(Wc))Wc=vc[Wc];else{var Zc=Wc.replace(lb,"-$1").toLowerCase().replace(eb,"-ms-");Wc=vc[Wc]=Zc}kc+=Hc+Wc+":";Hc=Tb;Rc=null==nc||"boolean"===typeof nc||""===nc?"":Rc||"number"!==typeof nc||0===nc||Cb.hasOwnProperty(Hc)&&Cb[Hc]?(""+nc).trim():nc+"px";kc+=Rc;Hc=";"}}ub=kc||null}Tb=null;gb?Jc.hasOwnProperty(nd)||(Tb=nd,Tb=c(Tb)&&null!=ub?Tb+'\x3d"'+(Q(ub)+'"'):""):Tb=g(nd,ub);Tb&&(Lb+=" "+Tb)}}pb||Gb&&(Lb+=' data-reactroot\x3d""');
var nd=Lb;Mb="";mb.hasOwnProperty(zc)?nd+="/\x3e":(nd+="\x3e",Mb="\x3c/"+Vc.type+"\x3e");a:{pb=Yc.dangerouslySetInnerHTML;if(null!=pb){if(null!=pb.__html){pb=pb.__html;break a}}else if(pb=Yc.children,"string"===typeof pb||"number"===typeof pb){pb=Q(pb);break a}pb=null}null!=pb?(Yc=[],Sa.hasOwnProperty(zc)&&"\n"===pb.charAt(0)&&(nd+="\n"),nd+=pb):Yc=Ta(Yc.children);Vc=Vc.type;dd=null==dd||"http://www.w3.org/1999/xhtml"===dd?B(Vc):"http://www.w3.org/2000/svg"===dd&&"foreignObject"===Vc?"http://www.w3.org/1999/xhtml":
dd;this.stack.push({domNamespace:dd,type:zc,children:Yc,childIndex:0,context:Kd,footer:Mb});this.previousWasTextNode=!1;return nd};return gc}();P.renderToNodeStream=function(){throw Error(w(207));};P.renderToStaticMarkup=function(gc,Sc){gc=new id(gc,!0,Sc);try{return gc.read(Infinity)}finally{gc.destroy()}};P.renderToStaticNodeStream=function(){throw Error(w(208));};P.renderToString=function(gc,Sc){gc=new id(gc,!1,Sc);try{return gc.read(Infinity)}finally{gc.destroy()}};P.version="17.0.2"};
shadow$provide[601]=function(za,ba,Va,P){Va.exports=ba(599)};
shadow$provide[602]=function(za,ba,Va,P){function w(){if(!nr&&(nr="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!nr))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nr(Iu)}function Y(a,d=0){return(El[a[d+0]]+El[a[d+1]]+El[a[d+2]]+El[a[d+3]]+"-"+El[a[d+4]]+El[a[d+5]]+"-"+El[a[d+6]]+El[a[d+7]]+"-"+El[a[d+8]]+El[a[d+9]]+"-"+El[a[d+10]]+El[a[d+11]]+El[a[d+12]]+El[a[d+13]]+El[a[d+14]]+
El[a[d+15]]).toLowerCase()}function y(a){let d=0;var k=0;for(var N of a)d+=N.w*N.h,k=Math.max(k,N.w);a.sort((sa,La)=>La.h-sa.h);k=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(d/.95)),k),h:Infinity}];let ea=N=0;for(const sa of a)for(a=k.length-1;0<=a;a--){var ka=k[a];if(!(sa.w>ka.w||sa.h>ka.h)){sa.x=ka.x;sa.y=ka.y;ea=Math.max(ea,sa.y+sa.h);N=Math.max(N,sa.x+sa.w);sa.w===ka.w&&sa.h===ka.h?(ka=k.pop(),a<k.length&&(k[a]=ka)):sa.h===ka.h?(ka.x+=sa.w,ka.w-=sa.w):(sa.w!==ka.w&&k.push({x:ka.x+sa.w,y:ka.y,w:ka.w-
sa.w,h:sa.h}),ka.y+=sa.h,ka.h-=sa.h);break}}return{w:N,h:ea,fill:d/(N*ea)||0}}function q(a,...d){return{didIntersect:0<d.length,message:a,points:d}}function c(a,d,k=0){const N=[a[0]+d[0]/2,a[1]+d[1]/2],ea=Gd.rotWith(a,N,k),ka=Gd.rotWith(Gd.add(a,[d[0],0]),N,k),sa=Gd.rotWith(Gd.add(a,d),N,k);a=Gd.rotWith(Gd.add(a,[0,d[1]]),N,k);return[["top",[ea,ka]],["right",[ka,sa]],["bottom",[sa,a]],["left",[a,ea]]]}function u(a,d,k,N){const [ea,ka]=a,[sa,La]=d,[Ua,cb]=k,[ib,nb]=N;return La/sa!==(nb-cb)/(ib-Ua)&&
(d=sa*(nb-cb)-La*(ib-Ua),0!==d&&(a=((ka-cb)*(ib-Ua)-(ea-Ua)*(nb-cb))/d,d=((ka-cb)*sa-(ea-Ua)*La)/d,0<=a&&0<=d&&1>=d))?q("intersection",[ea+a*sa,ka+a*La]):q("no intersection")}function z(a,d,k,N,ea=0){return b(k,N,ea,a,d)}function A(a,d,k,N=0){const {minX:ea,minY:ka,width:sa,height:La}=k;return z(a,d,[ea,ka],[sa,La],N)}function C(a,d,k,N){var ea=Gd.sub(a,k);k=Gd.sub(N,k);d=Gd.sub(d,a);N=k[0]*ea[1]-k[1]*ea[0];ea=d[0]*ea[1]-d[1]*ea[0];k=k[1]*d[0]-k[0]*d[1];return 0===N||0===ea?q("coincident"):0===k?
q("parallel"):0!==k&&(N/=k,ea/=k,0<=N&&1>=N&&0<=ea&&1>=ea)?q("intersection",Gd.add(a,Gd.mul(d,N))):q("no intersection")}function Q(a,d,k,N){var ea=(d[0]-a[0])*(d[0]-a[0])+(d[1]-a[1])*(d[1]-a[1]),ka=2*((d[0]-a[0])*(a[0]-k[0])+(d[1]-a[1])*(a[1]-k[1]));k=ka*ka-4*ea*(k[0]*k[0]+k[1]*k[1]+a[0]*a[0]+a[1]*a[1]-2*(k[0]*a[0]+k[1]*a[1])-N*N);if(0>k)return q("outside");if(0===k)return q("tangent");N=Math.sqrt(k);k=(-ka+N)/(2*ea);ea=(-ka-N)/(2*ea);if((0>k||1<k)&&(0>ea||1<ea))return 0>k&&0>ea||1<k&&1<ea?q("outside"):
q("inside");ka=[];0<=k&&1>=k&&ka.push(Gd.lrp(a,d,k));0<=ea&&1>=ea&&ka.push(Gd.lrp(a,d,ea));return q("intersection",...ka)}function g(a,d,k,N,ea,ka=0){if(0===N||0===ea||Gd.isEqual(a,d))return q("no intersection");N=0>N?N:-N;ea=0>ea?ea:-ea;a=Gd.sub(Gd.rotWith(a,k,-ka),k);d=Gd.sub(Gd.rotWith(d,k,-ka),k);var sa=Gd.sub(d,a),La=sa[0]*sa[0]/N/N+sa[1]*sa[1]/ea/ea;sa=2*a[0]*sa[0]/N/N+2*a[1]*sa[1]/ea/ea;const Ua=[];N=sa*sa-4*La*(a[0]*a[0]/N/N+a[1]*a[1]/ea/ea-1);0===N?Ua.push(-sa/2/La):0<N&&(N=Math.sqrt(N),
Ua.push((-sa+N)/2/La),Ua.push((-sa-N)/2/La));La=Ua.filter(cb=>0<=cb&&1>=cb).map(cb=>Gd.add(k,Gd.add(a,Gd.mul(Gd.sub(d,a),cb)))).map(cb=>Gd.rotWith(cb,k,ka));return q("intersection",...La)}function h(a,d,k){const N=[];for(let ea=1;ea<k.length;ea++){const ka=C(a,d,k[ea-1],k[ea]);ka&&N.push(...ka.points)}return 0===N.length?q("no intersection"):q("intersection",...k)}function b(a,d,k,N,ea){return c(a,d,k).reduce((ka,[sa,[La,Ua]])=>{(La=u(N,ea,La,Ua))&&ka.push(q(sa,...La.points));return ka},[]).filter(ka=>
ka.didIntersect)}function l(a,d,k,N){return c(a,d).reduce((ea,[ka,[sa,La]])=>{(sa=C(k,N,sa,La))&&ea.push(q(ka,...sa.points));return ea},[]).filter(ea=>ea.didIntersect)}function m(a,d,k,N){return c(a,d).reduce((ea,[ka,[sa,La]])=>{(sa=Q(sa,La,k,N))&&ea.push(uf(me({},sa),{message:ka}));return ea},[]).filter(ea=>ea.didIntersect)}function p(a,d,k,N,ea,ka=0){return c(a,d).reduce((sa,[La,[Ua,cb]])=>{(Ua=g(Ua,cb,k,N,ea,ka))&&sa.push(uf(me({},Ua),{message:La}));return sa},[]).filter(sa=>sa.didIntersect)}function D(a,
d,k){return c(a,d).reduce((N,[ea,[ka,sa]])=>{ka=h(ka,sa,k);ka.didIntersect&&N.push(q(ea,...ka.points));return N},[]).filter(N=>N.didIntersect)}function v(a,d,k){return c(a,d).reduce((N,[ea,[ka,sa]])=>{{const La=[];for(let Ua=1;Ua<k.length+1;Ua++){const cb=C(ka,sa,k[Ua-1],k[Ua%k.length]);cb&&La.push(...cb.points)}ka=0===La.length?q("no intersection"):q("intersection",...k)}ka.didIntersect&&N.push(q(ea,...ka.points));return N},[]).filter(N=>N.didIntersect)}function t(a,d,k,N=0,ea,ka){return d===k?m(ea,
ka,a,d):p(ea,ka,a,d,k,N)}function r(a,d,k){const {minX:N,minY:ea,width:ka,height:sa}=a;return l([N,ea],[ka,sa],d,k)}function f(a){for(var d=arguments.length,k=Array(1<d?d-1:0),N=1;N<d;N++)k[N-1]=arguments[N];throw Error("number"===typeof a?"[MobX] minified error nr: "+a+(k.length?" "+k.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+a);}function G(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?
window:"undefined"!==typeof za?za:"undefined"!==typeof self?self:px}function B(){Ha||f("Proxy not available")}function L(a){var d=!1;return function(){if(!d)return d=!0,a.apply(this,arguments)}}function V(a){return"function"===typeof a}function I(a){switch(typeof a){case "string":case "symbol":case "number":return!0}return!1}function T(a){return null!==a&&"object"===typeof a}function M(a){if(!T(a))return!1;a=Object.getPrototypeOf(a);if(null==a)return!0;a=Object.hasOwnProperty.call(a,"constructor")&&
a.constructor;return"function"===typeof a&&a.toString()===jb}function R(a){return(a=null==a?void 0:a.constructor)?"GeneratorFunction"===a.name||"GeneratorFunction"===a.displayName?!0:!1:!1}function S(a,d,k){up(a,d,{enumerable:!1,writable:!0,configurable:!0,value:k})}function E(a,d,k){up(a,d,{enumerable:!1,writable:!1,configurable:!0,value:k})}function F(a,d){var k="isMobX"+a;d.prototype[k]=!0;return function(N){return T(N)&&!0===N[k]}}function J(a){return a instanceof Map}function K(a){return a instanceof
Set}function H(a){var d=Object.keys(a);if(!oc)return d;var k=Object.getOwnPropertySymbols(a);return k.length?[].concat(d,k.filter(function(N){return Zp.propertyIsEnumerable.call(a,N)})):d}function ia(a){return null===a?null:"object"===typeof a?""+a:a}function U(a,d){return Zp.hasOwnProperty.call(a,d)}function Z(a,d){for(var k=0;k<d.length;k++){var N=d[k];N.enumerable=N.enumerable||!1;N.configurable=!0;"value"in N&&(N.writable=!0);Object.defineProperty(a,N.key,N)}}function aa(a,d,k){d&&Z(a.prototype,
d);k&&Z(a,k);Object.defineProperty(a,"prototype",{writable:!1});return a}function W(){W=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var k=arguments[d],N;for(N in k)Object.prototype.hasOwnProperty.call(k,N)&&(a[N]=k[N])}return a};return W.apply(this,arguments)}function ha(a,d){a.prototype=Object.create(d.prototype);a.prototype.constructor=a;X(a,d)}function X(a,d){X=Object.setPrototypeOf||function(k,N){k.__proto__=N;return k};return X(a,d)}function fa(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function ra(a,d){if(a){if("string"===typeof a)return xa(a,d);var k=Object.prototype.toString.call(a).slice(8,-1);"Object"===k&&a.constructor&&(k=a.constructor.name);if("Map"===k||"Set"===k)return Array.from(a);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return xa(a,d)}}function xa(a,d){if(null==d||d>a.length)d=a.length;for(var k=0,N=Array(d);k<d;k++)N[k]=a[k];return N}function va(a,d){var k="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(k)return(k=
k.call(a)).next.bind(k);if(Array.isArray(a)||(k=ra(a))||d&&a&&"number"===typeof a.length){k&&(a=k);var N=0;return function(){return N>=a.length?{done:!0}:{done:!1,value:a[N++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Aa(a){return Object.assign(function(d,k){Ja(d,k,a)},a)}function Ja(a,d,k){U(a,Ld)||S(a,Ld,W({},a[Ld]));k.annotationType_!==$g&&(a[Ld][d]=k)}function Ma(a){U(a,
Ld)||S(a,Ld,W({},a[Ld]));return a[Ld]}function bb(a,d,k){void 0===d&&(d=Jb);void 0===k&&(k=Jb);a=new Bg(a);d!==Jb&&Qc(lE,a,d,void 0);k!==Jb&&xd(a,k);return a}function Ia(a,d,k){return ud(a)?a:Array.isArray(a)?cf.array(a,{name:k}):M(a)?cf.object(a,void 0,{name:k}):J(a)?cf.map(a,{name:k}):K(a)?cf.set(a,{name:k}):"function"!==typeof a||Rc(a)||He(a)?a:R(a)?Su(a):Ru(k,a)}function Oa(a){return a}function Da(a,d){return{annotationType_:a,options_:d,make_:ma,extend_:la}}function ma(a,d,k,N){var ea;if(null!=
(ea=this.options_)&&ea.bound)return null===this.extend_(a,d,k,!1)?0:1;if(N===a.target_)return null===this.extend_(a,d,k,!1)?0:2;if(Rc(k.value))return 1;a=wa(a,this,d,k,!1);up(N,d,a);return 2}function la(a,d,k,N){k=wa(a,this,d,k);return a.defineProperty_(d,k,N)}function wa(a,d,k,N,ea){var ka,sa,La,Ua,cb,ib,nb;void 0===ea&&(ea=Wf.safeDescriptors);N=N.value;if(null!=(ka=d.options_)&&ka.bound){var Pb;N=N.bind(null!=(Pb=a.proxy_)?Pb:a.target_)}return{value:Sa(null!=(sa=null==(La=d.options_)?void 0:La.name)?
sa:k.toString(),N,null!=(Ua=null==(cb=d.options_)?void 0:cb.autoAction)?Ua:!1,null!=(ib=d.options_)&&ib.bound?null!=(nb=a.proxy_)?nb:a.target_:void 0),configurable:ea?a.isPlainObject_:!0,enumerable:!1,writable:ea?!1:!0}}function pa(a,d){return{annotationType_:a,options_:d,make_:qa,extend_:Na}}function qa(a,d,k,N){var ea;if(N===a.target_)return null===this.extend_(a,d,k,!1)?0:2;if(null!=(ea=this.options_)&&ea.bound&&(!U(a.target_,d)||!He(a.target_[d]))&&null===this.extend_(a,d,k,!1))return 0;if(He(k.value))return 1;
a=Ra(a,this,d,k,!1,!1);up(N,d,a);return 2}function Na(a,d,k,N){var ea;k=Ra(a,this,d,k,null==(ea=this.options_)?void 0:ea.bound);return a.defineProperty_(d,k,N)}function Ra(a,d,k,N,ea,ka){void 0===ka&&(ka=Wf.safeDescriptors);d=N.value;He(d)||(d=Su(d));if(ea){var sa;d=d.bind(null!=(sa=a.proxy_)?sa:a.target_);d.isMobXFlow=!0}return{value:d,configurable:ka?a.isPlainObject_:!0,enumerable:!1,writable:ka?!1:!0}}function Ya(a,d){return{annotationType_:a,options_:d,make_:Pa,extend_:Xa}}function Pa(a,d,k){return null===
this.extend_(a,d,k,!1)?0:1}function Xa(a,d,k,N){return a.defineComputedProperty_(d,W({},this.options_,{get:k.get,set:k.set}),N)}function mb(a,d){return{annotationType_:a,options_:d,make_:Ab,extend_:Cb}}function Ab(a,d,k){return null===this.extend_(a,d,k,!1)?0:1}function Cb(a,d,k,N){var ea,ka;return a.defineObservableProperty_(d,k.value,null!=(ea=null==(ka=this.options_)?void 0:ka.enhancer)?ea:Ia,N)}function Za(a){return{annotationType_:"true",options_:a,make_:lb,extend_:eb}}function lb(a,d,k,N){var ea,
ka;if(k.get)return Kf.make_(a,d,k,N);if(k.set){k=Sa(d.toString(),k.set);if(N===a.target_)return null===a.defineProperty_(d,{configurable:Wf.safeDescriptors?a.isPlainObject_:!0,set:k})?0:2;up(N,d,{configurable:!0,set:k});return 2}if(N!==a.target_&&"function"===typeof k.value){var sa;if(R(k.value)){var La;return(null!=(La=this.options_)&&La.autoBind?Su.bound:Su).make_(a,d,k,N)}return(null!=(sa=this.options_)&&sa.autoBind?Ru.bound:Ru).make_(a,d,k,N)}sa=!1===(null==(ea=this.options_)?void 0:ea.deep)?
cf.ref:cf;if("function"===typeof k.value&&null!=(ka=this.options_)&&ka.autoBind){var Ua;k.value=k.value.bind(null!=(Ua=a.proxy_)?Ua:a.target_)}return sa.make_(a,d,k,N)}function eb(a,d,k,N){var ea,ka;if(k.get)return Kf.extend_(a,d,k,N);if(k.set)return a.defineProperty_(d,{configurable:Wf.safeDescriptors?a.isPlainObject_:!0,set:Sa(d.toString(),k.set)},N);if("function"===typeof k.value&&null!=(ea=this.options_)&&ea.autoBind){var sa;k.value=k.value.bind(null!=(sa=a.proxy_)?sa:a.target_)}return(!1===(null==
(ka=this.options_)?void 0:ka.deep)?cf.ref:cf).extend_(a,d,k,N)}function Ta(a){if(!0===a.deep)var d=Ia;else{if(!1===a.deep)a=Oa;else{a=a.defaultDecorator;var k;a=a?null!=(d=null==(k=a.options_)?void 0:k.enhancer)?d:Ia:Ia}d=a}return d}function db(a,d,k){if(I(d))Ja(a,d,te);else return ud(a)?a:M(a)?cf.object(a,d,k):Array.isArray(a)?cf.array(a,d):J(a)?cf.map(a,d):K(a)?cf.set(a,d):"object"===typeof a&&null!==a?a:cf.box(a,d)}function Sa(a,d,k,N){function ea(){a:{var ka=N||this,sa=arguments,La=Wf.trackingDerivation,
Ua=!k||!La;Yc();var cb=Wf.allowStateChanges;Ua&&(gc(),cb=Fc(!0));var ib=Sc(!0),nb=cE++,Pb=Rv;Rv=nb;try{var Sb=d.apply(ka,sa);break a}catch(lc){var Nb=lc;throw lc;}finally{Rv!==nb&&f(30),Rv=Pb,void 0!==Nb&&(Wf.suppressReactionErrors=!0),Wf.allowStateChanges=cb,Wf.allowStateReads=ib,Mb(),Ua&&(Wf.trackingDerivation=La),Wf.suppressReactionErrors=!1}Sb=void 0}return Sb}void 0===k&&(k=!1);ea.isMobxAction=!0;dE&&(Iz.value=a,Object.defineProperty(ea,"name",Iz));return ea}function Qb(a,d){a=Fc(a);try{return d()}finally{Wf.allowStateChanges=
a}}function Fc(a){var d=Wf.allowStateChanges;Wf.allowStateChanges=a;return d}function vc(a){switch(a.dependenciesState_){case Fj.UP_TO_DATE_:return!1;case Fj.NOT_TRACKING_:case Fj.STALE_:return!0;case Fj.POSSIBLY_STALE_:for(var d=Sc(!0),k=gc(),N=a.observing_,ea=N.length,ka=0;ka<ea;ka++){var sa=N[ka];if(Qu(sa)){if(Wf.disableErrorBoundaries)sa.get();else try{sa.get()}catch(La){return Wf.trackingDerivation=k,Wf.allowStateReads=d,!0}if(a.dependenciesState_===Fj.STALE_)return Wf.trackingDerivation=k,Wf.allowStateReads=
d,!0}}Vc(a);Wf.trackingDerivation=k;Wf.allowStateReads=d;return!1}}function uc(a,d,k){var N=Sc(!0);Vc(a);a.newObserving_=Array(a.observing_.length+100);a.unboundDepsCount_=0;a.runId_=++Wf.runId;var ea=Wf.trackingDerivation;Wf.trackingDerivation=a;Wf.inBatch++;if(!0===Wf.disableErrorBoundaries)var ka=d.call(k);else try{ka=d.call(k)}catch(ib){ka=new Ns(ib)}Wf.inBatch--;Wf.trackingDerivation=ea;var sa=a.observing_;d=a.observing_=a.newObserving_;k=Fj.UP_TO_DATE_;ea=0;for(var La=a.unboundDepsCount_,Ua=
0;Ua<La;Ua++){var cb=d[Ua];0===cb.diffValue_&&(cb.diffValue_=1,ea!==Ua&&(d[ea]=cb),ea++);cb.dependenciesState_>k&&(k=cb.dependenciesState_)}d.length=ea;a.newObserving_=null;for(La=sa.length;La--;)Ua=sa[La],0===Ua.diffValue_&&dd(Ua,a),Ua.diffValue_=0;for(;ea--;)sa=d[ea],1===sa.diffValue_&&(sa.diffValue_=0,La=a,sa.observers_.add(La),sa.lowestObserverState_>La.dependenciesState_&&(sa.lowestObserverState_=La.dependenciesState_));k!==Fj.UP_TO_DATE_&&(a.dependenciesState_=k,a.onBecomeStale_());Wf.allowStateReads=
N;return ka}function Jc(a){var d=a.observing_;a.observing_=[];for(var k=d.length;k--;)dd(d[k],a);a.dependenciesState_=Fj.NOT_TRACKING_}function id(a){var d=gc();try{return a()}finally{Wf.trackingDerivation=d}}function gc(){var a=Wf.trackingDerivation;Wf.trackingDerivation=null;return a}function Sc(a){var d=Wf.allowStateReads;Wf.allowStateReads=a;return d}function Vc(a){if(a.dependenciesState_!==Fj.UP_TO_DATE_){a.dependenciesState_=Fj.UP_TO_DATE_;a=a.observing_;for(var d=a.length;d--;)a[d].lowestObserverState_=
Fj.UP_TO_DATE_}}function Kd(){(Wf.pendingReactions.length||Wf.inBatch||Wf.isRunningReactions)&&f(36);Jz=!0;if(Tv){var a=G();0===--a.__mobxInstanceCount&&(a.__mobxGlobals=void 0);Wf=new Sv}}function dd(a,d){a.observers_["delete"](d);0===a.observers_.size&&zc(a)}function zc(a){!1===a.isPendingUnobservation_&&(a.isPendingUnobservation_=!0,Wf.pendingUnobservations.push(a))}function Yc(){Wf.inBatch++}function Mb(){if(0===--Wf.inBatch){0<Wf.inBatch||Wf.isRunningReactions||Uv(ub);for(var a=Wf.pendingUnobservations,
d=0;d<a.length;d++){var k=a[d];k.isPendingUnobservation_=!1;0===k.observers_.size&&(k.isBeingObserved_&&(k.isBeingObserved_=!1,k.onBUO()),k instanceof Pu&&k.suspend_())}Wf.pendingUnobservations=[]}}function pb(a){var d=Wf.trackingDerivation;if(null!==d)return d.runId_!==a.lastAccessedBy_&&(a.lastAccessedBy_=d.runId_,d.newObserving_[d.unboundDepsCount_++]=a,!a.isBeingObserved_&&Wf.trackingContext&&(a.isBeingObserved_=!0,a.onBO())),a.isBeingObserved_;0===a.observers_.size&&0<Wf.inBatch&&zc(a);return!1}
function Gb(a){a.lowestObserverState_!==Fj.STALE_&&(a.lowestObserverState_=Fj.STALE_,a.observers_.forEach(function(d){if(d.dependenciesState_===Fj.UP_TO_DATE_)d.onBecomeStale_();d.dependenciesState_=Fj.STALE_}))}function Lb(a){a.lowestObserverState_!==Fj.STALE_&&(a.lowestObserverState_=Fj.STALE_,a.observers_.forEach(function(d){d.dependenciesState_===Fj.POSSIBLY_STALE_?d.dependenciesState_=Fj.STALE_:d.dependenciesState_===Fj.UP_TO_DATE_&&(a.lowestObserverState_=Fj.UP_TO_DATE_)}))}function gb(a){a.lowestObserverState_===
Fj.UP_TO_DATE_&&(a.lowestObserverState_=Fj.POSSIBLY_STALE_,a.observers_.forEach(function(d){d.dependenciesState_===Fj.UP_TO_DATE_&&(d.dependenciesState_=Fj.POSSIBLY_STALE_,d.onBecomeStale_())}))}function ub(){Wf.isRunningReactions=!0;for(var a=Wf.pendingReactions,d=0;0<a.length;){++d===hE&&(console.error("[mobx] cycle in reaction: "+a[0]),a.splice(0));for(var k=a.splice(0),N=0,ea=k.length;N<ea;N++)k[N].runReaction_()}Wf.isRunningReactions=!1}function Tb(a){var d=Uv;Uv=function(k){return a(function(){return d(k)})}}
function kc(a){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function Hc(a){return function(d,k){if(V(d))return Sa(d.name||"\x3cunnamed action\x3e",d,a);if(V(k))return Sa(d,k,a);if(I(k))return Ja(d,k,a?Mz:Lz);if(I(d))return Aa(Da(a?"autoAction":Kz,{name:d,autoAction:a}))}}function Rc(a){return V(a)&&!0===a.isMobxAction}function nc(a,d){function k(){a(Ua)}var N,ea;void 0===d&&(d=na);var ka=null!=(N=null==(ea=d)?void 0:ea.name)?N:"Autorun";if(d.scheduler||d.delay){var sa=
Wc(d),La=!1;var Ua=new Jt(ka,function(){La||(La=!0,sa(function(){La=!1;Ua.isDisposed_||Ua.track(k)}))},d.onError,d.requiresObservable)}else Ua=new Jt(ka,function(){this.track(k)},d.onError,d.requiresObservable);Ua.schedule_();return Ua.getDisposer_()}function Wc(a){return a.scheduler?a.scheduler:a.delay?function(d){return setTimeout(d,a.delay)}:kE}function Zc(a,d,k){function N(){ib=!1;if(!Nb.isDisposed_){var lc=!1;Nb.track(function(){var yc=Qb(!1,function(){return a(Nb)});lc=cb||!Sb(nb,yc);Pb=nb;
nb=yc});cb&&k.fireImmediately?sa(nb,Pb,Nb):!cb&&lc&&sa(nb,Pb,Nb);cb=!1}}var ea;void 0===k&&(k=na);var ka=null!=(ea=k.name)?ea:"Reaction",sa=Ig(ka,k.onError?nd(k.onError,d):d),La=!k.scheduler&&!k.delay,Ua=Wc(k),cb=!0,ib=!1,nb,Pb,Sb=k.compareStructural?xf.structural:k.equals||xf["default"],Nb=new Jt(ka,function(){cb||La?N():ib||(ib=!0,Ua(N))},k.onError,k.requiresObservable);Nb.schedule_();return Nb.getDisposer_()}function nd(a,d){return function(){try{return d.apply(this,arguments)}catch(k){a.call(this,
k)}}}function xd(a,d,k){return Qc(mE,a,d,k)}function Qc(a,d,k,N){var ea="function"===typeof N?jc(d,k):jc(d),ka=V(N)?N:k,sa=a+"L";ea[sa]?ea[sa].add(ka):ea[sa]=new Set([ka]);return function(){var La=ea[sa];La&&(La["delete"](ka),0===La.size&&delete ea[sa])}}function Dc(a){!0===a.isolateGlobalState&&Kd();var d=a.useProxies,k=a.enforceActions;void 0!==d&&(Wf.useProxies="always"===d?!0:"never"===d?!1:"undefined"!==typeof Proxy);"ifavailable"===d&&(Wf.verifyProxies=!0);void 0!==k&&(d="always"===k?"always":
"observed"===k,Wf.enforceActions=d,Wf.allowStateChanges=!0===d||"always"===d?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(N){N in a&&(Wf[N]=!!a[N])});Wf.allowStateReads=!Wf.observableRequiresReaction;a.reactionScheduler&&Tb(a.reactionScheduler)}function we(a,d,k,N){var ea=fd(d),ka=Od(a,N)[ce];Yc();try{Oc(ea).forEach(function(sa){ka.extend_(sa,ea[sa],k?sa in k?k[sa]:!0:!0)})}finally{Mb()}return a}
function Jf(a){var d={name:a.name_};a.observing_&&0<a.observing_.length&&(d.dependencies=Array.from(new Set(a.observing_)).map(Jf));return d}function Fe(){this.message="FLOW_CANCELLED"}function He(a){return!0===(null==a?void 0:a.isMobXFlow)}function ud(a,d){return a?void 0!==d?Ie(a)?a[ce].values_.has(d):!1:Ie(a)||!!a[ce]||Oh(a)||Vv(a)||Qu(a):!1}function Oe(a){if(Ie(a))return a[ce].ownKeys_();f(38)}function Uf(a,d,k){a.set(d,k);return k}function pg(a,d){if(null==a||"object"!==typeof a||a instanceof
Date||!ud(a))return a;if(fE(a)||Qu(a))return pg(a.get(),d);if(d.has(a))return d.get(a);if(yd(a)){var k=Uf(d,a,Array(a.length));a.forEach(function(sa,La){k[La]=pg(sa,d)});return k}if(Os(a)){var N=Uf(d,a,new Set);a.forEach(function(sa){N.add(pg(sa,d))});return N}if(zr(a)){var ea=Uf(d,a,new Map);a.forEach(function(sa,La){ea.set(La,pg(sa,d))});return ea}var ka=Uf(d,a,{});Oe(a).forEach(function(sa){Zp.propertyIsEnumerable.call(a,sa)&&(ka[sa]=pg(a[sa],d))});return ka}function pc(a,d){return pg(a,new Map)}
function gd(){f("trace() is not available in production builds");for(var a=!1,d=arguments.length,k=Array(d),N=0;N<d;N++)k[N]=arguments[N];"boolean"===typeof k[k.length-1]&&(a=k.pop());a:{switch(k.length){case 0:d=Wf.trackingDerivation;break a;case 1:d=jc(k[0]);break a;case 2:d=jc(k[0],k[1]);break a}d=void 0}if(!d)return f("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");d.isTracing_===It.NONE&&console.log("[mobx.trace] '"+
d.name_+"' tracing enabled");d.isTracing_=a?It.BREAK:It.LOG}function Mc(a,d){void 0===d&&(d=void 0);Yc();try{return a.apply(d)}finally{Mb()}}function zb(a){return void 0!==a.interceptors_&&0<a.interceptors_.length}function Eb(a,d){var k=a.interceptors_||(a.interceptors_=[]);k.push(d);return L(function(){var N=k.indexOf(d);-1!==N&&k.splice(N,1)})}function Ib(a,d){var k=gc();try{var N=[].concat(a.interceptors_||[]);a=0;for(var ea=N.length;a<ea&&((d=N[a](d))&&!d.type&&f(14),d);a++);return d}finally{Wf.trackingDerivation=
k}}function pd(a){return void 0!==a.changeListeners_&&0<a.changeListeners_.length}function ee(a,d){var k=a.changeListeners_||(a.changeListeners_=[]);k.push(d);return L(function(){var N=k.indexOf(d);-1!==N&&k.splice(N,1)})}function Sd(a,d){var k=gc();if(a=a.changeListeners_){a=a.slice();for(var N=0,ea=a.length;N<ea;N++)a[N](d);Wf.trackingDerivation=k}}function ef(a,d,k){var N=Od(a,k)[ce];Yc();try{var ea;null!=(ea=d)?ea:d=Ma(a);Oc(d).forEach(function(ka){return N.make_(ka,d[ka])})}finally{Mb()}return a}
function ob(a,d,k,N){void 0===k&&(k="ObservableArray");void 0===N&&(N=!1);B();d=new tx(k,d,N,!1);E(d.values_,ce,d);k=new Proxy(d.values_,qE);d.proxy_=k;a&&a.length&&(N=Fc(!0),d.spliceWithArray_(0,0,a),Wf.allowStateChanges=N);return k}function yb(a,d){"function"===typeof Array.prototype[a]&&(Wv[a]=d(a))}function rb(a){return function(){var d=this[ce];d.atom_.reportObserved();d=d.dehanceValues_(d.values_);return d[a].apply(d,arguments)}}function Zb(a){return function(d,k){var N=this,ea=this[ce];ea.atom_.reportObserved();
return ea.dehanceValues_(ea.values_)[a](function(ka,sa){return d.call(k,ka,sa,N)})}}function Yb(a){return function(){var d=this,k=this[ce];k.atom_.reportObserved();k=k.dehanceValues_(k.values_);var N=arguments[0];arguments[0]=function(ea,ka,sa){return N(ea,ka,sa,d)};return k[a].apply(k,arguments)}}function yd(a){return T(a)&&rE(a[ce])}function Ad(a){if(J(a)||zr(a))return a;if(Array.isArray(a))return new Map(a);if(M(a)){var d=new Map,k;for(k in a)d.set(k,a[k]);return d}return f(21,a)}function Od(a,
d){var k;if(U(a,ce))return a;var N=null!=(k=null==d?void 0:d.name)?k:"ObservableObject";k=Rz;var ea=new Map;N=String(N);var ka;var sa=d?null!=(ka=d.defaultDecorator)?ka:Za(d):void 0;d=new k(a,ea,N,sa);S(a,ce,d);return a}function Ge(a){return Qz[a]||(Qz[a]={get:function(){return this[ce].getObservablePropValue_(a)},set:function(d){return this[ce].setObservablePropValue_(a,d)}})}function Ie(a){return T(a)?yE(a[ce]):!1}function ye(a){return{enumerable:!1,configurable:!0,get:function(){return this[ce].get_(a)},
set:function(d){this[ce].set_(a,d)}}}function je(a){if(a>ux){for(var d=ux;d<a+100;d++)up(vx.prototype,""+d,ye(d));ux=a}}function Fb(a,d,k){return new vx(a,d,k)}function jc(a,d){if("object"===typeof a&&null!==a){if(yd(a))return void 0!==d&&f(23),a[ce].atom_;if(Os(a))return a[ce];if(zr(a)){if(void 0===d)return a.keysAtom_;var k=a.data_.get(d)||a.hasMap_.get(d);k||f(25,d,$a(a));return k}if(Ie(a)){if(!d)return f(26);(k=a[ce].values_.get(d))||f(27,d,$a(a));return k}if(Oh(a)||Qu(a)||Vv(a))return a}else if(V(a)&&
Vv(a[ce]))return a[ce];f(28)}function Ac(a,d){a||f(29);if(void 0!==d)return Ac(jc(a,d));if(Oh(a)||Qu(a)||Vv(a)||zr(a)||Os(a))return a;if(a[ce])return a[ce];f(24,a)}function $a(a,d){if(void 0!==d)a=jc(a,d);else{if(Rc(a))return a.name;a=Ie(a)||zr(a)||Os(a)?Ac(a):jc(a)}return a.name_}function ua(a,d,k){void 0===k&&(k=-1);return ta(a,d,k)}function ta(a,d,k,N,ea){if(a===d)return 0!==a||1/a===1/d;if(null==a||null==d)return!1;if(a!==a)return d!==d;var ka=typeof a;if("function"!==ka&&"object"!==ka&&"object"!=
typeof d)return!1;ka=Tz.call(a);if(ka!==Tz.call(d))return!1;switch(ka){case "[object RegExp]":case "[object String]":return""+a===""+d;case "[object Number]":return+a!==+a?+d!==+d:0===+a?1/+a===1/d:+a===+d;case "[object Date]":case "[object Boolean]":return+a===+d;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(a)===Symbol.valueOf.call(d);case "[object Map]":case "[object Set]":0<=k&&k++}a=Fa(a);d=Fa(d);ka="[object Array]"===ka;if(!ka){if("object"!=typeof a||"object"!=
typeof d)return!1;var sa=a.constructor,La=d.constructor;if(sa!==La&&!(V(sa)&&sa instanceof sa&&V(La)&&La instanceof La)&&"constructor"in a&&"constructor"in d)return!1}if(0===k)return!1;0>k&&(k=-1);N=N||[];ea=ea||[];for(sa=N.length;sa--;)if(N[sa]===a)return ea[sa]===d;N.push(a);ea.push(d);if(ka){sa=a.length;if(sa!==d.length)return!1;for(;sa--;)if(!ta(a[sa],d[sa],k-1,N,ea))return!1}else{ka=Object.keys(a);sa=ka.length;if(Object.keys(d).length!==sa)return!1;for(;sa--;)if(La=ka[sa],!U(d,La)||!ta(a[La],
d[La],k-1,N,ea))return!1}N.pop();ea.pop();return!0}function Fa(a){return yd(a)?a.slice():J(a)||zr(a)||K(a)||Os(a)?Array.from(a.entries()):a}function Wa(a){a[Symbol.iterator]=wb;return a}function wb(){return this}function cc(a,d){const k=new Set(d),N=Object.values(a),ea=new Set(N.filter(ka=>k.has(ka.toId)||k.has(ka.fromId)));a=ea.size;for(d=-1;0!==d;)ea.forEach(ka=>{ka=ka.fromId;for(const sa of N)sa.fromId===ka&&ea.add(sa),sa.toId===ka&&ea.add(sa)}),d=ea.size-a,a=ea.size;return Array.from(ea.values())}
function Kc(a,d,k,N,ea,ka,sa,La){if(ea=d.getBindingPoint(ea,ka,sa,La))return{id:N,type:"line",fromId:a.id,toId:d.id,handleId:k,point:ge.toFixed(ea.point),distance:ea.distance}}function bd(a,d){const k=a.getCenter(),N=d.getCenter();var ea=fk();ea=uf(me({},Tu.defaultProps),{id:ea,type:Tu.id,parentId:a.props.parentId,point:k});a=Kc(ea,a,"start",fk(),k,k,ge.uni(ge.sub(N,k)),!1);d=Kc(ea,d,"end",fk(),N,N,ge.uni(ge.sub(k,N)),!1);return a&&d?(ea.handles.start.point=[0,0],ea.handles.end.point=ge.sub(N,k),
ea.handles.start.bindingId=a.id,ea.handles.end.bindingId=d.id,[ea,[a,d]]):null}function fe(){return new HE}function De(){return new WeakMap}function Je(a){if(!a)return Dx(null);var d=a.constructor;if(d===Object)return a===Object.prototype?{}:Dx(a);if(~FE.call(d).indexOf("[native code]"))try{return new d}catch(k){}return Dx(a)}function Qf(a){var d="";a.global&&(d+="g");a.ignoreCase&&(d+="i");a.multiline&&(d+="m");a.unicode&&(d+="u");a.sticky&&(d+="y");return d}function Cf(a){return a.flags}function Nf(a){a=
GE.call(a);return a.substring(8,a.length-1)}function Mf(a){return a[Symbol.toStringTag]||Nf(a)}function ug(a){return FA(a).concat(Ex(a))}function rh(a,d,k){for(var N=OE(a),ea=0,ka=N.length,sa,La;ea<ka;++ea)if(sa=N[ea],"callee"!==sa&&"caller"!==sa)if(La=ME(a,sa)){La.get||La.set||(La.value=k.copier(La.value,k));try{LE(d,sa,La)}catch(Ua){d[sa]=La.value}}else d[sa]=k.copier(a[sa],k);return d}function hh(a,d){var k=new d.Constructor;d.cache.set(a,k);a.forEach(function(N,ea){k.set(ea,d.copier(N,d))});return k}
function mg(a,d){var k=Je(d.prototype);d.cache.set(a,k);for(var N in a)HA.call(a,N)&&(k[N]=d.copier(a[N],d));return k}function ah(a,d){var k=Je(d.prototype);d.cache.set(a,k);for(var N in a)HA.call(a,N)&&(k[N]=d.copier(a[N],d));N=Ex(a);for(var ea=0,ka=N.length,sa;ea<ka;++ea)sa=N[ea],NE.call(a,sa)&&(k[sa]=d.copier(a[sa],d));return k}function Li(a,d){return new d.Constructor(a.valueOf())}function Gi(a,d){return a}function Bj(a,d){var k=new d.Constructor;d.cache.set(a,k);a.forEach(function(N){k.add(d.copier(N,
d))});return k}function rj(a){function d(ka,sa){sa.prototype=sa.Constructor=void 0;if(!ka||"object"!==typeof ka)return ka;if(sa.cache.has(ka))return sa.cache.get(ka);sa.prototype=ka.__proto__||QE(ka);sa.Constructor=sa.prototype&&sa.prototype.constructor;if(!sa.Constructor||sa.Constructor===Object)return ea(ka,sa);if(PE(ka))return N(ka,sa);var La=k[KE(ka)];return La?La(ka,sa):"function"===typeof ka.then?ka:ea(ka,sa)}a=Fx({},JA,a);var k={Arguments:a.object,Array:a.array,ArrayBuffer:a.arrayBuffer,Blob:a.blob,
Boolean:Li,DataView:a.dataView,Date:a.date,Error:a.error,Float32Array:a.arrayBuffer,Float64Array:a.arrayBuffer,Int8Array:a.arrayBuffer,Int16Array:a.arrayBuffer,Int32Array:a.arrayBuffer,Map:a.map,Number:Li,Object:a.object,Promise:Gi,RegExp:a.regExp,Set:a.set,String:Li,WeakMap:Gi,WeakSet:Gi,Uint8Array:a.arrayBuffer,Uint8ClampedArray:a.arrayBuffer,Uint16Array:a.arrayBuffer,Uint32Array:a.arrayBuffer,Uint64Array:a.arrayBuffer},N=k.Array,ea=k.Object;return function(ka){return d(ka,{Constructor:void 0,cache:IE(),
copier:d,prototype:void 0})}}function dm(a,d){return(0,UE.default)(a,d,{arrayMerge:(k,N,ea)=>N})}function Dk(a,d,k,N=!1){const [ea,ka]=d,[sa,La]=k;a=sa+(a-ea)/(ka-ea)*(La-sa);return N?sa<La?Math.max(Math.min(a,La),sa):Math.max(Math.min(a,sa),La):a}function cj(a,d){return new Promise((k,N)=>{if("video"===d){const ea=document.createElement("video");ea.addEventListener("loadedmetadata",function(){k([this.videoWidth,this.videoHeight])},!1);ea.src=a}else if("image"===d){const ea=new Image;ea.onload=()=>
k([ea.width,ea.height]);ea.src=a;ea.onerror=ka=>N(ka)}else"pdf"===d&&k([595,842])})}function ti(a){return Object.values(os).includes(a)}function Qh(a,d){return ti(a)||null==a?`var(--ls-wb-${d}-color-${a?a:"default"})`:a}function zl(){var a;null==(a=document.getElementById("__textLabelMeasure"))?void 0:a.remove();a=document.createElement("pre");a.id="__textLabelMeasure";Object.assign(a.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",
padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});a.tabIndex=-1;document.body.appendChild(a);return a}function kj(a,d,k=0){var N,ea,ka;if(!a)return[16,32];let sa;sa="string"===typeof d?d:`${null!=(N=d.fontStyle)?N:"normal"} ${null!=(ea=d.fontVariant)?ea:"normal"} ${null!=(ka=d.fontWeight)?ka:"normal"} ${d.fontSize}px/${d.fontSize*d.lineHeight}px ${d.fontFamily}`;if(!Gx.has(`${a}-${sa}-${k}`)){if(!Dr)return[10,
10];Dr.parentNode||document.body.appendChild(Dr);Dr.innerHTML=`${a}&#8203;`;Dr.style.font=sa;Dr.style.padding=k+"px";d=Dr.getBoundingClientRect();Gx.set(`${a}-${sa}-${k}`,[Math.ceil(d.width||1),Math.ceil(d.height||1)])}return Gx.get(`${a}-${sa}-${k}`)}function Jj(a){try{if("string"!==typeof a||!Ng.test(a))throw TypeError("Invalid UUID");let d;const k=new Uint8Array(16);k[0]=(d=parseInt(a.slice(0,8),16))>>>24;k[1]=d>>>16&255;k[2]=d>>>8&255;k[3]=d&255;k[4]=(d=parseInt(a.slice(9,13),16))>>>8;k[5]=d&
255;k[6]=(d=parseInt(a.slice(14,18),16))>>>8;k[7]=d&255;k[8]=(d=parseInt(a.slice(19,23),16))>>>8;k[9]=d&255;k[10]=(d=parseInt(a.slice(24,36),16))/1099511627776&255;k[11]=d/4294967296&255;k[12]=d>>>24&255;k[13]=d>>>16&255;k[14]=d>>>8&255;k[15]=d&255;return!0}catch(d){return!1}}function sk(a,d=0,k){let N;return function(...ea){null==k?void 0:k(...ea);clearTimeout(N);N=setTimeout(()=>a.apply(ea),d)}}function Jh(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function Rf(){var a,d,k;return(null==
(k=null==(d=null==(a=null==window?void 0:window.logseq)?void 0:a.api)?void 0:d.get_state_from_store)?void 0:k.call(d,"ui/developer-mode?"))||!1}function qg(a){return!!a}function lk(a=0){return new Promise(d=>setTimeout(d,a))}function cl(a="noid"){Hx[a]||(Hx[a]=MA.createContext({}));return Hx[a]}function Bh(a="noid"){return MA.useContext(cl(a))}function Kj(a){const {callbacks:d}=Bh(),k=LA.useRef(-1);return LA.useMemo(()=>{const N=ea=>{var ka,sa;const {order:La=0}=ea;if(!La){var Ua=ea.target;Ua.removeEventListener("pointerup",
N);Ua.releasePointerCapture(ea.pointerId);null==(ka=d.onPointerUp)?void 0:ka.call(d,{type:"selection",handle:a,order:La},ea);ka=Date.now();Ua=ka-k.current;300<Ua?k.current=ka:300>=Ua&&(null==(sa=d.onDoubleClick)?void 0:sa.call(d,{type:"selection",handle:a,order:La},ea),k.current=-1);ea.order=La+1}};return{onPointerDown:ea=>{var ka;const {order:sa=0}=ea;if(!sa){var La=dl(ea.currentTarget);La.setPointerCapture(ea.pointerId);La.addEventListener("pointerup",N);null==(ka=d.onPointerDown)?void 0:ka.call(d,
{type:"selection",handle:a,order:sa},ea);ea.order=sa+1}},onPointerMove:ea=>{var ka;const {order:sa=0}=ea;sa||(null==(ka=d.onPointerMove)?void 0:ka.call(d,{type:"selection",handle:a,order:sa},ea),ea.order=sa+1)},onPointerEnter:ea=>{var ka;const {order:sa=0}=ea;sa||(null==(ka=d.onPointerEnter)?void 0:ka.call(d,{type:"selection",handle:a,order:sa},ea),ea.order=sa+1)},onPointerLeave:ea=>{var ka;const {order:sa=0}=ea;sa||(null==(ka=d.onPointerLeave)?void 0:ka.call(d,{type:"selection",handle:a,order:sa},
ea),ea.order=sa+1)},onKeyDown:ea=>{var ka;null==(ka=d.onKeyDown)?void 0:ka.call(d,{type:"selection",handle:a,order:-1},ea)},onKeyUp:ea=>{var ka;null==(ka=d.onKeyUp)?void 0:ka.call(d,{type:"selection",handle:a,order:-1},ea)}}},[d])}function dl(a){var d;if(null==(d=a.namespaceURI)?0:d.endsWith("svg")){if(a.parentElement)return dl(a.parentElement);throw Error("Could not find a parent element of an HTML type!");}return a}function sj(a,d,k){const N=Vu.useRef(!1),ea=Vu.useCallback(()=>{var ka;if(N.current){const sa=
null==(ka=a.current)?void 0:ka.getBoundingClientRect();sa&&(ka={minX:sa.left,maxX:sa.left+sa.width,minY:sa.top,maxY:sa.top+sa.height,width:sa.width,height:sa.height},d.updateBounds(ka),null==k?void 0:k(ka))}else N.current=!0},[a,k]);Vu.useEffect(()=>{const ka=a.current?XE(a.current):document,sa=sk(ea,100);ka.addEventListener("scroll",sa);window.addEventListener("resize",sa);return()=>{ka.removeEventListener("scroll",sa);window.removeEventListener("resize",sa)}},[]);Vu.useLayoutEffect(()=>{const ka=
new ResizeObserver(sa=>{sa[0].contentRect&&ea()});a.current&&ka.observe(a.current);return()=>{ka.disconnect()}},[a]);Vu.useEffect(()=>{ea();setTimeout(()=>{var ka,sa;null==(sa=null==(ka=a.current)?void 0:ka.querySelector(".tl-canvas"))?void 0:sa.focus()})},[a])}function Rl(a,d){return Object.keys(d).reduce((k,N)=>{const ea=d[N];return ea?k+`${`--${a}-${N}`}: ${ea};
`:k},"")}function Th(a,d,k=".logseq-tldraw"){Ix.useLayoutEffect(()=>{const N=document.createElement("style"),ea=Rl(a,d);N.setAttribute("id",`${a}-theme`);N.setAttribute("data-selector",k);N.innerHTML=`
        ${k} {
          ${ea}
        }
      `;document.head.appendChild(N);return()=>{N&&document.head.contains(N)&&document.head.removeChild(N)}},[a,d,k])}function ak(a,d){Ix.useLayoutEffect(()=>{if(Jx.get(a))return()=>{};const k=document.createElement("style");k.innerHTML=d;k.setAttribute("id",a);document.head.appendChild(k);Jx.set(a,k);return()=>{k&&document.head.contains(k)&&(document.head.removeChild(k),Jx.delete(a))}},[a,d])}function Bl(a,d){const k=Ix.useMemo(()=>me(me({},YE),a),[a]);Th("tl",k,d);ak("tl-canvas",ZE)}function bk(a=
"noid"){Kx[a]||(Kx[a]=OA.createContext({}));return Kx[a]}function Cg(a="noid"){return OA.useContext(bk(a))}function yg(){const a=Cg(),{callbacks:d}=Bh(),k=NA.useRef(-1);return NA.useMemo(()=>({onPointerDown:N=>{var ea,ka,sa;if(!a.settings.penMode||"pen"===N.pointerType&&N.isPrimary){var {order:La=0}=N;La||(null==(ea=N.currentTarget)?void 0:ea.setPointerCapture(N.pointerId));N.isPrimary&&(null==(ka=d.onPointerDown)?void 0:ka.call(d,{type:"canvas",order:La},N),ea=Date.now(),ka=ea-k.current,300<ka?k.current=
ea:300>=ka&&(null==(sa=d.onDoubleClick)?void 0:sa.call(d,{type:"canvas",order:La},N),k.current=-1))}},onPointerMove:N=>{var ea;if(!a.settings.penMode||"pen"===N.pointerType&&N.isPrimary){var {order:ka=0}=N;null==(ea=d.onPointerMove)?void 0:ea.call(d,{type:"canvas",order:ka},N)}},onPointerUp:N=>{var ea,ka;if(!a.settings.penMode||"pen"===N.pointerType&&N.isPrimary){var {order:sa=0}=N;sa||(null==(ea=N.currentTarget)?void 0:ea.releasePointerCapture(N.pointerId));null==(ka=d.onPointerUp)?void 0:ka.call(d,
{type:"canvas",order:sa},N)}},onPointerEnter:N=>{var ea;if(!a.settings.penMode||"pen"===N.pointerType&&N.isPrimary){var {order:ka=0}=N;null==(ea=d.onPointerEnter)?void 0:ea.call(d,{type:"canvas",order:ka},N)}},onPointerLeave:N=>{var ea;if(!a.settings.penMode||"pen"===N.pointerType&&N.isPrimary){var {order:ka=0}=N;null==(ea=d.onPointerLeave)?void 0:ea.call(d,{type:"canvas",order:ka},N)}},onDrop:N=>hi(this,null,function*(){N.preventDefault();"clientX"in N&&a.drop(N.dataTransfer,[N.clientX,N.clientY])}),
onDragOver:N=>{N.preventDefault()},onTouchEnd:N=>{let ea=a.selectedTool.id;"pencil"!==ea&&"highlighter"!==ea||N.preventDefault()}}),[d])}function Gf(a,d,k){return 0===d||Infinity===Math.abs(d)?Math.pow(a,5*k):a*d*k/(d+k*a)}function Lj(a,d,k,N=.15){return 0===N?Math.max(d,Math.min(a,k)):a<d?-Gf(d-a,k-d,N)+d:a>k?+Gf(a-k,k-d,N)+k:a}function Ch(a,[d,k],[N,ea]){const [[ka,sa],[La,Ua]]=a;return[Lj(d,ka,sa,N),Lj(k,La,Ua,ea)]}function Mi(a,d,k){d in a?Object.defineProperty(a,d,{value:k,enumerable:!0,configurable:!0,
writable:!0}):a[d]=k;return a}function Mj(a,d){var k=Object.keys(a);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(a);d&&(N=N.filter(function(ea){return Object.getOwnPropertyDescriptor(a,ea).enumerable}));k.push.apply(k,N)}return k}function Yg(a){for(var d=1;d<arguments.length;d++){var k=null!=arguments[d]?arguments[d]:{};d%2?Mj(Object(k),!0).forEach(function(N){Mi(a,N,k[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(k)):Mj(Object(k)).forEach(function(N){Object.defineProperty(a,
N,Object.getOwnPropertyDescriptor(k,N))})}return a}function di(a){return a?a[0].toUpperCase()+a.slice(1):""}function Ni(a=!1,d){return a&&!$E.includes(d)}function el(a,d="",k=!1){const N=PA[a];d=N?N[d]||d:d;return"on"+di(a)+di(d)+(Ni(k,d)?"Capture":"")}function $f(a){a=a.substring(2).toLowerCase();const d=!!~a.indexOf("passive");d&&(a=a.replace("passive",""));var k=aF.includes(a)?"capturecapture":"capture";(k=!!~a.indexOf(k))&&(a=a.replace("capture",""));return{device:a,capture:k,passive:d}}function mj(a,
d=""){const k=PA[a];return a+(k?k[d]||d:d)}function Uh(a){return"touches"in a?"touch":"pointerType"in a?a.pointerType:"mouse"}function Sl(a){return Array.from(a.touches).filter(d=>{var k,N;return d.target===a.currentTarget||(null===(k=a.currentTarget)||void 0===k?void 0:null===(N=k.contains)||void 0===N?void 0:N.call(k,d.target))})}function Nj(a){return"touches"in a?("touchend"===a.type||"touchcancel"===a.type?a.changedTouches:a.targetTouches)[0]:a}function fm(a,d){const k=d.clientX-a.clientX,N=d.clientY-
a.clientY;return{angle:-(180*Math.atan2(k,N))/Math.PI,distance:Math.hypot(k,N),origin:[(d.clientX+a.clientX)/2,(d.clientY+a.clientY)/2]}}function ck(a){return Sl(a).map(d=>d.identifier)}function Zi(a,d){const [k,N]=Array.from(a.touches).filter(ea=>d.includes(ea.identifier));return fm(k,N)}function tj(a){const d=Nj(a);return"touches"in a?d.identifier:d.pointerId}function Vk(a){a=Nj(a);return[a.clientX,a.clientY]}function fl(a){let {deltaX:d,deltaY:k,deltaMode:N}=a;1===N?(d*=40,k*=40):2===N&&(d*=800,
k*=800);return[d,k]}function kh(a,...d){return"function"===typeof a?a(...d):a}function Bi(){}function pi(...a){return 0===a.length?Bi:1===a.length?a[0]:function(){let d;for(const k of a)d=k.apply(this,arguments)||d;return d}}function Wk([a,d],k){a=Math.abs(a);d=Math.abs(d);if(a>d&&a>k)return"x";if(d>a&&d>k)return"y"}function gl(a){const [d,k]=a.overflow,[N,ea]=a._delta,[ka,sa]=a._direction;if(0>d&&0<N&&0>ka||0<d&&0>N&&0<ka)a._movement[0]=a._movementBound[0];if(0>k&&0<ea&&0>sa||0<k&&0>ea&&0<sa)a._movement[1]=
a._movementBound[1]}function Ci(a){Lx.set(a.key,a.engine);Mx.set(a.key,a.resolver)}function Cl(a={},d){const k={};for(const [N,ea]of Object.entries(d))switch(typeof ea){case "function":k[N]=ea.call(k,a[N],N,a);break;case "object":k[N]=Cl(a[N],ea);break;case "boolean":ea&&(k[N]=a[N])}return k}function dj(a,d,k={}){const {target:N,eventOptions:ea,window:ka,enabled:sa,transform:La}=a;var Ua=xF;if(null==a)a={};else{if(null==a)var cb={};else{cb={};var ib=Object.keys(a),nb;for(nb=0;nb<ib.length;nb++){var Pb=
ib[nb];0<=Ua.indexOf(Pb)||(cb[Pb]=a[Pb])}}if(Object.getOwnPropertySymbols)for(nb=Object.getOwnPropertySymbols(a),Pb=0;Pb<nb.length;Pb++)ib=nb[Pb],0<=Ua.indexOf(ib)||Object.prototype.propertyIsEnumerable.call(a,ib)&&(cb[ib]=a[ib]);a=cb}k.shared=Cl({target:N,eventOptions:ea,window:ka,enabled:sa,transform:La},wF);if(d){var Sb=Mx.get(d);k[d]=Cl(Yg({shared:k.shared},a),Sb)}else for(Sb in a)(d=Mx.get(Sb))&&(k[Sb]=Cl(Yg({shared:k.shared},a[Sb]),d));return k}function Hi(a,d){a.gestures.add(d);a.gestureEventStores[d]=
new XA(a,d);a.gestureTimeoutStores[d]=new yF}function Oi(a,d,k,N,ea,ka){if(a.has(k)&&Lx.has(N)){var sa=k+"Start",La=k+"End";ea[N]=Ua=>{let cb=void 0;if(Ua.first&&sa in d)d[sa](Ua);k in d&&(cb=d[k](Ua));if(Ua.last&&La in d)d[La](Ua);return cb};ka[N]=ka[N]||{}}}function Pi(a,d={},k,N){const ea=Nx.default.useMemo(()=>new zF(a),[]);ea.applyHandlers(a,N);ea.applyConfig(d,k);Nx.default.useEffect(ea.effect.bind(ea));Nx.default.useEffect(()=>ea.clean.bind(ea),[]);if(void 0===d.target)return ea.bind.bind(ea)}
function Yh(a){a.forEach(Ci);return function(d,k){k=k||{};const N={},ea={},ka=new Set;for(let Pb in d)AF.test(Pb)?(ka.add(RegExp.lastMatch),ea[Pb]=d[Pb]):N[Pb]=d[Pb];const [sa,La,Ua]=[ea,N,ka];d={};Oi(Ua,sa,"onDrag","drag",d,k);Oi(Ua,sa,"onWheel","wheel",d,k);Oi(Ua,sa,"onScroll","scroll",d,k);Oi(Ua,sa,"onPinch","pinch",d,k);Oi(Ua,sa,"onMove","move",d,k);Oi(Ua,sa,"onHover","hover",d,k);const {handlers:cb,nativeHandlers:ib,config:nb}={handlers:d,config:k,nativeHandlers:La};return Pi(cb,nb,void 0,ib)}}
function Ti(a,d){return Yh([qF,tF,uF,vF,sF,rF])(a,d||{})}function uj(a){const {viewport:d,inputs:k,callbacks:N}=Bh(),ea=aw.useRef(void 0),ka=aw.useRef([0,0]),sa=aw.useRef(0),La=aw.useMemo(()=>({onWheel:Ua=>{var cb;({event:Ua}=Ua);Ua.preventDefault();const {deltaY:ib,deltaX:nb}=Ua;var Pb=0;if(Ua.ctrlKey||Ua.metaKey){Pb=Math.sign(Ua.deltaY);let yc=ib;10<Math.abs(Ua.deltaY)&&(yc=10*Pb);Pb=yc}const [Sb,Nb,lc]=[nb,ib,Pb];"pinching"===k.state||sa.current>=Ua.timeStamp||(sa.current=Ua.timeStamp,(Ua.altKey||
Ua.ctrlKey||Ua.metaKey)&&0===Ua.buttons?(Pb=d.bounds,Ua=null!=(cb=k.currentScreenPoint)?cb:[Pb.width/2,Pb.height/2],cb=d.camera.zoom,d.onZoom(Ua,cb-lc/100*cb)):(cb=ge.mul(Ua.shiftKey&&!Jh()?[Nb,0]:[Sb,Nb],.8),ge.isEqual(cb,[0,0])||d.panCamera(cb)))},onPinchStart:({event:Ua,delta:cb,offset:ib,origin:nb})=>{var Pb;const Sb=a.current;Ua instanceof WheelEvent||!(Ua.target===Sb||null!=Sb&&Sb.contains(Ua.target))||(null==(Pb=N.onPinchStart)?void 0:Pb.call(N,{type:"canvas",order:0,delta:[...cb,ib[0]],offset:ib,
point:ge.sub(nb,k.containerOffset)},Ua),ea.current=nb,ka.current=[0,0])},onPinchEnd:({event:Ua,offset:cb,origin:ib})=>{var nb;const Pb=a.current;Ua instanceof WheelEvent||!(Ua.target===Pb||null!=Pb&&Pb.contains(Ua.target))||"pinching"!==k.state||(null==(nb=N.onPinchEnd)?void 0:nb.call(N,{type:"canvas",order:0,delta:[0,0,cb[0]],offset:cb,point:ge.sub(ib,k.containerOffset)},Ua),ka.current=[0,0])},onPinch:({event:Ua,offset:cb,origin:ib})=>{var nb,Pb=a.current;if(!(Ua instanceof WheelEvent)&&(Ua.target===
Pb||null!=Pb&&Pb.contains(Ua.target))){ea.current||(ea.current=ib);Pb=ge.sub(ea.current,ib);var Sb=ge.sub(Pb,ka.current);null==(nb=N.onPinch)?void 0:nb.call(N,{type:"canvas",order:0,delta:[...Sb,cb[0]],offset:cb,point:ge.sub(ib,k.containerOffset)},Ua);ka.current=Pb}}}),[N]);Ti(La,{target:a,eventOptions:{passive:!1},pinch:{from:[d.camera.zoom,d.camera.zoom],scaleBounds:()=>({from:d.camera.zoom,max:cp.maxZoom,min:cp.minZoom})}})}function tb(a,d,k,N){Ox.useLayoutEffect(()=>{a.current.style.transform=
`translate(
        calc(${d.minX}px - var(--tl-padding)),
        calc(${d.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[d.minX,d.minY,k,d.rotation]);Ox.useLayoutEffect(()=>{const ea=a.current;ea.style.width=`calc(${Math.floor(d.width)}px + (var(--tl-padding) * 2))`;ea.style.height=`calc(${Math.floor(d.height)}px + (var(--tl-padding) * 2))`},[d.width,d.height]);Ox.useLayoutEffect(()=>{const ea=a.current;void 0!==N&&(ea.style.zIndex=N.toString())},[N])}function tc(a,d){const {onPersist:k,onError:N,onMount:ea,onCreateAssets:ka,onCreateShapes:sa,onDeleteAssets:La,onDeleteShapes:Ua,onDrop:cb,
onPaste:ib,onCopy:nb,onCanvasDBClick:Pb}=d;ZA.useLayoutEffect(()=>{const Sb=[];if(a)return window.tlapps=window.tlapps||{},window.tlapps[a.uuid]=a,ea&&ea(a,null),()=>{Sb.forEach(Nb=>Nb());window.tlapps&&delete window.tlapps[a.uuid]}},[a]);ZA.useLayoutEffect(()=>{const Sb=[];k&&Sb.push(a.subscribe("persist",k));N&&Sb.push(a.subscribe("error",N));sa&&Sb.push(a.subscribe("create-shapes",sa));ka&&Sb.push(a.subscribe("create-assets",ka));Ua&&Sb.push(a.subscribe("delete-shapes",Ua));La&&Sb.push(a.subscribe("delete-assets",
La));cb&&Sb.push(a.subscribe("drop",cb));ib&&Sb.push(a.subscribe("paste",ib));nb&&Sb.push(a.subscribe("copy",nb));Pb&&Sb.push(a.subscribe("canvas-dbclick",Pb));return()=>Sb.forEach(Nb=>Nb())},[a,k,N])}function Ec(a){if("app"in a)return a.app;const [d]=$A.useState(()=>new VE(a.model,a.Shapes,a.Tools,a.readOnly));$A.useLayoutEffect(()=>()=>{d.dispose()},[d]);return d}function $c(a,d){BF.useEffect(()=>{"model"in d&&d.model&&a.loadDocumentModel(d.model)},[d.model])}function hd(a){const d=Bh(),{viewport:{bounds:k}}=
d;CF.useEffect(()=>{const N=sa=>{sa.preventDefault()},ea=sa=>{if(0!==sa.touches.length){var La=sa.touches[0].pageX,Ua=sa.touches[0].radiusX||0;(10>La-Ua||La+Ua>k.width-10)&&sa.preventDefault()}},ka=a.current;if(!ka)return()=>{};ka.addEventListener("touchstart",N,{passive:!0});ka.addEventListener("gestureend",N,{passive:!0});ka.addEventListener("gesturechange",N,{passive:!0});ka.addEventListener("gesturestart",N,{passive:!0});ka.addEventListener("touchstart",ea,{passive:!0});return()=>{ka&&(ka.removeEventListener("touchstart",
N),ka.removeEventListener("gestureend",N),ka.removeEventListener("gesturechange",N),ka.removeEventListener("gesturestart",N),ka.removeEventListener("touchstart",ea))}},[a,k.width])}function td(a,d){const {inputs:k,callbacks:N}=Bh();return DF.useMemo(()=>({onPointerDown:ea=>{var ka,sa;const {order:La=0}=ea;La||(null==(ka=ea.currentTarget)?void 0:ka.setPointerCapture(ea.pointerId));ka=a.props.handles[d];null==(sa=N.onPointerDown)?void 0:sa.call(N,{type:"handle",shape:a,handle:ka,id:d,order:La},ea);
ea.order=La+1},onPointerMove:ea=>{var ka;const {order:sa=0}=ea,La=a.props.handles[d];null==(ka=N.onPointerMove)?void 0:ka.call(N,{type:"handle",shape:a,handle:La,id:d,order:sa},ea);ea.order=sa+1},onPointerUp:ea=>{var ka,sa;const {order:La=0}=ea;La||(null==(ka=ea.currentTarget)?void 0:ka.releasePointerCapture(ea.pointerId));ka=a.props.handles[d];null==(sa=N.onPointerUp)?void 0:sa.call(N,{type:"handle",shape:a,handle:ka,id:d,order:La},ea);ea.order=La+1},onPointerEnter:ea=>{var ka;const {order:sa=0}=
ea,La=a.props.handles[d];null==(ka=N.onPointerEnter)?void 0:ka.call(N,{type:"handle",shape:a,handle:La,id:d,order:sa},ea);ea.order=sa+1},onPointerLeave:ea=>{var ka;const {order:sa=0}=ea,La=a.props.handles[d];null==(ka=N.onPointerLeave)?void 0:ka.call(N,{type:"handle",shape:a,handle:La,id:d,order:sa},ea);ea.order=sa+1},onKeyUp:ea=>{var ka;const sa=a.props.handles[d];null==(ka=N.onKeyUp)?void 0:ka.call(N,{type:"handle",shape:a,handle:sa,id:d,order:-1},ea)},onKeyDown:ea=>{var ka;const sa=a.props.handles[d];
null==(ka=N.onKeyDown)?void 0:ka.call(N,{type:"handle",shape:a,handle:sa,id:d,order:-1},ea)}}),[a.id,k,N])}function Nd(a,d,k=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${d})${k?" scale(-1,-1) translate(0, -32)":""}'>`+a.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function ie(a,d,k=0){EF.useEffect(()=>{const N=a.current;N&&(N.style.cursor=
FF[d](ym.radiansToDegrees(k)))},[d,k])}function ze(a){const {viewport:d}=Bh(),k=Cg();GF.useLayoutEffect(()=>nc(()=>{const N=sk(()=>{var ea;null==(ea=a.current)?void 0:ea.style.setProperty("--tl-zoom",d.camera.zoom.toString())},200);"pinching"!==k.inputs.state&&null!=d.camera.zoom&&N()}),[])}function Le(a,d=0){const [k,N]=(0,aB.useState)(a);(0,aB.useEffect)(()=>{let ea=!1;const ka=setTimeout(()=>{ea||N(a)},d);return()=>{ea=!0;clearTimeout(ka)}},[a,d]);return k}function ue(){const a=Cg();bB.useEffect(()=>
{Zc(()=>me({},a.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+a.currentPageId,JSON.stringify(a.viewport.camera))})},[a.viewport.camera]);bB.useEffect(()=>{var d;const k=JSON.parse(null!=(d=window.sessionStorage.getItem("logseq.tldraw.camera:"+a.currentPageId))?d:"null");k?a.viewport.update(k):a.selectedIds.size?a.api.zoomToSelection():a.api.zoomToFit()},[a])}function Ee(a){a()}function Pe(a){return Jf(jc(a,void 0))}function $e(a){return{reaction:a,mounted:!1,changedBeforeMount:!1,
cleanAt:Date.now()+IF}}function Yd(a){var d=new Map,k=1,N=new a(function(ea){var ka=d.get(ea);ka&&(ka.reaction.dispose(),d.delete(ea))});return{addReactionToTrack:function(ea,ka,sa){var La=k++;N.register(sa,La,ea);ea.current=$e(ka);ea.current.finalizationRegistryCleanupToken=La;d.set(La,ea.current);return ea.current},recordReactionAsCommitted:function(ea){N.unregister(ea);ea.current&&ea.current.finalizationRegistryCleanupToken&&d.delete(ea.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},
resetCleanupScheduleForTests:function(){}}}function Ye(){function a(){void 0===N&&(N=setTimeout(d,1E4))}function d(){N=void 0;var ea=Date.now();k.forEach(function(ka){var sa=ka.current;sa&&ea>=sa.cleanAt&&(sa.reaction.dispose(),ka.current=null,k.delete(ka))});0<k.size&&a()}var k=new Set,N;return{addReactionToTrack:function(ea,ka,sa){ea.current=$e(ka);k.add(ea);a();return ea.current},recordReactionAsCommitted:function(ea){k.delete(ea)},forceCleanupTimerToRunNowForTests:function(){N&&(clearTimeout(N),
d())},resetCleanupScheduleForTests:function(){var ea;if(0<k.size){try{for(var ka=JF(k),sa=ka.next();!sa.done;sa=ka.next()){var La=sa.value,Ua=La.current;Ua&&(Ua.reaction.dispose(),La.current=null)}}catch(ib){var cb={error:ib}}finally{try{sa&&!sa.done&&(ea=ka.return)&&ea.call(ka)}finally{if(cb)throw cb.error;}}k.clear()}N&&(clearTimeout(N),N=void 0)}}}function xe(){return new MF}function eg(a,d){void 0===d&&(d="observed");var k=eB(Yu.default.useState(xe),1)[0],N=eB(Yu.default.useState(),2)[1],ea=Yu.default.useRef(null);
if(!ea.current)var ka=new Jt("observer".concat(d),function(){sa.mounted?N([]):sa.changedBeforeMount=!0}),sa=KF(ea,ka,k);k=ea.current.reaction;Yu.default.useDebugValue(k,Pe);Yu.default.useEffect(function(){LF(ea);ea.current?(ea.current.mounted=!0,ea.current.changedBeforeMount&&(ea.current.changedBeforeMount=!1,N([]))):(ea.current={reaction:new Jt("observer".concat(d),function(){N([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},N([]));return function(){ea.current.reaction.dispose();ea.current=
null}},[]);var La,Ua;k.track(function(){try{La=a()}catch(cb){Ua=cb}});if(Ua)throw Ua;return La}function pe(a,d){var k;if(hB&&a.$$typeof===hB)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");d=null!==(k=null===d||void 0===d?void 0:d.forwardRef)&&void 0!==k?k:!1;var N=a,ea=a.displayName||a.name;if(gB&&a.$$typeof===gB&&(d=!0,N=a.render,"function"!==typeof N))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");
k=function(ka,sa){return eg(function(){return N(ka,sa)},ea)};""!==ea&&(k.displayName=ea);a.contextTypes&&(k.contextTypes=a.contextTypes);d&&(k=(0,St.forwardRef)(k));k=(0,St.memo)(k);af(a,k);return k}function af(a,d){Object.keys(a).forEach(function(k){NF[k]||Object.defineProperty(d,k,Object.getOwnPropertyDescriptor(a,k))})}function Lf(a){var d=a.render;a=a.children||d;return"function"!==typeof a?null:eg(a)}function Mg(a){const d=Cg(),{callbacks:k}=Bh(),N=iB.useRef(!1);iB.useEffect(()=>{const ea=Ua=>
{var cb,ib;if(null==(cb=a.current)?0:cb.contains(document.activeElement))null==(ib=k.onKeyDown)?void 0:ib.call(k,{type:"canvas",order:-1},Ua),N.current=Ua.shiftKey},ka=Ua=>{var cb,ib;if(null==(cb=a.current)?0:cb.contains(document.activeElement))null==(ib=k.onKeyUp)?void 0:ib.call(k,{type:"canvas",order:-1},Ua),N.current=Ua.shiftKey},sa=Ua=>{var cb,ib,nb;!d.editingShape&&(null==(cb=a.current)?0:cb.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(nb=null==(ib=document.activeElement)?
void 0:ib.tagName)?nb:"")&&(Ua.preventDefault(),d.paste(Ua,N.current))},La=Ua=>{var cb,ib,nb;!d.editingShape&&0<d.selectedShapes.size&&(null==(cb=a.current)?0:cb.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(nb=null==(ib=document.activeElement)?void 0:ib.tagName)?nb:"")&&(Ua.preventDefault(),d.copy())};window.addEventListener("keydown",ea);window.addEventListener("keyup",ka);document.addEventListener("paste",sa);document.addEventListener("copy",La);return()=>{window.removeEventListener("keydown",
ea);window.removeEventListener("keyup",ka);document.removeEventListener("paste",sa);document.removeEventListener("copy",La)}},[])}function bh(a){const d=Cg(),{inputs:k,callbacks:N}=Bh(),ea=nB.useRef(-1);return nB.useMemo(()=>({onPointerDown:ka=>{var sa,La;if(!d.settings.penMode||"pen"===ka.pointerType&&ka.isPrimary){var {order:Ua=0}=ka;Ua||(null==(sa=ka.currentTarget)?void 0:sa.setPointerCapture(ka.pointerId));null==(La=N.onPointerDown)?void 0:La.call(N,{type:"shape",shape:a,order:Ua},ka);ka.order=
Ua+1}},onPointerMove:ka=>{var sa;if(!d.settings.penMode||"pen"===ka.pointerType&&ka.isPrimary){var {order:La=0}=ka;null==(sa=N.onPointerMove)?void 0:sa.call(N,{type:"shape",shape:a,order:La},ka);ka.order=La+1}},onPointerUp:ka=>{var sa,La,Ua;if(!d.settings.penMode||"pen"===ka.pointerType&&ka.isPrimary){var {order:cb=0}=ka;cb||(null==(sa=ka.currentTarget)?void 0:sa.releasePointerCapture(ka.pointerId));null==(La=N.onPointerUp)?void 0:La.call(N,{type:"shape",shape:a,order:cb},ka);sa=Date.now();La=sa-
ea.current;300<La?ea.current=sa:300>=La&&(null==(Ua=N.onDoubleClick)?void 0:Ua.call(N,{type:"shape",shape:a,order:cb},ka),ea.current=-1);ka.order=cb+1}},onPointerEnter:ka=>{var sa;if(!d.settings.penMode||"pen"===ka.pointerType&&ka.isPrimary){var {order:La=0}=ka;null==(sa=N.onPointerEnter)?void 0:sa.call(N,{type:"shape",shape:a,order:La},ka);ka.order=La+1}},onPointerLeave:ka=>{var sa;if(!d.settings.penMode||"pen"===ka.pointerType&&ka.isPrimary){var {order:La=0}=ka;null==(sa=N.onPointerLeave)?void 0:
sa.call(N,{type:"shape",shape:a,order:La},ka);ka.order=La+1}},onKeyUp:ka=>{var sa;null==(sa=N.onKeyUp)?void 0:sa.call(N,{type:"shape",shape:a,order:-1},ka)},onKeyDown:ka=>{var sa;null==(sa=N.onKeyDown)?void 0:sa.call(N,{type:"shape",shape:a,order:-1},ka)}}),[a.id,k,N])}function ch(a){var {viewport:d,inputs:k,callbacks:N,components:ea}=a;a=Sf(a,["viewport","inputs","callbacks","components"]);return(0,FB.jsx)(gG,{id:a.id,viewport:d,inputs:k,callbacks:N,components:ea,meta:a.meta,children:(0,FB.jsx)(cG,
me({},a))})}function Se(){Se=Object.assign?Object.assign.bind():function(a){for(var d=1;d<arguments.length;d++){var k=arguments[d],N;for(N in k)Object.prototype.hasOwnProperty.call(k,N)&&(a[N]=k[N])}return a};return Se.apply(this,arguments)}function gg(a,d,{checkForDefaultPrevented:k=!0}={}){return function(N){null===a||void 0===a||a(N);if(!1===k||!N.defaultPrevented)return null===d||void 0===d?void 0:d(N)}}function Pg(...a){return d=>a.forEach(k=>{"function"===typeof k?k(d):null!==k&&void 0!==k&&
(k.current=d)})}function oh(...a){return(0,lG.useCallback)(Pg(...a),a)}function Vh(a,d=[]){let k=[];const N=()=>{const ea=k.map(ka=>(0,Ts.createContext)(ka));return function(ka){const sa=(null===ka||void 0===ka?void 0:ka[a])||ea;return(0,Ts.useMemo)(()=>({[`__scope${a}`]:uf(me({},ka),{[a]:sa})}),[ka,sa])}};N.scopeName=a;return[function(ea,ka){function sa(cb){const {scope:ib,children:nb}=cb,Pb=Sf(cb,["scope","children"]);cb=(null===ib||void 0===ib?void 0:ib[a][Ua])||La;const Sb=(0,Ts.useMemo)(()=>
Pb,Object.values(Pb));return(0,Ts.createElement)(cb.Provider,{value:Sb},nb)}const La=(0,Ts.createContext)(ka),Ua=k.length;k=[...k,ka];sa.displayName=ea+"Provider";return[sa,function(cb,ib){if(ib=(0,Ts.useContext)((null===ib||void 0===ib?void 0:ib[a][Ua])||La))return ib;if(void 0!==ka)return ka;throw Error(`\`${cb}\` must be used within \`${ea}\``);}]},Xk(N,...d)]}function Xk(...a){const d=a[0];if(1===a.length)return d;const k=()=>{const N=a.map(ea=>({useScope:ea(),scopeName:ea.scopeName}));return function(ea){const ka=
N.reduce((sa,{useScope:La,scopeName:Ua})=>{La=La(ea)[`__scope${Ua}`];return me(me({},sa),La)},{});return(0,Ts.useMemo)(()=>({[`__scope${d.scopeName}`]:ka}),[ka])}};k.scopeName=d.scopeName;return k}function Og(a){return(0,mn.isValidElement)(a)&&a.type===GB}function jm(a,d){const k=me({},d);for(const N in d){const ea=a[N],ka=d[N];/^on[A-Z]/.test(N)?ea&&ka?k[N]=(...sa)=>{ka(...sa);ea(...sa)}:ea&&(k[N]=ea):"style"===N?k[N]=me(me({},ea),ka):"className"===N&&(k[N]=[ea,ka].filter(Boolean).join(" "))}return me(me({},
a),k)}function Ul(a,d){a&&(0,mG.flushSync)(()=>a.dispatchEvent(d))}function nj(a){const d=(0,$x.useRef)(a);(0,$x.useEffect)(()=>{d.current=a});return(0,$x.useMemo)(()=>(...k)=>{var N;return null===(N=d.current)||void 0===N?void 0:N.call(d,...k)},[])}function Hk(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=nj(a);(0,nG.useEffect)(()=>{const N=ea=>{"Escape"===ea.key&&k(ea)};d.addEventListener("keydown",N);return()=>d.removeEventListener("keydown",N)},[k,d])}function Cj(a,
d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=nj(a),N=(0,eo.useRef)(!1),ea=(0,eo.useRef)(()=>{});(0,eo.useEffect)(()=>{const ka=La=>{if(La.target&&!N.current){let Ua=function(){Uj("dismissableLayer.pointerDownOutside",k,cb,{discrete:!0})};const cb={originalEvent:La};"touch"===La.pointerType?(d.removeEventListener("click",ea.current),ea.current=Ua,d.addEventListener("click",ea.current,{once:!0})):Ua()}N.current=!1},sa=window.setTimeout(()=>{d.addEventListener("pointerdown",
ka)},0);return()=>{window.clearTimeout(sa);d.removeEventListener("pointerdown",ka);d.removeEventListener("click",ea.current)}},[d,k]);return{onPointerDownCapture:()=>N.current=!0}}function mk(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=nj(a),N=(0,eo.useRef)(!1);(0,eo.useEffect)(()=>{const ea=ka=>{ka.target&&!N.current&&Uj("dismissableLayer.focusOutside",k,{originalEvent:ka},{discrete:!1})};d.addEventListener("focusin",ea);return()=>d.removeEventListener("focusin",
ea)},[d,k]);return{onFocusCapture:()=>N.current=!0,onBlurCapture:()=>N.current=!1}}function Tl(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function Uj(a,d,k,{discrete:N}){const ea=k.originalEvent.target;k=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:k});d&&ea.addEventListener(a,d,{once:!0});N?Ul(ea,k):ea.dispatchEvent(k)}function Zh(a){const [d,k]=IB.useState(qG());Vm(()=>{a||k(N=>null!==N&&void 0!==N?N:String(rG++))},[a]);return a||(d?`radix-${d}`:"")}function ei(a){return a.split("-")[0]}
function uk(a){return["top","bottom"].includes(ei(a))?"x":"y"}function km(a){return"y"===a?"height":"width"}function il(a,d,k){let {reference:N,floating:ea}=a;var ka=N.x+N.width/2-ea.width/2;const sa=N.y+N.height/2-ea.height/2;a=uk(d);var La=km(a);La=N[La]/2-ea[La]/2;const Ua="x"===a;switch(ei(d)){case "top":ka={x:ka,y:N.y-ea.height};break;case "bottom":ka={x:ka,y:N.y+N.height};break;case "right":ka={x:N.x+N.width,y:sa};break;case "left":ka={x:N.x-ea.width,y:sa};break;default:ka={x:N.x,y:N.y}}switch(d.split("-")[1]){case "start":ka[a]-=
La*(k&&Ua?-1:1);break;case "end":ka[a]+=La*(k&&Ua?-1:1)}return ka}function Qm(a){return"number"!=typeof a?me({top:0,right:0,bottom:0,left:0},a):{top:a,right:a,bottom:a,left:a}}function Cm(a){return uf(me({},a),{top:a.y,left:a.x,right:a.x+a.width,bottom:a.y+a.height})}function Dl(a,d){return hi(this,null,function*(){var k;void 0===d&&(d={});const {x:N,y:ea,platform:ka,rects:sa,elements:La,strategy:Ua}=a,{boundary:cb="clippingAncestors",rootBoundary:ib="viewport",elementContext:nb="floating",altBoundary:Pb=
!1,padding:Sb=0}=d,Nb=Qm(Sb),lc=La[Pb?"floating"===nb?"reference":"floating":nb],yc=Cm(yield ka.getClippingRect({element:null==(k=yield null==ka.isElement?void 0:ka.isElement(lc))||k?lc:lc.contextElement||(yield null==ka.getDocumentElement?void 0:ka.getDocumentElement(La.floating)),boundary:cb,rootBoundary:ib,strategy:Ua}));k=Cm(ka.convertOffsetParentRelativeRectToViewportRelativeRect?yield ka.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===nb?uf(me({},sa.floating),{x:N,y:ea}):
sa.reference,offsetParent:yield null==ka.getOffsetParent?void 0:ka.getOffsetParent(La.floating),strategy:Ua}):sa[nb]);return{top:yc.top-k.top+Nb.top,bottom:k.bottom-yc.bottom+Nb.bottom,left:yc.left-k.left+Nb.left,right:k.right-yc.right+Nb.right}})}function hl(a){return a.replace(/left|right|bottom|top/g,d=>tG[d])}function Ik(a,d,k){void 0===k&&(k=!1);const N=a.split("-")[1],ea=uk(a);a=km(ea);k="x"===ea?N===(k?"end":"start")?"right":"left":"start"===N?"bottom":"top";return d.reference[a]>d.floating[a]&&
(k=hl(k)),{main:k,cross:hl(k)}}function Ui(a){return a.replace(/start|end/g,d=>uG[d])}function wk(a,d){return{top:a.top-d.height,right:a.right-d.width,bottom:a.bottom-d.height,left:a.left-d.width}}function Vj(a){return KB.some(d=>0<=a[d])}function Jk(a){return null==a?window:a&&a.document&&a.location&&a.alert&&a.setInterval?a:(a=a.ownerDocument)&&a.defaultView||window}function oj(a){return Jk(a).getComputedStyle(a)}function wi(a){return a&&a.document&&a.location&&a.alert&&a.setInterval?"":a?(a.nodeName||
"").toLowerCase():""}function vj(){const a=navigator.userAgentData;return null!=a&&a.brands?a.brands.map(d=>d.brand+"/"+d.version).join(" "):navigator.userAgent}function ek(a){return a instanceof Jk(a).HTMLElement}function Oj(a){return a instanceof Jk(a).Element}function dk(a){return"undefined"==typeof ShadowRoot?!1:a instanceof Jk(a).ShadowRoot||a instanceof ShadowRoot}function ej(a){const {overflow:d,overflowX:k,overflowY:N}=oj(a);return/auto|scroll|overlay|hidden/.test(d+N+k)}function Hl(a){const d=
/firefox/i.test(vj());a=oj(a);return"none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||["transform","perspective"].includes(a.willChange)||d&&"filter"===a.willChange||d&&!!a.filter&&"none"!==a.filter}function jl(){return!/^((?!chrome|android).)*safari/i.test(vj())}function Dj(a,d,k){var N,ea,ka,sa;void 0===d&&(d=!1);void 0===k&&(k=!1);var La=a.getBoundingClientRect();let Ua=1,cb=1;d&&ek(a)&&(Ua=0<a.offsetWidth&&jw(La.width)/a.offsetWidth||1,cb=0<a.offsetHeight&&jw(La.height)/a.offsetHeight||
1);a=Oj(a)?Jk(a):window;d=!jl()&&k;k=(La.left+(d&&null!=(N=null==(ea=a.visualViewport)?void 0:ea.offsetLeft)?N:0))/Ua;N=(La.top+(d&&null!=(ka=null==(sa=a.visualViewport)?void 0:sa.offsetTop)?ka:0))/cb;ka=La.width/Ua;La=La.height/cb;return{width:ka,height:La,top:N,right:k+ka,bottom:N+La,left:k,x:k,y:N}}function nk(a){return(d=a,(d instanceof Jk(d).Node?a.ownerDocument:a.document)||window.document).documentElement;var d}function Pm(a){return Oj(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.pageXOffset,
scrollTop:a.pageYOffset}}function co(a){return Dj(nk(a)).left+Pm(a).scrollLeft}function lj(a){return"html"===wi(a)?a:a.assignedSlot||a.parentNode||(dk(a)?a.host:null)||nk(a)}function wj(a){return ek(a)&&"fixed"!==getComputedStyle(a).position?a.offsetParent:null}function Pj(a){for(var d=Jk(a),k=wj(a);k&&["table","td","th"].includes(wi(k))&&"static"===getComputedStyle(k).position;)k=wj(k);if(!k||"html"!==wi(k)&&("body"!==wi(k)||"static"!==getComputedStyle(k).position||Hl(k))){if(!k)a:{a=lj(a);for(dk(a)&&
(a=a.host);ek(a)&&!["html","body"].includes(wi(a));){if(Hl(a)){k=a;break a}a=a.parentNode}k=null}d=k||d}return d}function Ek(a){if(ek(a))return{width:a.offsetWidth,height:a.offsetHeight};a=Dj(a);return{width:a.width,height:a.height}}function em(a){const d=lj(a);return["html","body","#document"].includes(wi(d))?a.ownerDocument.body:ek(d)&&ej(d)?d:em(d)}function Ql(a,d){var k;void 0===d&&(d=[]);var N=em(a);a=N===(null==(k=a.ownerDocument)?void 0:k.body);k=Jk(N);N=a?[k].concat(k.visualViewport||[],ej(N)?
N:[]):N;d=d.concat(N);return a?d:d.concat(Ql(N))}function Kn(a,d,k){return"viewport"===d?Cm(function(N,ea){var ka=Jk(N),sa=nk(N);ka=ka.visualViewport;N=sa.clientWidth;sa=sa.clientHeight;let La=0,Ua=0;if(ka){N=ka.width;sa=ka.height;const cb=jl();(cb||!cb&&"fixed"===ea)&&(La=ka.offsetLeft,Ua=ka.offsetTop)}return{width:N,height:sa,x:La,y:Ua}}(a,k)):Oj(d)?function(N,ea){var ka=Dj(N,!1,"fixed"===ea);ea=ka.top+N.clientTop;ka=ka.left+N.clientLeft;return{top:ea,left:ka,x:ka,y:ea,right:ka+N.clientWidth,bottom:ea+
N.clientHeight,width:N.clientWidth,height:N.clientHeight}}(d,k):Cm(function(N){var ea;const ka=nk(N);var sa=Pm(N);const La=null==(ea=N.ownerDocument)?void 0:ea.body;ea=$u(ka.scrollWidth,ka.clientWidth,La?La.scrollWidth:0,La?La.clientWidth:0);const Ua=$u(ka.scrollHeight,ka.clientHeight,La?La.scrollHeight:0,La?La.clientHeight:0);N=-sa.scrollLeft+co(N);sa=-sa.scrollTop;return"rtl"===oj(La||ka).direction&&(N+=$u(ka.clientWidth,La?La.clientWidth:0)-ea),{width:ea,height:Ua,x:N,y:sa}}(nk(a)))}function xo(a){const d=
Ql(a),k=["absolute","fixed"].includes(oj(a).position)&&ek(a)?Pj(a):a;return Oj(k)?d.filter(N=>{var ea;if(ea=Oj(N))a:if(ea=null==k.getRootNode?void 0:k.getRootNode(),N.contains(k))ea=!0;else{if(ea&&dk(ea)){ea=k;do{if(ea&&N===ea){ea=!0;break a}ea=ea.parentNode||ea.host}while(ea)}ea=!1}return ea&&"body"!==wi(N)}):[]}function Xb(a,d,k,N){void 0===N&&(N={});const {ancestorScroll:ea=!0,ancestorResize:ka=!0,elementResize:sa=!0,animationFrame:La=!1}=N,Ua=ea&&!La,cb=ka&&!La,ib=Ua||cb?[...(Oj(a)?Ql(a):[]),
...Ql(d)]:[];ib.forEach(Nb=>{Ua&&Nb.addEventListener("scroll",k,{passive:!0});cb&&Nb.addEventListener("resize",k)});let nb,Pb=null;if(sa){let Nb=!0;Pb=new ResizeObserver(()=>{Nb||k();Nb=!1});Oj(a)&&!La&&Pb.observe(a);Pb.observe(d)}let Sb=La?Dj(a):null;return La&&function lc(){const yc=Dj(a);!Sb||yc.x===Sb.x&&yc.y===Sb.y&&yc.width===Sb.width&&yc.height===Sb.height||k();Sb=yc;nb=requestAnimationFrame(lc)}(),k(),()=>{var lc;ib.forEach(yc=>{Ua&&yc.removeEventListener("scroll",k);cb&&yc.removeEventListener("resize",
k)});null==(lc=Pb)||lc.disconnect();Pb=null;La&&cancelAnimationFrame(nb)}}function Ga(a,d){if(a===d)return!0;if(typeof a!==typeof d)return!1;if("function"===typeof a&&a.toString()===d.toString())return!0;let k,N;if(a&&d&&"object"==typeof a){if(Array.isArray(a)){var ea=a.length;if(ea!=d.length)return!1;for(k=ea;0!==k--;)if(!Ga(a[k],d[k]))return!1;return!0}N=Object.keys(a);ea=N.length;if(ea!==Object.keys(d).length)return!1;for(k=ea;0!==k--;)if(!Object.prototype.hasOwnProperty.call(d,N[k]))return!1;
for(k=ea;0!==k--;)if(ea=N[k],!("_owner"===ea&&a.$$typeof||Ga(a[ea],d[ea])))return!1;return!0}return a!==a&&d!==d}function fc(a){const d=Jo.useRef(a);cy(()=>{d.current=a});return d}function ac(a){let {middleware:d,placement:k="bottom",strategy:N="absolute",whileElementsMounted:ea}=void 0===a?{}:a;const ka=Jo.useRef(null),sa=Jo.useRef(null),La=fc(ea),Ua=Jo.useRef(null),[cb,ib]=Jo.useState({x:null,y:null,strategy:N,placement:k,middlewareData:{}}),[nb,Pb]=Jo.useState(d);Ga(null==nb?void 0:nb.map(mc=>
{({options:mc}=mc);return mc}),null==d?void 0:d.map(mc=>{({options:mc}=mc);return mc}))||Pb(d);const Sb=Jo.useCallback(()=>{ka.current&&sa.current&&xG(ka.current,sa.current,{middleware:nb,placement:k,strategy:N}).then(mc=>{Nb.current&&yG.flushSync(()=>{ib(mc)})})},[nb,k,N]);cy(()=>{Nb.current&&Sb()},[Sb]);const Nb=Jo.useRef(!1);cy(()=>{Nb.current=!0;return()=>{Nb.current=!1}},[]);const lc=Jo.useCallback(()=>{"function"===typeof Ua.current&&(Ua.current(),Ua.current=null);if(ka.current&&sa.current)if(La.current){const mc=
La.current(ka.current,sa.current,Sb);Ua.current=mc}else Sb()},[Sb,La]),yc=Jo.useCallback(mc=>{ka.current=mc;lc()},[lc]),bc=Jo.useCallback(mc=>{sa.current=mc;lc()},[lc]),qc=Jo.useMemo(()=>({reference:ka,floating:sa}),[]);return Jo.useMemo(()=>uf(me({},cb),{update:Sb,refs:qc,reference:yc,floating:bc}),[cb,Sb,qc,yc,bc])}function xb(a){const [d,k]=(0,AG.useState)(void 0);Vm(()=>{if(a){k({width:a.offsetWidth,height:a.offsetHeight});const N=new ResizeObserver(ea=>{if(Array.isArray(ea)&&ea.length){ea=ea[0];
if("borderBoxSize"in ea){ea=ea.borderBoxSize;var ka=Array.isArray(ea)?ea[0]:ea;ea=ka.inlineSize;ka=ka.blockSize}else ea=a.offsetWidth,ka=a.offsetHeight;k({width:ea,height:ka})}});N.observe(a,{box:"border-box"});return()=>N.unobserve(a)}k(void 0)},[a]);return d}function ic(a){return void 0!==a}function Ub(a){return null!==a}function Db(a){const [d,k="center"]=a.split("-");return[d,k]}function Bb(a,d){return(0,Oq.useReducer)((k,N)=>{N=d[k][N];return null!==N&&void 0!==N?N:k},a)}function dc(a){const [d,
k]=(0,Oq.useState)(),N=(0,Oq.useRef)({}),ea=(0,Oq.useRef)(a),ka=(0,Oq.useRef)("none"),[sa,La]=Bb(a?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,Oq.useEffect)(()=>{const Ua=xc(N.current);ka.current="mounted"===sa?Ua:"none"},[sa]);Vm(()=>{const Ua=N.current,cb=ea.current;if(cb!==a){const ib=ka.current,nb=xc(Ua);a?La("MOUNT"):"none"===nb||"none"===(null===Ua||void 0===
Ua?void 0:Ua.display)?La("UNMOUNT"):cb&&ib!==nb?La("ANIMATION_OUT"):La("UNMOUNT");ea.current=a}},[a,La]);Vm(()=>{if(d){const Ua=ib=>{const nb=xc(N.current).includes(ib.animationName);ib.target===d&&nb&&(0,KG.flushSync)(()=>La("ANIMATION_END"))},cb=ib=>{ib.target===d&&(ka.current=xc(N.current))};d.addEventListener("animationstart",cb);d.addEventListener("animationcancel",Ua);d.addEventListener("animationend",Ua);return()=>{d.removeEventListener("animationstart",cb);d.removeEventListener("animationcancel",
Ua);d.removeEventListener("animationend",Ua)}}La("ANIMATION_END")},[d,La]);return{isPresent:["mounted","unmountSuspended"].includes(sa),ref:(0,Oq.useCallback)(Ua=>{Ua&&(N.current=getComputedStyle(Ua));k(Ua)},[])}}function xc(a){return(null===a||void 0===a?void 0:a.animationName)||"none"}function Ic({prop:a,defaultProp:d,onChange:k=()=>{}}){const [N,ea]=ed({defaultProp:d,onChange:k}),ka=void 0!==a;d=ka?a:N;const sa=nj(k);k=(0,kw.useCallback)(La=>{ka?(La="function"===typeof La?La(a):La,La!==a&&sa(La)):
ea(La)},[ka,a,ea,sa]);return[d,k]}function ed({defaultProp:a,onChange:d}){a=(0,kw.useState)(a);const [k]=a,N=(0,kw.useRef)(k),ea=nj(d);(0,kw.useEffect)(()=>{N.current!==k&&(ea(k),N.current=k)},[k,N,ea]);return a}function md(a,d){const k=Math.abs(d.top-a.y),N=Math.abs(d.bottom-a.y),ea=Math.abs(d.right-a.x);a=Math.abs(d.left-a.x);switch(Math.min(k,N,ea,a)){case a:return"left";case ea:return"right";case k:return"top";case N:return"bottom";default:return null}}function kd(a){a=a.slice();a.sort((d,k)=>
d.x<k.x?-1:d.x>k.x?1:d.y<k.y?-1:d.y>k.y?1:0);return Td(a)}function Td(a){if(1>=a.length)return a.slice();const d=[];for(var k=0;k<a.length;k++){for(var N=a[k];2<=d.length;){var ea=d[d.length-1],ka=d[d.length-2];if((ea.x-ka.x)*(N.y-ka.y)>=(ea.y-ka.y)*(N.x-ka.x))d.pop();else break}d.push(N)}d.pop();k=[];for(N=a.length-1;0<=N;N--){for(ea=a[N];2<=k.length;){ka=k[k.length-1];const sa=k[k.length-2];if((ka.x-sa.x)*(ea.y-sa.y)>=(ka.y-sa.y)*(ea.x-sa.x))k.pop();else break}k.push(ea)}k.pop();return 1===d.length&&
1===k.length&&d[0].x===k[0].x&&d[0].y===k[0].y?d:d.concat(k)}function ne(a){var {side:d,content:k,sideOffset:N=10}=a;a=Sf(a,["side","content","sideOffset"]);return k?(0,Gr.jsx)(WG,{delayDuration:300,children:(0,Gr.jsxs)(XG,{children:[(0,Gr.jsx)(YG,{asChild:!0,children:a.children}),(0,Gr.jsx)(ZG,{children:(0,Gr.jsxs)($G,uf(me({className:"tl-tooltip-content",sideOffset:N,side:d},a),{children:[k,(0,Gr.jsx)(aH,{className:"tl-tooltip-arrow"})]}))})]})}):(0,Gr.jsx)(Gr.Fragment,{children:a.children})}function he(a){var {className:d,
tooltip:k,tooltipSide:N}=a;a=Sf(a,["className","tooltip","tooltipSide"]);return(0,YB.jsx)(ne,{content:k,side:N,children:(0,YB.jsx)("button",me({className:"tl-button "+(null!=d?d:"")},a))})}function Re(a){var {toggle:d=!0,pressed:k,onPressedChange:N,className:ea,tooltip:ka}=a;a=Sf(a,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,ky.jsx)(ne,{content:ka,children:(0,ky.jsx)("div",{className:"inline-block",children:(0,ky.jsx)(cH,uf(me({},a),{"data-toggle":d,className:"tl-toggle-input"+
(ea?" "+ea:""),pressed:k,onPressedChange:N}))})})}function sg(a){var d=a+"CollectionProvider";const [k,N]=Vh(d),[ea,ka]=k(d,{collectionRef:{current:null},itemMap:new Map}),sa=ib=>{const {scope:nb,children:Pb}=ib;ib=iq.default.useRef(null);const Sb=iq.default.useRef(new Map).current;return iq.default.createElement(ea,{scope:nb,itemMap:Sb,collectionRef:ib},Pb)};Object.assign(sa,{displayName:d});const La=a+"CollectionSlot";d=iq.default.forwardRef((ib,nb)=>{const {scope:Pb,children:Sb}=ib;ib=ka(La,Pb);
nb=oh(nb,ib.collectionRef);return iq.default.createElement(hq,{ref:nb},Sb)});Object.assign(d,{displayName:La});const Ua=a+"CollectionItemSlot",cb=iq.default.forwardRef((ib,nb)=>{const {scope:Pb,children:Sb}=ib,Nb=Sf(ib,["scope","children"]),lc=iq.default.useRef(null);ib=oh(nb,lc);const yc=ka(Ua,Pb);iq.default.useEffect(()=>{yc.itemMap.set(lc,me({ref:lc},Nb));return()=>void yc.itemMap.delete(lc)});return iq.default.createElement(hq,{["data-radix-collection-item"]:"",ref:ib},Sb)});Object.assign(cb,
{displayName:Ua});return[{Provider:sa,Slot:d,ItemSlot:cb},function(ib){const nb=ka(a+"CollectionConsumer",ib);return iq.default.useCallback(()=>{const Pb=nb.collectionRef.current;if(!Pb)return[];const Sb=Array.from(Pb.querySelectorAll("[data-radix-collection-item]"));return Array.from(nb.itemMap.values()).sort((Nb,lc)=>Sb.indexOf(Nb.ref.current)-Sb.indexOf(lc.ref.current))},[nb.collectionRef,nb.itemMap])},N]}function Gg(a){const d=(0,aC.useContext)(dH);return a||d||"ltr"}function Yf(){(0,eH.useEffect)(()=>
{var a,d;const k=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(a=k[0])&&void 0!==a?a:hg());document.body.insertAdjacentElement("beforeend",null!==(d=k[1])&&void 0!==d?d:hg());ly++;return()=>{1===ly&&document.querySelectorAll("[data-radix-focus-guard]").forEach(N=>N.remove());ly--}},[])}function hg(){const a=document.createElement("span");a.setAttribute("data-radix-focus-guard","");a.tabIndex=0;a.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";
return a}function mf(a,{select:d=!1}={}){const k=document.activeElement;for(const N of a)if(tf(N,{select:d}),document.activeElement!==k)break}function nf(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:k=>{const N="INPUT"===k.tagName&&"hidden"===k.type;return k.disabled||k.hidden||N?NodeFilter.FILTER_SKIP:0<=k.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);return d}function Kg(a,d){for(const k of a)if(!xg(k,{upTo:d}))return k}
function xg(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function tf(a,{select:d=!1}={}){if(a&&a.focus){const k=document.activeElement;a.focus({preventScroll:!0});a!==k&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function ph(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function Mh(a){return a.filter(d=>"A"!==d.tagName)}function bi(a,d,k){a=
a.key;k="rtl"!==k?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a;if("vertical"!==d||!["ArrowLeft","ArrowRight"].includes(k))if("horizontal"!==d||!["ArrowUp","ArrowDown"].includes(k))return lH[k]}function Ug(a){const d=document.activeElement;for(const k of a){if(k===d)break;k.focus();if(document.activeElement!==d)break}}function Lg(a,d){return a.map((k,N)=>a[(d+N)%a.length])}function Wh(a,d){var k=(0,iC.useState)(function(){return{value:a,callback:d,facade:{get current(){return k.value},
set current(N){var ea=k.value;ea!==N&&(k.value=N,k.callback(N,ea))}}}})[0];k.callback=d;return k.facade}function Aj(a,d){return Wh(d||null,function(k){return a.forEach(function(N){"function"===typeof N?N(k):N&&(N.current=k);return N})})}function an(a){return a}function Ml(a,d){void 0===d&&(d=an);var k=[],N=!1;return{read:function(){if(N)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return k.length?k[k.length-1]:a},useMedium:function(ea){var ka=
d(ea,N);k.push(ka);return function(){k=k.filter(function(sa){return sa!==ka})}},assignSyncMedium:function(ea){for(N=!0;k.length;){var ka=k;k=[];ka.forEach(ea)}k={push:function(sa){return ea(sa)},filter:function(){return k}}},assignMedium:function(ea){N=!0;var ka=[];if(k.length){var sa=k;k=[];sa.forEach(ea);ka=k}var La=function(){var Ua=ka;ka=[];Ua.forEach(ea)};Promise.resolve().then(La);k={push:function(Ua){ka.push(Ua);Promise.resolve().then(La)},filter:function(Ua){ka=ka.filter(Ua);return k}}}}}
function Zn(a){const d=document.activeElement;for(const k of a){if(k===d)break;k.focus();if(document.activeElement!==d)break}}function Nl(a,d){return a.map((k,N)=>a[(d+N)%a.length])}function Ij(a,d,k){const N=1<d.length&&Array.from(d).every(ka=>ka===d[0])?d[0]:d,ea=k?a.indexOf(k):-1;a=Nl(a,Math.max(ea,0));1===N.length&&(a=a.filter(ka=>ka!==k));a=a.find(ka=>ka.toLowerCase().startsWith(N.toLowerCase()));return a!==k?a:void 0}function Bo(a){return d=>"mouse"===d.pointerType?a(d):void 0}function Co(a,
[d,k]){return Math.min(k,Math.max(d,a))}function Mn(a){const d=(0,By.useRef)({value:a,previous:a});return(0,By.useMemo)(()=>{d.current.value!==a&&(d.current.previous=d.current.value,d.current.value=a);return d.current.previous},[a])}function xj(a=[],d,k){a=[...a];a[k]=d;return a.sort((N,ea)=>N-ea)}function Ri(a,d,k){return 100/(k-d)*(a-d)}function ul(a,d){if(2<d)return`Value ${a+1} of ${d}`;if(2===d)return["Minimum","Maximum"][a]}function yq(a,d){if(1===a.length)return 0;a=a.map(N=>Math.abs(N-d));
const k=Math.min(...a);return a.indexOf(k)}function hm(a,d,k){a/=2;const N=xn([0,50],[0,a]);return(a-N(d)*k)*k}function Sm(a){return a.slice(0,-1).map((d,k)=>a[k+1]-d)}function xn(a,d){return k=>a[0]===a[1]||d[0]===d[1]?d[0]:d[0]+(d[1]-d[0])/(a[1]-a[0])*(k-a[0])}function qn(a,d){d=Math.pow(10,d);return Math.round(a*d)/d}function hn(a){function d(cb){return cb?(0,Yl.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:cb},children:(0,Yl.jsx)("div",{className:`w-full h-full bg-${cb}-500`})}):
(0,Yl.jsx)("div",{className:"tl-color-bg",children:(0,Yl.jsx)(Eh,{name:"color-swatch"})})}var {color:k,opacity:N,popoverSide:ea,setColor:ka,setOpacity:sa}=a;a=Sf(a,["color","opacity","popoverSide","setColor","setOpacity"]);const {handlers:{t:La}}=Ey.default.useContext(gj),Ua=Ey.default.useMemo(()=>{let cb="";return sk(ib=>{ka(cb)},100,ib=>{cb=ib.target.value})},[]);return(0,Yl.jsx)(Mr,uf(me({},a),{border:!0,arrow:!0,side:ea,label:(0,Yl.jsx)(ne,{content:La("whiteboard/color"),side:ea,sideOffset:14,
children:d(k)}),children:(0,Yl.jsxs)("div",{className:"p-1",children:[(0,Yl.jsx)("div",{className:"tl-color-palette",children:Object.values(os).map(cb=>(0,Yl.jsx)("button",{className:`tl-color-drip m-1${cb===k?" active":""}`,onClick:()=>ka(cb),children:d(cb)},cb))}),(0,Yl.jsxs)("div",{className:"flex items-center tl-custom-color",children:[(0,Yl.jsx)("div",{className:`tl-color-drip m-1 mr-3 ${ti(k)?"":"active"}`,children:(0,Yl.jsx)("div",{className:"color-input-wrapper tl-color-bg",children:(0,Yl.jsx)("input",
me({className:"color-input cursor-pointer",id:"tl-custom-color-input",type:"color",value:/^#(?:[0-9a-f]{3}){1,2}$/i.test(k)?k:"#000000",onChange:Ua,style:{opacity:ti(k)?0:1}},a))})}),(0,Yl.jsx)("label",{htmlFor:"tl-custom-color-input",className:"cursor-pointer",children:La("whiteboard/select-custom-color")})]}),sa&&(0,Yl.jsx)("div",{className:"mx-1 my-2",children:(0,Yl.jsxs)(zk,{defaultValue:[null!=N?N:0],onValueCommit:cb=>sa(cb[0]),max:1,step:.1,"aria-label":La("whiteboard/opacity"),className:"tl-slider-root",
children:[(0,Yl.jsx)(nq,{className:"tl-slider-track",children:(0,Yl.jsx)(bf,{className:"tl-slider-range"})}),(0,Yl.jsx)(kg,{className:"tl-slider-thumb"})]})})]})}))}function Fi(a,d){a&&(0,Nr.flushSync)(()=>a.dispatchEvent(d))}function po(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=nj(a),N=(0,jk.useRef)(!1),ea=(0,jk.useRef)(()=>{});(0,jk.useEffect)(()=>{const ka=La=>{if(La.target&&!N.current){let Ua=function(){Km("dismissableLayer.pointerDownOutside",k,cb,{discrete:!0})};
const cb={originalEvent:La};"touch"===La.pointerType?(d.removeEventListener("click",ea.current),ea.current=Ua,d.addEventListener("click",ea.current,{once:!0})):Ua()}N.current=!1},sa=window.setTimeout(()=>{d.addEventListener("pointerdown",ka)},0);return()=>{window.clearTimeout(sa);d.removeEventListener("pointerdown",ka);d.removeEventListener("click",ea.current)}},[d,k]);return{onPointerDownCapture:()=>N.current=!0}}function $l(a,d=null===globalThis||void 0===globalThis?void 0:globalThis.document){const k=
nj(a),N=(0,jk.useRef)(!1);(0,jk.useEffect)(()=>{const ea=ka=>{ka.target&&!N.current&&Km("dismissableLayer.focusOutside",k,{originalEvent:ka},{discrete:!1})};d.addEventListener("focusin",ea);return()=>d.removeEventListener("focusin",ea)},[d,k]);return{onFocusCapture:()=>N.current=!0,onBlurCapture:()=>N.current=!1}}function xm(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function Km(a,d,k,{discrete:N}){const ea=k.originalEvent.target;k=new CustomEvent(a,{bubbles:!1,
cancelable:!0,detail:k});d&&ea.addEventListener(a,d,{once:!0});N?Fi(ea,k):ea.dispatchEvent(k)}function Gn(a,{select:d=!1}={}){const k=document.activeElement;for(const N of a)if(am(N,{select:d}),document.activeElement!==k)break}function $n(a){const d=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:k=>{const N="INPUT"===k.tagName&&"hidden"===k.type;return k.disabled||k.hidden||N?NodeFilter.FILTER_SKIP:0<=k.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)d.push(a.currentNode);
return d}function tn(a,d){for(const k of a)if(!Tm(k,{upTo:d}))return k}function Tm(a,{upTo:d}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===d||a!==d);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function am(a,{select:d=!1}={}){if(a&&a.focus){const k=document.activeElement;a.focus({preventScroll:!0});a!==k&&a instanceof HTMLInputElement&&"select"in a&&d&&a.select()}}function rn(a,d){a=[...a];d=a.indexOf(d);-1!==d&&a.splice(d,1);return a}function qo(a){return a.filter(d=>
"A"!==d.tagName)}function ro(a){return void 0!==a}function fh(a){return null!==a}function so(a){const [d,k="center"]=a.split("-");return[d,k]}function bm(a){const d=nj(a),k=(0,sf.useRef)(""),N=(0,sf.useRef)(0);a=(0,sf.useCallback)(ka=>{ka=k.current+ka;d(ka);(function Ua(La){k.current=La;window.clearTimeout(N.current);""!==La&&(N.current=window.setTimeout(()=>Ua(""),1E3))})(ka)},[d]);const ea=(0,sf.useCallback)(()=>{k.current="";window.clearTimeout(N.current)},[]);(0,sf.useEffect)(()=>()=>window.clearTimeout(N.current),
[]);return[k,a,ea]}function Ol(a,d,k){const N=1<d.length&&Array.from(d).every(ka=>ka===d[0])?d[0]:d,ea=k?a.indexOf(k):-1;a=vl(a,Math.max(ea,0));1===N.length&&(a=a.filter(ka=>ka!==k));a=a.find(ka=>ka.textValue.toLowerCase().startsWith(N.toLowerCase()));return a!==k?a:void 0}function vl(a,d){return a.map((k,N)=>a[(d+N)%a.length])}function bn(a){var {options:d,tooltip:k,popoverSide:N,chevron:ea=!0,value:ka,onValueChange:sa}=a;a=Sf(a,"options tooltip popoverSide chevron value onValueChange".split(" "));
const [La,Ua]=kv.useState(!1);return(0,Fm.jsx)("div",uf(me({},a),{className:"tl-select-input",children:(0,Fm.jsxs)(KC,{open:La,onOpenChange:Ua,value:ka,onValueChange:sa,children:[(0,Fm.jsx)(ne,{content:k,side:N,children:(0,Fm.jsxs)(LC,{className:"tl-select-input-trigger",children:[(0,Fm.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,Fm.jsx)(Xm,{})}),ea&&(0,Fm.jsx)(Ly,{style:{lineHeight:1},className:"ml-1 md:ml-3",children:(0,Fm.jsx)(Eh,{name:La?"chevron-up":"chevron-down"})})]})}),
(0,Fm.jsx)(JC,{className:"tl-select-input-portal",children:(0,Fm.jsxs)(ho,{className:"tl-select-input-content",side:N,position:"popper",sideOffset:14,align:"center",onKeyDown:cb=>cb.stopPropagation(),children:[(0,Fm.jsx)(li,{}),(0,Fm.jsx)(Id,{className:"tl-select-input-viewport",children:d.map(cb=>(0,Fm.jsx)(MC,{className:"tl-select-input-select-item",value:cb.value,children:(0,Fm.jsx)(gi,{children:cb.label})},cb.value))}),(0,Fm.jsx)(NC,{})]})})]})}))}function So(a){var {scaleLevel:d,compact:k,popoverSide:N}=
a;Sf(a,["scaleLevel","compact","popoverSide"]);const ea=Cg();({handlers:{t:a}}=Fw.default.useContext(gj));const ka=[{label:k?"XS":a("whiteboard/extra-small"),value:"xs"},{label:k?"SM":a("whiteboard/small"),value:"sm"},{label:k?"MD":a("whiteboard/medium"),value:"md"},{label:k?"LG":a("whiteboard/large"),value:"lg"},{label:k?"XL":a("whiteboard/extra-large"),value:"xl"},{label:k?"XXL":a("whiteboard/huge"),value:"xxl"}];return(0,OC.jsx)(bn,{tooltip:a("whiteboard/scale-level"),options:ka,value:d,popoverSide:N,
chevron:!k,onValueChange:sa=>{ea.api.setScaleLevel(sa)}})}function cn(a,d){return function(k){return a(d(k))}}function to(a,d){return d(a)}function dn(a,d){return function(k){return a(d,k)}}function Pl(a,d){return function(){return a(d)}}function ij(a,d){d(a);return a}function jj(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];return d}function Nm(a){a()}function Kp(a){return function(){return a}}function zq(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];
return function(){d.map(Nm)}}function zi(){}function Ah(a,d){return a(1,d)}function Jp(a,d){a(0,d)}function qs(a){a(2)}function Do(a){return a(4)}function ig(a,d){return Ah(a,dn(d,0))}function bl(a,d){var k=a(1,function(N){k();d(N)});return k}function Vg(){var a=[];return function(d,k){switch(d){case 2:a.splice(0,a.length);break;case 1:return a.push(k),function(){var N=a.indexOf(k);-1<N&&a.splice(N,1)};case 0:a.slice().forEach(function(N){N(k)});break;default:throw Error("unrecognized action "+d);
}}}function fg(a){var d=a,k=Vg();return function(N,ea){switch(N){case 1:ea(d);break;case 0:d=ea;break;case 4:return d}return k(N,ea)}}function sn(a){var d,k;return function(N,ea){switch(N){case 1:if(ea){if(k===ea)break;d&&d();k=ea;return d=a(1,ea)}d&&d();return zi;case 2:d&&d();k=null;break;default:throw Error("unrecognized action "+N);}}}function Sk(a){return ij(Vg(),function(d){return ig(a,d)})}function Sj(a,d){return ij(fg(d),function(k){return ig(a,k)})}function cm(){for(var a=arguments.length,
d=Array(a),k=0;k<a;k++)d[k]=arguments[k];return function(N){return d.reduceRight(to,N)}}function Pf(a){for(var d=arguments.length,k=Array(1<d?d-1:0),N=1;N<d;N++)k[N-1]=arguments[N];var ea=cm.apply(void 0,k);return function(ka,sa){switch(ka){case 1:return Ah(a,ea(sa));case 2:a(2);break;default:throw Error("unrecognized action "+ka);}}}function zm(a,d){return a===d}function $h(a){void 0===a&&(a=zm);var d;return function(k){return function(N){a(d,N)||(d=N,k(N))}}}function wg(a){return function(d){return function(k){a(k)&&
d(k)}}}function zg(a){return function(d){return cn(d,a)}}function Hn(a){return function(d){return function(){return d(a)}}}function ok(a,d){return function(k){return function(N){return k(d=a(d,N))}}}function lm(a){return function(d){return function(k){0<a?a--:d(k)}}}function jn(a){var d,k;return function(N){return function(ea){d=ea;k||=setTimeout(function(){k=void 0;N(d)},a)}}}function Qj(a){var d,k;return function(N){return function(ea){d=ea;k&&clearTimeout(k);k=setTimeout(function(){N(d)},a)}}}
function Ph(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];var N=Array(d.length),ea=0,ka=null,sa=Math.pow(2,d.length)-1;d.forEach(function(La,Ua){var cb=Math.pow(2,Ua);Ah(La,function(ib){var nb=ea;ea|=cb;N[Ua]=ib;nb!==sa&&ea===sa&&ka&&(ka(),ka=null)})});return function(La){return function(Ua){var cb=function(){return La([Ua].concat(N))};ea===sa?cb():ka=cb}}}function Vp(){for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];return function(N,ea){switch(N){case 1:return zq.apply(void 0,
d.map(function(ka){return ka(1,ea)}));case 2:break;default:throw Error("unrecognized action "+N);}}}function Ih(a,d){void 0===d&&(d=zm);return Pf(a,$h(d))}function gk(){for(var a=Vg(),d=arguments.length,k=Array(d),N=0;N<d;N++)k[N]=arguments[N];var ea=Array(k.length),ka=0,sa=Math.pow(2,k.length)-1;k.forEach(function(La,Ua){var cb=Math.pow(2,Ua);Ah(La,function(ib){ea[Ua]=ib;ka|=cb;ka===sa&&a(0,ea)})});return function(La,Ua){switch(La){case 1:return ka===sa&&Ua(ea),a(1,Ua);case 2:a(2);break;default:throw Error("unrecognized action "+
La);}}}function oi(a,d,k){void 0===d&&(d=[]);k=(void 0===k?{singleton:!0}:k).singleton;return{id:Symbol(),constructor:a,dependencies:d,singleton:k}}function sp(a){var d=new Map;return function ea(N){var ka=N.id,sa=N.constructor,La=N.dependencies;if((N=N.singleton)&&d.has(ka))return d.get(ka);sa=sa(La.map(function(Ua){return ea(Ua)}));N&&d.set(ka,sa);return sa}(a)}function To(a,d){if(null==a)return{};var k={},N=Object.keys(a),ea;for(ea=0;ea<N.length;ea++){var ka=N[ea];0<=d.indexOf(ka)||(k[ka]=a[ka])}return k}
function tp(a,d){if(a){if("string"===typeof a)return Lp(a,d);var k=Object.prototype.toString.call(a).slice(8,-1);"Object"===k&&a.constructor&&(k=a.constructor.name);if("Map"===k||"Set"===k)return Array.from(a);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return Lp(a,d)}}function Lp(a,d){if(null==d||d>a.length)d=a.length;for(var k=0,N=Array(d);k<d;k++)N[k]=a[k];return N}function Eo(a,d){var k="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(k)return(k=k.call(a)).next.bind(k);
if(Array.isArray(a)||(k=tp(a))||d&&a&&"number"===typeof a.length){k&&(a=k);var N=0;return function(){return N>=a.length?{done:!0}:{done:!1,value:a[N++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function pp(a,d){for(var k={},N={},ea=0,ka=a.length;ea<ka;)N[a[ea]]=1,ea+=1;for(var sa in d)N.hasOwnProperty(sa)||(k[sa]=d[sa]);return k}function hk(a,d,k){function N(nb,Pb){nb.propsReady&&
(0,nb.propsReady)(0,!1);for(var Sb=Eo(sa),Nb;!(Nb=Sb()).done;)Nb=Nb.value,(0,nb[d.required[Nb]])(0,Pb[Nb]);for(Sb=Eo(La);!(Nb=Sb()).done;)if(Nb=Nb.value,Nb in Pb)(0,nb[d.optional[Nb]])(0,Pb[Nb]);nb.propsReady&&(0,nb.propsReady)(0,!0)}function ea(nb){return Ua.reduce(function(Pb,Sb){Pb[Sb]=function(Nb){(0,nb[d.methods[Sb]])(0,Nb)};return Pb},{})}function ka(nb){return cb.reduce(function(Pb,Sb){Pb[Sb]=sn(nb[d.events[Sb]]);return Pb},{})}var sa=Object.keys(d.required||{}),La=Object.keys(d.optional||
{}),Ua=Object.keys(d.methods||{}),cb=Object.keys(d.events||{}),ib=(0,Cn.createContext)({});return{Component:(0,Cn.forwardRef)(function(nb,Pb){var Sb=nb.children,Nb=To(nb,zH),lc=(0,Cn.useState)(function(){return ij(sp(a),function(bc){return N(bc,Nb)})})[0],yc=(0,Cn.useState)(Pl(ka,lc))[0];Wq(function(){for(var bc=Eo(cb),qc;!(qc=bc()).done;)if(qc=qc.value,qc in Nb)(0,yc[qc])(1,Nb[qc]);return function(){Object.values(yc).map(qs)}},[Nb,yc,lc]);Wq(function(){N(lc,Nb)});(0,Cn.useImperativeHandle)(Pb,Kp(ea(lc)));
return(0,Cn.createElement)(ib.Provider,{value:lc},k?(0,Cn.createElement)(k,pp([].concat(sa,La,cb),Nb),Sb):Sb)}),usePublisher:function(nb){return(0,Cn.useCallback)(dn(Jp,(0,Cn.useContext)(ib)[nb]),[nb])},useEmitterValue:function(nb){var Pb=(0,Cn.useContext)(ib)[nb];nb=(0,Cn.useState)(Pl(Do,Pb));var Sb=nb[0],Nb=nb[1];Wq(function(){return Ah(Pb,function(lc){lc!==Sb&&Nb(Kp(lc))})},[Pb,Sb]);return Sb},useEmitter:function(nb,Pb){var Sb=(0,Cn.useContext)(ib)[nb];Wq(function(){return Sb(1,Pb)},[Pb,Sb])}}}
function wh(){return wh=Object.assign||function(a){for(var d=1;d<arguments.length;d++){var k=arguments[d],N;for(N in k)Object.prototype.hasOwnProperty.call(k,N)&&(a[N]=k[N])}return a},wh.apply(this,arguments)}function Lm(a,d){if(null==a)return{};var k,N,ea={},ka=Object.keys(a);for(N=0;N<ka.length;N++)0<=d.indexOf(k=ka[N])||(ea[k]=a[k]);return ea}function Fo(a,d){(null==d||d>a.length)&&(d=a.length);for(var k=0,N=Array(d);k<d;k++)N[k]=a[k];return N}function Mm(a,d){var k="undefined"!=typeof Symbol&&
a[Symbol.iterator]||a["@@iterator"];if(k)return(k=k.call(a)).next.bind(k);if(Array.isArray(a)||(k=function(ea,ka){if(ea){if("string"==typeof ea)return Fo(ea,ka);var sa=Object.prototype.toString.call(ea).slice(8,-1);return"Object"===sa&&ea.constructor&&(sa=ea.constructor.name),"Map"===sa||"Set"===sa?Array.from(ea):"Arguments"===sa||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(sa)?Fo(ea,ka):void 0}}(a))||d&&a&&"number"==typeof a.length){k&&(a=k);var N=0;return function(){return N>=a.length?{done:!0}:
{done:!1,value:a[N++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Xo(a,d){void 0===d&&(d=!0);var k=(0,si.useRef)(null),N=function(ka){};if("undefined"!=typeof ResizeObserver){var ea=new ResizeObserver(function(ka){ka=ka[0].target;null!==ka.offsetParent&&a(ka)});N=function(ka){ka&&d?(ea.observe(ka),k.current=ka):(k.current&&ea.unobserve(k.current),k.current=null)}}return{ref:k,
callbackRef:N}}function Hj(a,d){return void 0===d&&(d=!0),Xo(a,d).callbackRef}function Vi(a,d,k,N,ea,ka,sa){return Xo(function(La){for(var Ua=function(nb,Pb,Sb,Nb){Sb=nb.length;if(0===Sb)return null;for(var lc=[],yc=0;yc<Sb;yc++){var bc=nb.item(yc);if(bc&&void 0!==bc.dataset.index){var qc=parseInt(bc.dataset.index),mc=parseFloat(bc.dataset.knownSize),Pc=Pb(bc,"offsetHeight");if(0===Pc&&Nb("Zero-sized element, this should not happen",{child:bc},tm.ERROR),Pc!==mc)bc=lc[lc.length-1],0===lc.length||bc.size!==
Pc||bc.endIndex!==qc-1?lc.push({startIndex:qc,endIndex:qc,size:Pc}):lc[lc.length-1].endIndex++}}return lc}(La.children,d,0,ea),cb=La.parentElement;!cb.dataset.virtuosoScroller;)cb=cb.parentElement;var ib="window"===cb.firstElementChild.dataset.viewportType;N({scrollTop:Math.max(sa?sa.scrollTop:ib?window.pageYOffset||document.documentElement.scrollTop:cb.scrollTop,0),scrollHeight:sa?sa.scrollHeight:ib?document.documentElement.scrollHeight:cb.scrollHeight,viewportHeight:sa?sa.offsetHeight:ib?window.innerHeight:
cb.offsetHeight});null==ka||ka(function(nb,Pb,Sb){return"normal"===Pb||null!=Pb&&Pb.endsWith("px")||Sb("row-gap was not resolved to pixel value correctly",Pb,tm.WARN),"normal"===Pb?0:parseInt(null!=Pb?Pb:"0",10)}(0,getComputedStyle(La).rowGap,ea));null!==Ua&&a(Ua)},k)}function Ki(a,d){return Math.round(a.getBoundingClientRect()[d])}function pr(a,d,k,N,ea){void 0===N&&(N=zi);var ka=(0,si.useRef)(null),sa=(0,si.useRef)(null),La=(0,si.useRef)(null),Ua=(0,si.useRef)(!1),cb=(0,si.useCallback)(function(ib){ib=
ib.target;var nb=ib===window||ib===document,Pb=nb?window.pageYOffset||document.documentElement.scrollTop:ib.scrollTop,Sb=nb?document.documentElement.scrollHeight:ib.scrollHeight,Nb=nb?window.innerHeight:ib.offsetHeight;ib=function(){a({scrollTop:Math.max(Pb,0),scrollHeight:Sb,viewportHeight:Nb})};Ua.current?(0,Oy.flushSync)(ib):ib();Ua.current=!1;null!==sa.current&&(Pb===sa.current||0>=Pb||Pb===Sb-Nb)&&(sa.current=null,d(!0),La.current&&(clearTimeout(La.current),La.current=null))},[a,d]);return(0,si.useEffect)(function(){var ib=
ea||ka.current;return N(ea||ka.current),cb({target:ib}),ib.addEventListener("scroll",cb,{passive:!0}),function(){N(null);ib.removeEventListener("scroll",cb)}},[ka,cb,k,N,ea]),{scrollerRef:ka,scrollByCallback:function(ib){Ua.current=!0;ka.current.scrollBy(ib)},scrollToCallback:function(ib){var nb=ka.current;if(nb&&!("offsetHeight"in nb&&0===nb.offsetHeight)){var Pb,Sb,Nb,lc="smooth"===ib.behavior;if(nb===window?(Sb=Math.max(Ki(document.documentElement,"height"),document.documentElement.scrollHeight),
Pb=window.innerHeight,Nb=document.documentElement.scrollTop):(Sb=nb.scrollHeight,Pb=Ki(nb,"height"),Nb=nb.scrollTop),ib.top=Math.ceil(Math.max(Math.min(Sb-Pb,ib.top),0)),1.01>Math.abs(Pb-Sb)||ib.top===Nb)return a({scrollTop:Nb,scrollHeight:Sb,viewportHeight:Pb}),void(lc&&d(!0));lc?(sa.current=ib.top,La.current&&clearTimeout(La.current),La.current=setTimeout(function(){La.current=null;sa.current=null;d(!0)},1E3)):sa.current=null;nb.scrollTo(ib)}}}}function Uo(a,d,k,N,ea){return void 0===N&&(N=aj),
void 0===ea&&(ea=aj),{k:a,v:d,lvl:k,l:N,r:ea}}function x(a,d){if(a===aj)return aj;var k=a.k,N=a.l,ea=a.r;if(d===k){if(N===aj)return ea;if(ea===aj)return N;d=fb(N);return Cc(vb(a,{k:d[0],v:d[1],l:qb(N)}))}return Cc(vb(a,d<k?{l:x(N,d)}:{r:x(ea,d)}))}function ca(a,d,k){return(void 0===k&&(k="k"),a===aj)?[-Infinity,void 0]:a[k]===d?[a.k,a.v]:a[k]<d?(d=ca(a.r,d,k),-Infinity===d[0]?[a.k,a.v]:d):ca(a.l,d,k)}function Ba(a,d,k){return a===aj?Uo(d,k,1):d===a.k?vb(a,{k:d,v:k}):Hd(Pd(vb(a,d<a.k?{l:Ba(a.l,d,k)}:
{r:Ba(a.r,d,k)})))}function ya(a,d,k){if(a===aj)return[];var N=a.k,ea=a.v,ka=a.r,sa=[];return N>d&&(sa=sa.concat(ya(a.l,d,k))),N>=d&&N<=k&&sa.push({k:N,v:ea}),N<=k&&(sa=sa.concat(ya(ka,d,k))),sa}function Ka(a){return a===aj?[]:[].concat(Ka(a.l),[{k:a.k,v:a.v}],Ka(a.r))}function fb(a){return a.r===aj?[a.k,a.v]:fb(a.r)}function qb(a){return a.r===aj?a.l:Cc(vb(a,{r:qb(a.r)}))}function vb(a,d){return Uo(void 0!==d.k?d.k:a.k,void 0!==d.v?d.v:a.v,void 0!==d.lvl?d.lvl:a.lvl,void 0!==d.l?d.l:a.l,void 0!==
d.r?d.r:a.r)}function $b(a){return a===aj||a.lvl>a.r.lvl}function Cc(a){var d=a.l,k=a.r,N=a.lvl;if(k.lvl>=N-1&&d.lvl>=N-1)return a;if(N>k.lvl+1){if($b(d))return Pd(vb(a,{lvl:N-1}));if(d===aj||d.r===aj)throw Error("Unexpected empty nodes");return vb(d.r,{l:vb(d,{r:d.r.l}),r:vb(a,{l:d.r.r,lvl:N-1}),lvl:N})}if($b(a))return Hd(vb(a,{lvl:N-1}));if(k===aj||k.l===aj)throw Error("Unexpected empty nodes");d=k.l;var ea=$b(d)?k.lvl-1:k.lvl;return vb(d,{l:vb(a,{r:d.l,lvl:N-1}),r:Hd(vb(k,{l:d.r,lvl:ea})),lvl:d.lvl+
1})}function Xc(a,d,k){return a===aj?[]:Dd(ya(a,ca(a,d)[0],k),function(N){return{index:N.k,value:N.v}})}function Dd(a,d){var k=a.length;if(0===k)return[];var N=d(a[0]),ea=N.index;N=N.value;for(var ka=[],sa=1;sa<k;sa++){var La=d(a[sa]),Ua=La.index;La=La.value;ka.push({start:ea,end:Ua-1,value:N});ea=Ua;N=La}return ka.push({start:ea,end:Infinity,value:N}),ka}function Hd(a){var d=a.r,k=a.lvl;return d===aj||d.r===aj||d.lvl!==k||d.r.lvl!==k?a:vb(d,{l:vb(a,{r:d.l}),lvl:k+1})}function Pd(a){var d=a.l;return d===
aj||d.lvl!==a.lvl?a:vb(d,{r:vb(a,{l:d.r})})}function Ne(a,d,k,N){void 0===N&&(N=0);for(var ea=a.length-1;N<=ea;){var ka=Math.floor((N+ea)/2),sa=k(a[ka],d);if(0===sa)return ka;if(-1===sa){if(2>ea-N)return ka-1;ea=ka-1}else{if(ea===N)return ka;N=ka+1}}throw Error("Failed binary finding record in array - "+a.join(",")+", searched for "+d);}function bg(a){var d=a.size,k=a.startIndex,N=a.endIndex;return function(ea){return ea.start===k&&(ea.end===N||Infinity===ea.end)&&ea.value===d}}function dh(a,d){a=
a.index;return d===a?0:d<a?-1:1}function Si(a,d){a=a.offset;return d===a?0:d<a?-1:1}function Rg(a){return{index:a.index,value:a}}function Yi(a,d,k,N){var ea=0,ka=0,sa=0,La;0!==d?(sa=a[La=Ne(a,d-1,dh)].offset,ka=ca(k,d-1),ea=ka[0],ka=ka[1],a.length&&a[La].size===ca(k,d)[1]&&--La,a=a.slice(0,La+1)):a=[];for(d=Mm(Xc(k,d,Infinity));!(k=d()).done;)La=k.value,k=La.start,La=La.value,ea=k-ea,sa=ea*ka+sa+ea*N,a.push({offset:sa,size:La,index:k}),ea=k,ka=La;return{offsetTree:a,lastIndex:ea,lastOffset:sa,lastSize:ka}}
function ni(a,d){var k=d[0],N=d[1],ea=d[3];0<k.length&&(0,d[2])("received item sizes",k,tm.DEBUG);var ka=a.sizeTree;d=ka;var sa=0;if(0<N.length&&ka===aj&&2===k.length){var La=k[0].size,Ua=k[1].size;d=N.reduce(function(ib,nb){return Ba(Ba(ib,nb,La),nb+1,Ua)},d)}else k=function(ib,nb){var Pb,Sb=ib===aj?0:Infinity;for(nb=Mm(nb);!(Pb=nb()).done;){var Nb=Pb.value;Pb=Nb.size;var lc=Nb.startIndex,yc=Nb.endIndex;if(Sb=Math.min(Sb,lc),ib===aj)ib=Ba(ib,0,Pb);else{var bc=Xc(ib,lc-1,yc+1);if(!bc.some(bg(Nb))){var qc,
mc=Nb=!1;for(bc=Mm(bc);!(qc=bc()).done;){var Pc=qc.value;qc=Pc.start;var Uc=Pc.end;Pc=Pc.value;Nb?(yc>=qc||Pb===Pc)&&(ib=x(ib,qc)):(mc=Pc!==Pb,Nb=!0);Uc>yc&&yc>=qc&&Pc!==Pb&&(ib=Ba(ib,yc+1,Pc))}mc&&(ib=Ba(ib,lc,Pb))}}}return[ib,Sb]}(d,k),d=k[0],sa=k[1];if(d===ka)return a;a=Yi(a.offsetTree,sa,d,ea);var cb=a.offsetTree;return{sizeTree:d,offsetTree:cb,lastIndex:a.lastIndex,lastOffset:a.lastOffset,lastSize:a.lastSize,groupOffsetTree:N.reduce(function(ib,nb){return Ba(ib,nb,ji(nb,cb,ea))},aj),groupIndices:N}}
function ji(a,d,k){if(0===d.length)return 0;d=d[Ne(d,a,dh)];a-=d.index;a=d.size*a+(a-1)*k+d.offset;return 0<a?a+k:a}function yi(a,d,k){if(void 0!==a.groupIndex)return d.groupIndices[a.groupIndex]+1;a=Nh("LAST"===a.index?k:a.index,d);return Math.max(0,a,Math.min(k,a))}function Nh(a,d){if(d.groupOffsetTree===aj)return a;for(var k=0;d.groupIndices[k]<=a+k;)k++;return a+k}function qi(a){a="number"==typeof a?{index:a}:a;return a.align||(a.align="start"),a.behavior&&BH||(a.behavior="auto"),a.offset||(a.offset=
0),a}function ri(a){return!!a&&("smooth"===a?"smooth":"auto")}function vi(a){return a.reduce(function(d,k){return d.groupIndices.push(d.totalCount),d.totalCount+=k+1,d},{totalCount:0,groupIndices:[]})}function Tj(a,d){return!(!a||a[0]!==d[0]||a[1]!==d[1])}function Tk(a,d){return!(!a||a.startIndex!==d.startIndex||a.endIndex!==d.endIndex)}function Gl(a,d,k){return"number"==typeof a?"up"===k&&"top"===d||"down"===k&&"bottom"===d?a:0:"up"===k?"top"===d?a.main:a.reverse:"bottom"===d?a.main:a.reverse}function zn(a,
d,k){if(0===a.length)return[];if(d.groupOffsetTree===aj)return a.map(function(Ua){return wh({},Ua,{index:Ua.index+k,originalIndex:Ua.index})});var N,ea=[],ka=Xc(d.groupOffsetTree,a[0].index,a[a.length-1].index),sa=void 0,La=0;for(a=Mm(a);!(N=a()).done;)N=N.value,(!sa||sa.end<N.index)&&(sa=ka.shift(),La=d.groupIndices.indexOf(sa.start)),ea.push(wh({},N.index===sa.start?{type:"group",index:La}:{index:N.index-(La+1)+k,groupIndex:La},{size:N.size,offset:N.offset,originalIndex:N.index,data:N.data}));return ea}
function gn(a,d,k,N,ea,ka){var sa=0,La=0;0<a.length&&(sa=a[0].offset,La=a[a.length-1],La=La.offset+La.size);var Ua=k-ea.lastIndex,cb=sa;N=ea.lastOffset+Ua*ea.lastSize+(Ua-1)*N-La;return{items:zn(a,ea,ka),topItems:zn(d,ea,ka),topListHeight:d.reduce(function(ib,nb){return nb.size+ib},0),offsetTop:sa,offsetBottom:N,top:cb,bottom:La,totalCount:k,firstItemIndex:ka}}function yn(a){var d,k=!1;return function(){return k||(k=!0,d=a()),d}}function Gh(a,d){var k=(0,si.useRef)(null),N=(0,si.useCallback)(function(Ua){if(null!==
Ua&&Ua.offsetParent){var cb=Ua.getBoundingClientRect();Ua=cb.width;if(d){var ib=d.getBoundingClientRect();cb=cb.top-ib.top;ib=ib.height-Math.max(0,cb);cb+=d.scrollTop}else ib=window.innerHeight-Math.max(0,cb.top),cb=cb.top+window.pageYOffset;k.current={offsetTop:cb,visibleHeight:ib,visibleWidth:Ua};a(k.current)}},[a,d]),ea=Xo(N),ka=ea.callbackRef,sa=ea.ref,La=(0,si.useCallback)(function(){N(sa.current)},[N,sa]);return(0,si.useEffect)(function(){if(d){d.addEventListener("scroll",La);var Ua=new ResizeObserver(La);
return Ua.observe(d),function(){d.removeEventListener("scroll",La);Ua.unobserve(d)}}return window.addEventListener("scroll",La),window.addEventListener("resize",La),function(){window.removeEventListener("scroll",La);window.removeEventListener("resize",La)}},[La,d]),ka}function Wp(a){return a}function Uk(a,d){var k=Vg();return Ah(k,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+d,"color: red;","color: inherit;","color: blue;")}),ig(k,a),k}function Zj(a,d){if("string"!=
typeof a)return{context:d}}function uo(a){var d=a.usePublisher,k=a.useEmitter,N=a.useEmitterValue;return uh.memo(function(ea){var ka=ea.style,sa=ea.children;ea=Lm(ea,ZC);var La=d("scrollContainerState"),Ua=N("ScrollerComponent"),cb=d("smoothScrollTargetReached"),ib=N("scrollerRef"),nb=N("context");La=pr(La,cb,Ua,ib);cb=La.scrollerRef;ib=La.scrollByCallback;return k("scrollTo",La.scrollToCallback),k("scrollBy",ib),(0,si.createElement)(Ua,wh({ref:cb,style:wh({},bD,ka),"data-test-id":"virtuoso-scroller",
"data-virtuoso-scroller":!0,tabIndex:0},ea,Zj(Ua,nb)),sa)})}function Mp(a){var d=a.usePublisher,k=a.useEmitter,N=a.useEmitterValue;return uh.memo(function(ea){var ka=ea.style,sa=ea.children;ea=Lm(ea,Lw);var La=d("windowScrollContainerState"),Ua=N("ScrollerComponent"),cb=d("smoothScrollTargetReached"),ib=N("totalListHeight"),nb=N("deviation"),Pb=N("customScrollParent"),Sb=N("context");cb=pr(La,cb,Ua,zi,Pb);var Nb=cb.scrollerRef;La=cb.scrollByCallback;cb=cb.scrollToCallback;return TC(function(){return Nb.current=
Pb||window,function(){Nb.current=null}},[Nb,Pb]),k("windowScrollTo",cb),k("scrollBy",La),(0,si.createElement)(Ua,wh({style:wh({position:"relative"},ka,0!==ib?{height:ib+nb}:{}),"data-virtuoso-scroller":!0},ea,Zj(Ua,Sb)),sa)})}function Np(a,d,k){return Array.from({length:d-a+1}).map(function(N,ea){return{index:ea+a,data:null==k?void 0:k[ea+a]}})}function In(a,d){return a&&a.column===d.column&&a.row===d.row}function vo(a,d,k,N){var ea=k.height;return void 0===ea||0===N.length?{top:0,bottom:0}:{top:wl(a,
d,k,N[0].index),bottom:wl(a,d,k,N[N.length-1].index)+ea}}function wl(a,d,k,N){var ea=d.column;a=qq(1,pj((a.width+ea)/(k.width+ea)));N=pj(N/a);k=N*k.height+qq(0,N-1)*d.row;return 0<k?k+d.row:k}function Am(a,d,k){return"normal"===d||null!=d&&d.endsWith("px")||k(a+" was not resolved to pixel value correctly",d,tm.WARN),"normal"===d?0:parseInt(null!=d?d:"0",10)}function un(a,d){un=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,N){k.__proto__=N;return k};return un(a,d)}function Tp(a,d){a.prototype=
Object.create(d.prototype);a.prototype.constructor=a;un(a,d)}function Ao(a){Ao=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)};return Ao(a)}function Hu(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function Aq(a,d,k){Aq=Hu()?Reflect.construct.bind():function(N,
ea,ka){var sa=[null];sa.push.apply(sa,ea);N=new (Function.bind.apply(N,sa));ka&&un(N,ka.prototype);return N};return Aq.apply(null,arguments)}function Cq(a){var d="function"===typeof Map?new Map:void 0;Cq=function(k){function N(){return Aq(k,arguments,Ao(this).constructor)}if(null===k||-1===Function.toString.call(k).indexOf("[native code]"))return k;if("function"!==typeof k)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof d){if(d.has(k))return d.get(k);
d.set(k,N)}N.prototype=Object.create(k.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}});return un(N,k)};return Cq(a)}function Ju(a,d,k){return Math.round(255*a)+","+Math.round(255*d)+","+Math.round(255*k)}function Xp(a,d,k,N){void 0===N&&(N=Ju);if(0===d)return N(k,k,k);a=(a%360+360)%360/60;var ea=(1-Math.abs(2*k-1))*d,ka=ea*(1-Math.abs(a%2-1)),sa=d=0,La=0;0<=a&&1>a?(d=ea,sa=ka):1<=a&&2>a?(d=ka,sa=ea):2<=a&&3>a?(sa=ea,La=ka):3<=a&&4>a?(sa=ka,La=ea):4<=a&&5>a?(d=ka,La=ea):
5<=a&&6>a&&(d=ea,La=ka);k-=ea/2;return N(d+k,sa+k,La+k)}function rs(a){if("string"!==typeof a)throw new Bp(3);if("string"===typeof a){var d=a.toLowerCase();a=bz[d]?"#"+bz[d]:a}if(a.match(cz))return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16)};if(a.match(No))return d=parseFloat((parseInt(""+a[7]+a[8],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16),alpha:d};if(a.match(wv))return{red:parseInt(""+
a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16)};if(a.match(Hm))return d=parseFloat((parseInt(""+a[4]+a[4],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16),alpha:d};if(d=su.exec(a))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10)};if(d=xv.exec(a.substring(0,50)))return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:1<parseFloat(""+
d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])};var k=lp.exec(a);if(k){d=parseInt(""+k[1],10);var N=parseInt(""+k[2],10)/100;k=parseInt(""+k[3],10)/100;d="rgb("+Xp(d,N,k)+")";N=su.exec(d);if(!N)throw new Bp(4,a,d);return{red:parseInt(""+N[1],10),green:parseInt(""+N[2],10),blue:parseInt(""+N[3],10)}}if(d=Gj.exec(a.substring(0,50))){N=parseInt(""+d[1],10);k=parseInt(""+d[2],10)/100;var ea=parseInt(""+d[3],10)/100;N="rgb("+Xp(N,k,ea)+")";k=su.exec(N);if(!k)throw new Bp(4,a,N);return{red:parseInt(""+
k[1],10),green:parseInt(""+k[2],10),blue:parseInt(""+k[3],10),alpha:1<parseFloat(""+d[4])?parseFloat(""+d[4])/100:parseFloat(""+d[4])}}throw new Bp(5);}function wo(a){a=a.toString(16);return 1===a.length?"0"+a:a}function Op(a,d,k){return it("#"+wo(Math.round(255*a))+wo(Math.round(255*d))+wo(Math.round(255*k)))}function ls(a,d,k){if("number"===typeof a&&"number"===typeof d&&"number"===typeof k)return it("#"+wo(a)+wo(d)+wo(k));if("object"===typeof a&&void 0===d&&void 0===k)return it("#"+wo(a.red)+wo(a.green)+
wo(a.blue));throw new Bp(6);}function qt(a){if("object"!==typeof a)throw new Bp(8);if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?ls(a.red,a.green,a.blue):"rgba("+a.red+","+a.green+","+a.blue+","+a.alpha+")";else throw new Bp(7);return a}if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha))return ls(a);if("number"===
typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?Xp(a.hue,a.saturation,a.lightness,Op):"rgba("+Xp(a.hue,a.saturation,a.lightness)+","+a.alpha+")";else throw new Bp(2);return a}if("number"===typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha)){if("object"===typeof a)a=Xp(a.hue,a.saturation,a.lightness,Op);else throw new Bp(1);
return a}throw new Bp(8);}function kr(a,d,k){return function(){var N=k.concat(Array.prototype.slice.call(arguments));return N.length>=d?a.apply(this,N):kr(a,d,N)}}function lr(a,d){if("transparent"===d)return d;d=rs(d);var k=d.red/255,N=d.green/255,ea=d.blue/255,ka=Math.max(k,N,ea),sa=Math.min(k,N,ea),La=(ka+sa)/2;if(ka===sa)d=void 0!==d.alpha?{hue:0,saturation:0,lightness:La,alpha:d.alpha}:{hue:0,saturation:0,lightness:La};else{var Ua=ka-sa;sa=.5<La?Ua/(2-ka-sa):Ua/(ka+sa);switch(ka){case k:k=(N-
ea)/Ua+(N<ea?6:0);break;case N:k=(ea-k)/Ua+2;break;default:k=(k-N)/Ua+4}k*=60;d=void 0!==d.alpha?{hue:k,saturation:sa,lightness:La,alpha:d.alpha}:{hue:k,saturation:sa,lightness:La}}La=Se;a=d.lightness-parseFloat(a);return qt(La({},d,{lightness:Math.max(0,Math.min(1,a))}))}function fn(a,d){var k;void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));void 0!==d.opacity&&(d.opacity=Math.min(1,Math.max(d.opacity,0)));let N=null!=(k=d.fill)?k:a.props.fill;void 0===N||ti(N)||"var(--ls-secondary-background-color)"===
N||d.noFill||!NH.includes(a.props.type)||(a=Wr(.3,N),d.stroke=a);return d}function ps({strokeWidth:a,size:d,mode:k}){return"svg"===k?(0,dz.jsx)("rect",{className:"tl-binding-indicator",x:a,y:a,rx:2,ry:2,width:Math.max(0,d[0]-2*a),height:Math.max(0,d[1]-2*a),strokeWidth:4*a}):(0,dz.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function vn(){const a=Cg();return"panning"===a.inputs.state||
"pinching"===a.inputs.state}function Bq({left:a,middle:d,right:k,stroke:N,strokeWidth:ea}){return(0,fz.jsxs)("g",{children:[(0,fz.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${a} L ${d} ${k}`}),(0,fz.jsx)("path",{d:`M ${a} L ${d} ${k}`,fill:"none",stroke:N,strokeWidth:ea,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Dq(a,d,k){d=Q(a,d,a,k).points;if(!d)return console.warn("Could not find an intersection for the arrow head."),{left:a,right:a};d=(k=d[0])?ge.rotWith(k,
a,Math.PI/6):a;a=k?ge.rotWith(k,a,-Math.PI/6):a;return{left:d,right:a}}function ss(a,d,k){const {left:N,right:ea}=Dq(a,d,k);return`M ${N} L ${a} ${ea}`}function im(a,d,k,N,ea){a=a.strokeWidth;var ka=ge.dist(d,k);a=Math.min(ka/3,16*a);ka=[];ka.push(`M ${d} L ${k}`);N&&ka.push(ss(d,k,a));ea&&ka.push(ss(k,d,a));return ka.join(" ")}function ns({id:a,bounds:d,labelSize:k,offset:N,scale:ea=1}){return(0,Ep.jsx)("defs",{children:(0,Ep.jsxs)("mask",{id:a+"_clip",children:[(0,Ep.jsx)("rect",{x:-100,y:-100,
width:d.width+200,height:d.height+200,fill:"white"}),(0,Ep.jsx)("rect",{x:d.width/2-k[0]/2*ea+((null==N?void 0:N[0])||0),y:d.height/2-k[1]/2*ea+((null==N?void 0:N[1])||0),width:k[0]*ea,height:k[1]*ea,rx:4*ea,ry:4*ea,fill:"black"})]})})}function Pp(a,d,k,N=ea=>ea){return a*N(.5-d*(.5-k))}function Qp(a){return[-a[0],-a[1]]}function yl(a,d){return[a[0]+d[0],a[1]+d[1]]}function xl(a,d){return[a[0]-d[0],a[1]-d[1]]}function Al(a,d){return[a[0]*d,a[1]*d]}function Rp(a){return[a[1],-a[0]]}function mr(a,d){return a[0]===
d[0]&&a[1]===d[1]}function Eq(a){return a[0]*a[0]+a[1]*a[1]}function Gq(a){var d=Math.hypot(a[0],a[1]);return[a[0]/d,a[1]/d]}function rt(a,d){return Math.hypot(a[1]-d[1],a[0]-d[0])}function yo(a,d,k){let N=Math.sin(k);k=Math.cos(k);let ea=a[0]-d[0];a=a[1]-d[1];return[ea*k-a*N+d[0],ea*N+a*k+d[1]]}function wn(a,d,k){return yl(a,Al(xl(d,a),k))}function Sp(a,d,k){return yl(a,Al(d,k))}function Fq(a,d={}){let {size:k=16,smoothing:N=.5,thinning:ea=.5,simulatePressure:ka=!0,easing:sa=Jd=>Jd,start:La={},end:Ua=
{},last:cb=!1}=d,{cap:ib=!0,easing:nb=Jd=>Jd*(2-Jd)}=La,{cap:Pb=!0,easing:Sb=Jd=>--Jd*Jd*Jd+1}=Ua;if(0===a.length||0>=k)return[];var Nb=a[a.length-1].runningLength;let lc=!1===La.taper?0:!0===La.taper?Math.max(k,Nb):La.taper,yc=!1===Ua.taper?0:!0===Ua.taper?Math.max(k,Nb):Ua.taper;var bc=Math.pow(k*N,2);d=[];let qc=[];var mc=a.slice(0,10).reduce((Jd,rd)=>{var Md=rd.pressure;ka&&(rd=rq(1,rd.distance/k),Md=rq(1,1-rd),Md=rq(1,Jd+.275*(Md-Jd)*rd));return(Jd+Md)/2},a[0].pressure),Pc=Pp(k,ea,a[a.length-
1].pressure,sa),Uc;let Ed=a[0].vector;var Ud=a[0].point;let ff=Ud;var oe=Ud;let Ue=ff;var Bf=!1;for(var gf=0;gf<a.length;gf++){var {pressure:vf}=a[gf];let {point:Jd,vector:rd,distance:Md,runningLength:Te}=a[gf];if(gf<a.length-1&&3>Nb-Te)continue;ea?(ka&&(Pc=rq(1,Md/k),vf=rq(1,1-Pc),vf=rq(1,mc+.275*(vf-mc)*Pc)),Pc=Pp(k,ea,vf,sa)):Pc=k/2;void 0===Uc&&(Uc=Pc);var Rd=Te<lc?nb(Te/lc):1,wd=Nb-Te<yc?Sb((Nb-Te)/yc):1;Pc=Math.max(.01,Pc*Math.min(Rd,wd));wd=(gf<a.length-1?a[gf+1]:a[gf]).vector;let of=gf<a.length-
1?rd[0]*wd[0]+rd[1]*wd[1]:1;Rd=null!==of&&0>of;if(0>rd[0]*Ed[0]+rd[1]*Ed[1]&&!Bf||Rd){Ud=Al(Rp(Ed),Pc);for(let lg=1/13,Fg=0;1>=Fg;Fg+=lg)oe=yo(xl(Jd,Ud),Jd,Wn*Fg),d.push(oe),Ue=yo(yl(Jd,Ud),Jd,Wn*-Fg),qc.push(Ue);Ud=oe;ff=Ue;Rd&&(Bf=!0)}else(Bf=!1,gf===a.length-1)?(vf=Al(Rp(rd),Pc),d.push(xl(Jd,vf)),qc.push(yl(Jd,vf))):(mc=Al(Rp(wn(wd,rd,of)),Pc),oe=xl(Jd,mc),(1>=gf||Eq(xl(Ud,oe))>bc)&&(d.push(oe),Ud=oe),Ue=yl(Jd,mc),(1>=gf||Eq(xl(ff,Ue))>bc)&&(qc.push(Ue),ff=Ue),mc=vf,Ed=rd)}Nb=a[0].point.slice(0,
2);bc=1<a.length?a[a.length-1].point.slice(0,2):yl(a[0].point,[1,1]);oe=[];Bf=[];if(1===a.length){if(!lc&&!yc||cb){a=Sp(Nb,Gq(Rp(xl(Nb,bc))),-(Uc||Pc));d=[];for(let Jd=1/13,rd=Jd;1>=rd;rd+=Jd)d.push(yo(a,Nb,2*Wn*rd));return d}}else{if(!(lc||yc&&1===a.length))if(ib)for(let Jd=1/13,rd=Jd;1>=rd;rd+=Jd)Uc=yo(qc[0],Nb,Wn*rd),oe.push(Uc);else gf=xl(d[0],qc[0]),Uc=Al(gf,.5),gf=Al(gf,.51),oe.push(xl(Nb,Uc),xl(Nb,gf),yl(Nb,gf),yl(Nb,Uc));Uc=Rp(Qp(a[a.length-1].vector));if(yc||lc&&1===a.length)Bf.push(bc);
else if(Pb){a=Sp(bc,Uc,Pc);for(let Jd=1/29,rd=Jd;1>rd;rd+=Jd)Bf.push(yo(a,bc,3*Wn*rd))}else Bf.push(yl(bc,Al(Uc,Pc)),yl(bc,Al(Uc,.99*Pc)),xl(bc,Al(Uc,.99*Pc)),xl(bc,Al(Uc,Pc)))}return d.concat(Bf,qc.reverse(),oe)}function tk(a,d={}){var k;let {streamline:N=.5,size:ea=16,last:ka=!1}=d;if(0===a.length)return[];d=.15+.85*(1-N);a=Array.isArray(a[0])?a:a.map(({x:nb,y:Pb,pressure:Sb=.5})=>[nb,Pb,Sb]);if(2===a.length){var sa=a[1];a=a.slice(0,-1);for(var La=1;5>La;La++)a.push(wn(a[0],sa,La/4))}1===a.length&&
(a=[...a,[...yl(a[0],[1,1]),...a[0].slice(2)]]);sa=[{point:[a[0][0],a[0][1]],pressure:0<=a[0][2]?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];La=!1;let Ua=0,cb=sa[0],ib=a.length-1;for(let nb=1;nb<a.length;nb++){let Pb=ka&&nb===ib?a[nb].slice(0,2):wn(cb.point,a[nb],d);if(mr(cb.point,Pb))continue;let Sb=rt(Pb,cb.point);if(Ua+=Sb,nb<ib&&!La){if(Ua<ea)continue;La=!0}cb={point:Pb,pressure:0<=a[nb][2]?a[nb][2]:.5,vector:Gq(xl(cb.point,Pb)),distance:Sb,runningLength:Ua};sa.push(cb)}return sa[0].vector=
(null==(k=sa[1])?void 0:k.vector)||[0,0],sa}function Jn(a,d=4/3){return(new op(a)).exportAsSVG(d)}function ao(a,d=4/3){return(new op(a)).generatePreviewJsx(void 0,d)}function en({id:a,type:d,onRemove:k,showContent:N}){const ea=Cg(),{handlers:ka}=My.default.useContext(gj),sa=ka.t;return(0,kk.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,kk.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,kk.jsx)(Ny,{id:a,showReferenceContent:N})}),
(0,kk.jsx)("div",{className:"flex-1"}),ka.getBlockPageName(a)!==ea.currentPage.name&&(0,kk.jsx)(he,{tooltip:sa("whiteboard/open-page"),type:"button",onClick:()=>null==ka?void 0:ka.redirectToPage(a),children:(0,kk.jsx)(Eh,{name:"open-as-page"})}),(0,kk.jsx)(he,{tooltip:sa("whiteboard/open-page-in-sidebar"),type:"button",onClick:()=>null==ka?void 0:ka.sidebarAddBlock(a,"B"===d?"block":"page"),children:(0,kk.jsx)(Eh,{name:"move-to-sidebar-right"})}),k&&(0,kk.jsx)(he,{className:"tl-shape-links-panel-item-remove-button",
tooltip:sa("whiteboard/remove-link"),type:"button",onClick:k,children:(0,kk.jsx)(Eh,{name:"x",className:"!translate-y-0"})})]})}function ja({options:a,value:d,onValueChange:k}){return(0,Hp.jsx)(pz,{className:"tl-toggle-group-input",type:"single",value:d,onValueChange:k,children:a.map(N=>(0,Hp.jsx)(ne,{content:N.tooltip,children:(0,Hp.jsx)("div",{className:"inline-block",children:(0,Hp.jsx)(Gp,{className:"tl-toggle-group-input-button",value:N.value,disabled:N.value===d,children:(0,Hp.jsx)(Eh,{name:N.icon})})})},
N.value))})}function Ca({options:a,value:d,onValueChange:k}){return(0,Hp.jsx)(pz,{className:"tl-toggle-group-input",type:"multiple",value:d,onValueChange:k,children:a.map(N=>(0,Hp.jsx)(Gp,{className:"tl-toggle-group-input-button",value:N.value,children:(0,Hp.jsx)(Eh,{name:N.icon})},N.value))})}function ab(a){return Cg().selectedShapesArray.filter(d=>!d.props.isLocked).filter(d=>{var k;return null==(k=qz[d.props.type])?void 0:k.includes(a)})}function Wb(a){return d=>"mouse"!==d.pointerType?a(d):void 0}
function sc(a){var d;a=a.match(/\.[0-9a-z]+$/i);if(!a)return"unknown";const k=a[0].toLowerCase();[a]=null!=(d=Object.entries(wz).find(([,N])=>N.includes(k)))?d:["unknown",null];return a}function Lc(...a){return(...d)=>hi(this,null,function*(){for(const k of a){const N=yield k(...d);if(N&&0<N.length)return N}return null})}function zd(a,d){return hi(this,null,function*(){return a.types.includes(d)?a instanceof DataTransfer?a.getData(d):yield(yield a.getType(d)).text():null})}function Vd(){const {handlers:a}=
vz.useContext(gj);return vz.useCallback((d,k)=>hi(this,null,function*(){if(k.shiftKey&&1===d.selectedShapesArray.length){var N=yield navigator.clipboard.read();let ea;0<N.length&&(N=(yield(yield N[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(N)&&40===N.length?(N=N.slice(2,-2),Jj(N)&&(ea=N)):/^\[\[.*\]\]$/.test(N)&&(ea=N.slice(2,-2)));if(ea){d.selectedShapesArray[0].update({refs:[ea]});d.persist();return}}fx(d,k,a)}),[])}function le(){const a=Vd();return ir.useCallback((d,k)=>hi(this,
[d,k],function*(N,{dataTransfer:ea,point:ka}){a(N,{point:ka,shiftKey:!1,dataTransfer:ea,fromDrop:!0})}),[])}function Ke(){const {handlers:a}=gx.useContext(gj);return gx.useCallback((d,{text:k,html:N})=>{a.copyToClipboard(k,N)},[])}function jf(){return ED.default.useCallback(a=>hi(this,null,function*(){setTimeout(()=>{a.transition("logseq-portal").selectedTool.transition("creating")},100)}),[])}var dg=Object.create,og=Object.defineProperty,Rh=Object.defineProperties,vh=Object.getOwnPropertyDescriptor,
Fk=Object.getOwnPropertyDescriptors,zo=Object.getOwnPropertyNames,gm=Object.getOwnPropertySymbols,ui=Object.getPrototypeOf,Gk=Object.prototype.hasOwnProperty,Rm=Object.prototype.propertyIsEnumerable,Vo=(a,d,k)=>d in a?og(a,d,{enumerable:!0,configurable:!0,writable:!0,value:k}):a[d]=k,me=(a,d)=>{for(var k in d||={})Gk.call(d,k)&&Vo(a,k,d[k]);if(gm)for(k of gm(d))Rm.call(d,k)&&Vo(a,k,d[k]);return a},uf=(a,d)=>Rh(a,Fk(d)),Sf=(a,d)=>{var k={},N;for(N in a)Gk.call(a,N)&&0>d.indexOf(N)&&(k[N]=a[N]);if(null!=
a&&gm)for(N of gm(a))0>d.indexOf(N)&&Rm.call(a,N)&&(k[N]=a[N]);return k},Fh=(a,d)=>function(){return d||(0,a[zo(a)[0]])((d={exports:{}}).exports,d),d.exports},Om=(a,d,k,N)=>{if(d&&"object"===typeof d||"function"===typeof d)for(let ea of zo(d))Gk.call(a,ea)||ea===k||og(a,ea,{get:()=>d[ea],enumerable:!(N=vh(d,ea))||N.enumerable});return a},Df=(a,d,k)=>(k=null!=a?dg(ui(a)):{},Om(!d&&a&&a.__esModule?k:og(k,"default",{value:a,enumerable:!0}),a)),de=(a,d,k,N)=>{for(var ea=1<N?void 0:N?vh(d,k):d,ka=a.length-
1,sa;0<=ka;ka--)if(sa=a[ka])ea=(N?sa(d,k,ea):sa(ea))||ea;N&&ea&&og(d,k,ea);return ea},kb=(a,d,k)=>{Vo(a,"symbol"!==typeof d?d+"":d,k);return k},hi=(a,d,k)=>new Promise((N,ea)=>{var ka=Ua=>{try{La(k.next(Ua))}catch(cb){ea(cb)}},sa=Ua=>{try{La(k.throw(Ua))}catch(cb){ea(cb)}},La=Ua=>Ua.done?N(Ua.value):Promise.resolve(Ua.value).then(ka,sa);La((k=k.apply(a,d)).next())}),Bm=Fh({["../../node_modules/rbush/rbush.min.js"](a,d){!function(k,N){"object"==typeof a&&"undefined"!=typeof d?d.exports=N():"function"==
typeof define&&define.amd?define(N):(k=k||self).RBush=N()}(a,function(){function k(bc,qc,mc,Pc,Uc){!function gf(Ud,ff,oe,Ue,Bf){for(;Ue>oe;){if(600<Ue-oe){var vf=Ue-oe+1,Rd=ff-oe+1,wd=Math.log(vf),Jd=.5*Math.exp(2*wd/3);wd=.5*Math.sqrt(wd*Jd*(vf-Jd)/vf)*(0>Rd-vf/2?-1:1);gf(Ud,ff,Math.max(oe,Math.floor(ff-Rd*Jd/vf+wd)),Math.min(Ue,Math.floor(ff+(vf-Rd)*Jd/vf+wd)),Bf)}vf=Ud[ff];Rd=oe;Jd=Ue;N(Ud,oe,ff);for(0<Bf(Ud[Ue],vf)&&N(Ud,oe,Ue);Rd<Jd;){N(Ud,Rd,Jd);Rd++;for(Jd--;0>Bf(Ud[Rd],vf);)Rd++;for(;0<Bf(Ud[Jd],
vf);)Jd--}0===Bf(Ud[oe],vf)?N(Ud,oe,Jd):N(Ud,++Jd,Ue);Jd<=ff&&(oe=Jd+1);ff<=Jd&&(Ue=Jd-1)}}(bc,qc,mc||0,Pc||bc.length-1,Uc||ea)}function N(bc,qc,mc){var Pc=bc[qc];bc[qc]=bc[mc];bc[mc]=Pc}function ea(bc,qc){return bc<qc?-1:bc>qc?1:0}function ka(bc,qc){sa(bc,0,bc.children.length,qc,bc)}function sa(bc,qc,mc,Pc,Uc){Uc||=Nb(null);Uc.minX=1/0;Uc.minY=1/0;Uc.maxX=-1/0;for(Uc.maxY=-1/0;qc<mc;qc++){var Ed=bc.children[qc];La(Uc,bc.leaf?Pc(Ed):Ed)}return Uc}function La(bc,qc){return bc.minX=Math.min(bc.minX,
qc.minX),bc.minY=Math.min(bc.minY,qc.minY),bc.maxX=Math.max(bc.maxX,qc.maxX),bc.maxY=Math.max(bc.maxY,qc.maxY),bc}function Ua(bc,qc){return bc.minX-qc.minX}function cb(bc,qc){return bc.minY-qc.minY}function ib(bc){return(bc.maxX-bc.minX)*(bc.maxY-bc.minY)}function nb(bc){return bc.maxX-bc.minX+(bc.maxY-bc.minY)}function Pb(bc,qc){return bc.minX<=qc.minX&&bc.minY<=qc.minY&&qc.maxX<=bc.maxX&&qc.maxY<=bc.maxY}function Sb(bc,qc){return qc.minX<=bc.maxX&&qc.minY<=bc.maxY&&qc.maxX>=bc.minX&&qc.maxY>=bc.minY}
function Nb(bc){return{children:bc,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function lc(bc,qc,mc,Pc,Uc){for(var Ed=[qc,mc];Ed.length;)if(!((mc=Ed.pop())-(qc=Ed.pop())<=Pc)){var Ud=qc+Math.ceil((mc-qc)/Pc/2)*Pc;k(bc,Ud,qc,mc,Uc);Ed.push(qc,Ud,Ud,mc)}}var yc=function(bc){void 0===bc&&(bc=9);this._maxEntries=Math.max(4,bc);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return yc.prototype.all=function(){return this._all(this.data,[])},yc.prototype.search=function(bc){var qc=
this.data,mc=[];if(!Sb(bc,qc))return mc;for(var Pc=this.toBBox,Uc=[];qc;){for(var Ed=0;Ed<qc.children.length;Ed++){var Ud=qc.children[Ed],ff=qc.leaf?Pc(Ud):Ud;Sb(bc,ff)&&(qc.leaf?mc.push(Ud):Pb(bc,ff)?this._all(Ud,mc):Uc.push(Ud))}qc=Uc.pop()}return mc},yc.prototype.collides=function(bc){var qc=this.data;if(!Sb(bc,qc))return!1;for(var mc=[];qc;){for(var Pc=0;Pc<qc.children.length;Pc++){var Uc=qc.children[Pc],Ed=qc.leaf?this.toBBox(Uc):Uc;if(Sb(bc,Ed)){if(qc.leaf||Pb(bc,Ed))return!0;mc.push(Uc)}}qc=
mc.pop()}return!1},yc.prototype.load=function(bc){if(!bc||!bc.length)return this;if(bc.length<this._minEntries){for(var qc=0;qc<bc.length;qc++)this.insert(bc[qc]);return this}bc=this._build(bc.slice(),0,bc.length-1,0);this.data.children.length?this.data.height===bc.height?this._splitRoot(this.data,bc):(this.data.height<bc.height&&(qc=this.data,this.data=bc,bc=qc),this._insert(bc,this.data.height-bc.height-1,!0)):this.data=bc;return this},yc.prototype.insert=function(bc){return bc&&this._insert(bc,
this.data.height-1),this},yc.prototype.clear=function(){return this.data=Nb([]),this},yc.prototype.remove=function(bc,qc){if(!bc)return this;for(var mc,Pc,Uc,Ed=this.data,Ud=this.toBBox(bc),ff=[],oe=[];Ed||ff.length;){if(Ed||(Ed=ff.pop(),Pc=ff[ff.length-1],mc=oe.pop(),Uc=!0),Ed.leaf){a:{var Ue=bc;var Bf=Ed.children,gf=qc;if(gf){for(var vf=0;vf<Bf.length;vf++)if(gf(Ue,Bf[vf])){Ue=vf;break a}Ue=-1}else Ue=Bf.indexOf(Ue)}if(-1!==Ue)return Ed.children.splice(Ue,1),ff.push(Ed),this._condense(ff),this}Uc||
Ed.leaf||!Pb(Ed,Ud)?Pc?(mc++,Ed=Pc.children[mc],Uc=!1):Ed=null:(ff.push(Ed),oe.push(mc),mc=0,Pc=Ed,Ed=Ed.children[0])}return this},yc.prototype.toBBox=function(bc){return bc},yc.prototype.compareMinX=function(bc,qc){return bc.minX-qc.minX},yc.prototype.compareMinY=function(bc,qc){return bc.minY-qc.minY},yc.prototype.toJSON=function(){return this.data},yc.prototype.fromJSON=function(bc){return this.data=bc,this},yc.prototype._all=function(bc,qc){for(var mc=[];bc;)bc.leaf?qc.push.apply(qc,bc.children):
mc.push.apply(mc,bc.children),bc=mc.pop();return qc},yc.prototype._build=function(bc,qc,mc,Pc){var Uc,Ed=mc-qc+1,Ud=this._maxEntries;if(Ed<=Ud)return ka(Uc=Nb(bc.slice(qc,mc+1)),this.toBBox),Uc;Pc||(Pc=Math.ceil(Math.log(Ed)/Math.log(Ud)),Ud=Math.ceil(Ed/Math.pow(Ud,Pc-1)));(Uc=Nb([])).leaf=!1;Uc.height=Pc;Ed=Math.ceil(Ed/Ud);Ud=Ed*Math.ceil(Math.sqrt(Ud));for(lc(bc,qc,mc,Ud,this.compareMinX);qc<=mc;qc+=Ud){var ff=Math.min(qc+Ud-1,mc);lc(bc,qc,ff,Ed,this.compareMinY);for(var oe=qc;oe<=ff;oe+=Ed)Uc.children.push(this._build(bc,
oe,Math.min(oe+Ed-1,ff),Pc-1))}return ka(Uc,this.toBBox),Uc},yc.prototype._chooseSubtree=function(bc,qc,mc,Pc){for(;Pc.push(qc),!qc.leaf&&Pc.length-1!==mc;){for(var Uc=1/0,Ed=1/0,Ud=void 0,ff=0;ff<qc.children.length;ff++){var oe=qc.children[ff],Ue=ib(oe),Bf=(gf=bc,vf=oe,(Math.max(vf.maxX,gf.maxX)-Math.min(vf.minX,gf.minX))*(Math.max(vf.maxY,gf.maxY)-Math.min(vf.minY,gf.minY))-Ue);Bf<Ed?(Ed=Bf,Uc=Ue<Uc?Ue:Uc,Ud=oe):Bf===Ed&&Ue<Uc&&(Uc=Ue,Ud=oe)}qc=Ud||qc.children[0]}var gf,vf;return qc},yc.prototype._insert=
function(bc,qc,mc){mc=mc?bc:this.toBBox(bc);var Pc=[],Uc=this._chooseSubtree(mc,this.data,qc,Pc);Uc.children.push(bc);for(La(Uc,mc);0<=qc&&Pc[qc].children.length>this._maxEntries;)this._split(Pc,qc),qc--;this._adjustParentBBoxes(mc,Pc,qc)},yc.prototype._split=function(bc,qc){var mc=bc[qc],Pc=mc.children.length,Uc=this._minEntries;this._chooseSplitAxis(mc,Uc,Pc);Pc=this._chooseSplitIndex(mc,Uc,Pc);Pc=Nb(mc.children.splice(Pc,mc.children.length-Pc));Pc.height=mc.height;Pc.leaf=mc.leaf;ka(mc,this.toBBox);
ka(Pc,this.toBBox);qc?bc[qc-1].children.push(Pc):this._splitRoot(mc,Pc)},yc.prototype._splitRoot=function(bc,qc){this.data=Nb([bc,qc]);this.data.height=bc.height+1;this.data.leaf=!1;ka(this.data,this.toBBox)},yc.prototype._chooseSplitIndex=function(bc,qc,mc){for(var Pc,Uc,Ed,Ud,ff,oe,Ue,Bf=1/0,gf=1/0,vf=qc;vf<=mc-qc;vf++){var Rd=sa(bc,0,vf,this.toBBox),wd=sa(bc,vf,mc,this.toBBox),Jd=(Uc=Rd,Ed=wd,Ud=void 0,ff=void 0,oe=void 0,Ue=void 0,Ud=Math.max(Uc.minX,Ed.minX),ff=Math.max(Uc.minY,Ed.minY),oe=Math.min(Uc.maxX,
Ed.maxX),Ue=Math.min(Uc.maxY,Ed.maxY),Math.max(0,oe-Ud)*Math.max(0,Ue-ff));Rd=ib(Rd)+ib(wd);Jd<Bf?(Bf=Jd,Pc=vf,gf=Rd<gf?Rd:gf):Jd===Bf&&Rd<gf&&(gf=Rd,Pc=vf)}return Pc||mc-qc},yc.prototype._chooseSplitAxis=function(bc,qc,mc){var Pc=bc.leaf?this.compareMinX:Ua,Uc=bc.leaf?this.compareMinY:cb;this._allDistMargin(bc,qc,mc,Pc)<this._allDistMargin(bc,qc,mc,Uc)&&bc.children.sort(Pc)},yc.prototype._allDistMargin=function(bc,qc,mc,Pc){bc.children.sort(Pc);Pc=this.toBBox;for(var Uc=sa(bc,0,qc,Pc),Ed=sa(bc,mc-
qc,mc,Pc),Ud=nb(Uc)+nb(Ed),ff=qc;ff<mc-qc;ff++){var oe=bc.children[ff];La(Uc,bc.leaf?Pc(oe):oe);Ud+=nb(Uc)}for(mc=mc-qc-1;mc>=qc;mc--)Uc=bc.children[mc],La(Ed,bc.leaf?Pc(Uc):Uc),Ud+=nb(Ed);return Ud},yc.prototype._adjustParentBBoxes=function(bc,qc,mc){for(;0<=mc;mc--)La(qc[mc],bc)},yc.prototype._condense=function(bc){for(var qc=bc.length-1,mc=void 0;0<=qc;qc--)0===bc[qc].children.length?0<qc?(mc=bc[qc-1].children).splice(mc.indexOf(bc[qc]),1):this.clear():ka(bc[qc],this.toBBox)},yc})}}),tt=Fh({["../../node_modules/fast-deep-equal/index.js"](a,
d){d.exports=function ka(N,ea){if(N===ea)return!0;if(N&&ea&&"object"==typeof N&&"object"==typeof ea){if(N.constructor!==ea.constructor)return!1;var sa;if(Array.isArray(N)){var La=N.length;if(La!=ea.length)return!1;for(sa=La;0!==sa--;)if(!ka(N[sa],ea[sa]))return!1;return!0}if(N.constructor===RegExp)return N.source===ea.source&&N.flags===ea.flags;if(N.valueOf!==Object.prototype.valueOf)return N.valueOf()===ea.valueOf();if(N.toString!==Object.prototype.toString)return N.toString()===ea.toString();var Ua=
Object.keys(N);La=Ua.length;if(La!==Object.keys(ea).length)return!1;for(sa=La;0!==sa--;)if(!Object.prototype.hasOwnProperty.call(ea,Ua[sa]))return!1;for(sa=La;0!==sa--;)if(La=Ua[sa],!ka(N[La],ea[La]))return!1;return!0}return N!==N&&ea!==ea}}}),or=Fh({["../../../node_modules/deepmerge/dist/cjs.js"](a,d){function k(nb,Pb){return!1!==Pb.clone&&Pb.isMergeableObject(nb)?Ua(Array.isArray(nb)?[]:{},nb,Pb):nb}function N(nb,Pb,Sb){return nb.concat(Pb).map(function(Nb){return k(Nb,Sb)})}function ea(nb){return Object.getOwnPropertySymbols?
Object.getOwnPropertySymbols(nb).filter(function(Pb){return Object.propertyIsEnumerable.call(nb,Pb)}):[]}function ka(nb){return Object.keys(nb).concat(ea(nb))}function sa(nb,Pb){try{return Pb in nb}catch(Sb){return!1}}function La(nb,Pb,Sb){var Nb={};Sb.isMergeableObject(nb)&&ka(nb).forEach(function(lc){Nb[lc]=k(nb[lc],Sb)});ka(Pb).forEach(function(lc){if(!sa(nb,lc)||Object.hasOwnProperty.call(nb,lc)&&Object.propertyIsEnumerable.call(nb,lc))if(sa(nb,lc)&&Sb.isMergeableObject(Pb[lc])){if(Sb.customMerge){var yc=
Sb.customMerge(lc);yc="function"===typeof yc?yc:Ua}else yc=Ua;Nb[lc]=yc(nb[lc],Pb[lc],Sb)}else Nb[lc]=k(Pb[lc],Sb)});return Nb}function Ua(nb,Pb,Sb){Sb=Sb||{};Sb.arrayMerge=Sb.arrayMerge||N;Sb.isMergeableObject=Sb.isMergeableObject||cb;Sb.cloneUnlessOtherwiseSpecified=k;var Nb=Array.isArray(Pb),lc=Array.isArray(nb);return Nb!==lc?k(Pb,Sb):Nb?Sb.arrayMerge(nb,Pb,Sb):La(nb,Pb,Sb)}var cb=function(nb){var Pb;if(Pb=!!nb&&"object"===typeof nb)Pb=Object.prototype.toString.call(nb),Pb=!("[object RegExp]"===
Pb||"[object Date]"===Pb||nb.$$typeof===ib);return Pb},ib="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;Ua.all=function(nb,Pb){if(!Array.isArray(nb))throw Error("first argument should be an array");return nb.reduce(function(Sb,Nb){return Ua(Sb,Nb,Pb)},{})};d.exports=Ua}}),ms=Fh({["../../node_modules/tslib/tslib.js"](a,d){var k,N,ea,ka,sa,La,Ua,cb,ib,nb,Pb,Sb,Nb,lc,yc,bc,qc,mc,Pc,Uc,Ed,Ud,ff,oe,Ue;(function(Bf){function gf(Rd,wd){Rd!==vf&&("function"===typeof Object.create?
Object.defineProperty(Rd,"__esModule",{value:!0}):Rd.__esModule=!0);return function(Jd,rd){return Rd[Jd]=wd?wd(Jd,rd):rd}}var vf="object"===typeof za?za:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(Rd){Bf(gf(vf,gf(Rd)))}):"object"===typeof d&&"object"===typeof d.exports?Bf(gf(vf,gf(d.exports))):Bf(gf(vf))})(function(Bf){var gf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rd,wd){Rd.__proto__=
wd}||function(Rd,wd){for(var Jd in wd)Object.prototype.hasOwnProperty.call(wd,Jd)&&(Rd[Jd]=wd[Jd])};k=function(Rd,wd){function Jd(){this.constructor=Rd}if("function"!==typeof wd&&null!==wd)throw new TypeError("Class extends value "+String(wd)+" is not a constructor or null");gf(Rd,wd);Rd.prototype=null===wd?Object.create(wd):(Jd.prototype=wd.prototype,new Jd)};N=Object.assign||function(Rd){for(var wd,Jd=1,rd=arguments.length;Jd<rd;Jd++){wd=arguments[Jd];for(var Md in wd)Object.prototype.hasOwnProperty.call(wd,
Md)&&(Rd[Md]=wd[Md])}return Rd};ea=function(Rd,wd){var Jd={},rd;for(rd in Rd)Object.prototype.hasOwnProperty.call(Rd,rd)&&0>wd.indexOf(rd)&&(Jd[rd]=Rd[rd]);if(null!=Rd&&"function"===typeof Object.getOwnPropertySymbols){var Md=0;for(rd=Object.getOwnPropertySymbols(Rd);Md<rd.length;Md++)0>wd.indexOf(rd[Md])&&Object.prototype.propertyIsEnumerable.call(Rd,rd[Md])&&(Jd[rd[Md]]=Rd[rd[Md]])}return Jd};ka=function(Rd,wd,Jd,rd){var Md=arguments.length,Te=3>Md?wd:null===rd?rd=Object.getOwnPropertyDescriptor(wd,
Jd):rd,of;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)Te=Reflect.decorate(Rd,wd,Jd,rd);else for(var lg=Rd.length-1;0<=lg;lg--)if(of=Rd[lg])Te=(3>Md?of(Te):3<Md?of(wd,Jd,Te):of(wd,Jd))||Te;return 3<Md&&Te&&Object.defineProperty(wd,Jd,Te),Te};sa=function(Rd,wd){return function(Jd,rd){wd(Jd,rd,Rd)}};La=function(Rd,wd){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(Rd,wd)};Ua=function(Rd,wd,Jd,rd){function Md(Te){return Te instanceof Jd?
Te:new Jd(function(of){of(Te)})}return new (Jd||=Promise)(function(Te,of){function lg(Xg){try{wf(rd.next(Xg))}catch(Xf){of(Xf)}}function Fg(Xg){try{wf(rd["throw"](Xg))}catch(Xf){of(Xf)}}function wf(Xg){Xg.done?Te(Xg.value):Md(Xg.value).then(lg,Fg)}wf((rd=rd.apply(Rd,wd||[])).next())})};cb=function(Rd,wd){function Jd(wf){return function(Xg){return rd([wf,Xg])}}function rd(wf){if(Te)throw new TypeError("Generator is already executing.");for(;Md;)try{if(Te=1,of&&(lg=wf[0]&2?of["return"]:wf[0]?of["throw"]||
((lg=of["return"])&&lg.call(of),0):of.next)&&!(lg=lg.call(of,wf[1])).done)return lg;if(of=0,lg)wf=[wf[0]&2,lg.value];switch(wf[0]){case 0:case 1:lg=wf;break;case 4:return Md.label++,{value:wf[1],done:!1};case 5:Md.label++;of=wf[1];wf=[0];continue;case 7:wf=Md.ops.pop();Md.trys.pop();continue;default:if(!(lg=Md.trys,lg=0<lg.length&&lg[lg.length-1])&&(6===wf[0]||2===wf[0])){Md=0;continue}if(3===wf[0]&&(!lg||wf[1]>lg[0]&&wf[1]<lg[3]))Md.label=wf[1];else if(6===wf[0]&&Md.label<lg[1])Md.label=lg[1],lg=
wf;else if(lg&&Md.label<lg[2])Md.label=lg[2],Md.ops.push(wf);else{lg[2]&&Md.ops.pop();Md.trys.pop();continue}}wf=wd.call(Rd,Md)}catch(Xg){wf=[6,Xg],of=0}finally{Te=lg=0}if(wf[0]&5)throw wf[1];return{value:wf[0]?wf[1]:void 0,done:!0}}var Md={label:0,sent:function(){if(lg[0]&1)throw lg[1];return lg[1]},trys:[],ops:[]},Te,of,lg,Fg;return Fg={next:Jd(0),"throw":Jd(1),"return":Jd(2)},"function"===typeof Symbol&&(Fg[Symbol.iterator]=function(){return this}),Fg};ib=function(Rd,wd){for(var Jd in Rd)"default"===
Jd||Object.prototype.hasOwnProperty.call(wd,Jd)||Ue(wd,Rd,Jd)};Ue=Object.create?function(Rd,wd,Jd,rd){void 0===rd&&(rd=Jd);var Md=Object.getOwnPropertyDescriptor(wd,Jd);if(!Md||("get"in Md?!wd.__esModule:Md.writable||Md.configurable))Md={enumerable:!0,get:function(){return wd[Jd]}};Object.defineProperty(Rd,rd,Md)}:function(Rd,wd,Jd,rd){void 0===rd&&(rd=Jd);Rd[rd]=wd[Jd]};nb=function(Rd){var wd="function"===typeof Symbol&&Symbol.iterator,Jd=wd&&Rd[wd],rd=0;if(Jd)return Jd.call(Rd);if(Rd&&"number"===
typeof Rd.length)return{next:function(){Rd&&rd>=Rd.length&&(Rd=void 0);return{value:Rd&&Rd[rd++],done:!Rd}}};throw new TypeError(wd?"Object is not iterable.":"Symbol.iterator is not defined.");};Pb=function(Rd,wd){var Jd="function"===typeof Symbol&&Rd[Symbol.iterator];if(!Jd)return Rd;Rd=Jd.call(Rd);var rd,Md=[];try{for(;(void 0===wd||0<wd--)&&!(rd=Rd.next()).done;)Md.push(rd.value)}catch(of){var Te={error:of}}finally{try{rd&&!rd.done&&(Jd=Rd["return"])&&Jd.call(Rd)}finally{if(Te)throw Te.error;}}return Md};
Sb=function(){for(var Rd=[],wd=0;wd<arguments.length;wd++)Rd=Rd.concat(Pb(arguments[wd]));return Rd};Nb=function(){for(var Rd=0,wd=0,Jd=arguments.length;wd<Jd;wd++)Rd+=arguments[wd].length;Rd=Array(Rd);var rd=0;for(wd=0;wd<Jd;wd++)for(var Md=arguments[wd],Te=0,of=Md.length;Te<of;Te++,rd++)Rd[rd]=Md[Te];return Rd};lc=function(Rd,wd,Jd){if(Jd||2===arguments.length)for(var rd=0,Md=wd.length,Te;rd<Md;rd++)!Te&&rd in wd||(Te||=Array.prototype.slice.call(wd,0,rd),Te[rd]=wd[rd]);return Rd.concat(Te||Array.prototype.slice.call(wd))};
yc=function(Rd){return this instanceof yc?(this.v=Rd,this):new yc(Rd)};bc=function(Rd,wd,Jd){function rd(Xf){Fg[Xf]&&(wf[Xf]=function(jh){return new Promise(function(zh,qj){1<Xg.push([Xf,jh,zh,qj])||Md(Xf,jh)})})}function Md(Xf,jh){try{var zh=Fg[Xf](jh);zh.value instanceof yc?Promise.resolve(zh.value.v).then(Te,of):lg(Xg[0][2],zh)}catch(qj){lg(Xg[0][3],qj)}}function Te(Xf){Md("next",Xf)}function of(Xf){Md("throw",Xf)}function lg(Xf,jh){(Xf(jh),Xg.shift(),Xg.length)&&Md(Xg[0][0],Xg[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");
var Fg=Jd.apply(Rd,wd||[]),wf,Xg=[];return wf={},rd("next"),rd("throw"),rd("return"),wf[Symbol.asyncIterator]=function(){return this},wf};qc=function(Rd){function wd(Md,Te){Jd[Md]=Rd[Md]?function(of){return(rd=!rd)?{value:yc(Rd[Md](of)),done:"return"===Md}:Te?Te(of):of}:Te}var Jd,rd;return Jd={},wd("next"),wd("throw",function(Md){throw Md;}),wd("return"),Jd[Symbol.iterator]=function(){return this},Jd};mc=function(Rd){function wd(Te){Md[Te]=Rd[Te]&&function(of){return new Promise(function(lg,Fg){of=
Rd[Te](of);Jd(lg,Fg,of.done,of.value)})}}function Jd(Te,of,lg,Fg){Promise.resolve(Fg).then(function(wf){Te({value:wf,done:lg})},of)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rd=Rd[Symbol.asyncIterator],Md;return rd?rd.call(Rd):(Rd="function"===typeof nb?nb(Rd):Rd[Symbol.iterator](),Md={},wd("next"),wd("throw"),wd("return"),Md[Symbol.asyncIterator]=function(){return this},Md)};Pc=function(Rd,wd){Object.defineProperty?Object.defineProperty(Rd,"raw",{value:wd}):
Rd.raw=wd;return Rd};var vf=Object.create?function(Rd,wd){Object.defineProperty(Rd,"default",{enumerable:!0,value:wd})}:function(Rd,wd){Rd["default"]=wd};Uc=function(Rd){if(Rd&&Rd.__esModule)return Rd;var wd={};if(null!=Rd)for(var Jd in Rd)"default"!==Jd&&Object.prototype.hasOwnProperty.call(Rd,Jd)&&Ue(wd,Rd,Jd);vf(wd,Rd);return wd};Ed=function(Rd){return Rd&&Rd.__esModule?Rd:{"default":Rd}};Ud=function(Rd,wd,Jd,rd){if("a"===Jd&&!rd)throw new TypeError("Private accessor was defined without a getter");
if("function"===typeof wd?Rd!==wd||!rd:!wd.has(Rd))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===Jd?rd:"a"===Jd?rd.call(Rd):rd?rd.value:wd.get(Rd)};ff=function(Rd,wd,Jd,rd,Md){if("m"===rd)throw new TypeError("Private method is not writable");if("a"===rd&&!Md)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof wd?Rd!==wd||!Md:!wd.has(Rd))throw new TypeError("Cannot write private member to an object whose class did not declare it");
return"a"===rd?Md.call(Rd,Jd):Md?Md.value=Jd:wd.set(Rd,Jd),Jd};oe=function(Rd,wd){if(null===wd||"object"!==typeof wd&&"function"!==typeof wd)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof Rd?wd===Rd:Rd.has(wd)};Bf("__extends",k);Bf("__assign",N);Bf("__rest",ea);Bf("__decorate",ka);Bf("__param",sa);Bf("__metadata",La);Bf("__awaiter",Ua);Bf("__generator",cb);Bf("__exportStar",ib);Bf("__createBinding",Ue);Bf("__values",nb);Bf("__read",Pb);Bf("__spread",Sb);Bf("__spreadArrays",
Nb);Bf("__spreadArray",lc);Bf("__await",yc);Bf("__asyncGenerator",bc);Bf("__asyncDelegator",qc);Bf("__asyncValues",mc);Bf("__makeTemplateObject",Pc);Bf("__importStar",Uc);Bf("__importDefault",Ed);Bf("__classPrivateFieldGet",Ud);Bf("__classPrivateFieldSet",ff);Bf("__classPrivateFieldIn",oe)})}}),Hq={};((a,d)=>{for(var k in d)og(a,k,{get:d[k],enumerable:!0})})(Hq,{App:()=>JD,PreviewManager:()=>op,generateJSXFromModel:()=>ao,generateSVGFromModel:()=>Jn});Va.exports=(a=>Om(og({},"__esModule",{value:!0}),
a))(Hq);var os=(a=>{a.Yellow="yellow";a.Red="red";a.Pink="pink";a.Green="green";a.Blue="blue";a.Purple="purple";a.Gray="gray";a.Default="";return a})(os||{}),Up=(a=>{a.Box="box";a.Ellipse="ellipse";a.Polygon="polygon";return a})(Up||{}),nr,Iu=new Uint8Array(16),Ng=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,El=[];for(let a=0;256>a;++a)El.push((a+256).toString(16).slice(1));var st,bo,Wo=0,Iq=0,fk=function(a,d,k){k=d&&k||0;const N=
d||Array(16);a=a||{};let ea=a.node||st;var ka=void 0!==a.clockseq?a.clockseq:bo;if(null==ea||null==ka){var sa=a.random||(a.rng||w)();null==ea&&(ea=st=[sa[0]|1,sa[1],sa[2],sa[3],sa[4],sa[5]]);null==ka&&(ka=bo=(sa[6]<<8|sa[7])&16383)}sa=void 0!==a.msecs?a.msecs:Date.now();let La=void 0!==a.nsecs?a.nsecs:Iq+1;const Ua=sa-Wo+(La-Iq)/1E4;0>Ua&&void 0===a.clockseq&&(ka=ka+1&16383);(0>Ua||sa>Wo)&&void 0===a.nsecs&&(La=0);if(1E4<=La)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");Wo=sa;Iq=
La;bo=ka;sa+=122192928E5;a=(1E4*(sa&268435455)+La)%4294967296;N[k++]=a>>>24&255;N[k++]=a>>>16&255;N[k++]=a>>>8&255;N[k++]=a&255;a=sa/4294967296*1E4&268435455;N[k++]=a>>>8&255;N[k++]=a&255;N[k++]=a>>>24&15|16;N[k++]=a>>>16&255;N[k++]=ka>>>8|128;N[k++]=ka&255;for(ka=0;6>ka;++ka)N[k+ka]=ea[ka];return d||Y(N)},Dh=class{static clamp(a,d,k){return Math.max(d,"undefined"!==typeof k?Math.min(a,k):a)}static clampV(a,d,k){return a.map(N=>k?Dh.clamp(N,d,k):Dh.clamp(N,d))}static cross(a,d,k){return(d[0]-a[0])*
(k[1]-a[1])-(k[0]-a[0])*(d[1]-a[1])}static snap(a,d=1){return[Math.round(a[0]/d)*d,Math.round(a[1]/d)*d]}},Gd=Dh;Gd.neg=a=>[-a[0],-a[1]];Gd.add=(a,d)=>[a[0]+d[0],a[1]+d[1]];Gd.addScalar=(a,d)=>[a[0]+d,a[1]+d];Gd.sub=(a,d)=>[a[0]-d[0],a[1]-d[1]];Gd.subScalar=(a,d)=>[a[0]-d,a[1]-d];Gd.vec=(a,d)=>[d[0]-a[0],d[1]-a[1]];Gd.mul=(a,d)=>[a[0]*d,a[1]*d];Gd.mulV=(a,d)=>[a[0]*d[0],a[1]*d[1]];Gd.div=(a,d)=>[a[0]/d,a[1]/d];Gd.divV=(a,d)=>[a[0]/d[0],a[1]/d[1]];Gd.per=a=>[a[1],-a[0]];Gd.dpr=(a,d)=>a[0]*d[0]+a[1]*
d[1];Gd.cpr=(a,d)=>a[0]*d[1]-d[0]*a[1];Gd.len2=a=>a[0]*a[0]+a[1]*a[1];Gd.len=a=>Math.hypot(a[0],a[1]);Gd.pry=(a,d)=>Dh.dpr(a,d)/Dh.len(d);Gd.uni=a=>Dh.div(a,Dh.len(a));Gd.normalize=a=>Dh.uni(a);Gd.tangent=(a,d)=>Dh.uni(Dh.sub(a,d));Gd.dist2=(a,d)=>Dh.len2(Dh.sub(a,d));Gd.dist=(a,d)=>Math.hypot(a[1]-d[1],a[0]-d[0]);Gd.fastDist=(a,d)=>{a=[d[0]-a[0],d[1]-a[1]];d=[Math.abs(a[0]),Math.abs(a[1])];let k=1/Math.max(d[0],d[1]);k*=1.29289-(d[0]+d[1])*k*.29289;return[a[0]*k,a[1]*k]};Gd.ang=(a,d)=>Math.atan2(Dh.cpr(a,
d),Dh.dpr(a,d));Gd.angle=(a,d)=>Math.atan2(d[1]-a[1],d[0]-a[0]);Gd.med=(a,d)=>Dh.mul(Dh.add(a,d),.5);Gd.rot=(a,d=0)=>[a[0]*Math.cos(d)-a[1]*Math.sin(d),a[0]*Math.sin(d)+a[1]*Math.cos(d)];Gd.rotWith=(a,d,k=0)=>{if(0===k)return a;const N=Math.sin(k);k=Math.cos(k);const ea=a[0]-d[0];a=a[1]-d[1];return[ea*k-a*N+d[0],ea*N+a*k+d[1]]};Gd.isEqual=(a,d)=>a[0]===d[0]&&a[1]===d[1];Gd.lrp=(a,d,k)=>Dh.add(a,Dh.mul(Dh.sub(d,a),k));Gd.int=(a,d,k,N,ea=1)=>{k=(Dh.clamp(k,N)-k)/(N-k);return Dh.add(Dh.mul(a,1-k),Dh.mul(d,
ea))};Gd.ang3=(a,d,k)=>{a=Dh.vec(d,a);d=Dh.vec(d,k);return Dh.ang(a,d)};Gd.abs=a=>[Math.abs(a[0]),Math.abs(a[1])];Gd.rescale=(a,d)=>{const k=Dh.len(a);return[d*a[0]/k,d*a[1]/k]};Gd.isLeft=(a,d,k)=>(d[0]-a[0])*(k[1]-a[1])-(k[0]-a[0])*(d[1]-a[1]);Gd.clockwise=(a,d,k)=>0<Dh.isLeft(a,d,k);Gd.toFixed=a=>a.map(d=>Math.round(100*d)/100);Gd.nearestPointOnLineThroughPoint=(a,d,k)=>Dh.add(a,Dh.mul(d,Dh.pry(Dh.sub(k,a),d)));Gd.distanceToLineThroughPoint=(a,d,k)=>Dh.dist(k,Dh.nearestPointOnLineThroughPoint(a,
d,k));Gd.nearestPointOnLineSegment=(a,d,k,N=!0)=>{const ea=Dh.uni(Dh.sub(d,a));k=Dh.add(a,Dh.mul(ea,Dh.pry(Dh.sub(k,a),ea)));if(N){if(k[0]<Math.min(a[0],d[0]))return a[0]<d[0]?a:d;if(k[0]>Math.max(a[0],d[0]))return a[0]>d[0]?a:d;if(k[1]<Math.min(a[1],d[1]))return a[1]<d[1]?a:d;if(k[1]>Math.max(a[1],d[1]))return a[1]>d[1]?a:d}return k};Gd.distanceToLineSegment=(a,d,k,N=!0)=>Dh.dist(k,Dh.nearestPointOnLineSegment(a,d,k,N));Gd.nudge=(a,d,k)=>Dh.isEqual(a,d)?a:Dh.add(a,Dh.mul(Dh.uni(Dh.sub(d,a)),k));
Gd.nudgeAtAngle=(a,d,k)=>[Math.cos(d)*k+a[0],Math.sin(d)*k+a[1]];Gd.toPrecision=(a,d=4)=>[+a[0].toPrecision(d),+a[1].toPrecision(d)];Gd.pointsBetween=(a,d,k=6)=>Array.from(Array(k)).map((N,ea)=>{N=ea/(k-1);ea=Math.min(1,.5+Math.abs(.5-N));return[...Dh.lrp(a,d,N),ea]});Gd.slope=(a,d)=>a[0]===d[0]?NaN:(a[1]-d[1])/(a[0]-d[0]);Gd.toAngle=a=>{a=Math.atan2(a[1],a[0]);return 0>a?a+2*Math.PI:a};Gd.max=(...a)=>[Math.max(...a.map(d=>d[0])),Math.max(...a.map(d=>d[1]))];Gd.min=(...a)=>[Math.min(...a.map(d=>d[0])),
Math.min(...a.map(d=>d[1]))];var ge=Gd,Ef=class{static getRectangleSides(a,d,k=0){const N=[a[0]+d[0]/2,a[1]+d[1]/2],ea=Gd.rotWith(a,N,k),ka=Gd.rotWith(Gd.add(a,[d[0],0]),N,k),sa=Gd.rotWith(Gd.add(a,d),N,k);a=Gd.rotWith(Gd.add(a,[0,d[1]]),N,k);return[["top",[ea,ka]],["right",[ka,sa]],["bottom",[sa,a]],["left",[a,ea]]]}static getBoundsSides(a){return Ef.getRectangleSides([a.minX,a.minY],[a.width,a.height])}static expandBounds(a,d){return{minX:a.minX-d,minY:a.minY-d,maxX:a.maxX+d,maxY:a.maxY+d,width:a.width+
2*d,height:a.height+2*d}}static boundsCollide(a,d){return!(a.maxX<d.minX||a.minX>d.maxX||a.maxY<d.minY||a.minY>d.maxY)}static boundsContain(a,d){return Array.isArray(d)?a.minX<d[0]&&a.minY<d[1]&&a.maxY>d[1]&&a.maxX>d[0]:a.minX<d.minX&&a.minY<d.minY&&a.maxY>d.maxY&&a.maxX>d.maxX}static boundsContained(a,d){return Ef.boundsContain(d,a)}static boundsAreEqual(a,d){return!(d.maxX!==a.maxX||d.minX!==a.minX||d.maxY!==a.maxY||d.minY!==a.minY)}static getBoundsFromPoints(a,d=0){let k=Infinity,N=Infinity,ea=
-Infinity,ka=-Infinity;if(2>a.length)N=k=0,ka=ea=1;else for(const sa of a)k=Math.min(sa[0],k),N=Math.min(sa[1],N),ea=Math.max(sa[0],ea),ka=Math.max(sa[1],ka);return 0!==d?Ef.getBoundsFromPoints(a.map(sa=>Gd.rotWith(sa,[(k+ea)/2,(N+ka)/2],d))):{minX:k,minY:N,maxX:ea,maxY:ka,width:Math.max(1,ea-k),height:Math.max(1,ka-N)}}static centerBounds(a,d){const k=Ef.getBoundsCenter(a);return Ef.translateBounds(a,[d[0]-k[0],d[1]-k[1]])}static snapBoundsToGrid(a,d){const k=Math.round(a.minX/d)*d,N=Math.round(a.minY/
d)*d,ea=Math.round(a.maxX/d)*d;a=Math.round(a.maxY/d)*d;return{minX:k,minY:N,maxX:ea,maxY:a,width:Math.max(1,ea-k),height:Math.max(1,a-N)}}static translateBounds(a,d){return{minX:a.minX+d[0],minY:a.minY+d[1],maxX:a.maxX+d[0],maxY:a.maxY+d[1],width:a.width,height:a.height}}static multiplyBounds(a,d){const k=Ef.getBoundsCenter(a);return Ef.centerBounds({minX:a.minX*d,minY:a.minY*d,maxX:a.maxX*d,maxY:a.maxY*d,width:a.width*d,height:a.height*d},[k[0]*d,k[1]*d])}static divideBounds(a,d){const k=Ef.getBoundsCenter(a);
return Ef.centerBounds({minX:a.minX/d,minY:a.minY/d,maxX:a.maxX/d,maxY:a.maxY/d,width:a.width/d,height:a.height/d},[k[0]/d,k[1]/d])}static getRotatedBounds(a,d=0){a=Ef.getRotatedCorners(a,d);let k=d=Infinity,N=-Infinity,ea=-Infinity;for(const ka of a)d=Math.min(ka[0],d),k=Math.min(ka[1],k),N=Math.max(ka[0],N),ea=Math.max(ka[1],ea);return{minX:d,minY:k,maxX:N,maxY:ea,width:Math.max(1,N-d),height:Math.max(1,ea-k),rotation:0}}static getRotatedEllipseBounds(a,d,k,N,ea=0){var ka=Math.cos(ea);const sa=
Math.sin(ea);ea=Math.hypot(k*ka,N*sa);ka=Math.hypot(k*sa,N*ka);return{minX:a+k-ea,minY:d+N-ka,maxX:a+k+ea,maxY:d+N+ka,width:2*ea,height:2*ka}}static getExpandedBounds(a,d){const k=Math.min(a.minX,d.minX),N=Math.min(a.minY,d.minY),ea=Math.max(a.maxX,d.maxX);a=Math.max(a.maxY,d.maxY);return{minX:k,minY:N,maxX:ea,maxY:a,width:Math.abs(ea-k),height:Math.abs(a-N)}}static getCommonBounds(a){if(2>a.length)return a[0];let d=a[0];for(let k=1;k<a.length;k++)d=Ef.getExpandedBounds(d,a[k]);return d}static getRotatedCorners(a,
d=0){const k=[a.minX+a.width/2,a.minY+a.height/2];a=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]];return d?a.map(N=>Gd.rotWith(N,k,d)):a}static getTransformedBoundingBox(a,d,k,N=0,ea=!1){const [ka,sa]=[a.minX,a.minY],[La,Ua]=[a.maxX,a.maxY];let [cb,ib]=[a.minX,a.minY],[nb,Pb]=[a.maxX,a.maxY];if("center"===d)return{minX:cb+k[0],minY:ib+k[1],maxX:nb+k[0],maxY:Pb+k[1],width:nb-cb,height:Pb-ib,scaleX:1,scaleY:1};const [Sb,Nb]=Gd.rot(k,-N);switch(d){case "top_edge":case "top_left_corner":case "top_right_corner":ib+=
Nb;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Pb+=Nb}switch(d){case "left_edge":case "top_left_corner":case "bottom_left_corner":cb+=Sb;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":nb+=Sb}var lc=La-ka;const yc=Ua-sa;var bc=(nb-cb)/lc,qc=(Pb-ib)/yc;a=0>bc;k=0>qc;var mc=Math.abs(nb-cb),Pc=Math.abs(Pb-ib);if(ea)switch(ea=lc/yc,lc=ea<mc/Pc,qc=1/ea*(0>qc?1:-1)*mc,bc=Pc*(0>bc?1:-1)*ea,d){case "top_left_corner":lc?ib=Pb+qc:cb=nb+bc;break;case "top_right_corner":lc?
ib=Pb+qc:nb=cb-bc;break;case "bottom_right_corner":lc?Pb=ib-qc:nb=cb-bc;break;case "bottom_left_corner":lc?Pb=ib-qc:cb=nb+bc;break;case "bottom_edge":case "top_edge":mc=(cb+nb)/2;Pc*=ea;cb=mc-Pc/2;nb=mc+Pc/2;break;case "left_edge":case "right_edge":Pc=(ib+Pb)/2,mc/=ea,ib=Pc-mc/2,Pb=Pc+mc/2}if(0!==N%(2*Math.PI)){mc=[0,0];Pc=Gd.med([ka,sa],[La,Ua]);bc=Gd.med([cb,ib],[nb,Pb]);switch(d){case "top_left_corner":mc=Gd.sub(Gd.rotWith([nb,Pb],bc,N),Gd.rotWith([La,Ua],Pc,N));break;case "top_right_corner":mc=
Gd.sub(Gd.rotWith([cb,Pb],bc,N),Gd.rotWith([ka,Ua],Pc,N));break;case "bottom_right_corner":mc=Gd.sub(Gd.rotWith([cb,ib],bc,N),Gd.rotWith([ka,sa],Pc,N));break;case "bottom_left_corner":mc=Gd.sub(Gd.rotWith([nb,ib],bc,N),Gd.rotWith([La,sa],Pc,N));break;case "top_edge":mc=Gd.sub(Gd.rotWith(Gd.med([cb,Pb],[nb,Pb]),bc,N),Gd.rotWith(Gd.med([ka,Ua],[La,Ua]),Pc,N));break;case "left_edge":mc=Gd.sub(Gd.rotWith(Gd.med([nb,ib],[nb,Pb]),bc,N),Gd.rotWith(Gd.med([La,sa],[La,Ua]),Pc,N));break;case "bottom_edge":mc=
Gd.sub(Gd.rotWith(Gd.med([cb,ib],[nb,ib]),bc,N),Gd.rotWith(Gd.med([ka,sa],[La,sa]),Pc,N));break;case "right_edge":mc=Gd.sub(Gd.rotWith(Gd.med([cb,ib],[cb,Pb]),bc,N),Gd.rotWith(Gd.med([ka,sa],[ka,Ua]),Pc,N))}[cb,ib]=Gd.sub([cb,ib],mc);[nb,Pb]=Gd.sub([nb,Pb],mc)}nb<cb&&([nb,cb]=[cb,nb]);Pb<ib&&([Pb,ib]=[ib,Pb]);return{minX:cb,minY:ib,maxX:nb,maxY:Pb,width:nb-cb,height:Pb-ib,scaleX:(nb-cb)/(La-ka||1)*(a?-1:1),scaleY:(Pb-ib)/(Ua-sa||1)*(k?-1:1)}}static getTransformAnchor(a,d,k){let N=a;switch(a){case "top_left_corner":N=
d&&k?"bottom_right_corner":d?"top_right_corner":k?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":N=d&&k?"bottom_left_corner":d?"top_left_corner":k?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":N=d&&k?"top_left_corner":d?"bottom_left_corner":k?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":N=d&&k?"top_right_corner":d?"bottom_right_corner":k?"top_left_corner":"top_right_corner"}return N}static getRelativeTransformedBoundingBox(a,
d,k,N,ea){N=a.minX+(N?d.maxX-k.maxX:k.minX-d.minX)/d.width*a.width;ea=a.minY+(ea?d.maxY-k.maxY:k.minY-d.minY)/d.height*a.height;const ka=k.width/d.width*a.width;a=k.height/d.height*a.height;return{minX:N,minY:ea,maxX:N+ka,maxY:ea+a,width:ka,height:a}}static getRotatedSize(a,d){const k=Gd.div(a,2);a=[[0,0],[a[0],0],a,[0,a[1]]].map(N=>Gd.rotWith(N,k,d));a=Ef.getBoundsFromPoints(a);return[a.width,a.height]}static getBoundsCenter(a){return[a.minX+a.width/2,a.minY+a.height/2]}static getBoundsWithCenter(a){const d=
Ef.getBoundsCenter(a);return uf(me({},a),{midX:d[0],midY:d[1]})}static getCommonTopLeft(a){const d=[Infinity,Infinity];a.forEach(k=>{d[0]=Math.min(d[0],k[0]);d[1]=Math.min(d[1],k[1])});return d}static getTLSnapPoints(a,d,k){const N=me({},a);a=[0,0];const ea=[],ka={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},sa=["midX","minX","maxX"],La=["midY","minY","maxY"];d=d.map(Pb=>
{const Sb=sa.flatMap((lc,yc)=>sa.map((bc,qc)=>{const mc=N[lc]-Pb[bc];return{f:lc,t:bc,gap:mc,distance:Math.abs(mc),isCareful:0===yc||3===yc+qc}})),Nb=La.flatMap((lc,yc)=>La.map((bc,qc)=>{const mc=N[lc]-Pb[bc];return{f:lc,t:bc,gap:mc,distance:Math.abs(mc),isCareful:0===yc||3===yc+qc}}));return[Pb,Sb,Nb]});let Ua=Infinity,cb=Infinity,ib=Infinity,nb=Infinity;d.forEach(([,Pb,Sb])=>{Pb.forEach(Nb=>{Nb.distance<k&&Nb.distance<ib&&(ib=Nb.distance,Ua=Nb.gap)});Sb.forEach(Nb=>{Nb.distance<k&&Nb.distance<nb&&
(nb=Nb.distance,cb=Nb.gap)})});d.forEach(([Pb,Sb,Nb])=>{Infinity!==Ua&&Sb.forEach(lc=>{2>Math.abs(lc.gap-Ua)&&(ka[lc.f]=uf(me({},ka[lc.f]),{isSnapped:!0,to:Pb[lc.t],B:Pb,distance:lc.distance}))});Infinity!==cb&&Nb.forEach(lc=>{2>Math.abs(lc.gap-cb)&&(ka[lc.f]=uf(me({},ka[lc.f]),{isSnapped:!0,to:Pb[lc.t],B:Pb,distance:lc.distance}))})});a[0]=Infinity===Ua?0:Ua;a[1]=Infinity===cb?0:cb;N.minX-=a[0];N.midX-=a[0];N.maxX-=a[0];N.minY-=a[1];N.midY-=a[1];N.maxY-=a[1];sa.forEach(Pb=>{Pb=ka[Pb];if(Pb.isSnapped){var {id:Sb,
B:Nb}=Pb;Pb=N[Sb];ea.push("minX"===Sb?[[Pb,N.midY],[Pb,Nb.minY],[Pb,Nb.maxY]]:[[Pb,N.minY],[Pb,N.maxY],[Pb,Nb.minY],[Pb,Nb.maxY]])}});La.forEach(Pb=>{Pb=ka[Pb];if(Pb.isSnapped){var {id:Sb,B:Nb}=Pb;Pb=N[Sb];ea.push("midY"===Sb?[[N.midX,Pb],[Nb.minX,Pb],[Nb.maxX,Pb]]:[[N.minX,Pb],[N.maxX,Pb],[Nb.minX,Pb],[Nb.maxX,Pb]])}});return{offset:a,snapLines:ea}}static ensureRatio(a,d){const {width:k,height:N}=a,ea=me({},a);k/N<d?(ea.width=N*d,ea.maxX+=k-a.width):(ea.height=k/d,ea.maxY+=N-a.height);return ea}static getDistributions(a,
d){var k=a.map(ka=>{const sa=ka.getBounds();return{id:ka.id,point:[sa.minX,sa.minY],bounds:sa,center:ka.getCenter()}});a=k.length;var N=Ef.getCommonBounds(k.map(({bounds:ka})=>ka));const ea=[];switch(d){case "horizontal":d=k.reduce((ka,sa)=>ka+sa.bounds.width,0);if(d>N.width){const ka=k.sort((cb,ib)=>cb.bounds.minX-ib.bounds.minX)[0],sa=k.sort((cb,ib)=>ib.bounds.maxX-cb.bounds.maxX)[0];N=k.filter(cb=>cb!==ka&&cb!==sa).sort((cb,ib)=>cb.center[0]-ib.center[0]);const La=(sa.center[0]-ka.center[0])/(a-
1),Ua=ka.center[0]+La;N.forEach(({id:cb,point:ib,bounds:nb},Pb)=>{ea.push({id:cb,prev:ib,next:[Ua+La*Pb-nb.width/2,nb.minY]})})}else{k=k.sort((La,Ua)=>La.center[0]-Ua.center[0]);let ka=N.minX;const sa=(N.width-d)/(a-1);k.forEach(({id:La,point:Ua,bounds:cb})=>{ea.push({id:La,prev:Ua,next:[ka,cb.minY]});ka+=cb.width+sa})}break;case "vertical":if(d=k.reduce((ka,sa)=>ka+sa.bounds.height,0),d>N.height){const ka=k.sort((cb,ib)=>cb.bounds.minY-ib.bounds.minY)[0],sa=k.sort((cb,ib)=>ib.bounds.maxY-cb.bounds.maxY)[0];
N=k.filter(cb=>cb!==ka&&cb!==sa).sort((cb,ib)=>cb.center[1]-ib.center[1]);const La=(sa.center[1]-ka.center[1])/(a-1),Ua=ka.center[1]+La;N.forEach(({id:cb,point:ib,bounds:nb},Pb)=>{ea.push({id:cb,prev:ib,next:[nb.minX,Ua+La*Pb-nb.height/2]})})}else{k=k.sort((La,Ua)=>La.center[1]-Ua.center[1]);let ka=N.minY;const sa=(N.height-d)/(a-1);k.forEach(({id:La,point:Ua,bounds:cb})=>{ea.push({id:La,prev:Ua,next:[cb.minX,ka]});ka+=cb.height+sa})}}return ea}static getPackedDistributions(a){const d=Ef.getCommonBounds(a.map(({bounds:ea})=>
ea)),k=[d.minX,d.minY],N=Object.fromEntries(a.map(ea=>[ea.id,[ea.bounds.minX,ea.bounds.minY]]));a=a.filter(ea=>{var ka,sa,La,Ua;return!((null==(sa=null==(ka=ea.props.handles)?void 0:ka.start)?0:sa.bindingId)||(null==(Ua=null==(La=ea.props.handles)?void 0:La.end)?0:Ua.bindingId))}).map(ea=>{const ka=ea.getBounds();return{id:ea.id,w:ka.width+16,h:ka.height+16,x:ka.minX,y:ka.minY}});y(a);return a.map(({id:ea,x:ka,y:sa})=>({id:ea,prev:N[ea],next:[ka+k[0],sa+k[1]]}))}},rp=class{static pointInCircle(a,
d,k){return Gd.dist(a,d)<=k}static pointInEllipse(a,d,k,N,ea=0){ea=ea||0;var ka=Math.cos(ea);ea=Math.sin(ea);d=Gd.sub(a,d);a=ka*d[0]+ea*d[1];ka=ea*d[0]-ka*d[1];return 1>=a*a/(k*k)+ka*ka/(N*N)}static pointInRect(a,d){return!(a[0]<d[0]||a[0]>a[0]+d[0]||a[1]<d[1]||a[1]>a[1]+d[1])}static pointInPolygon(a,d){let k=0;d.forEach((N,ea)=>{ea=d[(ea+1)%d.length];N[1]<=a[1]?ea[1]>a[1]&&0<Gd.cross(N,ea,a)&&(k+=1):ea[1]<=a[1]&&0>Gd.cross(N,ea,a)&&--k});return 0!==k}static pointInBounds(a,d){return!(a[0]<d.minX||
a[0]>d.maxX||a[1]<d.minY||a[1]>d.maxY)}static pointInPolyline(a,d,k=3){for(let N=1;N<d.length;N++)if(Gd.distanceToLineSegment(d[N-1],d[N],a)<k)return!0;return!1}static _getSqSegDist(a,d,k){let N=d[0];d=d[1];let ea=k[0]-N,ka=k[1]-d;if(0!==ea||0!==ka){const sa=((a[0]-N)*ea+(a[1]-d)*ka)/(ea*ea+ka*ka);1<sa?(N=k[0],d=k[1]):0<sa&&(N+=ea*sa,d+=ka*sa)}ea=a[0]-N;ka=a[1]-d;return ea*ea+ka*ka}static _simplifyStep(a,d,k,N,ea){let ka=N,sa=-1;for(let La=d+1;La<k;La++){const Ua=rp._getSqSegDist(a[La],a[d],a[k]);
Ua>ka&&(sa=La,ka=Ua)}-1<sa&&ka>N&&(1<sa-d&&rp._simplifyStep(a,d,sa,N,ea),ea.push(a[sa]),1<k-sa&&rp._simplifyStep(a,sa,k,N,ea))}static simplify2(a,d=1){if(2>=a.length)return a;d*=d;var k=a[0],N=a[1];const ea=[k];for(let ka=1,sa=a.length;ka<sa;ka++)N=a[ka],(N[0]-k[0])*(N[0]-k[0])+(N[1]-k[1])*(N[1]-k[1])>d&&(ea.push(N),k=N);k!==N&&ea.push(N);k=ea.length-1;N=[ea[0]];rp._simplifyStep(ea,0,k,d,N);N.push(ea[k],a[a.length-1]);return N}static pointNearToPolyline(a,d,k=8){const N=d.length;for(let ea=1;ea<N;ea++)if(Gd.distanceToLineSegment(d[ea-
1],d[ea],a)<k)return!0;return!1}},vk=rp;kb(vk,"simplify",(a,d=1)=>{var k=a.length;const N=a[0],ea=a[k-1],[ka,sa]=N,[La,Ua]=ea;if(2<k){let cb=0,ib=0;const nb=Gd.len2([Ua-sa,La-ka]);for(let Pb=1;Pb<k-1;Pb++){const [Sb,Nb]=a[Pb],lc=Math.pow(Sb*(Ua-sa)+ka*(Nb-Ua)+La*(sa-Nb),2)/nb;cb>lc||(cb=lc,ib=Pb)}if(cb>d)return k=rp.simplify(a.slice(0,ib+1),d),a=rp.simplify(a.slice(ib+1),d),k.concat(a.slice(1))}return[N,ea]});var Fl=Math.PI,Ln=Fl/2,Kk=2*Fl,Jq={},ut={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",
right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},ym=class{static circleFromThreePoints(a,d,k){const [N,ea]=a,[ka,sa]=d,[La,Ua]=k;d=N*(sa-Ua)-ea*(ka-La)+ka*Ua-La*sa;a=-((N*N+ea*ea)*(Ua-sa)+(ka*ka+
sa*sa)*(ea-Ua)+(La*La+Ua*Ua)*(sa-ea))/(2*d);d=-((N*N+ea*ea)*(ka-La)+(ka*ka+sa*sa)*(La-N)+(La*La+Ua*Ua)*(N-ka))/(2*d);return[a,d,Math.hypot(a-N,d-ea)]}static perimeterOfEllipse(a,d){const k=Math.pow(a-d,2)/Math.pow(a+d,2);return Fl*(a+d)*(1+3*k/(10+Math.sqrt(4-3*k)))}static shortAngleDist(a,d){a=(d-a)%Kk;return 2*a%Kk-a}static longAngleDist(a,d){return Kk-ym.shortAngleDist(a,d)}static lerpAngles(a,d,k){return a+ym.shortAngleDist(a,d)*k}static angleDelta(a,d){return ym.shortAngleDist(a,d)}static getSweep(a,
d,k){return ym.angleDelta(ge.angle(a,d),ge.angle(a,k))}static clampRadians(a){return(Kk+a)%Kk}static snapAngleToSegments(a,d){d=Kk/d;a=Math.floor((ym.clampRadians(a)+d/2)/d)*d%Kk;a<Fl&&(a+=Kk);a>Fl&&(a-=Kk);return a}static isAngleBetween(a,d,k){if(k===a||k===d)return!0;d=(d-a+Ln)%Ln;return d<=Fl!==(k-a+Ln)%Ln>d}static degreesToRadians(a){return a*Fl/180}static radiansToDegrees(a){return 180*a/Fl}static getArcLength(a,d,k,N){a=ym.getSweep(a,k,N);return a/Kk*Kk*d}static getSweepFlag(a,d,k){k=ge.angle(a,
k);return 0<(ge.angle(a,d)-k+3*Fl)%Kk-Fl?0:1}static getLargeArcFlag(a,d,k){a=ge.angle(k,a);d=(ge.angle(k,d)-a+3*Fl)%Kk-Fl;return Math.abs(d)>Ln?0:1}static getArcDashOffset(a,d,k,N,ea){const ka=ym.getSweepFlag(a,k,N);d=ym.getArcLength(a,d,k,N);return-(0>ka?d:Kk*a[2]-d)/2+ea}static getEllipseDashOffset(a,d){return-(Kk*a[2])/2+-d}static radiansToCardinalDirection(a){return a<.25*Math.PI?"north":a<.75*Math.PI?"east":a<1.25*Math.PI?"south":a<1.75*Math.PI?"west":"north"}},al=class{static getPolygonCentroid(a){var d=
a.map(k=>k[0]);a=a.map(k=>k[1]);d=Math.min(...d)+Math.max(...d);a=Math.min(...a)+Math.max(...a);return[d?d/2:0,a?a/2:0]}};kb(al,"getEdges",a=>{const d=a.length;return a.map((k,N)=>[k,a[(N+1)%d]])});kb(al,"getEdgeOutwardNormal",(a,d)=>ge.per(ge.uni(ge.sub(d,a))));kb(al,"getEdgeInwardNormal",(a,d)=>ge.neg(al.getEdgeOutwardNormal(a,d)));kb(al,"getOffsetEdge",(a,d,k)=>{k=ge.mul(ge.per(ge.uni(ge.sub(d,a))),k);return[ge.add(a,k),ge.add(d,k)]});kb(al,"getOffsetEdges",(a,d)=>a.map(([k,N])=>al.getOffsetEdge(k,
N,d)));kb(al,"getOffsetPolygon",(a,d)=>{if(1>a.length)throw Error("Expected at least one point.");if(1===a.length)return a=a[0],[ge.add(a,[-d,-d]),ge.add(a,[d,-d]),ge.add(a,[d,d]),ge.add(a,[-d,d])];if(2===a.length){const [k,N]=a;return[...al.getOffsetEdge(k,N,d),...al.getOffsetEdge(N,k,d)]}return al.getOffsetEdges(al.getEdges(a),d).flatMap((k,N,ea)=>{{N=ea[(N+1)%ea.length];const ka=Gd.slope(k[0],k[1]);ea=Gd.slope(N[0],N[1]);ka!==ea?Number.isNaN(ka)&&!Number.isNaN(ea)?k=[k[0][0],(k[0][0]-N[0][0])*
ea+N[0][1]]:Number.isNaN(ea)&&!Number.isNaN(ka)?k=[N[0][0],(N[0][0]-k[0][0])*ka+k[0][1]]:(k=(ka*k[0][0]-ea*N[0][0]+N[0][1]-k[0][1])/(ka-ea),k=[k,ea*(k-N[0][0])+N[0][1]]):k=void 0}if(void 0===k)throw Error("Expected an intersection");return k})});kb(al,"getPolygonVertices",(a,d,k=0,N=1)=>{a=ge.div(a,2);const [ea,ka]=[Math.max(1,a[0]-k),Math.max(1,a[1]-k)];k=[];for(let cb=0,ib=Kk/d;cb<d;cb++){var sa=(-Ln+cb*ib)%Kk,La=(-Ln+(cb+1)*ib)%Kk;sa=ge.add(a,[ea*Math.cos(sa),ka*Math.sin(sa)]);La=ge.add(a,[ea*
Math.cos(La),ka*Math.sin(La)]);var Ua=ge.med(sa,La);Ua=ge.nudge(Ua,a,ge.dist(a,Ua)*(1-N));k.push(sa,Ua,La)}return k});kb(al,"getTriangleVertices",(a,d=0,k=1)=>{const [N,ea]=a;var ka=1-k;a=[N/2,d/2];k=[N-d,ea-d];d=[d/2,ea-d];const sa=al.getPolygonCentroid([a,k,d]),La=ge.med(a,k),Ua=ge.med(k,d),cb=ge.med(d,a),ib=ge.dist(La,sa)*ka,nb=ge.dist(Ua,sa)*ka;ka*=ge.dist(cb,sa);return[a,ib?ge.nudge(La,sa,ib):La,k,nb?ge.nudge(Ua,sa,nb):Ua,d,ka?ge.nudge(cb,sa,ka):cb]});kb(al,"getStarVertices",(a,d,k,N=1)=>{const ea=
ge.div(d,2),ka=ge.mul(ea,N/2),sa=Kk/k/2;return Array.from(Array(2*k)).map((La,Ua)=>{La=-Ln+Ua*sa;const [cb,ib]=Ua%2?ka:ea;return ge.add(a,[cb*Math.cos(La),ib*Math.sin(La)])})});var Gu=class{static getCurvedPathForPolygon(a){if(3>a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],k=a.length;for(let N=1;N<k;N++){const [ea,ka]=a[N],[sa,La]=a[(N+1)%k];d.push(ea,ka,(ea+sa)/2,(ka+La)/2)}d.push("Z");return d.join(" ")}static getCurvedPathForPoints(a){if(3>
a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const d=["M",...a[0].slice(0,2),"Q"],k=a.length;for(let N=1;N<k-1;N++){const [ea,ka]=a[N],[sa,La]=a[N+1];d.push(ea,ka,(ea+sa)/2,(ka+La)/2)}return d.join(" ")}static getSvgPathFromStroke(a,d=!0){const k=a.length;if(4>k)return"";let N=a[0],ea=a[1];var ka=a[2];ka=`M${N[0].toFixed(2)},${N[1].toFixed(2)} Q${ea[0].toFixed(2)},${ea[1].toFixed(2)} ${((ea[0]+ka[0])/2).toFixed(2)},${((ea[1]+ka[1])/2).toFixed(2)} T`;for(let sa=2,La=k-1;sa<
La;sa++)N=a[sa],ea=a[sa+1],ka+=`${((N[0]+ea[0])/2).toFixed(2)},${((N[1]+ea[1])/2).toFixed(2)} `;d&&(ka+="Z");return ka}static getSvgPathFromStrokePoints(a,d=!1){const k=a.length;if(4>k)return"";let N=a[0].point,ea=a[1].point;var ka=a[2].point;ka=`M${N[0].toFixed(2)},${N[1].toFixed(2)} Q${ea[0].toFixed(2)},${ea[1].toFixed(2)} ${((ea[0]+ka[0])/2).toFixed(2)},${((ea[1]+ka[1])/2).toFixed(2)} T`;for(let sa=2,La=k-1;sa<La;sa++)N=a[sa].point,ea=a[sa+1].point,ka+=`${((N[0]+ea[0])/2).toFixed(2)},${((N[1]+
ea[1])/2).toFixed(2)} `;d&&(ka+="Z");return ka}};kb(Gu,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var px={},qx=Object.assign,Yp=Object.getOwnPropertyDescriptor,up=Object.defineProperty,Zp=Object.prototype,da=[];Object.freeze(da);var na={};Object.freeze(na);var Ha="undefined"!==typeof Proxy,jb=Object.toString(),Jb=function(){},oc="undefined"!==typeof Object.getOwnPropertySymbols,Oc="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:oc?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:
Object.getOwnPropertyNames,fd=Object.getOwnPropertyDescriptors||function(a){var d={};Oc(a).forEach(function(k){d[k]=Yp(a,k)});return d},Ld=Symbol("mobx-stored-annotations"),ce=Symbol("mobx administration"),Bg=function(){function a(k){void 0===k&&(k="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=Fj.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=k}var d=a.prototype;d.onBO=
function(){this.onBOL&&this.onBOL.forEach(function(k){return k()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(k){return k()})};d.reportObserved=function(){return pb(this)};d.reportChanged=function(){Yc();Gb(this);Mb()};d.toString=function(){return this.name_};return a}(),Oh=F("Atom",Bg),xf={identity:function(a,d){return a===d},structural:function(a,d){return ua(a,d)},"default":function(a,d){return Object.is?Object.is(a,d):a===d?0!==a||1/a===1/d:a!==a&&d!==d},shallow:function(a,
d){return ua(a,d,1)}},$g="override",Sh=Za(),qh={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(qh);var te=mb("observable"),Zd=mb("observable.ref",{enhancer:Oa}),re=mb("observable.shallow",{enhancer:function(a,d,k){if(void 0===a||null===a||Ie(a)||yd(a)||zr(a)||Os(a))return a;if(Array.isArray(a))return cf.array(a,{name:k,deep:!1});if(M(a))return cf.object(a,void 0,{name:k,deep:!1});if(J(a))return cf.map(a,{name:k,deep:!1});if(K(a))return cf.set(a,{name:k,deep:!1})}}),pf=mb("observable.struct",
{enhancer:function(a,d){return ua(a,d)?d:a}}),Af=Aa(te);Object.assign(db,Af);var ci={box:function(a,d){d=d||qh;return new Ms(a,Ta(d),d.name,!0,d.equals)},array:function(a,d){d=d||qh;return(!1===Wf.useProxies||!1===d.proxy?Fb:ob)(a,Ta(d),d.name)},map:function(a,d){d=d||qh;return new Oz(a,Ta(d),d.name)},set:function(a,d){d=d||qh;return new Pz(a,Ta(d),d.name)},object:function(a,d,k){if(!1===Wf.useProxies||!1===(null==k?void 0:k.proxy))k=Od({},k);else{var N={},ea,ka;B();N=Od(N,k);k=null!=(ka=(ea=N[ce]).proxy_)?
ka:ea.proxy_=new Proxy(N,pE)}return we(k,a,d)},ref:Aa(Zd),shallow:Aa(re),deep:Af,struct:Aa(pf)},cf=qx(db,ci),Xh=Ya("computed"),Ai=Ya("computed.struct",{equals:xf.structural}),Kf=function(a,d){if(I(d))return Ja(a,d,Xh);if(M(a))return Aa(Ya("computed",a));d=M(d)?d:{};d.get=a;d.name||(d.name=a.name||"");return new Pu(d)};Object.assign(Kf,Xh);Kf.struct=Aa(Ai);var qp,Ov,Rv=0,cE=1,dE=null!=(qp=null==(Ov=Yp(function(){},"name"))?void 0:Ov.configurable)?qp:!1,Iz={value:"action",configurable:!0,writable:!1,
enumerable:!1};var eE=Symbol.toPrimitive;var Ms=function(a){function d(N,ea,ka,sa,La){void 0===ka&&(ka="ObservableValue");void 0===La&&(La=xf["default"]);sa=a.call(this,ka)||this;sa.enhancer=void 0;sa.hasUnreportedChange_=!1;sa.interceptors_=void 0;sa.changeListeners_=void 0;sa.value_=void 0;sa.dehancer=void 0;sa.enhancer=ea;sa.name_=ka;sa.equals=La;sa.value_=ea(N,void 0,ka);return sa}ha(d,a);var k=d.prototype;k.dehanceValue=function(N){return void 0!==this.dehancer?this.dehancer(N):N};k.set=function(N){N=
this.prepareNewValue_(N);N!==Wf.UNCHANGED&&this.setNewValue_(N)};k.prepareNewValue_=function(N){if(zb(this)){N=Ib(this,{object:this,type:gq,newValue:N});if(!N)return Wf.UNCHANGED;N=N.newValue}N=this.enhancer(N,this.value_,this.name_);return this.equals(this.value_,N)?Wf.UNCHANGED:N};k.setNewValue_=function(N){var ea=this.value_;this.value_=N;this.reportChanged();pd(this)&&Sd(this,{type:gq,object:this,newValue:N,oldValue:ea})};k.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};
k.intercept_=function(N){return Eb(this,N)};k.observe_=function(N,ea){ea&&N({observableKind:"value",debugObjectName:this.name_,object:this,type:gq,newValue:this.value_,oldValue:void 0});return ee(this,N)};k.raw=function(){return this.value_};k.toJSON=function(){return this.get()};k.toString=function(){return this.name_+"["+this.value_+"]"};k.valueOf=function(){return ia(this.get())};k[eE]=function(){return this.valueOf()};return d}(Bg),fE=F("ObservableValue",Ms);var gE=Symbol.toPrimitive;var Pu=function(){function a(k){this.dependenciesState_=
Fj.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=Fj.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new Ns(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=It.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=
void 0;k.get||f(31);this.derivation=k.get;this.name_=k.name||"ComputedValue";k.set&&(this.setter_=Sa("ComputedValue-setter",k.set));this.equals_=k.equals||(k.compareStructural||k.struct?xf.structural:xf["default"]);this.scope_=k.context;this.requiresReaction_=k.requiresReaction;this.keepAlive_=!!k.keepAlive}var d=a.prototype;d.onBecomeStale_=function(){gb(this)};d.onBO=function(){this.onBOL&&this.onBOL.forEach(function(k){return k()})};d.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(k){return k()})};
d.get=function(){this.isComputing_&&f(32,this.name_,this.derivation);if(0!==Wf.inBatch||0!==this.observers_.size||this.keepAlive_){if(pb(this),vc(this)){var k=Wf.trackingContext;this.keepAlive_&&!k&&(Wf.trackingContext=this);this.trackAndCompute()&&Lb(this);Wf.trackingContext=k}}else vc(this)&&(this.warnAboutUntrackedRead_(),Yc(),this.value_=this.computeValue_(!1),Mb());k=this.value_;if(k instanceof Ns)throw k.cause;return k};d.set=function(k){if(this.setter_){this.isRunningSetter_&&f(33,this.name_);
this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,k)}finally{this.isRunningSetter_=!1}}else f(34,this.name_)};d.trackAndCompute=function(){var k=this.value_,N=this.dependenciesState_===Fj.NOT_TRACKING_,ea=this.computeValue_(!0);if(k=N||k instanceof Ns||ea instanceof Ns||!this.equals_(k,ea))this.value_=ea;return k};d.computeValue_=function(k){this.isComputing_=!0;var N=Fc(!1);if(k)var ea=uc(this,this.derivation,this.scope_);else if(!0===Wf.disableErrorBoundaries)ea=this.derivation.call(this.scope_);
else try{ea=this.derivation.call(this.scope_)}catch(ka){ea=new Ns(ka)}Wf.allowStateChanges=N;this.isComputing_=!1;return ea};d.suspend_=function(){this.keepAlive_||(Jc(this),this.value_=void 0)};d.observe_=function(k,N){var ea=this,ka=!0,sa=void 0;return nc(function(){var La=ea.get();if(!ka||N){var Ua=gc();k({observableKind:"computed",debugObjectName:ea.name_,type:gq,object:ea,newValue:La,oldValue:sa});Wf.trackingDerivation=Ua}ka=!1;sa=La})};d.warnAboutUntrackedRead_=function(){};d.toString=function(){return this.name_+
"["+this.derivation.toString()+"]"};d.valueOf=function(){return ia(this.get())};d[gE]=function(){return this.valueOf()};return a}(),Qu=F("ComputedValue",Pu),Fj;(function(a){a[a.NOT_TRACKING_=-1]="NOT_TRACKING_";a[a.UP_TO_DATE_=0]="UP_TO_DATE_";a[a.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";a[a.STALE_=2]="STALE_"})(Fj||={});var It;(function(a){a[a.NONE=0]="NONE";a[a.LOG=1]="LOG";a[a.BREAK=2]="BREAK"})(It||={});var Ns=function(a){this.cause=void 0;this.cause=a},Sv=function(){this.version=6;this.UNCHANGED=
{};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=
!0},Tv=!0,Jz=!1,Wf=function(){var a=G();0<a.__mobxInstanceCount&&!a.__mobxGlobals&&(Tv=!1);a.__mobxGlobals&&a.__mobxGlobals.version!==(new Sv).version&&(Tv=!1);if(Tv){if(a.__mobxGlobals)return a.__mobxInstanceCount+=1,a.__mobxGlobals.UNCHANGED||(a.__mobxGlobals.UNCHANGED={}),a.__mobxGlobals;a.__mobxInstanceCount=1;return a.__mobxGlobals=new Sv}setTimeout(function(){Jz||f(35)},1);return new Sv}(),Jt=function(){function a(k,N,ea,ka){void 0===k&&(k="Reaction");this.requiresObservable_=this.errorHandler_=
this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=Fj.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=It.NONE;this.name_=k;this.onInvalidate_=N;this.errorHandler_=ea;this.requiresObservable_=ka}var d=a.prototype;d.onBecomeStale_=function(){this.schedule_()};d.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Wf.pendingReactions.push(this),
0<Wf.inBatch||Wf.isRunningReactions||Uv(ub))};d.isScheduled=function(){return this.isScheduled_};d.runReaction_=function(){if(!this.isDisposed_){Yc();this.isScheduled_=!1;var k=Wf.trackingContext;Wf.trackingContext=this;if(vc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(N){this.reportExceptionInDerivation_(N)}}Wf.trackingContext=k;Mb()}};d.track=function(k){if(!this.isDisposed_){Yc();this.isRunning_=!0;var N=Wf.trackingContext;Wf.trackingContext=this;k=uc(this,k,void 0);Wf.trackingContext=
N;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Jc(this);k instanceof Ns&&this.reportExceptionInDerivation_(k.cause);Mb()}};d.reportExceptionInDerivation_=function(k){var N=this;if(this.errorHandler_)this.errorHandler_(k,this);else{if(Wf.disableErrorBoundaries)throw k;Wf.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",k);Wf.globalReactionErrorHandlers.forEach(function(ea){return ea(k,N)})}};d.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||
(Yc(),Jc(this),Mb()))};d.getDisposer_=function(){var k=this.dispose.bind(this);k[ce]=this;return k};d.toString=function(){return"Reaction["+this.name_+"]"};d.trace=function(k){void 0===k&&(k=!1);gd(this,k)};return a}(),hE=100,Uv=function(a){return a()},Vv=F("Reaction",Jt),Kz="action",Lz=Da(Kz),iE=Da("action.bound",{bound:!0}),Mz=Da("autoAction",{autoAction:!0}),jE=Da("autoAction.bound",{autoAction:!0,bound:!0}),Ig=Hc(!1);Object.assign(Ig,Lz);var Ru=Hc(!0);Object.assign(Ru,Mz);Ig.bound=Aa(iE);Ru.bound=
Aa(jE);var kE=function(a){return a()},lE="onBO",mE="onBUO",nE=0;Fe.prototype=Object.create(Error.prototype);var Nz=pa("flow"),oE=pa("flow.bound",{bound:!0}),Su=Object.assign(function(a,d){if(I(d))return Ja(a,d,Nz);var k=a.name||"\x3cunnamed flow\x3e";d=function(){var N=arguments,ea=++nE,ka=Ig(k+" - runid: "+ea+" - init",a).apply(this,N),sa,La=void 0;N=new Promise(function(Ua,cb){function ib(Nb){La=void 0;try{var lc=Ig(k+" - runid: "+ea+" - yield "+Sb++,ka.next).call(ka,Nb)}catch(yc){return cb(yc)}Pb(lc)}
function nb(Nb){La=void 0;try{var lc=Ig(k+" - runid: "+ea+" - yield "+Sb++,ka["throw"]).call(ka,Nb)}catch(yc){return cb(yc)}Pb(lc)}function Pb(Nb){if(V(null==Nb?void 0:Nb.then))Nb.then(Pb,cb);else{if(Nb.done)return Ua(Nb.value);La=Promise.resolve(Nb.value);return La.then(ib,nb)}}var Sb=0;sa=cb;ib(void 0)});N.cancel=Ig(k+" - runid: "+ea+" - cancel",function(){try{if(La){var Ua=La;V(Ua.cancel)&&Ua.cancel()}var cb=ka["return"](void 0),ib=Promise.resolve(cb.value);ib.then(Jb,Jb);V(ib.cancel)&&ib.cancel();
sa(new Fe)}catch(nb){sa(nb)}});return N};d.isMobXFlow=!0;return d},Nz);Su.bound=Aa(oE);var pE={has:function(a,d){return a[ce].has_(d)},get:function(a,d){return a[ce].get_(d)},set:function(a,d,k){var N;return I(d)?null!=(N=a[ce].set_(d,k,!0))?N:!0:!1},deleteProperty:function(a,d){var k;return I(d)?null!=(k=a[ce].delete_(d,!0))?k:!0:!1},defineProperty:function(a,d,k){var N;return null!=(N=a[ce].defineProperty_(d,k))?N:!0},ownKeys:function(a){return a[ce].ownKeys_()},preventExtensions:function(a){f(13)}},
gq="update",qE={get:function(a,d){var k=a[ce];return d===ce?k:"length"===d?k.getArrayLength_():"string"!==typeof d||isNaN(d)?U(Wv,d)?Wv[d]:a[d]:k.get_(parseInt(d))},set:function(a,d,k){var N=a[ce];"length"===d&&N.setArrayLength_(k);"symbol"===typeof d||isNaN(d)?a[d]=k:N.set_(parseInt(d),k);return!0},preventExtensions:function(){f(15)}},tx=function(){function a(k,N,ea,ka){void 0===k&&(k="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=
this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=ea;this.legacyMode_=ka;this.atom_=new Bg(k);this.enhancer_=function(sa,La){return N(sa,La,"ObservableArray[..]")}}var d=a.prototype;d.dehanceValue_=function(k){return void 0!==this.dehancer?this.dehancer(k):k};d.dehanceValues_=function(k){return void 0!==this.dehancer&&0<k.length?k.map(this.dehancer):k};d.intercept_=function(k){return Eb(this,k)};d.observe_=function(k,N){void 0===N&&(N=!1);N&&k({observableKind:"array",
object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return ee(this,k)};d.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};d.setArrayLength_=function(k){("number"!==typeof k||isNaN(k)||0>k)&&f("Out of range: "+k);var N=this.values_.length;if(k!==N)if(k>N){for(var ea=Array(k-N),ka=0;ka<k-N;ka++)ea[ka]=void 0;this.spliceWithArray_(N,0,ea)}else this.spliceWithArray_(k,
N-k)};d.updateArrayLength_=function(k,N){k!==this.lastKnownLength_&&f(16);this.lastKnownLength_+=N;this.legacyMode_&&0<N&&je(k+N+1)};d.spliceWithArray_=function(k,N,ea){var ka=this,sa=this.values_.length;void 0===k?k=0:k>sa?k=sa:0>k&&(k=Math.max(0,sa+k));N=1===arguments.length?sa-k:void 0===N||null===N?0:Math.max(0,Math.min(N,sa-k));void 0===ea&&(ea=da);if(zb(this)){var La=Ib(this,{object:this.proxy_,type:"splice",index:k,removedCount:N,added:ea});if(!La)return da;N=La.removedCount;ea=La.added}ea=
0===ea.length?ea:ea.map(function(Ua){return ka.enhancer_(Ua,void 0)});this.legacyMode_&&this.updateArrayLength_(sa,ea.length-N);sa=this.spliceItemsIntoValues_(k,N,ea);0===N&&0===ea.length||this.notifyArraySplice_(k,ea,sa);return this.dehanceValues_(sa)};d.spliceItemsIntoValues_=function(k,N,ea){if(1E4>ea.length){var ka;return(ka=this.values_).splice.apply(ka,[k,N].concat(ea))}ka=this.values_.slice(k,k+N);var sa=this.values_.slice(k+N);this.values_.length+=ea.length-N;for(N=0;N<ea.length;N++)this.values_[k+
N]=ea[N];for(N=0;N<sa.length;N++)this.values_[k+ea.length+N]=sa[N];return ka};d.notifyArrayChildUpdate_=function(k,N,ea){var ka=!this.owned_&&!1,sa=pd(this);k=sa||ka?{observableKind:"array",object:this.proxy_,type:gq,debugObjectName:this.atom_.name_,index:k,newValue:N,oldValue:ea}:null;this.atom_.reportChanged();sa&&Sd(this,k)};d.notifyArraySplice_=function(k,N,ea){var ka=!this.owned_&&!1,sa=pd(this);k=sa||ka?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",
index:k,removed:ea,added:N,removedCount:ea.length,addedCount:N.length}:null;this.atom_.reportChanged();sa&&Sd(this,k)};d.get_=function(k){if(this.legacyMode_&&k>=this.values_.length)console.warn("[mobx] Out of bounds read: "+k);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[k])};d.set_=function(k,N){var ea=this.values_;this.legacyMode_&&k>ea.length&&f(17,k,ea.length);if(k<ea.length){var ka=ea[k];if(zb(this)){N=Ib(this,{type:gq,object:this.proxy_,index:k,newValue:N});if(!N)return;
N=N.newValue}N=this.enhancer_(N,ka);N!==ka&&(ea[k]=N,this.notifyArrayChildUpdate_(k,N,ka))}else{k=Array(k+1-ea.length);for(ka=0;ka<k.length-1;ka++)k[ka]=void 0;k[k.length-1]=N;this.spliceWithArray_(ea.length,0,k)}};return a}(),Wv={clear:function(){return this.splice(0)},replace:function(a){var d=this[ce];return d.spliceWithArray_(0,d.values_.length,a)},toJSON:function(){return this.slice()},splice:function(a,d){for(var k=arguments.length,N=Array(2<k?k-2:0),ea=2;ea<k;ea++)N[ea-2]=arguments[ea];k=this[ce];
switch(arguments.length){case 0:return[];case 1:return k.spliceWithArray_(a);case 2:return k.spliceWithArray_(a,d)}return k.spliceWithArray_(a,d,N)},spliceWithArray:function(a,d,k){return this[ce].spliceWithArray_(a,d,k)},push:function(){for(var a=this[ce],d=arguments.length,k=Array(d),N=0;N<d;N++)k[N]=arguments[N];a.spliceWithArray_(a.values_.length,0,k);return a.values_.length},pop:function(){return this.splice(Math.max(this[ce].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},
unshift:function(){for(var a=this[ce],d=arguments.length,k=Array(d),N=0;N<d;N++)k[N]=arguments[N];a.spliceWithArray_(0,0,k);return a.values_.length},reverse:function(){Wf.trackingDerivation&&f(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){Wf.trackingDerivation&&f(37,"sort");var a=this.slice();a.sort.apply(a,arguments);this.replace(a);return this},remove:function(a){var d=this[ce];a=d.dehanceValues_(d.values_).indexOf(a);return-1<a?(this.splice(a,1),!0):!1}};yb("concat",
rb);yb("flat",rb);yb("includes",rb);yb("indexOf",rb);yb("join",rb);yb("lastIndexOf",rb);yb("slice",rb);yb("toString",rb);yb("toLocaleString",rb);yb("every",Zb);yb("filter",Zb);yb("find",Zb);yb("findIndex",Zb);yb("flatMap",Zb);yb("forEach",Zb);yb("map",Zb);yb("some",Zb);yb("reduce",Yb);yb("reduceRight",Yb);var rE=F("ObservableArrayAdministration",tx),sE={};var tE=Symbol.iterator;var uE=Symbol.toStringTag;var Oz=function(){function a(k,N,ea){var ka=this;void 0===N&&(N=Ia);void 0===ea&&(ea="ObservableMap");
this.name_=this.enhancer_=void 0;this[ce]=sE;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=N;this.name_=ea;V(Map)||f(18);this.keysAtom_=bb("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;Qb(!0,function(){ka.merge(k)})}var d=a.prototype;d.has_=function(k){return this.data_.has(k)};d.has=function(k){var N=this;if(!Wf.trackingDerivation)return this.has_(k);var ea=this.hasMap_.get(k);if(!ea){var ka=ea=new Ms(this.has_(k),
Oa,"ObservableMap.key?",!1);this.hasMap_.set(k,ka);xd(ka,function(){return N.hasMap_["delete"](k)})}return ea.get()};d.set=function(k,N){var ea=this.has_(k);if(zb(this)){N=Ib(this,{type:ea?gq:"add",object:this,newValue:N,name:k});if(!N)return this;N=N.newValue}ea?this.updateValue_(k,N):this.addValue_(k,N);return this};d["delete"]=function(k){var N=this;if(zb(this)&&!Ib(this,{type:"delete",object:this,name:k}))return!1;if(this.has_(k)){var ea=pd(this),ka=ea?{observableKind:"map",debugObjectName:this.name_,
type:"delete",object:this,oldValue:this.data_.get(k).value_,name:k}:null;Mc(function(){var sa;N.keysAtom_.reportChanged();null==(sa=N.hasMap_.get(k))?void 0:sa.setNewValue_(!1);N.data_.get(k).setNewValue_(void 0);N.data_["delete"](k)});ea&&Sd(this,ka);return!0}return!1};d.updateValue_=function(k,N){var ea=this.data_.get(k);N=ea.prepareNewValue_(N);if(N!==Wf.UNCHANGED){var ka=pd(this);k=ka?{observableKind:"map",debugObjectName:this.name_,type:gq,object:this,oldValue:ea.value_,name:k,newValue:N}:null;
ea.setNewValue_(N);ka&&Sd(this,k)}};d.addValue_=function(k,N){var ea=this;Mc(function(){var La,Ua=new Ms(N,ea.enhancer_,"ObservableMap.key",!1);ea.data_.set(k,Ua);N=Ua.value_;null==(La=ea.hasMap_.get(k))?void 0:La.setNewValue_(!0);ea.keysAtom_.reportChanged()});var ka=pd(this),sa=ka?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:k,newValue:N}:null;ka&&Sd(this,sa)};d.get=function(k){return this.has(k)?this.dehanceValue_(this.data_.get(k).get()):this.dehanceValue_(void 0)};
d.dehanceValue_=function(k){return void 0!==this.dehancer?this.dehancer(k):k};d.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};d.values=function(){var k=this,N=this.keys();return Wa({next:function(){var ea=N.next(),ka=ea.done;ea=ea.value;return{done:ka,value:ka?void 0:k.get(ea)}}})};d.entries=function(){var k=this,N=this.keys();return Wa({next:function(){var ea=N.next(),ka=ea.done;ea=ea.value;return{done:ka,value:ka?void 0:[ea,k.get(ea)]}}})};d[tE]=function(){return this.entries()};
d.forEach=function(k,N){for(var ea=va(this),ka;!(ka=ea()).done;)ka=ka.value,k.call(N,ka[1],ka[0],this)};d.merge=function(k){var N=this;zr(k)&&(k=new Map(k));Mc(function(){M(k)?H(k).forEach(function(ea){return N.set(ea,k[ea])}):Array.isArray(k)?k.forEach(function(ea){return N.set(ea[0],ea[1])}):J(k)?(k.constructor!==Map&&f(19,k),k.forEach(function(ea,ka){return N.set(ka,ea)})):null!==k&&void 0!==k&&f(20,k)});return this};d.clear=function(){var k=this;Mc(function(){id(function(){for(var N=va(k.keys()),
ea;!(ea=N()).done;)k["delete"](ea.value)})})};d.replace=function(k){var N=this;Mc(function(){for(var ea=Ad(k),ka=new Map,sa=!1,La=va(N.data_.keys()),Ua;!(Ua=La()).done;)if(Ua=Ua.value,!ea.has(Ua))if(N["delete"](Ua))sa=!0;else{var cb=N.data_.get(Ua);ka.set(Ua,cb)}for(ea=va(ea.entries());!(La=ea()).done;)Ua=La.value,La=Ua[0],cb=Ua[1],Ua=N.data_.has(La),N.set(La,cb),N.data_.has(La)&&(cb=N.data_.get(La),ka.set(La,cb),Ua||(sa=!0));if(!sa)if(N.data_.size!==ka.size)N.keysAtom_.reportChanged();else for(sa=
N.data_.keys(),ea=ka.keys(),La=sa.next(),Ua=ea.next();!La.done;){if(La.value!==Ua.value){N.keysAtom_.reportChanged();break}La=sa.next();Ua=ea.next()}N.data_=ka});return this};d.toString=function(){return"[object ObservableMap]"};d.toJSON=function(){return Array.from(this)};d.observe_=function(k,N){return ee(this,k)};d.intercept_=function(k){return Eb(this,k)};aa(a,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:uE,get:function(){return"Map"}}]);return a}(),
zr=F("ObservableMap",Oz),vE={};var wE=Symbol.iterator;var xE=Symbol.toStringTag;var Pz=function(){function a(k,N,ea){void 0===N&&(N=Ia);void 0===ea&&(ea="ObservableSet");this.name_=void 0;this[ce]=vE;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=ea;V(Set)||f(22);this.atom_=bb(this.name_);this.enhancer_=function(ka,sa){return N(ka,sa,ea)};k&&this.replace(k)}var d=a.prototype;d.dehanceValue_=function(k){return void 0!==this.dehancer?
this.dehancer(k):k};d.clear=function(){var k=this;Mc(function(){id(function(){for(var N=va(k.data_.values()),ea;!(ea=N()).done;)k["delete"](ea.value)})})};d.forEach=function(k,N){for(var ea=va(this),ka;!(ka=ea()).done;)ka=ka.value,k.call(N,ka,ka,this)};d.add=function(k){var N=this;if(zb(this)&&!Ib(this,{type:"add",object:this,newValue:k}))return this;if(!this.has(k)){Mc(function(){N.data_.add(N.enhancer_(k,void 0));N.atom_.reportChanged()});var ea=pd(this),ka=ea?{observableKind:"set",debugObjectName:this.name_,
type:"add",object:this,newValue:k}:null;ea&&Sd(this,ka)}return this};d["delete"]=function(k){var N=this;if(zb(this)&&!Ib(this,{type:"delete",object:this,oldValue:k}))return!1;if(this.has(k)){var ea=pd(this),ka=ea?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:k}:null;Mc(function(){N.atom_.reportChanged();N.data_["delete"](k)});ea&&Sd(this,ka);return!0}return!1};d.has=function(k){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(k))};d.entries=
function(){var k=0,N=Array.from(this.keys()),ea=Array.from(this.values());return Wa({next:function(){var ka=k;k+=1;return ka<ea.length?{value:[N[ka],ea[ka]],done:!1}:{done:!0}}})};d.keys=function(){return this.values()};d.values=function(){this.atom_.reportObserved();var k=this,N=0,ea=Array.from(this.data_.values());return Wa({next:function(){return N<ea.length?{value:k.dehanceValue_(ea[N++]),done:!1}:{done:!0}}})};d.replace=function(k){var N=this;Os(k)&&(k=new Set(k));Mc(function(){Array.isArray(k)?
(N.clear(),k.forEach(function(ea){return N.add(ea)})):K(k)?(N.clear(),k.forEach(function(ea){return N.add(ea)})):null!==k&&void 0!==k&&f("Cannot initialize set from "+k)});return this};d.observe_=function(k,N){return ee(this,k)};d.intercept_=function(k){return Eb(this,k)};d.toJSON=function(){return Array.from(this)};d.toString=function(){return"[object ObservableSet]"};d[wE]=function(){return this.values()};aa(a,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:xE,
get:function(){return"Set"}}]);return a}(),Os=F("ObservableSet",Pz),Qz=Object.create(null),Rz=function(){function a(k,N,ea,ka){void 0===N&&(N=new Map);void 0===ka&&(ka=Sh);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=k;this.values_=N;this.name_=ea;this.defaultAnnotation_=ka;this.keysAtom_=new Bg("ObservableObject.keys");this.isPlainObject_=M(this.target_)}
var d=a.prototype;d.getObservablePropValue_=function(k){return this.values_.get(k).get()};d.setObservablePropValue_=function(k,N){var ea=this.values_.get(k);if(ea instanceof Pu)return ea.set(N),!0;if(zb(this)){N=Ib(this,{type:gq,object:this.proxy_||this.target_,name:k,newValue:N});if(!N)return null;N=N.newValue}N=ea.prepareNewValue_(N);if(N!==Wf.UNCHANGED){var ka=pd(this);k=ka?{type:gq,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:ea.value_,name:k,newValue:N}:
null;ea.setNewValue_(N);ka&&Sd(this,k)}return!0};d.get_=function(k){Wf.trackingDerivation&&!U(this.target_,k)&&this.has_(k);return this.target_[k]};d.set_=function(k,N,ea){void 0===ea&&(ea=!1);if(U(this.target_,k)){if(this.values_.has(k))return this.setObservablePropValue_(k,N);if(ea)return Reflect.set(this.target_,k,N);this.target_[k]=N;return!0}return this.extend_(k,{value:N,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,ea)};d.has_=function(k){if(!Wf.trackingDerivation)return k in
this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var N=this.pendingKeys_.get(k);N||(N=new Ms(k in this.target_,Oa,"ObservableObject.key?",!1),this.pendingKeys_.set(k,N));return N.get()};d.make_=function(k,N){!0===N&&(N=this.defaultAnnotation_);if(!1!==N){if(!(k in this.target_)){var ea;if(null!=(ea=this.target_[Ld])&&ea[k])return;f(1,N.annotationType_,this.name_+"."+k.toString())}for(ea=this.target_;ea&&ea!==Zp;){var ka=Yp(ea,k);if(ka){ka=N.make_(this,k,ka,ea);if(0===ka)return;if(1===ka)break}ea=
Object.getPrototypeOf(ea)}var sa;null==(sa=this.target_[Ld])?!0:delete sa[k]}};d.extend_=function(k,N,ea,ka){void 0===ka&&(ka=!1);!0===ea&&(ea=this.defaultAnnotation_);if(!1===ea)return this.defineProperty_(k,N,ka);if(N=ea.extend_(this,k,N,ka)){var sa;null==(sa=this.target_[Ld])?!0:delete sa[k]}return N};d.defineProperty_=function(k,N,ea){void 0===ea&&(ea=!1);try{Yc();var ka=this.delete_(k);if(!ka)return ka;if(zb(this)){var sa=Ib(this,{object:this.proxy_||this.target_,name:k,type:"add",newValue:N.value});
if(!sa)return null;var La=sa.newValue;N.value!==La&&(N=W({},N,{value:La}))}if(ea){if(!Reflect.defineProperty(this.target_,k,N))return!1}else up(this.target_,k,N);this.notifyPropertyAddition_(k,N.value)}finally{Mb()}return!0};d.defineObservableProperty_=function(k,N,ea,ka){void 0===ka&&(ka=!1);try{Yc();var sa=this.delete_(k);if(!sa)return sa;if(zb(this)){var La=Ib(this,{object:this.proxy_||this.target_,name:k,type:"add",newValue:N});if(!La)return null;N=La.newValue}var Ua=Ge(k),cb={configurable:Wf.safeDescriptors?
this.isPlainObject_:!0,enumerable:!0,get:Ua.get,set:Ua.set};if(ka){if(!Reflect.defineProperty(this.target_,k,cb))return!1}else up(this.target_,k,cb);var ib=new Ms(N,ea,"ObservableObject.key",!1);this.values_.set(k,ib);this.notifyPropertyAddition_(k,ib.value_)}finally{Mb()}return!0};d.defineComputedProperty_=function(k,N,ea){void 0===ea&&(ea=!1);try{Yc();var ka=this.delete_(k);if(!ka)return ka;if(zb(this)&&!Ib(this,{object:this.proxy_||this.target_,name:k,type:"add",newValue:void 0}))return null;N.name||
(N.name="ObservableObject.key");N.context=this.proxy_||this.target_;var sa=Ge(k),La={configurable:Wf.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:sa.get,set:sa.set};if(ea){if(!Reflect.defineProperty(this.target_,k,La))return!1}else up(this.target_,k,La);this.values_.set(k,new Pu(N));this.notifyPropertyAddition_(k,void 0)}finally{Mb()}return!0};d.delete_=function(k,N){void 0===N&&(N=!1);if(!U(this.target_,k))return!0;if(zb(this)&&!Ib(this,{object:this.proxy_||this.target_,name:k,type:"remove"}))return null;
try{var ea,ka;Yc();var sa=pd(this),La=this.values_.get(k),Ua=void 0;if(!La&&sa){var cb;Ua=null==(cb=Yp(this.target_,k))?void 0:cb.value}if(N){if(!Reflect.deleteProperty(this.target_,k))return!1}else delete this.target_[k];La&&(this.values_["delete"](k),La instanceof Ms&&(Ua=La.value_),Gb(La));this.keysAtom_.reportChanged();null==(ea=this.pendingKeys_)?void 0:null==(ka=ea.get(k))?void 0:ka.set(k in this.target_);if(sa){var ib={type:"remove",observableKind:"object",object:this.proxy_||this.target_,
debugObjectName:this.name_,oldValue:Ua,name:k};sa&&Sd(this,ib)}}finally{Mb()}return!0};d.observe_=function(k,N){return ee(this,k)};d.intercept_=function(k){return Eb(this,k)};d.notifyPropertyAddition_=function(k,N){var ea,ka,sa=pd(this);sa&&(N=sa?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:k,newValue:N}:null,sa&&Sd(this,N));null==(ea=this.pendingKeys_)?void 0:null==(ka=ea.get(k))?void 0:ka.set(!0);this.keysAtom_.reportChanged()};d.ownKeys_=
function(){this.keysAtom_.reportObserved();return Oc(this.target_)};d.keys_=function(){this.keysAtom_.reportObserved();return Object.keys(this.target_)};return a}(),yE=F("ObservableObjectAdministration",Rz),zE=ye(0),ux=0,Sz=function(){};(function(a,d){Object.setPrototypeOf?Object.setPrototypeOf(a.prototype,d):void 0!==a.prototype.__proto__?a.prototype.__proto__=d:a.prototype=d})(Sz,Array.prototype);var vx=function(a,d,k){function N(ka,sa,La,Ua){void 0===La&&(La="ObservableArray");void 0===Ua&&(Ua=
!1);var cb=a.call(this)||this;sa=new tx(La,sa,Ua,!0);sa.proxy_=fa(cb);E(fa(cb),ce,sa);ka&&ka.length&&(sa=Fc(!0),cb.spliceWithArray(0,0,ka),Wf.allowStateChanges=sa);Object.defineProperty(fa(cb),"0",zE);return cb}ha(N,a);var ea=N.prototype;ea.concat=function(){this[ce].atom_.reportObserved();for(var ka=arguments.length,sa=Array(ka),La=0;La<ka;La++)sa[La]=arguments[La];return Array.prototype.concat.apply(this.slice(),sa.map(function(Ua){return yd(Ua)?Ua.slice():Ua}))};ea[k]=function(){var ka=this,sa=
0;return Wa({next:function(){return sa<ka.length?{value:ka[sa++],done:!1}:{done:!0,value:void 0}}})};aa(N,[{key:"length",get:function(){return this[ce].getArrayLength_()},set:function(ka){this[ce].setArrayLength_(ka)}},{key:d,get:function(){return"Array"}}]);return N}(Sz,Symbol.toStringTag,Symbol.iterator);Object.entries(Wv).forEach(function(a){var d=a[0];a=a[1];"concat"!==d&&S(vx.prototype,d,a)});je(1E3);var Tz=Zp.toString;["Symbol","Map","Set"].forEach(function(a){"undefined"===typeof G()[a]&&f("MobX requires global '"+
a+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:kc,extras:{getDebugName:$a},$mobx:ce});var AE=ba(598),Dm=class{constructor(a){kb(this,"props");kb(this,"aspectRatio");kb(this,"type");kb(this,"hideCloneHandles",!1);kb(this,"hideResizeHandles",!1);kb(this,"hideRotateHandle",!1);kb(this,"hideContextBar",!1);kb(this,"hideSelectionDetail",!1);kb(this,"hideSelection",!1);kb(this,"canChangeAspectRatio",!0);kb(this,"canUnmount",
!0);kb(this,"canResize",[!0,!0]);kb(this,"canScale",!0);kb(this,"canFlip",!0);kb(this,"canEdit",!1);kb(this,"canBind",!1);kb(this,"nonce");kb(this,"bindingDistance",4);kb(this,"isDirty",!1);kb(this,"lastSerialized");kb(this,"getCenter",()=>Ef.getBoundsCenter(this.bounds));kb(this,"getRotatedBounds",()=>{const {bounds:ka,props:{rotation:sa}}=this;return sa?Ef.getBoundsFromPoints(Ef.getRotatedCorners(ka,sa)):ka});kb(this,"hitTestPoint",ka=>{var sa=this.rotatedBounds;if(!this.props.rotation)return vk.pointInBounds(ka,
sa);sa=Ef.getRotatedCorners(sa,this.props.rotation);return vk.pointInPolygon(ka,sa)});kb(this,"hitTestLineSegment",(ka,sa)=>{const La=Ef.getBoundsFromPoints([ka,sa]),{rotatedBounds:Ua,props:{rotation:cb=0}}=this;return Ef.boundsContain(Ua,La)||cb?h(ka,sa,Ef.getRotatedCorners(this.bounds)).didIntersect:0<r(Ua,ka,sa).length});kb(this,"hitTestBounds",ka=>{const {rotatedBounds:sa,props:{rotation:La=0}}=this,Ua=Ef.getRotatedCorners(this.bounds,La);return Ef.boundsContain(ka,sa)||0<v([ka.minX,ka.minY],
[ka.width,ka.height],Ua).length});kb(this,"getExpandedBounds",()=>Ef.expandBounds(this.getBounds(),this.bindingDistance));kb(this,"getBindingPoint",(ka,sa,La,Ua)=>{var cb=this.getBounds(),ib=this.getExpandedBounds();if(vk.pointInBounds(ka,ib)){var nb=A(sa,La,ib).filter(Pb=>Pb.didIntersect).map(Pb=>Pb.points[0]);if(nb.length)return La=this.getCenter(),nb=nb.sort((Pb,Sb)=>ge.dist(Sb,sa)-ge.dist(Pb,sa))[0],nb=ge.med(ka,nb),Ua?(Ua=2>ge.dist(ka,La)?La:ka,cb=0):(Ua=2>ge.distanceToLineSegment(ka,nb,La)?
La:nb,cb=vk.pointInBounds(ka,cb)?this.bindingDistance:Math.max(this.bindingDistance,Ef.getBoundsSides(cb).map(Pb=>ge.distanceToLineSegment(Pb[1][0],Pb[1][1],ka)).sort((Pb,Sb)=>Pb-Sb)[0])),ib=ge.divV(ge.sub(Ua,[ib.minX,ib.minY]),[ib.width,ib.height]),{point:ge.clampV(ib,0,1),distance:cb}}});kb(this,"getSerialized",()=>pc(uf(me({},this.props),{type:this.type,nonce:this.nonce})));kb(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||Mc(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});
if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});kb(this,"validateProps",ka=>ka);kb(this,"update",(ka,sa=!1,La=!1)=>{sa||this.isDirty||this.setIsDirty(!0);sa||La||this.incNonce();Object.assign(this.props,this.validateProps(ka));return this});kb(this,"clone",()=>new this.constructor(this.serialized));kb(this,"onResetBounds",ka=>this);kb(this,"scale",[1,1]);kb(this,"onResizeStart",ka=>{var sa;this.scale=[...(null!=(sa=this.props.scale)?
sa:[1,1])];return this});kb(this,"onResize",(ka,sa)=>{const {bounds:La,rotation:Ua,scale:[cb,ib]}=sa;ka=[...this.scale];0>cb&&(ka[0]*=-1);0>ib&&(ka[1]*=-1);this.update({point:[La.minX,La.minY],scale:ka,rotation:Ua});return this});kb(this,"onHandleChange",(ka,{id:sa,delta:La})=>{if(void 0!==ka.handles){var Ua=Qs(ka.handles);Ua[sa]=uf(me({},Ua[sa]),{point:ge.add(La,ka.handles[sa].point)});var cb=Ef.getCommonTopLeft(Object.values(Ua).map(ib=>ib.point));Object.values(Ua).forEach(ib=>{ib.point=ge.sub(ib.point,
cb)});this.update({point:ge.add(ka.point,cb),handles:Ua})}});var d,k;const N=this.constructor.id,ea=null!=(d=this.constructor.defaultProps)?d:{};this.type=N;this.props=me(me({scale:[1,1]},ea),a);this.nonce=null!=(k=a.nonce)?k:Date.now();ef(this)}get id(){return this.props.id}setNonce(a){this.nonce=a}incNonce(){this.nonce++}setIsDirty(a){this.isDirty=a}setLastSerialized(a){this.lastSerialized=a}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(a){a=
this.getBounds();const {stroke:d,strokeWidth:k,strokeType:N,opacity:ea,fill:ka,noFill:sa,borderRadius:La}=this.props;return(0,AE.jsx)("rect",{fill:sa?"none":Qh(ka,"background"),stroke:Qh(d,"stroke"),strokeWidth:null!=k?k:2,strokeDasharray:"dashed"===N?"8 2":void 0,fillOpacity:null!=ea?ea:.2,width:a.width,height:a.height,rx:La,ry:La})}};kb(Dm,"type");de([cf],Dm.prototype,"props",2);de([cf],Dm.prototype,"canResize",2);de([cf],Dm.prototype,"nonce",2);de([cf],Dm.prototype,"isDirty",2);de([cf],Dm.prototype,
"lastSerialized",2);de([Kf],Dm.prototype,"id",1);de([Ig],Dm.prototype,"setNonce",1);de([Ig],Dm.prototype,"incNonce",1);de([Ig],Dm.prototype,"setIsDirty",1);de([Ig],Dm.prototype,"setLastSerialized",1);de([Kf],Dm.prototype,"center",1);de([Kf],Dm.prototype,"bounds",1);de([Kf],Dm.prototype,"rotatedBounds",1);de([Kf],Dm.prototype,"serialized",1);de([Ig],Dm.prototype,"update",2);var Bn=class extends Dm{constructor(a={}){super(a);kb(this,"canBind",!0);kb(this,"getBounds",()=>{const [d,k]=this.props.point,
[N,ea]=this.props.size;return{minX:d,minY:k,maxX:d+N,maxY:k+ea,width:N,height:ea}});kb(this,"getRotatedBounds",()=>Ef.getBoundsFromPoints(Ef.getRotatedCorners(this.bounds,this.props.rotation)));kb(this,"onResize",(d,k)=>{const {bounds:N,rotation:ea,scale:[ka,sa]}=k;d=[...this.scale];0>ka&&(d[0]*=-1);0>sa&&(d[1]*=-1);this.update({point:[N.minX,N.minY],scale:d,rotation:ea});return this.update({rotation:ea,point:[N.minX,N.minY],size:[Math.max(1,N.width),Math.max(1,N.height)],scale:d})});kb(this,"validateProps",
d=>{void 0!==d.size&&(d.size[0]=Math.max(d.size[0],1),d.size[1]=Math.max(d.size[1],1));return d});ef(this)}};kb(Bn,"id","box");kb(Bn,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var Kt=class extends Dm{constructor(a={}){super(a);kb(this,"getBounds",()=>{const {pointBounds:d,props:{point:k}}=this;return Ef.translateBounds(d,k)});kb(this,"getRotatedBounds",()=>{const {props:{rotation:d,point:k},bounds:N,rotatedPoints:ea}=this;return d?Ef.translateBounds(Ef.getBoundsFromPoints(ea),
k):N});kb(this,"normalizedPoints",[]);kb(this,"isResizeFlippedX",!1);kb(this,"isResizeFlippedY",!1);kb(this,"onResizeStart",()=>{var d;const {bounds:k,props:{points:N}}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const ea=[k.width,k.height];this.normalizedPoints=N.map(ka=>Gd.divV(ka,ea));return this});kb(this,"onResize",(d,k)=>{const {bounds:N,scale:[ea,ka]}=k,sa=[N.width,N.height];d=[...this.scale];0>ea&&(d[0]*=-1);0>ka&&(d[1]*=-1);return this.update(ea||ka?{point:[N.minX,N.minY],points:this.normalizedPoints.map(La=>
Gd.mulV(La,sa).concat(La[2])),scale:d}:{point:[N.minX,N.minY],points:this.normalizedPoints.map(La=>Gd.mulV(La,sa).concat(La[2]))})});kb(this,"hitTestPoint",d=>{const {props:{points:k,point:N}}=this;return vk.pointNearToPolyline(Gd.sub(d,N),k)});kb(this,"hitTestLineSegment",(d,k)=>{const {bounds:N,props:{points:ea,point:ka}}=this;if(vk.pointInBounds(d,N)||vk.pointInBounds(k,N)||0<r(N,d,k).length){const sa=Gd.sub(d,ka),La=Gd.sub(k,ka);return h(sa,La,ea).didIntersect||!!ea.find(Ua=>5>Gd.dist(sa,Ua)||
5>Gd.dist(La,Ua))}return!1});kb(this,"hitTestBounds",d=>{const {rotatedBounds:k,props:{points:N,point:ea}}=this,ka=Ef.translateBounds(d,Gd.neg(ea));return Ef.boundsContain(d,k)||N.every(sa=>vk.pointInBounds(sa,ka))||Ef.boundsCollide(d,k)&&0<D([ka.minX,ka.minY],[ka.width,ka.height],N).length});ef(this)}get pointBounds(){const {props:{points:a}}=this;return Ef.getBoundsFromPoints(a)}get rotatedPoints(){const {props:{point:a,points:d,rotation:k},center:N}=this;if(!k)return d;const ea=Gd.sub(N,a);return d.map(ka=>
Gd.rotWith(ka,ea,k))}};kb(Kt,"id","draw");kb(Kt,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});de([Kf],Kt.prototype,"pointBounds",1);de([Kf],Kt.prototype,"rotatedPoints",1);var wx=class extends Bn{constructor(a={}){super(a);kb(this,"getBounds",()=>{const {props:{point:[d,k],size:[N,ea]}}=this;return Ef.getRotatedEllipseBounds(d,k,N/2,ea/2,0)});kb(this,"getRotatedBounds",()=>{const {props:{point:[d,k],size:[N,ea],rotation:ka}}=this;return Ef.getRotatedEllipseBounds(d,
k,N/2,ea/2,ka)});kb(this,"hitTestPoint",d=>{const {props:{size:k,rotation:N},center:ea}=this;return vk.pointInEllipse(d,ea,k[0],k[1],N||0)});kb(this,"hitTestLineSegment",(d,k)=>{const {props:{size:[N,ea],rotation:ka=0},center:sa}=this;return g(d,k,sa,N,ea,ka).didIntersect});kb(this,"hitTestBounds",d=>{const {props:{size:[k,N],rotation:ea=0},rotatedBounds:ka}=this;var sa;if(!(sa=Ef.boundsContain(d,ka))){const {minX:La,minY:Ua,width:cb,height:ib}=d;sa=0<t(this.center,k/2,N/2,ea,[La,Ua],[cb,ib]).length}return sa});
ef(this)}};kb(wx,"id","ellipse");kb(wx,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var xx=class extends Bn{constructor(a={}){super(a);kb(this,"onResetBounds",d=>{const {clipping:k,size:N,point:ea}=this.props;if(k){const [ka,sa,La,Ua]=Array.isArray(k)?k:[k,k,k,k];return this.update({clipping:0,point:[ea[0]-Ua,ea[1]-ka],size:[N[0]+(Ua-sa),N[1]+(ka-La)]})}if(d.asset){const {size:[ka,sa]}=d.asset;this.update({clipping:0,point:[ea[0]+N[0]/2-ka/2,ea[1]+N[1]/
2-sa/2],size:[ka,sa]})}return this});kb(this,"onResize",(d,k)=>{const {bounds:N,clip:ea,scale:ka}=k;({clipping:k}=this.props);const {clipping:sa}=d;if(ea){const {point:[La,Ua],size:[cb,ib]}=d,[nb,Pb,Sb,Nb]=sa?Array.isArray(sa)?sa:[sa,sa,sa,sa]:[0,0,0,0];k=[nb+(N.minY-Ua),Pb+(N.maxX-(La+cb)),Sb+(N.maxY-(Ua+ib)),Nb+(N.minX-La)]}else void 0!==sa&&(k=Array.isArray(sa)?sa:[sa,sa,sa,sa],k=[k[0]*ka[1],k[1]*ka[0],k[2]*ka[1],k[3]*ka[0]]);if(k&&Array.isArray(k)){const La=k;La.every((Ua,cb)=>0===cb||Ua===La[cb-
1])&&(k=La[0])}return this.update({point:[N.minX,N.minY],size:[Math.max(1,N.width),Math.max(1,N.height)],clipping:k})});ef(this)}};kb(xx,"id","ellipse");kb(xx,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Uz=class extends Dm{constructor(a={}){super(a);kb(this,"getBounds",()=>{const {points:d,props:{point:k}}=this;return Ef.translateBounds(Ef.getBoundsFromPoints(d),k)});kb(this,"getRotatedBounds",()=>{const {rotatedPoints:d,
props:{point:k}}=this;return Ef.translateBounds(Ef.getBoundsFromPoints(d),k)});kb(this,"normalizedHandles",[]);kb(this,"onResizeStart",()=>{var d;const {props:{handles:k},bounds:N}=this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];const ea=[N.width,N.height];this.normalizedHandles=Object.values(k).map(ka=>Gd.divV(ka.point,ea));return this});kb(this,"onResize",(d,k)=>{const {bounds:N,scale:[ea,ka]}=k,{props:{handles:sa},normalizedHandles:La}=this,Ua=[N.width,N.height];d=[...this.scale];0>ea&&
(d[0]*=-1);0>ka&&(d[1]*=-1);return this.update({point:[N.minX,N.minY],handles:Object.values(sa).map((cb,ib)=>uf(me({},cb),{point:Gd.mulV(La[ib],Ua)})),scale:d})});kb(this,"hitTestPoint",d=>{const {points:k}=this;return vk.pointNearToPolyline(Gd.sub(d,this.props.point),k)});kb(this,"hitTestLineSegment",(d,k)=>{const {bounds:N,points:ea,props:{point:ka}}=this;if(vk.pointInBounds(d,N)||vk.pointInBounds(k,N)||0<r(N,d,k).length){const sa=Gd.sub(d,ka),La=Gd.sub(k,ka);return h(sa,La,ea).didIntersect||!!ea.find(Ua=>
5>Gd.dist(sa,Ua)||5>Gd.dist(La,Ua))}return!1});kb(this,"hitTestBounds",d=>{const {rotatedBounds:k,points:N,props:{point:ea}}=this,ka=Ef.translateBounds(d,Gd.neg(ea));return Ef.boundsContain(d,k)||N.every(sa=>vk.pointInBounds(sa,ka))||Ef.boundsCollide(d,k)&&0<D([ka.minX,ka.minY],[ka.width,ka.height],N).length});kb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Uz.defaultProps.handles);return d});ef(this)}get points(){return Object.values(this.props.handles).map(a=>
a.point)}get centroid(){const {points:a}=this;return al.getPolygonCentroid(a)}get rotatedPoints(){const {centroid:a,props:{handles:d,rotation:k}}=this;return k?Object.values(d).map(N=>Gd.rotWith(N.point,a,k)):this.points}},Lt=Uz;kb(Lt,"id","polyline");kb(Lt,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});de([Kf],Lt.prototype,"points",1);de([Kf],Lt.prototype,"centroid",1);de([Kf],Lt.prototype,"rotatedPoints",1);var Vz=class extends Lt{constructor(a={}){super(a);
kb(this,"hideResizeHandles",!0);kb(this,"hideRotateHandle",!0);kb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.handles&&1>Object.values(d.handles).length&&(d.handles=Vz.defaultProps.handles);return d});kb(this,"getHandlesChange",(d,k)=>{var N=dm(d.handles,k);N=dm(N,{start:{point:ge.toFixed(N.start.point)},end:{point:ge.toFixed(N.end.point)}});if(!ge.isEqual(N.start.point,N.end.point)){k={point:d.point,handles:Qs(N)};d=d.point;N=Ef.translateBounds(Ef.getBoundsFromPoints(Object.values(N).map(ka=>
ka.point)),k.point);var ea=ge.sub([N.minX,N.minY],d);ge.isEqual(ea,[0,0])||(Object.values(k.handles).forEach(ka=>{ka.point=ge.toFixed(ge.sub(ka.point,ea))}),k.point=ge.toFixed(ge.add(k.point,ea)));return k}});ef(this)}},Tu=Vz;kb(Tu,"id","line");kb(Tu,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var Ar=class extends Bn{constructor(a={}){super(a);kb(this,"getRotatedBounds",()=>{const {rotatedVertices:d,
props:{point:k},offset:N}=this;return Ef.translateBounds(Ef.getBoundsFromPoints(d),Gd.add(k,N))});kb(this,"hitTestPoint",d=>{const {vertices:k}=this;return vk.pointInPolygon(Gd.add(d,this.props.point),k)});kb(this,"hitTestLineSegment",(d,k)=>{const {vertices:N,props:{point:ea}}=this;return h(Gd.sub(d,ea),Gd.sub(k,ea),N).didIntersect});kb(this,"hitTestBounds",d=>{const {rotatedBounds:k,offset:N,rotatedVertices:ea,props:{point:ka}}=this,sa=Ef.translateBounds(d,Gd.neg(Gd.add(ka,N)));return Ef.boundsContain(d,
k)||ea.every(La=>vk.pointInBounds(La,sa))||0<v([sa.minX,sa.minY],[sa.width,sa.height],ea).length});kb(this,"validateProps",d=>{d.point&&(d.point=[0,0]);void 0!==d.sides&&3>d.sides&&(d.sides=3);return d});ef(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:a},vertices:d}=this;return d.map(k=>Gd.add(k,a))}get centroid(){const {vertices:a}=this;return al.getPolygonCentroid(a)}get rotatedVertices(){const {vertices:a,centroid:d,props:{rotation:k}}=this;return k?a.map(N=>
Gd.rotWith(N,d,k)):a}get offset(){const {props:{size:[a,d]}}=this,k=Ef.getBoundsCenter(Ef.getBoundsFromPoints(this.vertices));return Gd.sub(Gd.div([a,d],2),k)}getVertices(a=0){const {ratio:d,sides:k,size:N}=this.props;return 3===k?al.getTriangleVertices(N,a,d):al.getPolygonVertices(N,k,a,d)}};kb(Ar,"id","polygon");kb(Ar,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});de([Kf],Ar.prototype,"vertices",1);de([Kf],Ar.prototype,"pageVertices",
1);de([Kf],Ar.prototype,"centroid",1);de([Kf],Ar.prototype,"rotatedVertices",1);de([Kf],Ar.prototype,"offset",1);var yx=class extends Bn{constructor(a={}){super(a);kb(this,"canEdit",!0);kb(this,"canFlip",!1);ef(this)}};kb(yx,"id","text");kb(yx,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var Xv=class extends Bn{constructor(a={}){super(a);kb(this,"canEdit",!1);kb(this,"canFlip",!1);kb(this,"getBounds",()=>0===this.shapes.length?(Cg().deleteShapes([this.id]),
{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}):Ef.getCommonBounds(this.shapes.map(d=>d.getBounds())));ef(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};kb(Xv,"id","group");kb(Xv,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});de([Kf],Xv.prototype,"shapes",1);var Mt=class{constructor(){kb(this,"_id");kb(this,"_initial");kb(this,"_states");kb(this,"_isActive",!1);kb(this,"cursor");
kb(this,"_disposables",[]);kb(this,"children",new Map([]));kb(this,"registerStates",k=>{k.forEach(N=>this.children.set(N.id,new N(this,this)));return this});kb(this,"deregisterStates",k=>{k.forEach(N=>{var ea;null==(ea=this.children.get(N.id))?void 0:ea.dispose();this.children.delete(N.id)});return this});kb(this,"currentState",{});kb(this,"transition",(k,N={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${k}.`);const ea=this.children.get(k),ka=this.currentState;
if(!ea)throw Error(`Could not find a state named ${k}.`);Mc(()=>{this.currentState?(ka._events.onExit(uf(me({},N),{toId:k})),ka.dispose(),this.setCurrentState(ea),this._events.onTransition(uf(me({},N),{fromId:ka.id,toId:k})),ea._events.onEnter(uf(me({},N),{fromId:ka.id}))):(this.currentState=ea,ea._events.onEnter(uf(me({},N),{fromId:""})))});return this});kb(this,"isIn",k=>{k=k.split(".").reverse();let N=this;for(;0<k.length;){const ea=k.pop();if(!ea)return!0;if(N.currentState.id===ea){if(0===k.length)return!0;
N=N.currentState}else break}return!1});kb(this,"isInAny",(...k)=>k.some(this.isIn));kb(this,"forwardEvent",(k,...N)=>{var ea,ka;(null==(ka=null==(ea=this.currentState)?void 0:ea._events)?0:ka[k])&&Mc(()=>{var sa;return null==(sa=this.currentState._events)?void 0:sa[k](...N)})});kb(this,"_events",{onTransition:k=>{var N;null==(N=this.onTransition)?void 0:N.call(this,k)},onEnter:k=>{var N;this._isActive=!0;this.initial&&this.transition(this.initial,k);null==(N=this.onEnter)?void 0:N.call(this,k)},onExit:k=>
{var N,ea,ka;this._isActive=!1;null==(ea=null==(N=this.currentState)?void 0:N.onExit)?void 0:ea.call(N,{toId:"parent"});null==(ka=this.onExit)?void 0:ka.call(this,k)},onPointerDown:(k,N)=>{var ea;null==(ea=this.onPointerDown)?void 0:ea.call(this,k,N);this.forwardEvent("onPointerDown",k,N)},onPointerUp:(k,N)=>{var ea;null==(ea=this.onPointerUp)?void 0:ea.call(this,k,N);this.forwardEvent("onPointerUp",k,N)},onPointerMove:(k,N)=>{var ea;null==(ea=this.onPointerMove)?void 0:ea.call(this,k,N);this.forwardEvent("onPointerMove",
k,N)},onPointerEnter:(k,N)=>{var ea;null==(ea=this.onPointerEnter)?void 0:ea.call(this,k,N);this.forwardEvent("onPointerEnter",k,N)},onPointerLeave:(k,N)=>{var ea;null==(ea=this.onPointerLeave)?void 0:ea.call(this,k,N);this.forwardEvent("onPointerLeave",k,N)},onDoubleClick:(k,N)=>{var ea;null==(ea=this.onDoubleClick)?void 0:ea.call(this,k,N);this.forwardEvent("onDoubleClick",k,N)},onKeyDown:(k,N)=>{var ea;this._events.onModifierKey(k,N);null==(ea=this.onKeyDown)?void 0:ea.call(this,k,N);this.forwardEvent("onKeyDown",
k,N)},onKeyUp:(k,N)=>{var ea;this._events.onModifierKey(k,N);null==(ea=this.onKeyUp)?void 0:ea.call(this,k,N);this.forwardEvent("onKeyUp",k,N)},onPinchStart:(k,N)=>{var ea;null==(ea=this.onPinchStart)?void 0:ea.call(this,k,N);this.forwardEvent("onPinchStart",k,N)},onPinch:(k,N)=>{var ea;null==(ea=this.onPinch)?void 0:ea.call(this,k,N);this.forwardEvent("onPinch",k,N)},onPinchEnd:(k,N)=>{var ea;null==(ea=this.onPinchEnd)?void 0:ea.call(this,k,N);this.forwardEvent("onPinchEnd",k,N)},onModifierKey:(k,
N)=>{switch(N.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(k,N)}}});kb(this,"onEnter");kb(this,"onExit");kb(this,"onTransition");kb(this,"onPointerDown");kb(this,"onPointerUp");kb(this,"onPointerMove");kb(this,"onPointerEnter");kb(this,"onPointerLeave");kb(this,"onDoubleClick");kb(this,"onKeyDown");kb(this,"onKeyUp");kb(this,"onPinchStart");kb(this,"onPinch");kb(this,"onPinchEnd");const a=this.constructor.initial,d=this.constructor.states;this._id=this.constructor.id;
this._initial=a;this._states=d}dispose(){this._disposables.forEach(a=>a());this._disposables=[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(a=>[a,...a.descendants])}setCurrentState(a){this.currentState=a}};kb(Mt,"id");kb(Mt,"shortcuts");de([cf],Mt.prototype,"currentState",2);de([Ig],Mt.prototype,"setCurrentState",
1);var zx=class extends Mt{constructor(a,d){var k,N;super();kb(this,"_root");kb(this,"_parent");kb(this,"children",new Map([]));kb(this,"registerStates",ea=>{ea.forEach(ka=>this.children.set(ka.id,new ka(this,this._root)));return this});kb(this,"deregisterStates",ea=>{ea.forEach(ka=>{var sa;null==(sa=this.children.get(ka.id))?void 0:sa.dispose();this.children.delete(ka.id)});return this});this._parent=a;this._root=d;this.states&&0<this.states.length&&(this.registerStates(this.states),a=null!=(k=this.initial)?
k:this.states[0].id,k=this.children.get(a))&&(this.setCurrentState(k),null==(N=this.currentState)?void 0:N._events.onEnter({fromId:"initial"}));ef(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,this]:[this]}};kb(zx,"cursor");var Br=class extends zx{constructor(){super(...arguments);kb(this,"isLocked",!1);kb(this,"previous");kb(this,"onEnter",({fromId:a})=>{this.previous=
a;this.cursor&&this.app.cursors.setCursor(this.cursor)});kb(this,"onTransition",a=>{({toId:a}=a);a=this.children.get(a);this.app.cursors.reset();a.cursor?this.app.cursors.setCursor(a.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},Qi=class extends zx{get app(){return this.root}get tool(){return this.parent}},Wz=class extends Qi{constructor(){super(...arguments);kb(this,"cursor","crosshair");kb(this,"creatingShape");kb(this,"aspectRatio");kb(this,"initialBounds",
{});kb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d,currentPoint:k}}=this.app;var {Shape:N}=this.tool;N=new N({id:fk(),type:N.id,parentId:a.id,point:[...d],fill:this.app.settings.color,stroke:this.app.settings.color,size:ge.abs(ge.sub(k,d))});this.initialBounds={minX:d[0],minY:d[1],maxX:d[0]+1,maxY:d[1]+1,width:1,height:1};N.canChangeAspectRatio||(N.aspectRatio?(this.aspectRatio=N.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=
1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);this.creatingShape=N;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);this.app.currentPage.addShapes(N);this.app.setSelectedShapes([N])});kb(this,"onPointerMove",a=>{if(!a.order){if(!this.creatingShape)throw Error("Expected a creating shape.");var {initialBounds:d}=this,{currentPoint:k,originPoint:N,shiftKey:ea}=this.app.inputs;a=ea||this.creatingShape.props.isAspectRatioLocked||
!this.creatingShape.canChangeAspectRatio;d=Ef.getTransformedBoundingBox(d,"bottom_right_corner",ge.sub(k,N),0,a);this.app.settings.snapToGrid&&!a&&(d=Ef.snapBoundsToGrid(d,8));this.creatingShape.update({point:[d.minX,d.minY],size:[d.width,d.height]})}});kb(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape?(this.app.setSelectedShapes([this.creatingShape]),this.app.api.editShape(this.creatingShape)):this.app.transition("select");this.app.persist()});kb(this,"onKeyDown",(a,d)=>
{switch(d.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};kb(Wz,"id","creating");var Xz=class extends Qi{constructor(){super(...arguments);kb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});kb(this,"onPinchStart",(...a)=>{var d,k;this.app.transition("select",{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});
kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};kb(Xz,"id","idle");var Yz=class extends Qi{constructor(){super(...arguments);kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Gd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});kb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};kb(Yz,"id","pointing");var Mq=class extends Br{constructor(){super(...arguments);
kb(this,"cursor","crosshair")}};kb(Mq,"id","box");kb(Mq,"states",[Xz,Yz,Wz]);kb(Mq,"initial","idle");var Zz=class extends Qi{constructor(){super(...arguments);kb(this,"shape",{});kb(this,"points",[[0,0,.5]]);kb(this,"persistDebounced",sk(this.app.persist,200));kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});kb(this,"onEnter",()=>{var a;const {Shape:d,previousShape:k}=this.tool;var {originPoint:N}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&
k){this.shape=k;var {shape:ea}=this;var ka=ea.props.points[ea.props.points.length-1];const La=Gd.sub(N,ea.props.point).concat(null!=(a=N[2])?a:.5);this.points=[...ea.props.points,ka,ka];const Ua=Math.ceil(Gd.dist(ka,N)/16);for(let cb=0,ib=cb/(Ua-1);cb<Ua;cb++){a=this.points;N=a.push;ea=Gd.lrp(ka,La,ib);var sa=ka[2];N.call(a,ea.concat.call(ea,sa+(La[2]-sa)*ib))}this.addNextPoint(La)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(ka=N[2])?ka:.5]],this.shape=new d({id:fk(),type:d.id,parentId:this.app.currentPage.id,
point:N.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.shape.setScaleLevel(this.app.settings.scaleLevel),this.app.currentPage.addShapes(this.shape)});kb(this,"onPointerMove",()=>{const {shape:a}=this,{currentPoint:d,previousPoint:k}=this.app.inputs;Gd.isEqual(k,d)||this.addNextPoint(Gd.sub(d,a.props.point).concat(d[2]))});kb(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,
points:this.tool.simplify?vk.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");let a=this.app.selectedTool.id;"pencil"===a||"highlighter"===a?this.persistDebounced():this.app.persist()});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(a){const {shape:d}=this,k=Gd.min(a,
[0,0]);this.points.push(a);0>k[0]||0>k[1]?(this.points=this.points.map(N=>Gd.sub(N,k).concat(N[2])),d.update({point:Gd.add(d.props.point,k),points:this.points})):d.update({points:this.points})}};kb(Zz,"id","creating");var $z=class extends Qi{constructor(){super(...arguments);kb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};
kb($z,"id","idle");var aA=class extends Qi{constructor(){super(...arguments);kb(this,"origin",[0,0]);kb(this,"prevDelta",[0,0]);kb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});kb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});kb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};kb(aA,"id","pinching");var Uu=class extends Br{constructor(){super(...arguments);kb(this,"cursor","crosshair");kb(this,"simplify",!0);kb(this,"simplifyTolerance",
1);kb(this,"previousShape");kb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};kb(Uu,"id","draw");kb(Uu,"states",[$z,Zz,aA]);kb(Uu,"initial","idle");var bA=class extends Qi{constructor(){super(...arguments);kb(this,"points",[[0,0,.5]]);kb(this,"hitShapes",new Set);kb(this,"onEnter",()=>{const {originPoint:a}=this.app.inputs;this.points=[a];this.hitShapes.clear()});kb(this,"onPointerMove",()=>{const {currentPoint:a,previousPoint:d}=this.app.inputs;Gd.isEqual(d,a)||(this.points.push(a),
this.app.shapesInViewport.filter(k=>k.hitTestLineSegment(d,a)).forEach(k=>this.hitShapes.add(k)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});kb(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};kb(bA,"id","erasing");var cA=class extends Qi{constructor(){super(...arguments);kb(this,"onPointerDown",
(a,d)=>{a.order||this.tool.transition("pointing")});kb(this,"onPinchStart",(...a)=>{var d,k;this.app.transition("select",{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};kb(cA,"id","idle");var dA=class extends Qi{constructor(){super(...arguments);kb(this,"onEnter",()=>{const {currentPoint:a}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(d=>
d.hitTestPoint(a)))});kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Gd.dist(a,d)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});kb(this,"onPointerUp",()=>{const a=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(a);this.tool.transition("idle")})}};kb(dA,"id","pointing");var Yv=class extends Br{constructor(){super(...arguments);kb(this,"cursor","crosshair")}};kb(Yv,"id","erase");kb(Yv,"states",[cA,dA,bA]);kb(Yv,
"initial","idle");var Ax=class extends Qi{constructor(){super(...arguments);kb(this,"handle",{});kb(this,"handleId","end");kb(this,"currentShape",{});kb(this,"initialShape",{});kb(this,"bindableShapeIds",[]);kb(this,"startBindingShapeId");kb(this,"newStartBindingId","");kb(this,"draggedBindingId","");kb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,previousPoint:d,originPoint:k,currentPoint:N,modKey:ea,altKey:ka},settings:{snapToGrid:sa}}=this.app;var La=this.app.getShapeById(this.initialShape.id),
{handles:Ua}=this.initialShape,cb=this.handleId,ib="start"===this.handleId?"end":"start";if(!ge.isEqual(d,N)){var nb=ge.sub(N,k);if(a){var Pb=Ua[ib].point,Sb=ge.add(Ua[cb].point,nb),Nb=ge.angle(Pb,Sb);Pb=ge.rotWith(Sb,Pb,ym.snapAngleToSegments(Nb,24)-Nb);nb=ge.add(nb,ge.sub(Pb,Sb))}nb=ge.add(Ua[cb].point,nb);Ua={[cb]:uf(me({},Ua[cb]),{point:sa?ge.snap(nb,8):ge.toFixed(nb),bindingId:void 0})};var lc=this.currentShape.getHandlesChange(this.initialShape,Ua);if(lc){Ua=dm(La.props,lc);var yc={},bc;cb=
Ua.handles[cb];ib=Ua.handles[ib];if(this.startBindingShapeId){var qc;if(nb=this.app.getShapeById(this.startBindingShapeId)){Sb=nb.getCenter();Pb=Ua.handles.end;var mc=ge.add(Ua.handles.start.point,Ua.point);ge.isEqual(mc,Sb)&&mc[1]++;Nb=nb.hitTestPoint(N);mc=ge.uni(ge.sub(mc,Sb));const Pc=void 0!==this.app.currentPage.bindings[this.newStartBindingId];ea||nb.hitTestPoint(ge.add(Ua.point,Pb.point))||(qc=Kc(La.props,nb,"start",this.newStartBindingId,Sb,Sb,mc,Nb));qc&&!Pc?(yc[this.newStartBindingId]=
qc,Ua.handles.start.bindingId=qc.id):!qc&&Pc&&(console.log("removing start binding"),delete yc[this.newStartBindingId],Ua.handles.start.bindingId=void 0)}}if(!ea){qc=ge.add(ib.point,Ua.point);ib=ge.add(cb.point,Ua.point);cb=ge.uni(ge.sub(ib,qc));const Pc=ge.add(Ua.point,Ua.handles.start.point),Uc=ge.add(Ua.point,Ua.handles.end.point);nb=this.bindableShapeIds.map(Ed=>this.app.getShapeById(Ed)).sort((Ed,Ud)=>Ud.nonce-Ed.nonce).filter(Ed=>![Pc,Uc].every(Ud=>Ed.hitTestPoint(Ud)));for(const Ed of nb)if(bc=
Kc(La.props,Ed,this.handleId,this.draggedBindingId,ib,qc,cb,ka))break}bc?(yc[this.draggedBindingId]=bc,Ua=dm(Ua,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(La=La.props.handles[this.handleId].bindingId,void 0!==La&&(delete yc[La],Ua=dm(Ua,{handles:{[this.handleId]:{bindingId:void 0}}})));lc=this.currentShape.getHandlesChange(Ua,Ua.handles);Mc(()=>{var Pc;if(lc){this.currentShape.update(lc);this.app.currentPage.updateBindings(yc);const Uc=Object.values(null!=(Pc=lc.handles)?Pc:
{}).map(Ed=>Ed.bindingId).map(Ed=>this.app.currentPage.bindings[Ed]).filter(Boolean).flatMap(Ed=>[Ed.toId,Ed.fromId].filter(Boolean));this.app.setBindingShapes(Uc)}})}}});kb(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});kb(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.deleteShapes([this.currentShape]),
this.tool.transition("idle")}})}};kb(Ax,"id","creating");var eA=class extends Ax{constructor(){super(...arguments);kb(this,"onEnter",()=>{var a;this.app.history.pause();this.newStartBindingId=fk();this.draggedBindingId=fk();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:d}=this.tool;const {originPoint:k}=this.app.inputs;d=new d(uf(me({},d.defaultProps),{id:fk(),type:d.id,parentId:this.app.currentPage.id,point:this.app.settings.snapToGrid?ge.snap(k,8):k,fill:this.app.settings.color,
stroke:this.app.settings.color,scaleLevel:this.app.settings.scaleLevel}));this.initialShape=pc(d.props);this.currentShape=d;this.app.currentPage.addShapes(d);this.app.setSelectedShapes([d]);if(this.startBindingShapeId=null==(a=this.bindableShapeIds.map(N=>this.app.getShapeById(N)).filter(N=>vk.pointInBounds(k,N.bounds))[0])?void 0:a.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};kb(eA,"id","creating");
var fA=class extends Qi{constructor(){super(...arguments);kb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("pointing")});kb(this,"onPinchStart",(...a)=>{var d,k;this.app.transition("select",{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});kb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);
break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a)}});kb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};kb(fA,"id","idle");var gA=class extends Qi{constructor(){super(...arguments);kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Gd.dist(a,d)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};
kb(gA,"id","pointing");var Zv=class extends Br{constructor(){super(...arguments);kb(this,"cursor","crosshair")}};kb(Zv,"id","line");kb(Zv,"states",[fA,gA,eA]);kb(Zv,"initial","idle");var hA=class extends Qi{constructor(){super(...arguments);kb(this,"cursor","crosshair");kb(this,"creatingShape");kb(this,"aspectRatio");kb(this,"initialBounds",{});kb(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:d}}=this.app,{Shape:k}=this.tool,N=new k({id:fk(),type:k.id,parentId:a.id,point:[...d],text:"",
size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=N;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);Mc(()=>{this.app.currentPage.addShapes(N);const ea=this.app.settings.snapToGrid?ge.snap([...d],8):d,{bounds:ka}=N;N.update({point:ge.sub(ea,[ka.width/2,ka.height/2])});this.app.transition("select");this.app.setSelectedShapes([N]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};
kb(hA,"id","creating");var iA=class extends Qi{constructor(){super(...arguments);kb(this,"onPointerDown",(a,d)=>{a.order||this.app.readOnly||this.tool.transition("creating")});kb(this,"onPinchStart",(...a)=>{var d,k;this.app.transition("select",{returnTo:this.app.currentState.id});null==(k=(d=this.app._events).onPinchStart)?void 0:k.call(d,...a)});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}})}};kb(iA,"id","idle");var $v=class extends Br{constructor(){super(...arguments);
kb(this,"cursor","crosshair")}};kb($v,"id","box");kb($v,"states",[iA,hA]);kb($v,"initial","idle");var BE=Df(Bm()),CE=class extends BE.default{constructor(){super(...arguments);kb(this,"toBBox",a=>a.rotatedBounds)}},jA=class extends Qi{constructor(){super(...arguments);kb(this,"initialSelectedIds",[]);kb(this,"initialSelectedShapes",[]);kb(this,"tree",new CE);kb(this,"onEnter",()=>{const {selectedShapes:a,currentPage:d,selectedIds:k}=this.app;this.initialSelectedIds=Array.from(k.values());this.initialSelectedShapes=
Array.from(a.values());this.tree.load(d.shapes)});kb(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});kb(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,ctrlKey:d,originPoint:k,currentPoint:N}}=this.app,ea=Ef.getBoundsFromPoints([N,k],0);this.app.setBrush(ea);const ka=[...(new Set(this.tree.search(ea).filter(sa=>d?Ef.boundsContain(ea,sa.rotatedBounds):sa.hitTestBounds(ea)).filter(sa=>"group"!==sa.type).map(sa=>{var La;return null!=(La=this.app.getParentGroup(sa))?
La:sa})))];a?ka.every(sa=>this.initialSelectedShapes.includes(sa))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(sa=>!ka.includes(sa))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,...ka]))]):this.app.setSelectedShapes(ka);this.app.viewport.panToPointWhenNearBounds(N)});kb(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});kb(this,"handleModifierKey",(a,d)=>{switch(d.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),
this.tool.transition("idle")}})}};kb(jA,"id","brushing");var kA=class extends Qi{constructor(){super(...arguments);kb(this,"onEnter",a=>{var d;const {selectedIds:k,inputs:{shiftKey:N}}=this.app;if("shape"===a.type&&!k.has(a.shape.id)){const ea=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;N?this.app.setSelectedShapes([...Array.from(k.values()),ea.id]):this.app.setSelectedShapes([ea])}});kb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};kb(kA,"id","contextMenu");var lA=class extends Qi{constructor(){super(...arguments);
kb(this,"onEnter",a=>{"pinching"===a.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});kb(this,"onExit",()=>{});kb(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a);break;case "canvas":this.app.setHoveredShape(void 0)}});kb(this,"onPointerDown",(a,d)=>{const {selectedShapes:k,inputs:{ctrlKey:N}}=this.app;
if(2===d.button)this.tool.transition("contextMenu",a);else if(N)this.tool.transition("pointingCanvas");else switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",a)}break;case "shape":if(k.has(a.shape))this.tool.transition("pointingSelectedShape",a);else{const {selectionBounds:ea,inputs:ka}=this.app;
ea&&vk.pointInBounds(ka.currentPoint,ea)?this.tool.transition("pointingShapeBehindBounds",a):this.tool.transition("pointingShape",a)}break;case "handle":this.tool.transition("pointingHandle",a);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",me(me({},d),a))}});kb(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",
{info:a,event:d})});kb(this,"onDoubleClick",a=>{if(!a.order&&1===this.app.selectedShapesArray.length&&!this.app.readOnly){var d=this.app.selectedShapesArray[0];if(d.canEdit&&!d.props.isLocked)switch(a.type){case "shape":this.tool.transition("editingShape",a);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:d})}}});kb(this,"onKeyDown",(a,d)=>{({selectedShapesArray:a}=this.app);switch(d.key){case "Enter":1===a.length&&a[0].canEdit&&
!this.app.readOnly&&this.tool.transition("editingShape",{type:"shape",shape:a[0],order:0});break;case "Escape":a.length&&this.app.setSelectedShapes([])}})}};kb(lA,"id","idle");var mA=class extends Qi{constructor(){super(...arguments);kb(this,"onEnter",a=>{var d;const {selectedIds:k,inputs:{shiftKey:N}}=this.app,ea=null!=(d=this.app.getParentGroup(a.shape))?d:a.shape;N?this.app.setSelectedShapes([...Array.from(k.values()),ea.id]):this.app.setSelectedShapes([ea])});kb(this,"onPointerMove",()=>{const {currentPoint:a,
originPoint:d}=this.app.inputs;5<Gd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});kb(this,"onPointerUp",()=>{this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};kb(mA,"id","pointingShape");var nA=class extends Qi{constructor(){super(...arguments);kb(this,"cursor","move");kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Gd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});
kb(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};kb(nA,"id","pointingBoundsBackground");var oA=class extends Qi{constructor(){super(...arguments);kb(this,"onEnter",()=>{var a;const {shiftKey:d}=this.app.inputs;d||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(a=window.getSelection())?void 0:a.removeAllRanges())});kb(this,"onPointerMove",()=>{const {currentPoint:a,
originPoint:d}=this.app.inputs;5<Gd.dist(a,d)&&this.tool.transition("brushing")});kb(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});kb(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};kb(oA,"id","pointingCanvas");var pA=class extends Qi{constructor(){super(...arguments);kb(this,"cursor","move");kb(this,
"isCloning",!1);kb(this,"didClone",!1);kb(this,"initialPoints",{});kb(this,"initialShapePoints",{});kb(this,"initialClonePoints",{});kb(this,"clones",[]);kb(this,"onEnter",()=>{var a;this.app.history.pause();const {allSelectedShapesArray:d,inputs:k}=this.app;this.initialPoints=this.initialShapePoints=Object.fromEntries(d.map(({id:N,props:{point:ea}})=>[N,ea.slice()]));document.querySelectorAll("input,textarea").forEach(N=>N.blur());null==(a=document.getSelection())?void 0:a.empty();k.altKey?this.startCloning():
this.moveSelectedShapesToPointer()});kb(this,"onExit",()=>{this.app.history.resume();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});kb(this,"onPointerMove",()=>{const {inputs:{currentPoint:a}}=this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenNearBounds(a)});kb(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});kb(this,"onPointerUp",()=>{this.app.history.resume();
this.app.persist();this.tool.transition("idle")});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(k=>{k.update({point:this.initialPoints[k.id]})}),this.tool.transition("idle")}});kb(this,"onKeyUp",(a,d)=>{switch(d.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:k,allSelectedShapes:N}=this.app;k.removeShapes(...N);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));
this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:a,originPoint:d,currentPoint:k}}=this.app,{initialPoints:N}=this,ea=Gd.sub(k,d);a&&(Math.abs(ea[0])<Math.abs(ea[1])?ea[0]=0:ea[1]=0);Mc(()=>{this.app.allSelectedShapesArray.filter(ka=>!ka.props.isLocked).forEach(ka=>{let sa=Gd.add(N[ka.id],ea);this.app.settings.snapToGrid&&(sa=Gd.snap(sa,8));ka.update({point:sa})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(a=>
{const d=this.app.getShapeClass(a.type);if(!d)throw Error("Could not find that shape class.");return new d(uf(me({},a.serialized),{id:fk(),type:a.type,point:this.initialPoints[a.id],rotation:a.props.rotation,isLocked:!1}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:a,props:{point:d}})=>[a,d.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(a=>{a.update({point:this.initialPoints[a.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);
this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};kb(pA,"id","translating");var qA=class extends Qi{constructor(){super(...arguments);kb(this,"pointedSelectedShape");kb(this,"onEnter",a=>{this.pointedSelectedShape=a.shape});kb(this,"onExit",()=>{this.pointedSelectedShape=void 0});kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Gd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});
kb(this,"onPointerUp",()=>{const {shiftKey:a,currentPoint:d}=this.app.inputs;var {selectedShapesArray:k}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(a)({selectedIds:k}=this.app),k=Array.from(k.values()),k.splice(k.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(k);else{if(1===k.length&&this.pointedSelectedShape.canEdit&&!this.app.readOnly&&!this.pointedSelectedShape.props.isLocked&&this.pointedSelectedShape instanceof Bn&&vk.pointInBounds(d,
this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};kb(qA,"id","pointingSelectedShape");var rA=class extends Qi{constructor(){super(...arguments);kb(this,"info",{});kb(this,"onEnter",a=>{this.info=a;this.updateCursor()});kb(this,"onExit",()=>{this.app.cursors.reset()});
kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Gd.dist(a,d)&&this.tool.transition("resizing",this.info)});kb(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(ut[this.info.handle],this.app.selectionBounds.rotation)}};kb(rA,"id","pointingResizeHandle");var sA=class extends Qi{constructor(){super(...arguments);
kb(this,"isSingle",!1);kb(this,"handle","bottom_right_corner");kb(this,"snapshots",{});kb(this,"initialCommonBounds",{});kb(this,"selectionRotation",0);kb(this,"resizeType","corner");kb(this,"onEnter",a=>{var d,k;const {history:N,selectedShapesArray:ea,selectionBounds:ka}=this.app;if(!ka)throw Error("Expected a selected bounds.");this.handle=a.handle;this.resizeType="left_edge"===a.handle||"right_edge"===a.handle?"horizontal-edge":"top_edge"===a.handle||"bottom_edge"===a.handle?"vertical-edge":"corner";
this.app.cursors.setCursor(sA.CURSORS[a.handle],null==(d=this.app.selectionBounds)?void 0:d.rotation);N.pause();const sa=Ef.getBoundsFromPoints(ea.map(La=>Ef.getBoundsCenter(La.bounds)));this.selectionRotation=(this.isSingle=1===ea.length)?null!=(k=ea[0].props.rotation)?k:0:0;this.initialCommonBounds=me({},ka);this.snapshots=Object.fromEntries(ea.map(La=>{const Ua=me({},La.bounds),[cb,ib]=Ef.getBoundsCenter(Ua);return[La.id,{props:La.serialized,bounds:Ua,transformOrigin:[(cb-this.initialCommonBounds.minX)/
this.initialCommonBounds.width,(ib-this.initialCommonBounds.minY)/this.initialCommonBounds.height],innerTransformOrigin:[(cb-sa.minX)/sa.width,(ib-sa.minY)/sa.height],isAspectRatioLocked:La.props.isAspectRatioLocked||!(La.canChangeAspectRatio&&!La.props.rotation)}]}));ea.forEach(La=>{var Ua;null==(Ua=La.onResizeStart)?void 0:Ua.call(La,{isSingle:this.isSingle})})});kb(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});
kb(this,"onPointerMove",()=>{const {inputs:{altKey:a,shiftKey:d,ctrlKey:k,originPoint:N,currentPoint:ea}}=this.app,{handle:ka,snapshots:sa,initialCommonBounds:La}=this;let Ua=Gd.sub(ea,N);a&&(Ua=Gd.mul(Ua,2));const cb=this.app.selectedShapes.values().next().value;let ib=Ef.getTransformedBoundingBox(La,ka,Ua,this.selectionRotation,d||this.isSingle&&(k?!("clipping"in cb.props):!cb.canChangeAspectRatio||cb.props.isAspectRatioLocked));a&&(ib=me(me({},ib),Ef.centerBounds(ib,Ef.getBoundsCenter(La))));const {scaleX:nb,
scaleY:Pb}=ib;this.app.selectedShapes.forEach(Sb=>{var Nb,lc;const {isAspectRatioLocked:yc,props:bc,bounds:qc,transformOrigin:mc}=sa[Sb.id];let Pc=Ef.getRelativeTransformedBoundingBox(ib,La,qc,0>nb,0>Pb);if(Sb.canResize.some(Ud=>Ud)||Sb.props.isSizeLocked||!this.isSingle){var Uc=[nb,Pb],Ed=null!=(Nb=bc.rotation)?Nb:0;Nb=Ef.getBoundsCenter(Pc);Sb.canFlip||(Uc=Gd.abs(Uc));Sb.canScale||(Uc=null!=(lc=bc.scale)?lc:[1,1]);if(Ed&&0>nb&&0<=Pb||0>Pb&&0<=nb)Ed*=-1;this.app.settings.snapToGrid&&!yc&&(Pc=Ef.snapBoundsToGrid(Pc,
8));Sb.onResize(bc,{center:Nb,rotation:Ed,scale:Uc,bounds:Pc,type:ka,clip:k,transformOrigin:mc})}});this.updateCursor(nb,Pb);this.app.viewport.panToPointWhenNearBounds(ea)});kb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(k=>{k.update(me({},this.snapshots[k.id].props))}),this.tool.transition("idle")}})}updateCursor(a,d){var k,N,ea,ka;const sa=0>a&&0<=d;a=0>
d&&0<=a;switch(this.handle){case "top_left_corner":case "bottom_right_corner":sa||a?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(k=this.app.selectionBounds)?void 0:k.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(N=this.app.selectionBounds)?void 0:N.rotation);break;case "top_right_corner":case "bottom_left_corner":sa||a?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==
(ea=this.app.selectionBounds)?void 0:ea.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(ka=this.app.selectionBounds)?void 0:ka.rotation)}}},Bx=sA;kb(Bx,"id","resizing");kb(Bx,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var tA=class extends Qi{constructor(){super(...arguments);
kb(this,"cursor","rotate");kb(this,"handle","");kb(this,"onEnter",a=>{this.app.history.pause();this.handle=a.handle;this.updateCursor()});kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Gd.dist(a,d)&&this.tool.transition("rotating",{handle:this.handle})});kb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}updateCursor(){this.app.cursors.setCursor(ut[this.handle],
this.app.selectionRotation)}};kb(tA,"id","pointingRotateHandle");var uA=class extends Qi{constructor(){super(...arguments);kb(this,"info",{});kb(this,"onEnter",a=>{this.info=a});kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Gd.dist(a,d)&&!this.app.readOnly&&this.tool.transition("translating")});kb(this,"onPointerUp",()=>{const {selectedIds:a,inputs:{shiftKey:d}}=this.app;d?this.app.setSelectedShapes([...Array.from(a.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);
this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};kb(uA,"id","pointingShapeBehindBounds");var Cx=class extends Qi{constructor(){super(...arguments);kb(this,"cursor","rotate");kb(this,"snapshot",{});kb(this,"initialCommonCenter",[0,0]);kb(this,"initialCommonBounds",{});kb(this,"initialAngle",0);kb(this,"initialSelectionRotation",0);kb(this,"handle","");kb(this,"onEnter",a=>{const {history:d,selectedShapesArray:k,selectionBounds:N}=this.app;
if(!N)throw Error("Expected selected bounds.");d.pause();this.handle=a.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=me({},N);this.initialCommonCenter=Ef.getBoundsCenter(N);this.initialAngle=Gd.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(k.map(ea=>[ea.id,{point:[...ea.props.point],center:[...ea.center],rotation:ea.props.rotation,handles:"handles"in ea?Qs(ea.handles):void 0}]));this.updateCursor()});kb(this,
"onExit",()=>{this.app.history.resume();this.snapshot={}});kb(this,"onPointerMove",()=>{const {selectedShapes:a,inputs:{shiftKey:d,currentPoint:k}}=this.app,{snapshot:N,initialCommonCenter:ea,initialAngle:ka,initialSelectionRotation:sa}=this;let La=Gd.angle(ea,k)-ka;d&&(La=ym.snapAngleToSegments(La,24));a.forEach(cb=>{var ib=N[cb.id];let nb=0;if(d){var {rotation:Pb=0}=ib;nb=ym.snapAngleToSegments(Pb,24)-Pb}const Sb=Gd.sub(ib.center,ib.point);Pb=Gd.rotWith(ib.center,ea,La);if("handles"in cb){ib=ib.handles;
const Nb=ib.map(yc=>Gd.rotWith(yc.point,Sb,La)),lc=Ef.getCommonTopLeft(Nb);cb.update({point:Gd.add(lc,Gd.sub(Pb,Sb)),handles:ib.map((yc,bc)=>uf(me({},yc),{point:Gd.sub(Nb[bc],lc)}))})}else cb.update({point:Gd.sub(Pb,Sb),rotation:ym.clampRadians((ib.rotation||0)+La+nb)})});const Ua=ym.clampRadians(sa+La);this.app.setSelectionRotation(d?ym.snapAngleToSegments(Ua,24):Ua);this.updateCursor()});kb(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});kb(this,
"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.selectedShapes.forEach(k=>{k.update(this.snapshot[k.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(ut[this.handle],this.app.selectionRotation)}};kb(Cx,"id","rotating");var vA=class extends Qi{constructor(){super(...arguments);kb(this,"onPinch",(a,d)=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});kb(this,"onPinchEnd",()=>{this.tool.transition("idle")});kb(this,"onPointerDown",()=>{this.tool.transition("idle")})}};
kb(vA,"id","pinching");var wA=class extends Ax{constructor(){super(...arguments);kb(this,"cursor","grabbing");kb(this,"onEnter",a=>{this.app.history.pause();this.newStartBindingId=fk();this.draggedBindingId=fk();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=a.id;this.currentShape=a.shape;this.initialShape=pc(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};kb(wA,"id","translatingHandle");var xA=class extends Qi{constructor(){super(...arguments);
kb(this,"cursor","grabbing");kb(this,"info",{});kb(this,"onEnter",a=>{this.info=a});kb(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:d}=this.app.inputs;5<Gd.dist(a,d)&&this.tool.transition("translatingHandle",this.info)});kb(this,"onPointerUp",()=>{this.tool.transition("idle")});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};kb(xA,"id","pointingHandle");var yA=class extends Qi{constructor(){super(...arguments);kb(this,"handle");kb(this,"onEnter",
a=>{var d;this.app.cursors.setCursor(ut[a.handle],null!=(d=this.app.selectionBounds.rotation)?d:0);this.handle=a.handle});kb(this,"onExit",()=>{this.app.cursors.reset()});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});kb(this,"onPointerDown",a=>{switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",
a);break;default:this.tool.transition("pointingResizeHandle",a)}}});kb(this,"onPointerLeave",()=>{this.tool.transition("idle")});kb(this,"onDoubleClick",a=>{var d;if(!a.order&&1===this.app.selectedShapes.size){var k=this.app.selectedShapes.values().next().value;if(!k.canEdit||this.app.readOnly||k.props.isLocked)k.onResetBounds({asset:k.props.assetId?this.app.assets[k.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle");else switch(a.type){case "shape":this.tool.transition("editingShape",
a);break;case "selection":null==(d=k.onResetBounds)?void 0:d.call(k,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:k})}}})}};kb(yA,"id","hoveringSelectionHandle");var zA=class extends Qi{constructor(){super(...arguments);kb(this,"editingShape",{});kb(this,"onEnter",a=>{this.editingShape=a.shape;this.app.setEditingShape(a.shape)});kb(this,"onExit",()=>{var a;if(this.editingShape&&"text"in this.editingShape.props){const d=
this.editingShape.props.text.trim();""===d&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:d}))}this.app.persist();this.app.setEditingShape();null==(a=document.querySelector(".tl-canvas"))?void 0:a.focus()});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})});kb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.editingShape)break;this.tool.transition("idle",
a);break;case "canvas":a.order||this.tool.transition("idle",a)}});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":Mc(()=>{d.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};kb(zA,"id","editingShape");var AA=class extends Qi{constructor(){super(...arguments);kb(this,"minimapZoom",1);kb(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});kb(this,"getCameraPoint",a=>{const d=document.querySelector(".tl-preview-minimap svg");
var k=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(d&&k){const N=d.getBoundingClientRect();this.minimapRect.height=N.height;this.minimapRect.width=N.width;this.minimapRect.minX=N.left;this.minimapRect.minY=N.top;this.minimapRect.maxX=N.right;this.minimapRect.maxY=N.bottom;this.minimapZoom=+d.dataset.commonBoundWidth/this.minimapRect.width;a=Gd.sub(a,[this.minimapRect.minX,this.minimapRect.minY]);k=k.getBoundingClientRect();k=Gd.mul(Gd.sub(a,[k.left+k.width/2,k.top+k.height/
2]),this.minimapZoom);return Gd.sub(this.app.viewport.camera.point,k)}});kb(this,"onEnter",a=>{(a=this.getCameraPoint([a.clientX,a.clientY]))?this.app.viewport.update({point:a}):this.tool.transition("idle")});kb(this,"onPointerMove",(a,d)=>{"clientX"in d&&(a=this.getCameraPoint([d.clientX,d.clientY]))&&this.app.viewport.update({point:a})});kb(this,"onPointerUp",()=>{this.tool.transition("idle")})}};kb(AA,"id","pointingMinimap");var Nt=class extends Br{constructor(){super(...arguments);kb(this,"returnTo",
"");kb(this,"onEnter",a=>{this.returnTo=null==a?void 0:a.returnTo})}};kb(Nt,"id","select");kb(Nt,"initial","idle");kb(Nt,"shortcut","whiteboard/select");kb(Nt,"states",[lA,jA,kA,oA,mA,uA,qA,nA,yA,rA,tA,AA,xA,wA,pA,Bx,Cx,Cx,vA,zA]);var BA=class extends Qi{constructor(){super(...arguments);kb(this,"cursor","grabbing");kb(this,"originalScreenPoint",[]);kb(this,"originalCameraPoint",[]);kb(this,"prevState","idle");kb(this,"onEnter",a=>{this.prevState=null==a?void 0:a.prevState;this.originalScreenPoint=
this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});kb(this,"onPointerMove",(a,d)=>{a=ge.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:ge.sub(this.originalCameraPoint,ge.div(a,this.app.viewport.camera.zoom))})});kb(this,"onPointerUp",()=>{var a;this.tool.transition(null!=(a=this.prevState)?a:"idle")})}};kb(BA,"id","panning");var CA=class extends Qi{constructor(){super(...arguments);kb(this,"onEnter",a=>{this.parent.prevTool&&
a.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});kb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning")})}};kb(CA,"id","idle");var DA=class extends Qi{constructor(){super(...arguments);kb(this,"onPointerDown",(a,d)=>{a.order||this.tool.transition("panning",{prevState:"idleHold"})});kb(this,"onPinchStart",(a,d)=>{this.tool.transition("pinching",{info:a,event:d})})}};kb(DA,
"id","idleHold");var EA=class extends Qi{constructor(){super(...arguments);kb(this,"origin",[0,0]);kb(this,"prevDelta",[0,0]);kb(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});kb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});kb(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};kb(EA,"id","pinching");var Ot=class extends Br{constructor(){super(...arguments);kb(this,"cursor","grab");kb(this,"prevTool",null);kb(this,"onEnter",a=>{this.prevTool=
null==a?void 0:a.prevTool});kb(this,"onKeyDown",(a,d)=>{switch(d.key){case "Escape":this.app.transition("select")}});kb(this,"onPinchStart",(a,d)=>{this.transition("pinching",{info:a,event:d})})}};kb(Ot,"id","move");kb(Ot,"shortcut","whiteboard/pan");kb(Ot,"states",[CA,DA,BA,EA]);kb(Ot,"initial","idle");var Em=class{constructor(a,d={}){kb(this,"lastShapesNounces",null);kb(this,"app");kb(this,"id");kb(this,"name");kb(this,"shapes",[]);kb(this,"bindings",{});kb(this,"nonce",0);kb(this,"bringForward",
La=>{const Ua=this.parseShapesArg(La);Ua.sort((cb,ib)=>this.shapes.indexOf(ib)-this.shapes.indexOf(cb)).map(cb=>this.shapes.indexOf(cb)).forEach(cb=>{if(cb!==this.shapes.length-1&&!Ua.includes(this.shapes[cb+1])){var ib=this.shapes[cb];this.shapes[cb]=this.shapes[cb+1];this.shapes[cb+1]=ib}});this.app.persist();return this});kb(this,"sendBackward",La=>{const Ua=this.parseShapesArg(La);Ua.sort((cb,ib)=>this.shapes.indexOf(cb)-this.shapes.indexOf(ib)).map(cb=>this.shapes.indexOf(cb)).forEach(cb=>{if(0!==
cb&&!Ua.includes(this.shapes[cb-1])){var ib=this.shapes[cb];this.shapes[cb]=this.shapes[cb-1];this.shapes[cb-1]=ib}});this.app.persist();return this});kb(this,"bringToFront",La=>{const Ua=this.parseShapesArg(La);this.shapes=this.shapes.filter(cb=>!Ua.includes(cb)).concat(Ua);this.app.persist();return this});kb(this,"sendToBack",La=>{const Ua=this.parseShapesArg(La);this.shapes=Ua.concat(this.shapes.filter(cb=>!Ua.includes(cb)));this.app.persist();return this});kb(this,"flip",(La,Ua)=>{La=this.parseShapesArg(La);
const cb=Ef.getCommonBounds(La.map(ib=>ib.bounds));La.forEach(ib=>{var nb;const Pb=Ef.getRelativeTransformedBoundingBox(cb,cb,ib.bounds,"horizontal"===Ua,"vertical"===Ua);if(ib.serialized)ib.onResize(ib.serialized,{bounds:Pb,center:Ef.getBoundsCenter(Pb),rotation:null!=(nb=ib.props.rotation)?nb:-0,type:"top_left_corner",scale:ib.canFlip&&ib.props.scale?"horizontal"===Ua?[-ib.props.scale[0],1]:[1,-ib.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});kb(this,
"getShapeById",La=>this.shapes.find(Ua=>Ua.id===La));kb(this,"cleanup",La=>{La=cc(this.bindings,La);const Ua=new Set;let cb=!1,ib=!1;const nb=Qs(this.bindings);La.forEach(Pb=>{var Sb;if(this.bindings[Pb.id]){var Nb=this.getShapeById(Pb.toId),lc=this.getShapeById(Pb.fromId);Nb&&lc?Ua.has(lc.id)||(Pb=this.updateArrowBindings(lc),Ua.add(lc.id),Pb&&(Nb=me(me({},lc.props),Pb),cb=!0,null==(Sb=this.getShapeById(Nb.id))?void 0:Sb.update(Nb,!1,(0,TE.default)(null==Pb?void 0:Pb.handles,null==lc?void 0:lc.props.handles)))):
(delete nb[Pb.id],ib=!0)}});Object.keys(nb).forEach(Pb=>{const Sb=this.bindings[Pb];0===this.shapes.filter(Nb=>Nb.id===Sb.fromId||Nb.id===Sb.toId).length&&(delete nb[Pb],ib=!0)});ib&&this.update({bindings:nb});(cb||ib)&&this.app.persist(!0)});kb(this,"updateArrowBindings",La=>{var Ua,cb,ib,nb={start:Qs(La.props.handles.start),end:Qs(La.props.handles.end)},Pb={isBound:!1,handle:La.props.handles.start,point:ge.add(La.props.handles.start.point,La.props.point)},Sb={isBound:!1,handle:La.props.handles.end,
point:ge.add(La.props.handles.end.point,La.props.point)};if(La.props.handles.start.bindingId){var Nb=void 0!==(null==(Ua=La.props.decorations)?void 0:Ua.start);Ua=La.props.handles.start;var lc=this.bindings[La.props.handles.start.bindingId],yc=this.getShapeById(null==lc?void 0:lc.toId);if(yc){Pb=yc.getBounds();var bc=yc.getExpandedBounds(),qc=Ef.expandBounds(Pb,Nb?lc.distance:1);const {minX:mc,minY:Pc,width:Uc,height:Ed}=bc,Ud=ge.add([mc,Pc],ge.mulV([Uc,Ed],ge.rotWith(lc.point,[.5,.5],yc.props.rotation||
0)));Pb={isBound:!0,hasDecoration:Nb,binding:lc,handle:Ua,point:Ud,target:yc,bounds:Pb,expandedBounds:bc,intersectBounds:qc,center:yc.getCenter()}}}if(La.props.handles.end.bindingId&&(Nb=void 0!==(null==(cb=La.props.decorations)?void 0:cb.end),cb=La.props.handles.end,Ua=this.bindings[La.props.handles.end.bindingId],lc=this.getShapeById(null==Ua?void 0:Ua.toId))){Sb=lc.getBounds();yc=lc.getExpandedBounds();bc=Nb?Ef.expandBounds(Sb,Ua.distance):Sb;const {minX:mc,minY:Pc,width:Uc,height:Ed}=yc;qc=ge.add([mc,
Pc],ge.mulV([Uc,Ed],ge.rotWith(Ua.point,[.5,.5],lc.props.rotation||0)));Sb={isBound:!0,hasDecoration:Nb,binding:Ua,handle:cb,point:qc,target:lc,bounds:Sb,expandedBounds:yc,intersectBounds:bc,center:lc.getCenter()}}for(const mc of["end","start"]){cb="start"===mc?Pb:Sb;const Pc="start"===mc?Sb:Pb;if(cb.isBound)if(cb.binding.distance){if(Nb=ge.uni(ge.sub(cb.point,Pc.point)),Ua=A(Pc.point,Nb,cb.intersectBounds,cb.target.props.rotation).filter(Uc=>Uc.didIntersect).map(Uc=>Uc.points[0]).sort((Uc,Ed)=>ge.dist(Uc,
Pc.point)-ge.dist(Ed,Pc.point)),Ua[0])if(lc=void 0,Pc.isBound&&(lc=A(Pc.point,Nb,Pc.intersectBounds,Pc.target.props.rotation).filter(Uc=>Uc.didIntersect).map(Uc=>Uc.points[0]).sort((Uc,Ed)=>ge.dist(Uc,Pc.point)-ge.dist(Ed,Pc.point))[0]),Pc.isBound&&(2>Ua.length||lc&&Ua[0]&&10>Math.ceil(ge.dist(Ua[0],lc))||Ef.boundsContain(cb.expandedBounds,Pc.expandedBounds)||Ef.boundsCollide(cb.expandedBounds,Pc.expandedBounds)))Nb=ge.uni(ge.sub(Pc.point,cb.point)),Ua=A(cb.point,Nb,cb.bounds,cb.target.props.rotation).filter(Uc=>
Uc.didIntersect).map(Uc=>Uc.points[0]),Ua[0]&&(nb[mc].point=ge.toFixed(ge.sub(Ua[0],La.props.point)),nb["start"===mc?"end":"start"].point=ge.toFixed(ge.add(ge.sub(Ua[0],La.props.point),ge.mul(Nb,Math.min(ge.dist(Ua[0],Pc.point),10*(Ef.boundsContain(Pc.bounds,cb.intersectBounds)?-1:1))))));else{if(!Pc.isBound&&(Ua[0]&&10>ge.dist(Ua[0],Pc.point)||vk.pointInBounds(Pc.point,cb.intersectBounds)))return nb=ge.uni(ge.sub(cb.center,Pc.point)),null==(ib=La.getHandlesChange)?void 0:ib.call(La,La.props,{[mc]:uf(me({},
La.props.handles[mc]),{point:ge.toFixed(ge.add(ge.sub(Pc.point,La.props.point),ge.mul(nb,10)))})});Ua[0]&&(nb[mc].point=ge.toFixed(ge.sub(Ua[0],La.props.point)))}}else nb[mc].point=ge.sub(cb.point,La.props.point)}return La.getHandlesChange(La.props,nb)});const {id:k,name:N,shapes:ea=[],bindings:ka={},nonce:sa}=d;this.id=k;this.name=N;this.bindings=Object.assign({},ka);this.app=a;this.nonce=sa||0;this.addShapes(...ea);ef(this);nc(()=>{const La=0<this.shapes.length?Object.fromEntries(this.shapes.map(Ua=>
[Ua.id,Ua.nonce])):null;if(this.lastShapesNounces&&La){const Ua=this.lastShapesNounces,cb=[...(new Set([...Object.keys(La),...Object.keys(Ua)]))].filter(ib=>Ua[ib]!==La[ib]);requestAnimationFrame(()=>{this.cleanup(cb)})}La&&(this.lastShapesNounces=La)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(a=>a.serialized).filter(a=>!!a).map(a=>pc(a)),bindings:Qs(this.bindings),nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(a=>[a.id,a]))}update(a){Object.assign(this,
a);return this}updateBindings(a){Object.assign(this.bindings,a);return this}updateShapesIndex(a){this.shapes.sort((d,k)=>a.indexOf(d.id)-a.indexOf(k.id));return this}addShapes(...a){if(0!==a.length)return a="getBounds"in a[0]?a:a.map(d=>new (this.app.getShapeClass(d.type))(d)),this.shapes.push(...a),a}parseShapesArg(a){return"string"===typeof a[0]?this.shapes.filter(d=>a.includes(d.id)):a}removeShapes(...a){const d=this.parseShapesArg(a);this.shapes=this.shapes.filter(k=>!d.includes(k));return d}getBindableShapes(){return this.shapes.filter(a=>
a.canBind).sort((a,d)=>d.nonce-a.nonce).map(a=>a.id)}};de([cf],Em.prototype,"id",2);de([cf],Em.prototype,"name",2);de([cf],Em.prototype,"shapes",2);de([cf],Em.prototype,"bindings",2);de([Kf],Em.prototype,"serialized",1);de([Kf],Em.prototype,"shapesById",1);de([cf],Em.prototype,"nonce",2);de([Ig],Em.prototype,"update",1);de([Ig],Em.prototype,"updateBindings",1);de([Ig],Em.prototype,"updateShapesIndex",1);de([Ig],Em.prototype,"addShapes",1);de([Ig],Em.prototype,"removeShapes",1);de([Ig],Em.prototype,
"bringForward",2);de([Ig],Em.prototype,"sendBackward",2);de([Ig],Em.prototype,"bringToFront",2);de([Ig],Em.prototype,"sendToBack",2);de([Ig],Em.prototype,"cleanup",2);var Nk=class{constructor(){kb(this,"shiftKey",!1);kb(this,"ctrlKey",!1);kb(this,"modKey",!1);kb(this,"altKey",!1);kb(this,"spaceKey",!1);kb(this,"isPinching",!1);kb(this,"currentScreenPoint",[0,0]);kb(this,"currentPoint",[0,0]);kb(this,"previousScreenPoint",[0,0]);kb(this,"previousPoint",[0,0]);kb(this,"originScreenPoint",[0,0]);kb(this,
"originPoint",[0,0]);kb(this,"pointerIds",new Set);kb(this,"state","idle");kb(this,"containerOffset",[0,0]);kb(this,"onPointerDown",(a,d)=>{this.pointerIds.add(d.pointerId);this.updateModifiers(d);this.originScreenPoint=this.currentScreenPoint;this.originPoint=a;this.state="pointing"});kb(this,"onPointerMove",(a,d)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(d),this.previousPoint=this.currentPoint,this.currentPoint=a)});kb(this,"onPointerUp",(a,d)=>
{this.pointerIds.clear();this.updateModifiers(d);this.state="idle"});kb(this,"onKeyDown",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!0}});kb(this,"onKeyUp",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!1}});kb(this,"onPinchStart",(a,d)=>{this.updateModifiers(d);this.state="pinching"});kb(this,"onPinch",(a,d)=>{"pinching"===this.state&&this.updateModifiers(d)});kb(this,"onPinchEnd",(a,d)=>{"pinching"===this.state&&(this.updateModifiers(d),this.state="idle")});
ef(this)}updateContainerOffset(a){Object.assign(this.containerOffset,a)}updateModifiers(a){a.isPrimary&&("clientX"in a&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=ge.sub([a.clientX,a.clientY],this.containerOffset)),"shiftKey"in a&&(this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.modKey=Jh()?a.metaKey:a.ctrlKey))}};de([cf],Nk.prototype,"shiftKey",2);de([cf],Nk.prototype,"ctrlKey",2);de([cf],Nk.prototype,"modKey",2);de([cf],Nk.prototype,"altKey",
2);de([cf],Nk.prototype,"spaceKey",2);de([cf],Nk.prototype,"isPinching",2);de([cf],Nk.prototype,"currentScreenPoint",2);de([cf],Nk.prototype,"currentPoint",2);de([cf],Nk.prototype,"previousScreenPoint",2);de([cf],Nk.prototype,"previousPoint",2);de([cf],Nk.prototype,"originScreenPoint",2);de([cf],Nk.prototype,"originPoint",2);de([cf],Nk.prototype,"state",2);de([cf],Nk.prototype,"containerOffset",2);de([Ig],Nk.prototype,"updateContainerOffset",1);de([Ig],Nk.prototype,"updateModifiers",1);de([Ig],Nk.prototype,
"onPointerDown",2);de([Ig],Nk.prototype,"onPointerMove",2);de([Ig],Nk.prototype,"onPointerUp",2);de([Ig],Nk.prototype,"onKeyDown",2);de([Ig],Nk.prototype,"onKeyUp",2);de([Ig],Nk.prototype,"onPinchStart",2);de([Ig],Nk.prototype,"onPinch",2);de([Ig],Nk.prototype,"onPinchEnd",2);var DE=(a,d=100)=>-(Math.cos(Math.PI*Gd.clamp(a/d,0,1))-1)/2,Ps=class{constructor(){kb(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});kb(this,"camera",{point:[0,0],zoom:1});kb(this,"updateBounds",a=>
{this.bounds=a;return this});kb(this,"panCamera",a=>this.update({point:Gd.sub(this.camera.point,Gd.div(a,this.camera.zoom))}));kb(this,"panToPointWhenNearBounds",a=>{const d=Gd.div([Ps.panThreshold,Ps.panThreshold],this.camera.zoom),k=Gd.sub([this.currentView.maxX,this.currentView.maxY],Gd.add(a,d));a=Gd.sub([this.currentView.minX,this.currentView.minY],Gd.sub(a,d));this.panCamera(Gd.mul([0>k[0]?k[0]:0<a[0]?a[0]:0,0>k[1]?k[1]:0<a[1]?a[1]:0],-Ps.panMultiplier*this.camera.zoom))});kb(this,"update",
({point:a,zoom:d})=>{void 0===a||isNaN(a[0])||isNaN(a[1])||(this.camera.point=a);void 0===d||isNaN(d)||(this.camera.zoom=Math.min(4,Math.max(.1,d)));return this});kb(this,"getPagePoint",a=>{const {camera:d,bounds:k}=this;return Gd.sub(Gd.div(Gd.sub(a,[k.minX,k.minY]),d.zoom),d.point)});kb(this,"getScreenPoint",a=>{const {camera:d}=this;return Gd.mul(Gd.add(a,d.point),d.zoom)});kb(this,"onZoom",(a,d,k=!1)=>this.pinchZoom(a,[0,0],d,k));kb(this,"pinchZoom",(a,d,k,N=!1)=>{var {camera:ea}=this;d=Gd.sub(ea.point,
Gd.div(d,ea.zoom));k=Gd.clamp(k,Ps.minZoom,Ps.maxZoom);ea=Gd.div(a,ea.zoom);a=Gd.div(a,k);a=Gd.toFixed(Gd.add(d,Gd.sub(a,ea)));N?this.animateCamera({point:a,zoom:k}):this.update({point:a,zoom:k});return this});kb(this,"setZoom",(a,d=!1)=>{const {bounds:k}=this;this.onZoom([k.width/2,k.height/2],a,d)});kb(this,"zoomIn",()=>{const {camera:a}=this;this.setZoom(a.zoom/.8,!0)});kb(this,"zoomOut",()=>{const {camera:a}=this;this.setZoom(.8*a.zoom,!0)});kb(this,"resetZoom",()=>{this.setZoom(1,!0);return this});
kb(this,"animateCamera",({point:a,zoom:d})=>this.animateToViewport({minX:-a[0],minY:-a[1],maxX:this.bounds.width/d-a[0],maxY:this.bounds.height/d-a[1],width:this.bounds.width/d,height:this.bounds.height/d}));kb(this,"animateToViewport",a=>{const d=performance.now(),k=me({},this.currentView),N=()=>{var ea=performance.now()-d;ea=DE(ea);var ka=k.minX+(a.minX-k.minX)*ea;this.update({point:[-ka,-(k.minY+(a.minY-k.minY)*ea)],zoom:this.bounds.width/(k.maxX+(a.maxX-k.maxX)*ea-ka)});1>ea&&requestAnimationFrame(N)};
N()});kb(this,"zoomToBounds",({width:a,height:d,minX:k,minY:N})=>{const {bounds:ea,camera:ka}=this;let sa=Math.min((ea.width-100)/a,(ea.height-100)/d);sa=Math.min(1,Math.max(Ps.minZoom,ka.zoom===sa||1>ka.zoom?Math.min(1,sa):sa));a=Gd.add([-k,-N],[(ea.width-a*sa)/2/sa,(ea.height-d*sa)/2/sa]);this.animateCamera({point:a,zoom:sa})});ef(this)}get currentView(){const {bounds:a,camera:{point:d,zoom:k}}=this,N=a.width/k,ea=a.height/k;return{minX:-d[0],minY:-d[1],maxX:N-d[0],maxY:ea-d[1],width:N,height:ea}}},
cp=Ps;kb(cp,"minZoom",.1);kb(cp,"maxZoom",4);kb(cp,"panMultiplier",.05);kb(cp,"panThreshold",100);de([cf],cp.prototype,"bounds",2);de([cf],cp.prototype,"camera",2);de([Ig],cp.prototype,"updateBounds",2);de([Ig],cp.prototype,"update",2);de([Kf],cp.prototype,"currentView",1);var EE=class{constructor(a){kb(this,"app");kb(this,"editShape",d=>{(null==d?0:d.props.isLocked)||this.app.transition("select").selectedTool.transition("editingShape",{shape:d});return this});kb(this,"hoverShape",d=>{this.app.setHoveredShape(d);
return this});kb(this,"createShapes",(...d)=>{this.app.createShapes(d);return this});kb(this,"updateShapes",(...d)=>{this.app.updateShapes(d);return this});kb(this,"deleteShapes",(...d)=>{this.app.deleteShapes(d.length?d:this.app.selectedShapesArray);return this});kb(this,"selectShapes",(...d)=>{this.app.setSelectedShapes(d);return this});kb(this,"deselectShapes",(...d)=>{const k="string"===typeof d[0]?d:d.map(N=>N.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(N=>!k.includes(N.id)));
return this});kb(this,"flipHorizontal",(...d)=>{this.app.flipHorizontal(d);return this});kb(this,"flipVertical",(...d)=>{this.app.flipVertical(d);return this});kb(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(d=>!this.app.shapesInGroups().includes(d)));return this});kb(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});kb(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});kb(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});
kb(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});kb(this,"zoomToFit",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=Ef.getCommonBounds(d.map(k=>k.bounds));this.app.viewport.zoomToBounds(d);return this});kb(this,"cameraToCenter",()=>{var {shapes:d}=this.app.currentPage;if(0===d.length)return this;d=Ef.getCommonBounds(d.map(k=>k.bounds));this.app.viewport.update({point:ge.add(ge.neg(Ef.getBoundsCenter(d)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/
2])});return this});kb(this,"zoomToSelection",()=>{const {selectionBounds:d}=this.app;if(!d)return this;this.app.viewport.zoomToBounds(d);return this});kb(this,"resetZoomToCursor",()=>{this.app.viewport.animateCamera({zoom:1,point:ge.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});kb(this,"toggleGrid",()=>{const {settings:d}=this.app;d.update({showGrid:!d.showGrid});return this});kb(this,"toggleSnapToGrid",()=>{const {settings:d}=this.app;d.update({snapToGrid:!d.snapToGrid});
return this});kb(this,"togglePenMode",()=>{const {settings:d}=this.app;d.update({penMode:!d.penMode});return this});kb(this,"setColor",d=>{const {settings:k}=this.app;k.update({color:d});this.app.selectedShapesArray.forEach(N=>{N.props.isLocked||N.update({fill:d,stroke:d})});this.app.persist();return this});kb(this,"setScaleLevel",d=>{const {settings:k}=this.app;k.update({scaleLevel:d});this.app.selectedShapes.forEach(N=>{N.props.isLocked||N.setScaleLevel(d)});this.app.persist();return this});kb(this,
"undo",()=>{this.app.undo();return this});kb(this,"redo",()=>{this.app.redo();return this});kb(this,"persist",()=>{this.app.persist();return this});kb(this,"createNewLineBinding",(d,k)=>this.app.createNewLineBinding(d,k));kb(this,"clone",d=>{if(!this.app.readOnly&&1===this.app.selectedShapesArray.length&&Object.values(Up).some(Pb=>Pb===this.app.selectedShapesArray[0].type)){var k=this.app.allSelectedShapesArray[0],N=this.app.getShapeClass(k.type),{minX:ea,minY:ka,maxX:sa,maxY:La,width:Ua,height:cb}=
k.bounds,ib=[0,0];switch(d){case "down":ib=[ea,La+100];break;case "up":ib=[ea,ka-100-cb];break;case "left":ib=[ea-100-Ua,ka];break;case "right":ib=[sa+100,ka]}var nb=new N(uf(me({},k.serialized),{id:fk(),nonce:Date.now(),refs:[],label:"",point:ib}));this.app.history.pause();this.app.currentPage.addShapes(nb);this.app.createNewLineBinding(k,nb);this.app.history.resume();this.app.persist();setTimeout(()=>this.editShape(nb))}});kb(this,"cloneShapes",({shapes:d,assets:k,bindings:N,point:ea=[0,0]})=>{const ka=
Ef.getCommonBounds(d.filter(Ua=>"group"!==Ua.type).map(Ua=>{var cb,ib,nb,Pb,Sb,Nb,lc,yc,bc,qc,mc,Pc,Uc,Ed,Ud,ff;return{minX:null!=(ib=null==(cb=Ua.point)?void 0:cb[0])?ib:ea[0],minY:null!=(Pb=null==(nb=Ua.point)?void 0:nb[1])?Pb:ea[1],width:null!=(Nb=null==(Sb=Ua.size)?void 0:Sb[0])?Nb:4,height:null!=(yc=null==(lc=Ua.size)?void 0:lc[1])?yc:4,maxX:(null!=(qc=null==(bc=Ua.point)?void 0:bc[0])?qc:ea[0])+(null!=(Pc=null==(mc=Ua.size)?void 0:mc[0])?Pc:4),maxY:(null!=(Ed=null==(Uc=Ua.point)?void 0:Uc[1])?
Ed:ea[1])+(null!=(ff=null==(Ud=Ua.size)?void 0:Ud[1])?ff:4)}})),sa=d.map(Ua=>uf(me({},Ua),{id:fk(),point:[ea[0]+Ua.point[0]-ka.minX,ea[1]+Ua.point[1]-ka.minY]}));sa.forEach(Ua=>{var cb;Ua.children&&0<(null==(cb=Ua.children)?void 0:cb.length)&&(Ua.children=Ua.children.map(ib=>{var nb;return null==(nb=sa[d.findIndex(Pb=>Pb.id===ib)])?void 0:nb.id}).filter(qg))});const La=[];sa.flatMap(Ua=>{var cb;return Object.values(null!=(cb=Ua.handles)?cb:{})}).forEach(Ua=>{if(Ua.bindingId){var cb=N[Ua.bindingId];
if(cb){var ib=d.findIndex(Pb=>Pb.id===cb.fromId);const nb=d.findIndex(Pb=>Pb.id===cb.toId);cb&&-1!==ib&&-1!==nb?(ib=uf(me({},cb),{id:fk(),fromId:sa[ib].id,toId:sa[nb].id}),La.push(ib),Ua.bindingId=ib.id):Ua.bindingId=void 0}else console.warn("binding not found",Ua.bindingId)}});k=k.filter(Ua=>sa.some(cb=>cb.assetId===Ua.id));return{shapes:sa,assets:k,bindings:La}});kb(this,"getClonedShapesFromTldrString",(d,k)=>{try{{var N;const cb=null==(N=d.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:
N[1];if(cb){try{var ea=JSON.parse(cb)}catch(ib){ea=null}var ka=ea}else ka=void 0}d=ka;if(!d)return null;const {shapes:sa,bindings:La,assets:Ua}=d;return this.cloneShapes({shapes:sa,bindings:La,assets:Ua,point:k})}catch(sa){console.log(sa)}return null});kb(this,"cloneShapesIntoCurrentPage",d=>{(d=this.cloneShapes(d))&&this.addClonedShapes(d);return this});kb(this,"addClonedShapes",d=>{const {shapes:k,assets:N,bindings:ea}=d;0<N.length&&this.app.createAssets(N);0<k.length&&this.app.createShapes(k);
this.app.currentPage.updateBindings(Object.fromEntries(ea.map(ka=>[ka.id,ka])));this.app.selectedTool.transition("idle");return this});kb(this,"addClonedShapesFromTldrString",(d,k)=>{(d=this.getClonedShapesFromTldrString(d,k))&&this.addClonedShapes(d);return this});kb(this,"doGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){var k=[...d.filter(N=>"group"===N.type),...d.map(N=>this.app.getParentGroup(N))].filter(qg);this.app.currentPage.removeShapes(...k);d=d.filter(N=>"group"!==
N.type);1<d.length&&(k=this.app.getShapeClass("group"),k=new k({id:fk(),type:k.id,parentId:this.app.currentPage.id,children:d.map(N=>N.id)}),this.app.currentPage.addShapes(k),this.app.setSelectedShapes([k]),this.app.bringForward(d));this.app.persist()}});kb(this,"unGroup",(d=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){d=[...d.filter(N=>"group"===N.type),...d.map(N=>this.app.getParentGroup(N))].filter(qg);var k=this.app.shapesInGroups(d);0<d.length&&(this.app.currentPage.removeShapes(...d),
this.app.persist(),this.app.setSelectedShapes(k))}});kb(this,"convertShapes",(d,k=this.app.allSelectedShapesArray)=>{const N=this.app.getShapeClass(d);this.app.currentPage.removeShapes(...k);k=k.map(ea=>new N(uf(me({},ea.serialized),{type:d,nonce:Date.now()})));this.app.currentPage.addShapes(...k);this.app.persist();this.app.setSelectedShapes(k)});kb(this,"setCollapsed",(d,k=this.app.allSelectedShapesArray)=>{k.forEach(N=>{"logseq-portal"===N.props.type&&N.setCollapsed(d)});this.app.persist()});this.app=
a}},Pt=class{constructor(){kb(this,"cursor","default");kb(this,"rotation",0);kb(this,"reset",()=>{this.cursor="default"});kb(this,"setCursor",(a,d=0)=>{if(a!==this.cursor||d!==this.rotation)this.cursor=a,this.rotation=d});kb(this,"setRotation",a=>{a!==this.rotation&&(this.rotation=a)});ef(this)}};de([cf],Pt.prototype,"cursor",2);de([cf],Pt.prototype,"rotation",2);de([Ig],Pt.prototype,"reset",2);de([Ig],Pt.prototype,"setCursor",2);de([Ig],Pt.prototype,"setRotation",2);var Qt=class{constructor(a){kb(this,
"app");kb(this,"stack",[]);kb(this,"isPaused",!0);kb(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});kb(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});kb(this,"persist",(d=!1)=>{this.isPaused||this.creating||this.app.notify("persist",{replace:d})});kb(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});kb(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});
kb(this,"instantiateShape",d=>new (this.app.getShapeClass(d.type))(d));kb(this,"deserialize",d=>{Mc(()=>{var k,{pages:N}=d;const ea=this.isPaused;this.pause();const ka=[...this.app.selectedIds];try{const sa=new Map(this.app.pages),La=[];for(const Ua of N){const cb=sa.get(Ua.id);if(void 0!==cb){const ib=new Map(cb.shapes.map(nb=>[nb.props.id,nb]));N=[];for(const nb of Ua.shapes){const Pb=ib.get(nb.id);void 0!==Pb?(Pb.nonce!==nb.nonce&&(Pb.update(nb,!0),Pb.nonce=nb.nonce,Pb.setLastSerialized(nb)),ib.delete(nb.id)):
N.push(this.instantiateShape(nb))}0<ib.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&cb.removeShapes(...ib.values());0<N.length&&cb.addShapes(...N);sa.delete(Ua.id);cb.updateBindings(Ua.bindings);cb.nonce=null!=(k=Ua.nonce)?k:0}else{const {id:ib,name:nb,shapes:Pb,bindings:Sb,nonce:Nb}=Ua;La.push(new Em(this.app,{id:ib,name:nb,nonce:Nb,bindings:Sb,shapes:Pb.map(lc=>this.instantiateShape(lc))}))}}0<La.length&&this.app.addPages(La);0<sa.size&&this.app.removePages(Array.from(sa.values()));
this.app.setSelectedShapes(ka).setErasingShapes([])}catch(sa){console.warn(sa)}ea||this.resume()})});this.app=a;ef(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};de([cf],Qt.prototype,"stack",2);de([Ig],Qt.prototype,"persist",2);de([Ig],Qt.prototype,"undo",2);de([Ig],Qt.prototype,"redo",2);de([Ig],Qt.prototype,"deserialize",2);var Cr=class{constructor(){kb(this,"mode","light");kb(this,"showGrid",!0);kb(this,"snapToGrid",!0);kb(this,"penMode",!1);kb(this,"scaleLevel",
"md");kb(this,"color","");ef(this)}update(a){Object.assign(this,a)}};de([cf],Cr.prototype,"mode",2);de([cf],Cr.prototype,"showGrid",2);de([cf],Cr.prototype,"snapToGrid",2);de([cf],Cr.prototype,"penMode",2);de([cf],Cr.prototype,"scaleLevel",2);de([cf],Cr.prototype,"color",2);de([Ig],Cr.prototype,"update",1);var th=class extends Mt{constructor(a,d,k,N){var ea,ka;super();kb(this,"uuid",fk());kb(this,"readOnly");kb(this,"api");kb(this,"inputs",new Nk);kb(this,"cursors",new Pt);kb(this,"viewport",new cp);
kb(this,"settings",new Cr);kb(this,"Tools",[]);kb(this,"history",new Qt(this));kb(this,"persist",this.history.persist);kb(this,"undo",this.history.undo);kb(this,"redo",this.history.redo);kb(this,"saving",!1);kb(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});kb(this,"load",()=>{this.notify("load",null);return this});kb(this,"save",()=>{this.notify("save",null);return this});kb(this,"pages",new Map([["page",new Em(this,
{id:"page",name:"page",shapes:[],bindings:{}})]]));kb(this,"getPageById",sa=>{const La=this.pages.get(sa);if(!La)throw Error(`Could not find a page named ${sa}.`);return La});kb(this,"getShapeById",(sa,La=this.currentPage.id)=>{var Ua;return null==(Ua=this.getPageById(La))?void 0:Ua.shapesById[sa]});kb(this,"createShapes",sa=>{if(this.readOnly)return this;(sa=this.currentPage.addShapes(...sa))&&this.notify("create-shapes",sa);this.persist();return this});kb(this,"updateShapes",sa=>{if(this.readOnly)return this;
sa.forEach(La=>{const Ua=this.getShapeById(La.id);null==Ua?void 0:Ua.update(La);La.type!==(null==Ua?void 0:Ua.type)&&this.api.convertShapes(La.type,[Ua])});this.persist();return this});kb(this,"deleteShapes",sa=>{if(0===sa.length||this.readOnly)return this;sa=sa.map(ib=>"string"===typeof ib?this.getShapeById(ib):ib).filter(qg).filter(ib=>!ib.props.isLocked);const La=this.shapesInGroups(sa);sa.forEach(ib=>{this.getParentGroup(ib)&&La.push(ib)});let Ua=new Set([...sa,...La].map(ib=>ib.id));La.forEach(ib=>
{var nb;const Pb=this.getParentGroup(ib);if(Pb){const Sb=null==(nb=Pb.props.children)?void 0:nb.filter(Nb=>Nb!==ib.id);!Sb||1>=(null==Sb?void 0:Sb.length)?Ua.add(Pb.id):Pb.update({children:Sb})}});const cb=(ib,nb)=>{var Pb;[...Ua].includes(ib)&&"line"===(null==(Pb=this.getShapeById(nb))?void 0:Pb.type)&&Ua.add(nb)};this.currentPage.shapes.filter(ib=>!ib.props.isLocked).flatMap(ib=>{var nb;return Object.values(null!=(nb=ib.props.handles)?nb:{})}).flatMap(ib=>ib.bindingId).filter(qg).map(ib=>{var nb,
Pb;const Sb=null==(nb=this.currentPage.bindings[ib])?void 0:nb.toId;ib=null==(Pb=this.currentPage.bindings[ib])?void 0:Pb.fromId;Sb&&ib&&(cb(Sb,ib),cb(ib,Sb))});sa=[...Ua].map(ib=>this.getShapeById(ib));this.setSelectedShapes(this.selectedShapesArray.filter(ib=>!Ua.has(ib.id)));(sa=this.currentPage.removeShapes(...sa))&&this.notify("delete-shapes",sa);this.persist();return this});kb(this,"bringForward",(sa=this.selectedShapesArray)=>{0<sa.length&&!this.readOnly&&this.currentPage.bringForward(sa);
return this});kb(this,"sendBackward",(sa=this.selectedShapesArray)=>{0<sa.length&&!this.readOnly&&this.currentPage.sendBackward(sa);return this});kb(this,"sendToBack",(sa=this.selectedShapesArray)=>{0<sa.length&&!this.readOnly&&this.currentPage.sendToBack(sa);return this});kb(this,"bringToFront",(sa=this.selectedShapesArray)=>{0<sa.length&&!this.readOnly&&this.currentPage.bringToFront(sa);return this});kb(this,"flipHorizontal",(sa=this.selectedShapesArray)=>{this.currentPage.flip(sa,"horizontal");
return this});kb(this,"flipVertical",(sa=this.selectedShapesArray)=>{this.currentPage.flip(sa,"vertical");return this});kb(this,"align",(sa,La=this.selectedShapesArray)=>{if(2>La.length||this.readOnly)return this;const Ua=La.map(Sb=>{const Nb=Sb.getBounds();return{id:Sb.id,point:[Nb.minX,Nb.minY],bounds:Nb}}),cb=Ef.getCommonBounds(Ua.map(({bounds:Sb})=>Sb)),ib=cb.minX+cb.width/2,nb=cb.minY+cb.height/2,Pb=Object.fromEntries(Ua.map(({id:Sb,point:Nb,bounds:lc})=>[Sb,{prev:Nb,next:{top:[Nb[0],cb.minY],
centerVertical:[Nb[0],nb-lc.height/2],bottom:[Nb[0],cb.maxY-lc.height],left:[cb.minX,Nb[1]],centerHorizontal:[ib-lc.width/2,Nb[1]],right:[cb.maxX-lc.width,Nb[1]]}[sa]}]));La.forEach(Sb=>{Pb[Sb.id]&&Sb.update({point:Pb[Sb.id].next})});this.persist();return this});kb(this,"distribute",(sa,La=this.selectedShapesArray)=>{if(2>La.length||this.readOnly)return this;const Ua=Object.fromEntries(Ef.getDistributions(La,sa).map(cb=>[cb.id,cb]));La.forEach(cb=>{Ua[cb.id]&&cb.update({point:Ua[cb.id].next})});this.persist();
return this});kb(this,"packIntoRectangle",(sa=this.selectedShapesArray)=>{if(2>sa.length||this.readOnly)return this;const La=Object.fromEntries(Ef.getPackedDistributions(sa).map(Ua=>[Ua.id,Ua]));sa.forEach(Ua=>{La[Ua.id]&&Ua.update({point:La[Ua.id].next})});this.persist();return this});kb(this,"setLocked",sa=>{if(0===this.selectedShapesArray.length||this.readOnly)return this;this.selectedShapesArray.forEach(La=>{La.update({isLocked:sa})});this.persist();return this});kb(this,"assets",{});kb(this,
"removeUnusedAssets",()=>{const sa=this.getCleanUpAssets();Object.keys(this.assets).forEach(La=>{sa.some(Ua=>Ua.id===La)||delete this.assets[La]});this.persist();return this});kb(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const La=this.allSelectedShapesArray;var sa=JSON.stringify({shapes:La.map(cb=>cb.serialized),assets:this.getCleanUpAssets().filter(cb=>La.some(ib=>ib.props.assetId===cb.id)),bindings:pc(this.currentPage.bindings)});sa=encodeURIComponent(`<whiteboard-tldr>${sa}</whiteboard-tldr>`);
const Ua=this.selectedShapesArray.map(cb=>`((${cb.props.id}))`).join(" ");this.notify("copy",{text:Ua,html:sa})}});kb(this,"paste",(sa,La)=>{var Ua;this.editingShape||this.readOnly||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!La,dataTransfer:null!=(Ua=null==sa?void 0:sa.clipboardData)?Ua:void 0})});kb(this,"cut",()=>{this.copy();this.api.deleteShapes()});kb(this,"drop",(sa,La)=>{this.notify("drop",{dataTransfer:sa,point:La?this.viewport.getPagePoint(La):Ef.getBoundsCenter(this.viewport.currentView)})});
kb(this,"selectTool",(sa,La={})=>{this.readOnly&&!["select","move"].includes(sa)||this.transition(sa,La)});kb(this,"editingId");kb(this,"setEditingShape",sa=>{this.editingId="string"===typeof sa?sa:null==sa?void 0:sa.id;return this});kb(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});kb(this,"hoveredId");kb(this,"setHoveredShape",sa=>{this.hoveredId="string"===typeof sa?sa:null==sa?void 0:sa.id;return this});kb(this,"selectedIds",new Set);kb(this,
"selectedShapes",new Set);kb(this,"selectionRotation",0);kb(this,"setSelectedShapes",sa=>{var La;const {selectedIds:Ua,selectedShapes:cb}=this;Ua.clear();cb.clear();sa[0]&&"string"===typeof sa[0]?sa.forEach(nb=>Ua.add(nb)):sa.forEach(nb=>Ua.add(nb.id));const ib=this.currentPage.shapes.filter(nb=>Ua.has(nb.id));ib.forEach(nb=>cb.add(nb));this.selectionRotation=1===ib.length?null!=(La=ib[0].props.rotation)?La:0:0;0===sa.length&&this.setEditingShape();return this});kb(this,"erasingIds",new Set);kb(this,
"erasingShapes",new Set);kb(this,"setErasingShapes",sa=>{const {erasingIds:La,erasingShapes:Ua}=this;La.clear();Ua.clear();sa[0]&&"string"===typeof sa[0]?sa.forEach(cb=>La.add(cb)):sa.forEach(cb=>La.add(cb.id));this.currentPage.shapes.filter(cb=>La.has(cb.id)).forEach(cb=>Ua.add(cb));return this});kb(this,"bindingIds");kb(this,"setBindingShapes",sa=>{this.bindingIds=sa;return this});kb(this,"clearBindingShape",()=>this.setBindingShapes());kb(this,"createNewLineBinding",(sa,La)=>{sa="string"===typeof sa?
this.getShapeById(sa):sa;La="string"===typeof La?this.getShapeById(La):La;if((null==sa?0:sa.canBind)&&(null==La?0:La.canBind)&&(La=bd(sa,La))){const [Ua,cb]=La;this.createShapes([Ua]);this.currentPage.updateBindings(Object.fromEntries(cb.map(ib=>[ib.id,ib])));this.persist();return!0}return!1});kb(this,"brush");kb(this,"setBrush",sa=>{this.brush=sa;return this});kb(this,"setCamera",(sa,La)=>{this.viewport.update({point:sa,zoom:La});return this});kb(this,"getPagePoint",sa=>{const {camera:La}=this.viewport;
return Gd.sub(Gd.div(sa,La.zoom),La.point)});kb(this,"getScreenPoint",sa=>{const {camera:La}=this.viewport;return Gd.mul(Gd.add(sa,La.point),La.zoom)});kb(this,"Shapes",new Map);kb(this,"registerShapes",sa=>{sa.forEach(La=>{if("group"===La.id){const Ua=this;La.prototype.getShapes=function(){var cb,ib;return null!=(ib=null==(cb=this.props.children)?void 0:cb.map(nb=>Ua.getShapeById(nb)).filter(Boolean))?ib:[]}}return this.Shapes.set(La.id,La)})});kb(this,"deregisterShapes",sa=>{sa.forEach(La=>this.Shapes.delete(La.id))});
kb(this,"getShapeClass",sa=>{if(!sa)throw Error("No shape type provided.");const La=this.Shapes.get(sa);if(!La)throw Error(`Could not find shape class for ${sa}`);return La});kb(this,"wrapUpdate",sa=>{Mc(()=>{const La=!this.history.isPaused;La&&this.history.pause();sa();La&&(this.history.resume(),this.persist())})});kb(this,"subscriptions",new Set([]));kb(this,"subscribe",(sa,La)=>{if(void 0===La)throw Error("Callback is required.");const Ua={event:sa,callback:La};this.subscriptions.add(Ua);return()=>
this.unsubscribe(Ua)});kb(this,"unsubscribe",sa=>{this.subscriptions.delete(sa);return this});kb(this,"notify",(sa,La)=>{this.subscriptions.forEach(Ua=>{Ua.event===sa&&Ua.callback(this,La)});return this});kb(this,"onTransition",()=>{});kb(this,"onPointerDown",(sa,La)=>{if(!this.editingShape&&1===La.button&&!this.isIn("move"))this.temporaryTransitionToMove(La);else if(2===La.button&&!this.editingShape)La.preventDefault(),this.transition("select");else if("clientX"in La)this.inputs.onPointerDown([...this.viewport.getPagePoint([La.clientX,
La.clientY]),La.pressure],La)});kb(this,"onPointerUp",(sa,La)=>{if(!this.editingShape&&1===La.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),La.stopPropagation(),La.preventDefault();else if("clientX"in La)this.inputs.onPointerUp([...this.viewport.getPagePoint([La.clientX,La.clientY]),La.pressure],La)});kb(this,"onPointerMove",(sa,La)=>{if("clientX"in La)this.inputs.onPointerMove([...this.viewport.getPagePoint([La.clientX,La.clientY]),La.pressure],La)});kb(this,"onKeyDown",
(sa,La)=>{if(this.editingShape||" "!==La.key||this.isIn("move"))this.inputs.onKeyDown(La);else this.temporaryTransitionToMove(La)});kb(this,"onKeyUp",(sa,La)=>{if(!this.editingShape&&" "===La.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),La.stopPropagation(),La.preventDefault();else this.inputs.onKeyUp(La)});kb(this,"onPinchStart",(sa,La)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(sa.point),.5],La)});kb(this,"onPinch",(sa,La)=>{this.inputs.onPinch([...this.viewport.getPagePoint(sa.point),
.5],La)});kb(this,"onPinchEnd",(sa,La)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(sa.point),.5],La)});this._states=[Nt,Ot];this.readOnly=N;this.history.pause();this.states&&0<this.states.length&&(this.registerStates(this.states),N=null!=(ea=this.initial)?ea:this.states[0].id,ea=this.children.get(N))&&(this.currentState=ea,null==(ka=this.currentState)?void 0:ka._events.onEnter({fromId:"initial"}));d&&this.registerShapes(d);k&&this.registerTools(k);this.history.resume();a&&this.history.deserialize(a);
this.api=new EE(this);ef(this);this.notify("mount",null)}loadDocumentModel(a){this.history.deserialize(a);a.assets&&0<a.assets.length&&this.addAssets(a.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(a){a.forEach(d=>this.pages.set(d.id,d));this.persist();return this}removePages(a){a.forEach(d=>this.pages.delete(d.id));this.persist();return this}shapesInGroups(a=this.shapes){return a.flatMap(d=>
d.props.children).filter(qg).map(d=>this.getShapeById(d)).filter(qg)}getParentGroup(a){return this.shapes.find(d=>{var k;return null==(k=d.props.children)?void 0:k.includes(a.id)})}addAssets(a){a.forEach(d=>this.assets[d.id]=d);return this}removeAssets(a){"string"===typeof a[0]?a.forEach(d=>delete this.assets[d]):a.forEach(d=>delete this.assets[d.id]);this.persist();return this}getCleanUpAssets(){const a=new Set;this.pages.forEach(d=>d.shapes.forEach(k=>{k.props.assetId&&this.assets[k.props.assetId]&&
a.add(this.assets[k.props.assetId])}));return Array.from(a)}createAssets(a){this.addAssets(a);this.notify("create-assets",{assets:a});this.persist();return this}get selectedTool(){return this.currentState}registerTools(a){this.Tools=a;return this.registerStates(a)}get editingShape(){const {editingId:a,currentPage:d}=this;return a?d.shapes.find(k=>k.id===a):void 0}get hoveredShape(){const {hoveredId:a,currentPage:d}=this;return a?d.shapes.find(k=>k.id===a):void 0}get hoveredGroup(){const {hoveredShape:a}=
this;return a?this.shapes.find(d=>{var k;return"group"===d.type&&(null==(k=d.props.children)?void 0:k.includes(a.id))}):void 0}get selectedShapesArray(){const {selectedShapes:a,selectedTool:d}=this;return"select"!==d.id?[]:Array.from(a.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:a}=this;return[...(new Set([...a,...this.shapesInGroups(a)]))]}setSelectionRotation(a){this.selectionRotation=a}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var a;
const d=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(N=>{var ea;return Object.values(null!=(ea=N.props.handles)?ea:{})}).flatMap(N=>N.bindingId).filter(qg).flatMap(N=>{var ea,ka;return[null==(ea=this.currentPage.bindings[N])?void 0:ea.fromId,null==(ka=this.currentPage.bindings[N])?void 0:ka.toId]}).filter(qg):[],k=[...(null!=(a=this.bindingIds)?a:[]),...d];return k?this.currentPage.shapes.filter(N=>null==k?void 0:k.includes(N.id)):void 0}get currentGrid(){const {zoom:a}=this.viewport.camera;
return.15>a?128:1>a?32:8}get shapes(){const {currentPage:{shapes:a}}=this;return Array.from(a.values())}get shapesInViewport(){const {selectedShapes:a,currentPage:d,viewport:{currentView:k}}=this;return d.shapes.filter(N=>!N.canUnmount||a.has(N)||Ef.boundsContain(k,N.rotatedBounds)||Ef.boundsCollide(k,N.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:a,viewport:{currentView:d}}=this;if(a&&!Ef.boundsContain(d,a)&&!Ef.boundsCollide(d,a)){var k=Ef.getBoundsCenter(a);return Gd.clampV([(k[0]-
d.minX-d.width/2)/d.width,(k[1]-d.minY-d.height/2)/d.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:a}=this;if(0!==a.length)return 1===a.length?uf(me({},a[0].bounds),{rotation:a[0].props.rotation}):Ef.getCommonBounds(this.selectedShapesArray.map(d=>d.rotatedBounds))}get showSelection(){var a;const {selectedShapesArray:d}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===d.length&&!(null==(a=d[0])?0:a.hideSelection)||1<d.length)}get showSelectionDetail(){return this.isIn("select")&&
!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(a=>a.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<a.length&&!this.readOnly&&!a.every(d=>d.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:a}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<a.length&&!this.readOnly&&!a.some(d=>d.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===a.length&&!this.readOnly&&!a.every(d=>d.hideResizeHandles)}get showCloneHandles(){const {selectedShapesArray:a}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape")&&1===a.length&&Object.values(Up).some(d=>d===this.selectedShapesArray[0].type)&&!this.readOnly}temporaryTransitionToMove(a){a.stopPropagation();a.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};kb(th,"id","app");kb(th,"initial","select");de([Kf],th.prototype,"serialized",1);de([cf],th.prototype,"pages",2);de([Kf],
th.prototype,"currentPageId",1);de([Kf],th.prototype,"currentPage",1);de([Ig],th.prototype,"addPages",1);de([Ig],th.prototype,"removePages",1);de([Ig],th.prototype,"createShapes",2);de([Ig],th.prototype,"updateShapes",2);de([Ig],th.prototype,"deleteShapes",2);de([cf],th.prototype,"assets",2);de([Ig],th.prototype,"addAssets",1);de([Ig],th.prototype,"removeAssets",1);de([Ig],th.prototype,"removeUnusedAssets",2);de([Kf],th.prototype,"selectedTool",1);de([cf],th.prototype,"editingId",2);de([Kf],th.prototype,
"editingShape",1);de([Ig],th.prototype,"setEditingShape",2);de([cf],th.prototype,"hoveredId",2);de([Kf],th.prototype,"hoveredShape",1);de([Kf],th.prototype,"hoveredGroup",1);de([Ig],th.prototype,"setHoveredShape",2);de([cf],th.prototype,"selectedIds",2);de([cf],th.prototype,"selectedShapes",2);de([cf],th.prototype,"selectionRotation",2);de([Kf],th.prototype,"selectedShapesArray",1);de([Kf],th.prototype,"allSelectedShapes",1);de([Kf],th.prototype,"allSelectedShapesArray",1);de([Ig],th.prototype,"setSelectedShapes",
2);de([Ig],th.prototype,"setSelectionRotation",1);de([cf],th.prototype,"erasingIds",2);de([cf],th.prototype,"erasingShapes",2);de([Kf],th.prototype,"erasingShapesArray",1);de([Ig],th.prototype,"setErasingShapes",2);de([cf],th.prototype,"bindingIds",2);de([Kf],th.prototype,"bindingShapes",1);de([Ig],th.prototype,"setBindingShapes",2);de([Ig],th.prototype,"createNewLineBinding",2);de([cf],th.prototype,"brush",2);de([Ig],th.prototype,"setBrush",2);de([Ig],th.prototype,"setCamera",2);de([Kf],th.prototype,
"currentGrid",1);de([Kf],th.prototype,"shapes",1);de([Kf],th.prototype,"shapesInViewport",1);de([Kf],th.prototype,"selectionDirectionHint",1);de([Kf],th.prototype,"selectionBounds",1);de([Kf],th.prototype,"showSelection",1);de([Kf],th.prototype,"showSelectionDetail",1);de([Kf],th.prototype,"showSelectionRotation",1);de([Kf],th.prototype,"showContextBar",1);de([Kf],th.prototype,"showRotateHandles",1);de([Kf],th.prototype,"showResizeHandles",1);de([Kf],th.prototype,"showCloneHandles",1);var FE=Function.prototype.toString,
Dx=Object.create,GE=Object.prototype.toString,HE=function(){function a(){this._keys=[];this._values=[]}a.prototype.has=function(d){return!!~this._keys.indexOf(d)};a.prototype.get=function(d){return this._values[this._keys.indexOf(d)]};a.prototype.set=function(d,k){this._keys.push(d);this._values.push(k)};return a}(),IE="undefined"!==typeof WeakMap?De:fe,JE="g"===/test/g.flags?Cf:Qf,KE="undefined"!==typeof Symbol?Mf:Nf,LE=Object.defineProperty,ME=Object.getOwnPropertyDescriptor,FA=Object.getOwnPropertyNames,
Ex=Object.getOwnPropertySymbols,GA=Object.prototype,HA=GA.hasOwnProperty,NE=GA.propertyIsEnumerable,IA="function"===typeof Ex,OE=IA?ug:FA,PE=Array.isArray,Fx=Object.assign,QE=Object.getPrototypeOf,JA={array:function(a,d){var k=new d.Constructor;d.cache.set(a,k);for(var N=0,ea=a.length;N<ea;++N)k[N]=d.copier(a[N],d);return k},arrayBuffer:function(a,d){return a.slice(0)},blob:function(a,d){return a.slice(0,a.size,a.type)},dataView:function(a,d){return new d.Constructor(a.buffer.slice(0))},date:function(a,
d){return new d.Constructor(a.getTime())},error:Gi,map:hh,object:IA?ah:mg,regExp:function(a,d){d=new d.Constructor(a.source,JE(a));d.lastIndex=a.lastIndex;return d},set:Bj},RE=Fx({},JA,{array:function(a,d){var k=new d.Constructor;d.cache.set(a,k);return rh(a,k,d)},map:function(a,d){return rh(a,hh(a,d),d)},object:function(a,d){var k=Je(d.prototype);d.cache.set(a,k);return rh(a,k,d)},set:function(a,d){return rh(a,Bj(a,d),d)}});rj(Fx({},RE,{}));var SE=rj({}),TE=Df(tt()),UE=Df(or()),Qs=SE,Ho=class{static insertTextFirefox(a,
d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const k=a.ownerDocument,N=k.activeElement;N!==a&&a.focus();k.execCommand("insertText",!1,d)||Ho.insertTextFirefox(a,d);N===k.body?a.blur():N instanceof HTMLElement&&N!==a&&N.focus()}static set(a,d){a.select();Ho.insert(a,d)}static getSelection(a){const {selectionStart:d,selectionEnd:k}=a;return a.value.slice(d?d:void 0,k?k:void 0)}static wrapSelection(a,
d,k){const {selectionStart:N,selectionEnd:ea}=a,ka=Ho.getSelection(a);Ho.insert(a,d+ka+(null!=k?k:d));a.selectionStart=(N||0)+d.length;a.selectionEnd=(ea||0)+d.length}static replace(a,d,k){let N=0;a.value.replace(d,(...ea)=>{const ka=N+ea[ea.length-2],sa=ea[0].length;a.selectionStart=ka;a.selectionEnd=ka+sa;ea="string"===typeof k?k:k(...ea);Ho.insert(a,ea);a.selectionStart=ka;N+=ea.length-sa;return ea})}static findLineEnd(a,d){const k=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(k)?d:k+1}static indent(a){var d;
const {selectionStart:k,selectionEnd:N,value:ea}=a;var ka=ea.slice(k,N);if((ka=null==(d=/\n/g.exec(ka))?void 0:d.length)&&0<ka){d=ea.lastIndexOf("\n",k-1)+1;var sa=a.value.slice(d,N-1);ka=sa.replace(/^|\n/g,`$&${Ho.INDENT}`);sa=ka.length-sa.length;a.setSelectionRange(d,N-1);Ho.insert(a,ka);a.setSelectionRange(k+1,N+sa)}else Ho.insert(a,Ho.INDENT)}static unindent(a){const {selectionStart:d,selectionEnd:k,value:N}=a;var ea=N.lastIndexOf("\n",d-1)+1;const ka=Ho.findLineEnd(N,k);var sa=a.value.slice(ea,
ka);const La=sa.replace(/(^|\n)(\t| {1,2})/g,"$1");sa=sa.length-La.length;a.setSelectionRange(ea,ka);Ho.insert(a,La);ea=(ea=/\t| {1,2}/.exec(N.slice(ea,d)))?ea[0].length:0;a.setSelectionRange(d-ea,Math.max(d-ea,k-sa))}static normalizeText(a){return a.replace(Ho.fixNewLines,"\n")}},Rt=Ho;kb(Rt,"fixNewLines",/\r?\n|\r/g);kb(Rt,"INDENT","  ");var Dr;"undefined"!==typeof window&&(Dr=zl());var Gx=new Map,KA=Jh()?"⌘":"ctrl",VE=class extends th{},LA=Df(ba(22)),WE=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);
var MA=Df(ba(22)),Hx={},Vu=Df(ba(22)),XE=a=>{for(a=a.parentElement;a&&a!==document.body;){const {overflowY:d}=window.getComputedStyle(a);if(a.scrollHeight>a.clientHeight&&("auto"===d||"scroll"===d||"overlay"===d))return a;a=a.parentElement}return document},Ix=Df(ba(22)),Jx=new Map,YE={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",
binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",grid:"var(--ls-quaternary-background-color)"},ZE=((a,...d)=>a.reduce((k,N,ea)=>k+N+(ea<d.length?d[ea]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: calc(64px / var(--tl-zoom));;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-clone-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-clone-handle:hover {
    fill: var(--tl-selectStroke);
    cursor: pointer; 
  }

  .tl-clone-handle:hover line {
    stroke: var(--tl-background);
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,NA=Df(ba(22)),OA=Df(ba(22)),Kx={},Ok={toVector(a,d){void 0===a&&(a=d);return Array.isArray(a)?a:[a,a]},add(a,d){return[a[0]+d[0],a[1]+d[1]]},sub(a,d){return[a[0]-d[0],a[1]-d[1]]},addTo(a,d){a[0]+=d[0];a[1]+=d[1]},subTo(a,d){a[0]-=d[0];a[1]-=d[1]}},PA={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},$E=["enter","leave"],aF=["gotpointercapture","lostpointercapture"],
QA=class{constructor(a,d,k){this.ctrl=a;this.args=d;this.key=k;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(a){this.ctrl.state[this.key]=a}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:a,
shared:d,ingKey:k,args:N}=this;d[k]=a._active=a.active=a._blocked=a._force=!1;a._step=[!1,!1];a.intentional=!1;a._movement=[0,0];a._distance=[0,0];a._direction=[0,0];a._delta=[0,0];a._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];a.args=N;a.axis=void 0;a.memo=void 0;a.elapsedTime=0;a.direction=[0,0];a.distance=[0,0];a.overflow=[0,0];a._movementBound=[!1,!1];a.velocity=[0,0];a.movement=[0,0];a.delta=[0,0];a.timeStamp=0}start(a){const d=this.state,k=this.config;d._active||(this.reset(),this.computeInitial(),
d._active=!0,d.target=a.target,d.currentTarget=a.currentTarget,d.lastOffset=k.from?kh(k.from,d):d.offset,d.offset=d.lastOffset);d.startTime=d.timeStamp=a.timeStamp}computeValues(a){const d=this.state;d._values=a;d.values=this.config.transform(a)}computeInitial(){const a=this.state;a._initial=a._values;a.initial=a.values}compute(a){const {state:d,config:k,shared:N}=this;d.args=this.args;var ea=0;if(a){d.event=a;k.preventDefault&&a.cancelable&&d.event.preventDefault();d.type=a.type;N.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;N.locked=!!document.pointerLockElement;ea=Object;var ka=ea.assign,sa={};"buttons"in a&&(sa.buttons=a.buttons);if("shiftKey"in a){const {shiftKey:Pc,altKey:Uc,metaKey:Ed,ctrlKey:Ud}=a;Object.assign(sa,{shiftKey:Pc,altKey:Uc,metaKey:Ed,ctrlKey:Ud})}ka.call(ea,N,sa);N.down=N.pressed=1===N.buttons%2||0<N.touches;ea=a.timeStamp-d.timeStamp;d.timeStamp=a.timeStamp;d.elapsedTime=d.timeStamp-d.startTime}d._active&&(ka=d._delta.map(Math.abs),Ok.addTo(d._distance,ka));this.axisIntent&&
this.axisIntent(a);const [La,Ua]=d._movement,[cb,ib]=k.threshold,{_step:nb,values:Pb}=d;k.hasCustomTransform?(!1===nb[0]&&(nb[0]=Math.abs(La)>=cb&&Pb[0]),!1===nb[1]&&(nb[1]=Math.abs(Ua)>=ib&&Pb[1])):(!1===nb[0]&&(nb[0]=Math.abs(La)>=cb&&Math.sign(La)*cb),!1===nb[1]&&(nb[1]=Math.abs(Ua)>=ib&&Math.sign(Ua)*ib));d.intentional=!1!==nb[0]||!1!==nb[1];if(d.intentional){ka=[0,0];if(k.hasCustomTransform){const [Pc,Uc]=Pb;ka[0]=!1!==nb[0]?Pc-nb[0]:0;ka[1]=!1!==nb[1]?Uc-nb[1]:0}else ka[0]=!1!==nb[0]?La-nb[0]:
0,ka[1]=!1!==nb[1]?Ua-nb[1]:0;this.restrictToAxis&&!d._blocked&&this.restrictToAxis(ka);sa=d.offset;var Sb=d._active&&!d._blocked||d.active;Sb&&(d.first=d._active&&!d.active,d.last=!d._active&&d.active,d.active=N[this.ingKey]=d._active,a&&(d.first&&("bounds"in k&&(d._bounds=kh(k.bounds,d)),this.setup&&this.setup()),d.movement=ka,this.computeOffset()));var [Nb,lc]=d.offset,[[yc,bc],[qc,mc]]=d._bounds;d.overflow=[Nb<yc?-1:Nb>bc?1:0,lc<qc?-1:lc>mc?1:0];d._movementBound[0]=d.overflow[0]?!1===d._movementBound[0]?
d._movement[0]:d._movementBound[0]:!1;d._movementBound[1]=d.overflow[1]?!1===d._movementBound[1]?d._movement[1]:d._movementBound[1]:!1;d.offset=Ch(d._bounds,d.offset,d._active?k.rubberband||[0,0]:[0,0]);d.delta=Ok.sub(d.offset,sa);this.computeMovement();Sb&&(!d.last||32<ea)&&(d.delta=Ok.sub(d.offset,sa),a=d.delta.map(Math.abs),Ok.addTo(d.distance,a),d.direction=d.delta.map(Math.sign),d._direction=d._delta.map(Math.sign),!d.first&&0<ea&&(d.velocity=[a[0]/ea,a[1]/ea]))}}emit(){const a=this.state;var d=
this.shared;const k=this.config;a._active||this.clean();if(!a._blocked&&a.intentional||a._force||k.triggerAllEvents)d=this.handler(Yg(Yg(Yg({},d),a),{},{[this.aliasKey]:a.values})),void 0!==d&&(a.memo=d)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Wu=class extends QA{constructor(...a){super(...a);Mi(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Ok.add(this.state.lastOffset,
this.state.movement)}computeMovement(){this.state.movement=Ok.sub(this.state.offset,this.state.lastOffset)}axisIntent(a){const d=this.state,k=this.config;!d.axis&&a&&(a="object"===typeof k.axisThreshold?k.axisThreshold[Uh(a)]:k.axisThreshold,d.axis=Wk(d._movement,a));d._blocked=(k.lockDirection||!!k.axis)&&!d.axis||!!k.axis&&k.axis!==d.axis}restrictToAxis(a){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":a[1]=0;break;case "y":a[0]=0}}},bF=a=>a,RA={enabled(a=!0){return a},
eventOptions(a,d,k){return Yg(Yg({},k.shared.eventOptions),a)},preventDefault(a=!1){return a},triggerAllEvents(a=!1){return a},rubberband(a=0){switch(a){case !0:return[.15,.15];case !1:return[0,0];default:return Ok.toVector(a)}},from(a){if("function"===typeof a)return a;if(null!=a)return Ok.toVector(a)},transform(a,d,k){a=a||k.shared.transform;this.hasCustomTransform=!!a;return a||bF},threshold(a){return Ok.toVector(a,0)}},Rs=Yg(Yg({},RA),{},{axis(a,d,{axis:k}){this.lockDirection="lock"===k;if(!this.lockDirection)return k},
axisThreshold(a=0){return a},bounds(a={}){if("function"===typeof a)return ka=>Rs.bounds(a(ka));if("current"in a)return()=>a.current;if("function"===typeof HTMLElement&&a instanceof HTMLElement)return a;const {left:d=-Infinity,right:k=Infinity,top:N=-Infinity,bottom:ea=Infinity}=a;return[[d,k],[N,ea]]}}),SA={ArrowRight:(a=1)=>[10*a,0],ArrowLeft:(a=1)=>[-10*a,0],ArrowUp:(a=1)=>[0,-10*a],ArrowDown:(a=1)=>[0,10*a]},cF=class extends Wu{constructor(...a){super(...a);Mi(this,"ingKey","dragging")}reset(){super.reset();
const a=this.state;a._pointerId=void 0;a._pointerActive=!1;a._keyboardActive=!1;a._preventScroll=!1;a._delayed=!1;a.swipe=[0,0];a.tap=!1;a.canceled=!1;a.cancel=this.cancel.bind(this)}setup(){const a=this.state;if(a._bounds instanceof HTMLElement){const d=a._bounds.getBoundingClientRect(),k=a.currentTarget.getBoundingClientRect();a._bounds=Rs.bounds({left:d.left-k.left+a.offset[0],right:d.right-k.right+a.offset[0],top:d.top-k.top+a.offset[1],bottom:d.bottom-k.bottom+a.offset[1]})}}cancel(){const a=
this.state;a.canceled||(a.canceled=!0,a._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(a){const d=this.config,k=this.state;if(null==a.buttons||(Array.isArray(d.pointerButtons)?d.pointerButtons.includes(a.buttons):-1===d.pointerButtons||d.pointerButtons===a.buttons)){var N=this.ctrl.setEventIds(a);
d.pointerCapture&&a.target.setPointerCapture(a.pointerId);N&&1<N.size&&k._pointerActive||(this.start(a),this.setupPointer(a),k._pointerId=tj(a),k._pointerActive=!0,this.computeValues(Vk(a)),this.computeInitial(),d.preventScrollAxis&&"mouse"!==Uh(a)?(k._active=!1,this.setupScrollPrevention(a)):0<d.delay?(this.setupDelayTrigger(a),d.triggerAllEvents&&(this.compute(a),this.emit())):this.startPointerDrag(a))}}startPointerDrag(a){const d=this.state;d._active=!0;d._preventScroll=!0;d._delayed=!1;this.compute(a);
this.emit()}pointerMove(a){const d=this.state,k=this.config;if(d._pointerActive&&(d.type!==a.type||a.timeStamp!==d.timeStamp)){var N=tj(a);if(void 0===d._pointerId||N===d._pointerId)N=Vk(a),document.pointerLockElement===a.target?d._delta=[a.movementX,a.movementY]:(d._delta=Ok.sub(N,d._values),this.computeValues(N)),Ok.addTo(d._movement,d._delta),this.compute(a),d._delayed&&d.intentional?(this.timeoutStore.remove("dragDelay"),d.active=!1,this.startPointerDrag(a)):k.preventScrollAxis&&!d._preventScroll?
d.axis&&(d.axis===k.preventScrollAxis||"xy"===k.preventScrollAxis?(d._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(a))):this.emit()}}pointerUp(a){this.ctrl.setEventIds(a);try{this.config.pointerCapture&&a.target.hasPointerCapture(a.pointerId)&&a.target.releasePointerCapture(a.pointerId)}catch(sa){}const d=this.state,k=this.config;if(d._active&&d._pointerActive){var N=tj(a);if(void 0===d._pointerId||N===d._pointerId){this.state._pointerActive=!1;this.setActive();
this.compute(a);var [ea,ka]=d._distance;d.tap=ea<=k.tapsThreshold&&ka<=k.tapsThreshold;if(d.tap&&k.filterTaps)d._force=!0;else{const [sa,La]=d.direction,[Ua,cb]=d.velocity,[ib,nb]=d.movement,[Pb,Sb]=k.swipe.velocity,[Nb,lc]=k.swipe.distance;d.elapsedTime<k.swipe.duration&&(Math.abs(Ua)>Pb&&Math.abs(ib)>Nb&&(d.swipe[0]=sa),Math.abs(cb)>Sb&&Math.abs(nb)>lc&&(d.swipe[1]=La))}this.emit()}}}pointerClick(a){!this.state.tap&&0<a.detail&&(a.preventDefault(),a.stopPropagation())}setupPointer(a){const d=this.config,
k=d.device;d.pointerLock&&a.currentTarget.requestPointerLock();d.pointerCapture||(this.eventStore.add(this.sharedConfig.window,k,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,k,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,k,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(a){this.state._preventScroll&&a.cancelable&&
a.preventDefault()}setupScrollPrevention(a){this.state._preventScroll=!1;"persist"in a&&"function"===typeof a.persist&&a.persist();const d=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",d);this.eventStore.add(this.sharedConfig.window,"touch","cancel",d);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,a)}setupDelayTrigger(a){this.state._delayed=
!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0];this.startPointerDrag(a)},this.config.delay)}keyDown(a){const d=SA[a.key];if(d){const k=this.state,N=a.shiftKey?10:a.altKey?.1:1;this.start(a);k._delta=d(N);k._keyboardActive=!0;Ok.addTo(k._movement,k._delta);this.compute(a);this.emit()}}keyUp(a){a.key in SA&&(this.state._keyboardActive=!1,this.setActive(),this.compute(a),this.emit())}bind(a){const d=this.config.device;a(d,"start",this.pointerDown.bind(this));this.config.pointerCapture&&
(a(d,"change",this.pointerMove.bind(this)),a(d,"end",this.pointerUp.bind(this)),a(d,"cancel",this.pointerUp.bind(this)),a("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(a("key","down",this.keyDown.bind(this)),a("key","up",this.keyUp.bind(this)));this.config.filterTaps&&a("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},Ss="undefined"!==typeof window&&window.document&&window.document.createElement;try{var TA="constructor"in GestureEvent}catch(a){TA=!1}var dF=
TA,Xu=Ss&&"ontouchstart"in window||Ss&&1<window.navigator.maxTouchPoints,UA=Ss&&"ontouchstart"in window||Ss&&1<window.navigator.maxTouchPoints,VA=Ss&&"onpointerdown"in window,eF=Ss&&"exitPointerLock"in window.document,WA={mouse:0,touch:0,pen:8},fF=Yg(Yg({},Rs),{},{device(a,d,{pointer:{touch:k=!1,lock:N=!1,mouse:ea=!1}={}}){this.pointerLock=N&&eF;return Xu&&k?"touch":this.pointerLock?"mouse":VA&&!ea?"pointer":Xu?"touch":"mouse"},preventScrollAxis(a,d,{preventScroll:k}){this.preventScrollDelay="number"===
typeof k?k:k||void 0===k&&a?250:void 0;if(UA&&!1!==k)return a?a:void 0!==k?"y":void 0},pointerCapture(a,d,{pointer:{capture:k=!0,buttons:N=1,keys:ea=!0}={}}){this.pointerButtons=N;this.keys=ea;return!this.pointerLock&&"pointer"===this.device&&k},threshold(a,d,{filterTaps:k=!1,tapsThreshold:N=3,axis:ea}){a=Ok.toVector(a,k?N:ea?1:0);this.filterTaps=k;this.tapsThreshold=N;return a},swipe({velocity:a=.5,distance:d=50,duration:k=250}={}){return{velocity:this.transform(Ok.toVector(a)),distance:this.transform(Ok.toVector(d)),
duration:k}},delay(a=0){switch(a){case !0:return 180;case !1:return 0;default:return a}},axisThreshold(a){return a?Yg(Yg({},WA),a):WA}}),gF=class extends QA{constructor(...a){super(...a);Mi(this,"ingKey","pinching");Mi(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const a=this.state;a._touchIds=[];a.canceled=!1;a.cancel=this.cancel.bind(this);a.turns=0}computeOffset(){const {type:a,movement:d,lastOffset:k}=
this.state;this.state.offset="wheel"===a?Ok.add(d,k):[(1+d[0])*k[0],d[1]+k[1]]}computeMovement(){const {offset:a,lastOffset:d}=this.state;this.state.movement=[a[0]/d[0],a[1]-d[1]]}axisIntent(){const a=this.state,[d,k]=a._movement;if(!a.axis){const N=30*Math.abs(d)-Math.abs(k);0>N?a.axis="angle":0<N&&(a.axis="scale")}}restrictToAxis(a){this.config.lockDirection&&("scale"===this.state.axis?a[1]=0:"angle"===this.state.axis&&(a[0]=0))}cancel(){const a=this.state;a.canceled||setTimeout(()=>{a.canceled=
!0;a._active=!1;this.compute();this.emit()},0)}touchStart(a){this.ctrl.setEventIds(a);var d=this.state;const k=this.ctrl.touchIds;d._active&&d._touchIds.every(N=>k.has(N))||2>k.size||(this.start(a),d._touchIds=Array.from(k).slice(0,2),d=Zi(a,d._touchIds),this.pinchStart(a,d))}pointerStart(a){if(null==a.buttons||1===a.buttons%2){this.ctrl.setEventIds(a);a.target.setPointerCapture(a.pointerId);var d=this.state,k=d._pointerEvents,N=this.ctrl.pointerIds;d._active&&Array.from(k.keys()).every(ea=>N.has(ea))||
(2>k.size&&k.set(a.pointerId,a),2>d._pointerEvents.size||(this.start(a),d=fm(...Array.from(k.values())),this.pinchStart(a,d)))}}pinchStart(a,d){this.state.origin=d.origin;this.computeValues([d.distance,d.angle]);this.computeInitial();this.compute(a);this.emit()}touchMove(a){if(this.state._active){var d=Zi(a,this.state._touchIds);this.pinchMove(a,d)}}pointerMove(a){var d=this.state._pointerEvents;d.has(a.pointerId)&&d.set(a.pointerId,a);this.state._active&&(d=fm(...Array.from(d.values())),this.pinchMove(a,
d))}pinchMove(a,d){const k=this.state,N=d.angle-k._values[1];let ea=0;270<Math.abs(N)&&(ea+=Math.sign(N));this.computeValues([d.distance,d.angle-360*ea]);k.origin=d.origin;k.turns=ea;k._movement=[k._values[0]/k._initial[0]-1,k._values[1]-k._initial[1]];this.compute(a);this.emit()}touchEnd(a){this.ctrl.setEventIds(a);this.state._active&&this.state._touchIds.some(d=>!this.ctrl.touchIds.has(d))&&(this.state._active=!1,this.compute(a),this.emit())}pointerEnd(a){const d=this.state;this.ctrl.setEventIds(a);
try{a.target.releasePointerCapture(a.pointerId)}catch(k){}d._pointerEvents.has(a.pointerId)&&d._pointerEvents.delete(a.pointerId);d._active&&2>d._pointerEvents.size&&(d._active=!1,this.compute(a),this.emit())}gestureStart(a){a.cancelable&&a.preventDefault();const d=this.state;d._active||(this.start(a),this.computeValues([a.scale,a.rotation]),d.origin=[a.clientX,a.clientY],this.compute(a),this.emit())}gestureMove(a){a.cancelable&&a.preventDefault();if(this.state._active){var d=this.state;this.computeValues([a.scale,
a.rotation]);d.origin=[a.clientX,a.clientY];var k=d._movement;d._movement=[a.scale-1,a.rotation];d._delta=Ok.sub(d._movement,k);this.compute(a);this.emit()}}gestureEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}wheel(a){const d=this.config.modifierKey;if(!d||a[d])this.state._active?this.wheelChange(a):this.wheelStart(a),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(a){this.start(a);this.wheelChange(a)}wheelChange(a){"uv"in a||a.cancelable&&a.preventDefault();
const d=this.state;d._delta=[-fl(a)[1]/100*d.offset[0],0];Ok.addTo(d._movement,d._delta);gl(d);this.state.origin=[a.clientX,a.clientY];this.compute(a);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){const d=this.config.device;d&&(a(d,"start",this[d+"Start"].bind(this)),a(d,"change",this[d+"Move"].bind(this)),a(d,"end",this[d+"End"].bind(this)),a(d,"cancel",this[d+"End"].bind(this)));this.config.pinchOnWheel&&a("wheel","",this.wheel.bind(this),
{passive:!1})}},hF=Yg(Yg({},RA),{},{device(a,d,{shared:k,pointer:{touch:N=!1}={}}){if(k.target&&!Xu&&dF)return"gesture";if(Xu&&N)return"touch";if(UA){if(VA)return"pointer";if(Xu)return"touch"}},bounds(a,d,{scaleBounds:k={},angleBounds:N={}}){const ea=sa=>{sa=kh(k,sa);sa=Object.assign({},{min:-Infinity,max:Infinity},sa||{});return[sa.min,sa.max]},ka=sa=>{sa=kh(N,sa);sa=Object.assign({},{min:-Infinity,max:Infinity},sa||{});return[sa.min,sa.max]};return"function"!==typeof k&&"function"!==typeof N?[ea(),
ka()]:sa=>[ea(sa),ka(sa)]},threshold(a,d,k){this.lockDirection="lock"===k.axis;return Ok.toVector(a,this.lockDirection?[.1,3]:0)},modifierKey(a){return void 0===a?"ctrlKey":a},pinchOnWheel(a=!0){return a}}),iF=class extends Wu{constructor(...a){super(...a);Mi(this,"ingKey","moving")}move(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.state._active?this.moveChange(a):this.moveStart(a),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(a){this.start(a);this.computeValues(Vk(a));
this.compute(a);this.computeInitial();this.emit()}moveChange(a){if(this.state._active){var d=Vk(a),k=this.state;k._delta=Ok.sub(d,k._values);Ok.addTo(k._movement,k._delta);this.computeValues(d);this.compute(a);this.emit()}}moveEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),this.emit())}bind(a){a("pointer","change",this.move.bind(this));a("pointer","leave",this.moveEnd.bind(this))}},jF=Yg(Yg({},Rs),{},{mouseOnly:(a=!0)=>a}),kF=class extends Wu{constructor(...a){super(...a);Mi(this,
"ingKey","scrolling")}scroll(a){this.state._active||this.start(a);this.scrollChange(a);this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(a){a.cancelable&&a.preventDefault();const d=this.state;var k,N;const {scrollX:ea,scrollY:ka,scrollLeft:sa,scrollTop:La}=a.currentTarget;var Ua=[null!==(k=null!==ea&&void 0!==ea?ea:sa)&&void 0!==k?k:0,null!==(N=null!==ka&&void 0!==ka?ka:La)&&void 0!==N?N:0];d._delta=Ok.sub(Ua,d._values);Ok.addTo(d._movement,d._delta);this.computeValues(Ua);
this.compute(a);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){a("scroll","",this.scroll.bind(this))}},lF=Rs,mF=class extends Wu{constructor(...a){super(...a);Mi(this,"ingKey","wheeling")}wheel(a){this.state._active||this.start(a);this.wheelChange(a);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(a){const d=this.state;d._delta=fl(a);Ok.addTo(d._movement,d._delta);gl(d);this.compute(a);this.emit()}wheelEnd(){this.state._active&&
(this.state._active=!1,this.compute(),this.emit())}bind(a){a("wheel","",this.wheel.bind(this))}},nF=Rs,oF=class extends Wu{constructor(...a){super(...a);Mi(this,"ingKey","hovering")}enter(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.start(a),this.computeValues(Vk(a)),this.compute(a),this.emit())}leave(a){if(!this.config.mouseOnly||"mouse"===a.pointerType){var d=this.state;if(d._active){d._active=!1;var k=Vk(a);d._movement=d._delta=Ok.sub(k,d._values);this.computeValues(k);this.compute(a);
d.delta=d.movement;this.emit()}}}bind(a){a("pointer","enter",this.enter.bind(this));a("pointer","leave",this.leave.bind(this))}},pF=Yg(Yg({},Rs),{},{mouseOnly:(a=!0)=>a}),Lx=new Map,Mx=new Map,qF={key:"drag",engine:cF,resolver:fF},rF={key:"hover",engine:oF,resolver:pF},sF={key:"move",engine:iF,resolver:jF},tF={key:"pinch",engine:gF,resolver:hF},uF={key:"scroll",engine:kF,resolver:lF},vF={key:"wheel",engine:mF,resolver:nF},Nx=Df(ba(22)),wF={target(a){if(a)return()=>"current"in a?a.current:a},enabled(a=
!0){return a},window(a=Ss?window:void 0){return a},eventOptions({passive:a=!0,capture:d=!1}={}){return{passive:a,capture:d}},transform(a){return a}},xF=["target","eventOptions","window","enabled","transform"],XA=class{constructor(a,d){Mi(this,"_listeners",new Set);this._ctrl=a;this._gestureKey=d}add(a,d,k,N,ea){const ka=this._listeners,sa=mj(d,k),La=Yg(Yg({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),ea);a.addEventListener(sa,N,La);const Ua=()=>{a.removeEventListener(sa,
N,La);ka.delete(Ua)};ka.add(Ua);return Ua}clean(){this._listeners.forEach(a=>a());this._listeners.clear()}},yF=class{constructor(){Mi(this,"_timeouts",new Map)}add(a,d,k=140,...N){this.remove(a);this._timeouts.set(a,window.setTimeout(d,k,...N))}remove(a){(a=this._timeouts.get(a))&&window.clearTimeout(a)}clean(){this._timeouts.forEach(a=>void window.clearTimeout(a));this._timeouts.clear()}},zF=class{constructor(a){Mi(this,"gestures",new Set);Mi(this,"_targetEventStore",new XA(this));Mi(this,"gestureEventStores",
{});Mi(this,"gestureTimeoutStores",{});Mi(this,"handlers",{});Mi(this,"config",{});Mi(this,"pointerIds",new Set);Mi(this,"touchIds",new Set);Mi(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});a.drag&&Hi(this,"drag");a.wheel&&Hi(this,"wheel");a.scroll&&Hi(this,"scroll");a.move&&Hi(this,"move");a.pinch&&Hi(this,"pinch");a.hover&&Hi(this,"hover")}setEventIds(a){if("touches"in a)return this.touchIds=new Set(ck(a));if("pointerId"in a)return"pointerup"===a.type||"pointercancel"===a.type?
this.pointerIds.delete(a.pointerId):"pointerdown"===a.type&&this.pointerIds.add(a.pointerId),this.pointerIds}applyHandlers(a,d){this.handlers=a;this.nativeHandlers=d}applyConfig(a,d){this.config=dj(a,d,this.config)}clean(){this._targetEventStore.clean();for(const a of this.gestures)this.gestureEventStores[a].clean(),this.gestureTimeoutStores[a].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...a){var d=this.config.shared;const k={};let N;if(d.target&&
(N=d.target(),!N))return;if(d.enabled){for(const ea of this.gestures){const ka=this.config[ea],sa=YA(k,ka.eventOptions,!!N);ka.enabled&&(new (Lx.get(ea))(this,a,ea)).bind(sa)}d=YA(k,d.eventOptions,!!N);for(const ea in this.nativeHandlers)d(ea,"",ka=>this.nativeHandlers[ea](Yg(Yg({},this.state.shared),{},{event:ka,args:a})),void 0,!0)}for(const ea in k)k[ea]=pi(...k[ea]);if(!N)return k;for(const ea in k){const {device:ka,capture:sa,passive:La}=$f(ea);this._targetEventStore.add(N,ka,"",k[ea],{capture:sa,
passive:La})}}},YA=(a,d,k)=>(N,ea,ka,sa={},La=!1)=>{var Ua,cb;const ib=null!==(Ua=sa.capture)&&void 0!==Ua?Ua:d.capture;sa=null!==(cb=sa.passive)&&void 0!==cb?cb:d.passive;N=La?N:el(N,ea,ib);k&&sa&&(N+="Passive");a[N]=a[N]||[];a[N].push(ka)},AF=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,aw=Df(ba(22)),Ox=Df(ba(22)),ZA=Df(ba(22)),$A=Df(ba(22)),BF=Df(ba(22)),CF=Df(ba(22)),DF=Df(ba(22)),EF=Df(ba(22)),FF={none:(a,d)=>"none",["default"]:(a,d)=>"default",pointer:(a,d)=>"pointer",crosshair:(a,d)=>"crosshair",
move:(a,d)=>"move",wait:(a,d)=>"wait",progress:(a,d)=>"progress",grab:(a,d)=>Nd('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
a,d),grabbing:(a,d)=>Nd("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
a,d),text:(a,d)=>Nd("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
a,d),["resize-edge"]:(a,d)=>Nd("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["resize-corner"]:(a,d)=>Nd("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a,d),["ew-resize"]:(a,d)=>Nd("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,d),["ns-resize"]:(a,d)=>Nd("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
a+90,d),["nesw-resize"]:(a,d)=>Nd("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",a,d),["nwse-resize"]:(a,d)=>Nd("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a+90,d),rotate:(a,d)=>Nd('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+45,d),["nwse-rotate"]:(a,d)=>Nd('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a,d),["nesw-rotate"]:(a,d)=>Nd('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+90,d),["senw-rotate"]:(a,d)=>Nd('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+180,d),["swne-rotate"]:(a,d)=>Nd('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+270,d)},GF=Df(ba(22));Df(ba(22));var aB=ba(22),bB=Df(ba(22));if(!ba(22).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!ef)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var HF=ba(31),Yu=Df(ba(22)),cB="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,IF=1E4,JF=function(a){var d="function"===typeof Symbol&&Symbol.iterator,k=d&&a[d],N=0;if(k)return k.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&
N>=a.length&&(a=void 0);return{value:a&&a[N++],done:!a}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.");},dB=cB?Yd(cB):Ye(),KF=dB.addReactionToTrack,LF=dB.recordReactionAsCommitted,eB=function(a,d){var k="function"===typeof Symbol&&a[Symbol.iterator];if(!k)return a;a=k.call(a);var N,ea=[];try{for(;(void 0===d||0<d--)&&!(N=a.next()).done;)ea.push(N.value)}catch(sa){var ka={error:sa}}finally{try{N&&!N.done&&(k=a["return"])&&k.call(a)}finally{if(ka)throw ka.error;
}}return ea},MF=function(){return function(){}}(),St=ba(22),fB="function"===typeof Symbol&&Symbol.for,gB=fB?Symbol.for("react.forward_ref"):"function"===typeof St.forwardRef&&(0,St.forwardRef)(function(a){return null}).$$typeof,hB=fB?Symbol.for("react.memo"):"function"===typeof St.memo&&(0,St.memo)(function(a){return null}).$$typeof,NF={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};Lf.displayName="Observer";ba(22);ba(22);ba(22);(function(a){a||=Ee;Dc({reactionScheduler:a})})(HF.unstable_batchedUpdates);
var OF=Df(ba(22)),Px=ba(598),Io=OF.forwardRef(function(a,d){var {children:k,opacity:N,centered:ea,className:ka=""}=a,sa=Sf(a,["children","opacity","centered","className"]);return(0,Px.jsx)(Lf,{children:()=>(0,Px.jsx)("div",{ref:d,className:`tl-positioned-div ${ka}`,style:N?{opacity:N}:void 0,draggable:!1,children:(0,Px.jsx)("div",uf(me({className:`tl-positioned-inner ${ea?"tl-centered":""}`},sa),{children:k}))})})}),PF=Df(ba(22)),Qx=ba(598),dp=PF.forwardRef(function(a,d){var {id:k,className:N="",
style:ea,children:ka}=a,sa=Sf(a,["id","className","style","children"]);return(0,Qx.jsx)(Lf,{children:()=>(0,Qx.jsx)("svg",{ref:d,style:ea,className:`tl-positioned-svg ${N}`,children:(0,Qx.jsx)("g",uf(me({id:k,className:"tl-centered-g"},sa),{children:ka}))})})}),Zu=Df(ba(22)),iB=Df(ba(22)),bw=Df(ba(22)),QF=ba(598),Er=pe(function(a){var {id:d,bounds:k,zIndex:N,rotation:ea=0,className:ka="",children:sa}=a;a=Sf(a,"id bounds zIndex rotation className children".split(" "));const La=bw.useRef(null);bw.useLayoutEffect(()=>
{La.current.style.transform=`translate(
        calc(${k.minX}px - var(--tl-padding)),
        calc(${k.minY}px - var(--tl-padding)))
        rotate(${ea+(k.rotation||0)}rad)`},[k.minX,k.minY,ea,k.rotation]);bw.useLayoutEffect(()=>{const Ua=La.current;Ua.style.width=`calc(${Math.floor(k.width)}px + (var(--tl-padding) * 2))`;Ua.style.height=`calc(${Math.floor(k.height)}px + (var(--tl-padding) * 2))`},[k.width,k.height]);bw.useLayoutEffect(()=>{const Ua=La.current;void 0!==N&&(Ua.style.zIndex=N.toString())},[N]);return(0,QF.jsx)("div",uf(me({id:d,ref:La,className:`tl-positioned ${ka}`,"aria-label":"container"},a),{children:sa}))}),
RF=Df(ba(22)),jB=ba(598),SF=pe(function({shapes:a,hidden:d,bounds:k,rotation:N=0}){const {components:{ContextBar:ea},viewport:{bounds:ka,camera:{point:[sa,La],zoom:Ua}}}=Bh(),cb=RF.useRef(null);var ib=Ef.getRotatedBounds(k,N);ib=Ef.multiplyBounds(ib,Ua);tb(cb,k,N,10005);if(!ea)throw Error("Expected a ContextBar component.");const nb=Ef.translateBounds(ib,[sa*Ua,La*Ua]);return(0,jB.jsx)("div",{ref:cb,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container","data-html2canvas-ignore":"true",
children:(0,jB.jsx)(ea,{hidden:d,shapes:a,bounds:k,offsets:{left:nb.minX,right:ka.width-nb.maxX,top:nb.minY,bottom:ka.height-nb.maxY,width:nb.width,height:nb.height},scaledBounds:ib,rotation:N})})}),kB=Df(ba(22)),TF=ba(598),lB=pe(function({children:a}){const d=kB.useRef(null),{viewport:k}=Bh(),N=d.current,{zoom:ea,point:ka}=k.camera;kB.useEffect(()=>{N&&(N.style.transform=`scale(${ea}) translate3d(${ka[0]}px, ${ka[1]}px, 0)`)},[ea,ka,N]);return(0,TF.jsx)("div",{ref:d,className:"tl-absolute tl-layer",
children:a})}),cw=ba(598),mB=pe(function({shape:a,isHovered:d=!1,isSelected:k=!1,isBinding:N=!1,isEditing:ea=!1,isLocked:ka=!1,meta:sa}){const {bounds:La,props:{scale:Ua,rotation:cb=0},ReactIndicator:ib}=a;return(0,cw.jsx)(Er,{"data-type":"Indicator","data-html2canvas-ignore":"true",bounds:La,rotation:cb,scale:Ua,zIndex:ea?1E3:1E4,children:(0,cw.jsx)(dp,{children:(0,cw.jsx)("g",{className:`tl-indicator-container ${k?"tl-selected":"tl-hovered"} ${ka?"tl-locked":""}`,children:(0,cw.jsx)(ib,{isEditing:ea,
isBinding:N,isHovered:d,isLocked:ka,isSelected:k,isErasing:!1,meta:sa})})})})}),nB=Df(ba(22)),dw=ba(598),UF=pe(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:k}},components:{QuickLinks:N}}=Bh();var ea=Cg();const ka=bh(d);if(!N)throw Error("Expected a QuickLinks component.");ea=50>a.height*k||!ea.selectedShapesArray.includes(d);return(0,dw.jsx)(Er,{bounds:a,className:"tl-quick-links-container","data-html2canvas-ignore":"true",children:(0,dw.jsx)(Io,{children:(0,dw.jsx)("span",uf(me({style:{position:"absolute",
top:"100%",pointerEvents:"all",transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},ka),{onPointerDown:sa=>sa.stopPropagation(),children:(0,dw.jsx)(N,{className:"tl-backlinks-count "+(ea?"tl-backlinks-count-rounded":""),id:d.id,shape:d})}))})})}),ew=ba(598),VF=pe(function({bounds:a,shape:d}){const {viewport:{camera:{zoom:k}},components:{BacklinksCount:N}}=Bh();var ea=Cg();if(!N)throw Error("Expected a BacklinksCount component.");const ka=sa=>sa.stopPropagation();
ea=50>a.height*k||!ea.selectedShapesArray.includes(d)||d.hideSelection;return(0,ew.jsx)(Er,{bounds:a,className:"tl-backlinks-count-container",children:(0,ew.jsx)(Io,{children:(0,ew.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:ka,onWheelCapture:ka,onKeyDown:ka,title:"Shape Backlinks",children:(0,ew.jsx)(N,{className:"tl-backlinks-count "+(ea?"tl-backlinks-count-rounded":""),id:d.id,
shape:d})})})})}),WF=Df(ba(22)),oB=ba(598),XF=pe(function({bounds:a,hidden:d,shapes:k,rotation:N=0,detail:ea="size"}){const {components:{SelectionDetail:ka},viewport:{camera:{zoom:sa}}}=Bh(),La=WF.useRef(null),Ua=Ef.multiplyBounds(a,sa);tb(La,a,N,10003);if(!ka)throw Error("Expected a SelectionDetail component.");return(0,oB.jsx)("div",{ref:La,className:`tl-counter-scaled-positioned ${d?"tl-fade-out":""}`,"aria-label":"bounds-detail-container","data-html2canvas-ignore":"true",children:(0,oB.jsx)(ka,
{shapes:k,bounds:a,scaledBounds:Ua,zoom:sa,rotation:N,detail:ea})})}),pB=ba(598),YF=pe(function({shape:a,isHovered:d=!1,isSelected:k=!1,isBinding:N=!1,isErasing:ea=!1,isEditing:ka=!1,onEditingEnd:sa,asset:La,meta:Ua,zIndex:cb}){const {bounds:ib,props:{rotation:nb,scale:Pb},ReactComponent:Sb}=a,Nb=Cg(),lc=bh(a);var yc=Nb.getParentGroup(a);yc=Nb.selectedIds.has(null==yc?void 0:yc.id);return(0,pB.jsx)(Er,{"data-shape-id":a.id,"data-html2canvas-ignore":!k&&!yc&&0!==Nb.selectedShapes.size||null,zIndex:cb,
"data-type":"Shape",bounds:ib,rotation:nb,scale:Pb,children:(0,pB.jsx)(Sb,{meta:Ua,isEditing:ka,isBinding:N,isHovered:d,isSelected:k,isErasing:ea,events:lc,asset:La,onEditingEnd:sa})})}),Tt=ba(598),qB=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],ZF=pe(function({size:a}){const {viewport:{camera:{point:d,zoom:k}}}=Bh();return(0,Tt.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","data-html2canvas-ignore":"true",children:[(0,Tt.jsx)("defs",{children:qB.map(([N,ea,
ka],sa)=>{ka=ka*a*k;var La=d[0]*k,Ua=d[1]*k;La=0<La?La%ka:ka+La%ka;Ua=0<Ua?Ua%ka:ka+Ua%ka;N=Dk(k,[N,ea],[0,1]);return(0,Tt.jsx)("pattern",{id:`grid-${sa}`,width:ka,height:ka,patternUnits:"userSpaceOnUse",children:!(2<N||.1>N)&&(0,Tt.jsx)("circle",{className:"tl-grid-dot",cx:La,cy:Ua,r:1.5,opacity:Math.max(0,Math.min(N,1))})},`grid-pattern-${sa}`)})}),qB.map((N,ea)=>(0,Tt.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${ea})`},`grid-rect-${ea}`))]})}),rB=pe(function({size:a}){return(0,Tt.jsx)(ZF,
{size:a})}),sB=ba(598),tB=pe(function({bounds:a}){const d=Kj("background");return(0,sB.jsx)(dp,uf(me({"data-html2canvas-ignore":"true"},d),{children:(0,sB.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,a.width),height:Math.max(1,a.height),pointerEvents:"all",rx:8,ry:8})}))});ba(22);var uB=ba(598),vB=pe(function({scaledBounds:a,shapes:d,detail:k="size",rotation:N=0}){var ea;const ka=1===d.length?N:null!=(ea=a.rotation)?ea:0;return(0,uB.jsx)(Io,{centered:!0,children:(0,uB.jsx)("div",{className:"tl-bounds-detail",
style:{transform:ka<Ln||ka>3*Ln?`rotate(${ka}rad) translateY(${a.height/2+24}px)`:`rotate(${Math.PI+ka}rad) translateY(${a.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===d.length&&"line"===d[0].type?`${ge.dist(d[0].props.handles.start.point,d[0].props.handles.end.point).toFixed()}`:"size"===k?`${a.width.toFixed()} \xD7 ${a.height.toFixed()}`:`\u2220${ym.radiansToDegrees(ym.clampRadians(N)).toFixed()}\xB0`})})}),Rx=ba(598),$F={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",
bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},fw=pe(function({cx:a,cy:d,size:k,targetSize:N,corner:ea,isHidden:ka}){const sa=Kj(ea);return(0,Rx.jsxs)("g",uf(me({opacity:ka?0:1},sa),{children:[(0,Rx.jsx)("rect",{className:"tl-transparent "+(ka?"":$F[ea]),"aria-label":`${ea} target`,x:a-1.25*N,y:d-1.25*N,width:2.5*N,height:2.5*N,pointerEvents:ka?"none":"all"}),(0,Rx.jsx)("rect",{className:"tl-corner-handle","aria-label":`${ea} handle`,x:a-k/2,y:d-k/2,width:k,height:k,pointerEvents:"none"})]}))}),
gw=ba(598),Sx=pe(function({cx:a,cy:d,size:k,direction:N,isHidden:ea}){const ka=Cg();return(0,gw.jsxs)("g",{className:"tl-clone-handle",opacity:ea?0:1,children:[(0,gw.jsx)("circle",{"aria-label":`${N} handle`,pointerEvents:"all",onPointerDown:sa=>ka.api.clone(N),cx:a,cy:d,r:k}),(0,gw.jsx)("line",{x1:a-k/2,y1:d,x2:a+k/2,y2:d}),(0,gw.jsx)("line",{x1:a,y1:d-k/2,x2:a,y2:d+k/2})]})}),aG=ba(598),bG={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},hw=
pe(function({x:a,y:d,width:k,height:N,targetSize:ea,edge:ka,disabled:sa,isHidden:La}){const Ua=Kj(ka);return(0,aG.jsx)("rect",me({pointerEvents:La||sa?"none":"all",className:"tl-transparent tl-edge-handle "+(La?"":bG[ka]),"aria-label":`${ka} target`,opacity:La?0:1,x:a-ea,y:d-ea,width:Math.max(1,k+2*ea),height:Math.max(1,N+2*ea)},Ua))}),Tx=ba(598);pe(function({cx:a,cy:d,size:k,targetSize:N,isHidden:ea}){const ka=Kj("rotate");return(0,Tx.jsxs)("g",uf(me({opacity:ea?0:1},ka),{children:[(0,Tx.jsx)("circle",
{className:"tl-transparent ","aria-label":"rotate target",cx:a,cy:d,r:N,pointerEvents:ea?"none":"all"}),(0,Tx.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:a,cy:d,r:k/2,pointerEvents:"none"})]}))});ba(22);var wB=ba(598),iw=pe(function({cx:a,cy:d,targetSize:k,corner:N,isHidden:ea}){const ka=Kj(N);return(0,wB.jsx)("g",uf(me({opacity:ea?0:1},ka),{children:(0,wB.jsx)("rect",{className:"tl-transparent","aria-label":`${N} target`,x:a-2.5*k,y:d-2.5*k,width:3*k,height:3*k,pointerEvents:ea?
"none":"all"})}))}),Wl=ba(598),xB=pe(function({bounds:a,showResizeHandles:d,showRotateHandles:k,showCloneHandles:N,shapes:ea}){var ka,sa;const La=Cg();let {width:Ua,height:cb}=a;var ib=La.viewport.camera.zoom;a=8/ib;const nb=6/ib;ib=30/ib;const Pb=2*a,Sb=1===ea.length?ea[0].canResize:[!0,!0],Nb=null!=(sa=null==(ka=La.editingShape)?void 0:ka.props.borderRadius)?sa:0;return(0,Wl.jsx)(Wl.Fragment,{children:0<ea.length&&(0,Wl.jsxs)(dp,{children:[!La.editingShape&&(0,Wl.jsx)("rect",{className:"tl-bounds-fg",
width:Math.max(Ua,1),height:Math.max(cb,1),rx:Nb,ry:Nb,pointerEvents:"none"}),(0,Wl.jsx)(hw,{x:2*nb,y:0,width:Ua-4*nb,height:0,targetSize:nb,edge:"top_edge",disabled:!Sb[1],isHidden:!d}),(0,Wl.jsx)(hw,{x:Ua,y:2*nb,width:0,height:cb-4*nb,targetSize:nb,edge:"right_edge",disabled:!Sb[0],isHidden:!d}),(0,Wl.jsx)(hw,{x:2*nb,y:cb,width:Ua-4*nb,height:0,targetSize:nb,edge:"bottom_edge",disabled:!Sb[1],isHidden:!d}),(0,Wl.jsx)(hw,{x:0,y:2*nb,width:0,height:cb-4*nb,targetSize:nb,edge:"left_edge",disabled:!Sb[0],
isHidden:!d}),(0,Wl.jsx)(iw,{cx:0,cy:0,targetSize:nb,corner:"top_left_resize_corner",isHidden:!k}),(0,Wl.jsx)(iw,{cx:Ua+2*nb,cy:0,targetSize:nb,corner:"top_right_resize_corner",isHidden:!k}),(0,Wl.jsx)(iw,{cx:Ua+2*nb,cy:cb+2*nb,targetSize:nb,corner:"bottom_right_resize_corner",isHidden:!k}),(0,Wl.jsx)(iw,{cx:0,cy:cb+2*nb,targetSize:nb,corner:"bottom_left_resize_corner",isHidden:!k}),(0,Wl.jsx)(Sx,{cx:-ib,cy:cb/2,size:Pb,direction:"left",isHidden:!N}),(0,Wl.jsx)(Sx,{cx:Ua+ib,cy:cb/2,size:Pb,direction:"right",
isHidden:!N}),(0,Wl.jsx)(Sx,{cx:Ua/2,cy:cb+ib,size:Pb,direction:"down",isHidden:!N}),(null==Sb?void 0:Sb.every(lc=>lc))&&(0,Wl.jsxs)(Wl.Fragment,{children:[(0,Wl.jsx)(fw,{cx:0,cy:0,size:a,targetSize:nb,corner:"top_left_corner",isHidden:!d}),(0,Wl.jsx)(fw,{cx:Ua,cy:0,size:a,targetSize:nb,corner:"top_right_corner",isHidden:!d}),(0,Wl.jsx)(fw,{cx:Ua,cy:cb,size:a,targetSize:nb,corner:"bottom_right_corner",isHidden:!d}),(0,Wl.jsx)(fw,{cx:0,cy:cb,size:a,targetSize:nb,corner:"bottom_left_corner",isHidden:!d})]})]})})}),
Ux=ba(598),yB=pe(function({bounds:a}){return(0,Ux.jsx)(Er,{bounds:a,zIndex:10001,children:(0,Ux.jsx)(dp,{children:(0,Ux.jsx)("rect",{className:"tl-brush",x:0,y:0,width:a.width,height:a.height})})})}),zB=ba(598);pe(function(){return(0,zB.jsx)(zB.Fragment,{})});var Vx=ba(598),AB=pe(function({shape:a,handle:d,id:k}){a=td(a,k);const [N,ea]=d.point;return(0,Vx.jsxs)("g",uf(me({className:"tl-handle","aria-label":"handle"},a),{transform:`translate(${N}, ${ea})`,children:[(0,Vx.jsx)("circle",{className:"tl-handle-bg",
pointerEvents:"all"}),(0,Vx.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),BB=Df(ba(22)),Wx=ba(598),Xx=pe(function({direction:a}){const {viewport:{bounds:d}}=Bh(),k=BB.useRef(null);BB.useLayoutEffect(()=>{const N=k.current;if(N){var ea=[d.width/2,d.height/2],ka=Ef.getRectangleSides([12,12],[d.width-24,d.height-24]);for(const [,[sa,La]]of ka)ka=u(ea,a,sa,La),ka.didIntersect&&(ka=ka.points[0],N.style.transform=`translate(${ka[0]-6}px,${ka[1]-6}px) rotate(${ge.toAngle(a)}rad)`)}},
[a,d]);return(0,Wx.jsx)("div",{ref:k,className:"tl-direction-indicator","data-html2canvas-ignore":"true",children:(0,Wx.jsx)("svg",{height:12,width:12,children:(0,Wx.jsx)("polygon",{points:"0,0 12,6 0,12"})})})}),Pk=ba(598),cG=pe(function({id:a,className:d,brush:k,shapes:N,assets:ea,bindingShapes:ka,editingShape:sa,hoveredShape:La,hoveredGroup:Ua,selectionBounds:cb,selectedShapes:ib,erasingShapes:nb,selectionDirectionHint:Pb,cursor:Sb="default",cursorRotation:Nb=0,selectionRotation:lc=0,showSelection:yc=
!0,showHandles:bc=!0,showSelectionRotation:qc=!1,showResizeHandles:mc=!0,showRotateHandles:Pc=!0,showCloneHandles:Uc=!0,showSelectionDetail:Ed=!0,showContextBar:Ud=!0,showGrid:ff=!0,gridSize:oe=8,onEditingEnd:Ue=WE,theme:Bf=Jq,children:gf}){var vf;const Rd=Zu.useRef(null),{viewport:wd,components:Jd,meta:rd}=Bh(),Md=Cg(),Te=Zu.useCallback(wf=>{Md.inputs.updateContainerOffset([wf.minX,wf.minY])},[]);Bl(Bf,a);hd(Rd);sj(Rd,wd,Te);uj(Rd);ue();ie(Rd,Sb,Nb);ze(Rd);Mg(Rd);a=yg();const of=(Sb=1===(null==ib?
void 0:ib.length)&&ib[0])&&"handles"in Sb.props?null==ib?void 0:ib[0]:void 0,lg=Zu.useMemo(()=>new Set(ib||[]),[ib]),Fg=Zu.useMemo(()=>new Set(nb||[]),[nb]);Sb=1===(null==ib?void 0:ib.length)?ib[0]:void 0;Ua=[...(new Set([Ua,La]))].filter(qg);return(0,Pk.jsxs)("div",{ref:Rd,className:`tl-container ${null!=d?d:""}`,children:[(0,Pk.jsxs)("div",uf(me({tabIndex:-1,className:"tl-absolute tl-canvas"},a),{children:[ff&&Jd.Grid&&(0,Pk.jsx)(Jd.Grid,{size:oe}),(0,Pk.jsxs)(lB,{children:[Jd.SelectionBackground&&
ib&&cb&&yc&&(0,Pk.jsx)(Er,{"data-type":"SelectionBackground",bounds:cb,zIndex:2,"data-html2canvas-ignore":"true",children:(0,Pk.jsx)(Jd.SelectionBackground,{shapes:ib,bounds:cb,showResizeHandles:mc,showRotateHandles:Pc})}),N&&N.map((wf,Xg)=>(0,Pk.jsx)(YF,{shape:wf,asset:ea&&wf.props.assetId?ea[wf.props.assetId]:void 0,isEditing:wf===sa,isHovered:wf===La,isBinding:null==ka?void 0:ka.includes(wf),isSelected:lg.has(wf),isErasing:Fg.has(wf),meta:rd,zIndex:1E3+Xg,onEditingEnd:Ue},"shape_"+wf.id)),!Md.isIn("select.pinching")&&
(null==ib?void 0:ib.map(wf=>(0,Pk.jsx)(mB,{shape:wf,isEditing:wf===sa,isHovered:!1,isBinding:!1,isSelected:!0,isLocked:wf.props.isLocked},"selected_indicator_"+wf.id))),Ua.map(wf=>wf!==sa&&(0,Pk.jsx)(mB,{shape:wf},"hovered_indicator_"+wf.id)),Sb&&Jd.BacklinksCount&&(0,Pk.jsx)(VF,{hidden:!1,bounds:Sb.bounds,shape:Sb}),La&&La!==Sb&&Jd.QuickLinks&&(0,Pk.jsx)(UF,{hidden:!1,bounds:La.bounds,shape:La}),k&&Jd.Brush&&(0,Pk.jsx)(Jd.Brush,{bounds:k}),ib&&cb&&(0,Pk.jsxs)(Pk.Fragment,{children:[yc&&Jd.SelectionForeground&&
(0,Pk.jsx)(Er,{"data-type":"SelectionForeground","data-html2canvas-ignore":"true",bounds:cb,zIndex:sa&&ib.includes(sa)?1002:10002,children:(0,Pk.jsx)(Jd.SelectionForeground,{shapes:ib.filter(wf=>!wf.props.isLocked),bounds:cb,showResizeHandles:mc,showRotateHandles:Pc,showCloneHandles:Uc})}),bc&&of&&Jd.Handle&&(0,Pk.jsx)(Er,{"data-type":"onlySelectedShapeWithHandles","data-html2canvas-ignore":"true",bounds:cb,zIndex:10003,children:(0,Pk.jsx)(dp,{children:Object.entries(null!=(vf=of.props.handles)?vf:
{}).map(([wf,Xg])=>Zu.createElement(Jd.Handle,{key:`${Xg.id}_handle_${Xg.id}`,shape:of,handle:Xg,id:wf}))})}),ib&&Jd.SelectionDetail&&(0,Pk.jsx)(XF,{"data-html2canvas-ignore":"true",shapes:ib,bounds:cb,detail:qc?"rotation":"size",hidden:!Ed,rotation:lc},"detail"+ib.map(wf=>wf.id).join(""))]})]}),Pb&&cb&&ib&&(0,Pk.jsx)(Xx,{direction:Pb,bounds:cb,shapes:ib}),(0,Pk.jsx)("div",{id:"tl-dev-tools-canvas-anchor","data-html2canvas-ignore":"true"})]})),(0,Pk.jsx)(lB,{children:ib&&cb&&(0,Pk.jsx)(Pk.Fragment,
{children:ib&&Jd.ContextBar&&(0,Pk.jsx)(SF,{shapes:ib.filter(wf=>!wf.props.isLocked),hidden:!Ud,bounds:Sb?Sb.bounds:cb,rotation:Sb?Sb.props.rotation:0},"context"+ib.map(wf=>wf.id).join(""))})}),gf]})}),CB=Df(ba(22)),DB=Df(ba(22)),EB=ba(598);pe(function({children:a}){const d=DB.useRef(null),{viewport:k}=Bh();DB.useEffect(()=>nc(()=>{const N=d.current;if(N){var {zoom:ea,point:ka}=k.camera;N.style.transform=`scale(${ea}) translateX(${ka[0]}px) translateY(${ka[1]}px)`}}),[]);return(0,EB.jsx)("svg",{className:"tl-absolute tl-overlay",
pointerEvents:"none",children:(0,EB.jsx)("g",{ref:d,pointerEvents:"none",children:a})})});var dG=ba(598),eG=pe(function(a){const d=Ec(a),k=bk(a.id);$c(d,a);tc(d,a);return(0,dG.jsx)(k.Provider,{value:d,children:a.children})}),fG=ba(598),gG=pe(function({id:a="noid",viewport:d,inputs:k,callbacks:N=Jq,meta:ea=Jq,components:ka=Jq,children:sa}){const [La,Ua]=CB.useState(()=>{const {Brush:ib,ContextBar:nb,DirectionIndicator:Pb,Grid:Sb,Handle:Nb,SelectionBackground:lc,SelectionDetail:yc,SelectionForeground:bc}=
ka,qc=Sf(ka,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return{id:a,viewport:d,inputs:k,callbacks:N,meta:ea,components:uf(me({},qc),{Brush:null===ib?void 0:yB,ContextBar:nb,DirectionIndicator:null===Pb?void 0:Xx,Grid:null===Sb?void 0:rB,Handle:null===Nb?void 0:AB,SelectionBackground:null===lc?void 0:tB,SelectionDetail:null===yc?void 0:vB,SelectionForeground:null===bc?void 0:xB})}});CB.useLayoutEffect(()=>{const {Brush:ib,ContextBar:nb,
DirectionIndicator:Pb,Grid:Sb,Handle:Nb,SelectionBackground:lc,SelectionDetail:yc,SelectionForeground:bc}=ka,qc=Sf(ka,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return nc(()=>{Ua({id:a,viewport:d,inputs:k,callbacks:N,meta:ea,components:uf(me({},qc),{Brush:null===ib?void 0:yB,ContextBar:nb,DirectionIndicator:null===Pb?void 0:Xx,Grid:null===Sb?void 0:rB,Handle:null===Nb?void 0:AB,SelectionBackground:null===lc?void 0:tB,SelectionDetail:null===
yc?void 0:vB,SelectionForeground:null===bc?void 0:xB})})})},[]);const cb=cl(a);return(0,fG.jsx)(cb.Provider,{value:La,children:sa})}),FB=ba(598),hG=ba(598),iG=pe(function(a){const d=Cg();return(0,hG.jsx)(ch,me({viewport:d.viewport,inputs:d.inputs,callbacks:d._events,brush:d.brush,editingShape:d.editingShape,hoveredShape:d.hoveredShape,hoveredGroup:d.hoveredGroup,bindingShapes:d.bindingShapes,selectionDirectionHint:d.selectionDirectionHint,selectionBounds:d.selectionBounds,selectedShapes:d.selectedShapesArray,
erasingShapes:d.erasingShapesArray,shapes:d.shapes,assets:d.assets,showGrid:d.settings.showGrid,penMode:d.settings.penMode,showSelection:d.showSelection,showSelectionRotation:d.showSelectionRotation,showResizeHandles:d.showResizeHandles,showRotateHandles:d.showRotateHandles,showCloneHandles:d.showCloneHandles,showSelectionDetail:d.showSelectionDetail,showContextBar:d.showContextBar,cursor:d.cursors.cursor,cursorRotation:d.cursors.rotation,selectionRotation:d.selectionRotation,onEditingEnd:d.clearEditingState},
a))});ba(598);var Ut=Df(ba(22)),Fr=Df(ba(22)),jG=ba(598),kG="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),Eh=a=>{var {name:d,className:k}=a;a=Sf(a,["name","className"]);const N=kG.includes(d)?"tie tie-":"ti ti-";return(0,jG.jsx)("i",me({className:[N+d,k].join(" ")},
a))},yh=ba(22),lG=ba(22),Ts=ba(22),eo=ba(22),Yx=ba(22),mG=ba(31),mn=ba(22),hq=(0,mn.forwardRef)((a,d)=>{var {children:k}=a;a=Sf(a,["children"]);const N=mn.Children.toArray(k),ea=N.find(Og);if(ea){const ka=ea.props.children;k=N.map(sa=>sa===ea?1<mn.Children.count(ka)?mn.Children.only(null):(0,mn.isValidElement)(ka)?ka.props.children:null:sa);return(0,mn.createElement)(Zx,Se({},a,{ref:d}),(0,mn.isValidElement)(ka)?(0,mn.cloneElement)(ka,void 0,k):null)}return(0,mn.createElement)(Zx,Se({},a,{ref:d}),
k)});hq.displayName="Slot";var Zx=(0,mn.forwardRef)((a,d)=>{const {children:k}=a;a=Sf(a,["children"]);return(0,mn.isValidElement)(k)?(0,mn.cloneElement)(k,uf(me({},jm(a,k.props)),{ref:Pg(d,k.ref)})):1<mn.Children.count(k)?mn.Children.only(null):null});Zx.displayName="SlotClone";var GB=({children:a})=>(0,mn.createElement)(mn.Fragment,null,a),Yk="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const k=(0,Yx.forwardRef)((N,ea)=>{var {asChild:ka}=N;N=Sf(N,["asChild"]);
ka=ka?hq:d;(0,Yx.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Yx.createElement)(ka,Se({},N,{ref:ea}))});k.displayName=`Primitive.${d}`;return uf(me({},a),{[d]:k})},{}),$x=ba(22),nG=ba(22),HB,oG=(0,eo.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ay=(0,eo.forwardRef)((a,d)=>{var k;const {disableOutsidePointerEvents:N=!1,onEscapeKeyDown:ea,onPointerDownOutside:ka,onFocusOutside:sa,onInteractOutside:La,onDismiss:Ua}=a,cb=Sf(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),
ib=(0,eo.useContext)(oG),[nb,Pb]=(0,eo.useState)(null),Sb=null!==(k=null===nb||void 0===nb?void 0:nb.ownerDocument)&&void 0!==k?k:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Nb]=(0,eo.useState)({});d=oh(d,mc=>Pb(mc));k=Array.from(ib.layers);var [lc]=[...ib.layersWithOutsidePointerEventsDisabled].slice(-1);lc=k.indexOf(lc);const yc=nb?k.indexOf(nb):-1;k=0<ib.layersWithOutsidePointerEventsDisabled.size;const bc=yc>=lc;lc=Cj(mc=>{const Pc=mc.target,Uc=[...ib.branches].some(Ed=>
Ed.contains(Pc));bc&&!Uc&&(null===ka||void 0===ka||ka(mc),null===La||void 0===La||La(mc),mc.defaultPrevented||null===Ua||void 0===Ua||Ua())},Sb);const qc=mk(mc=>{const Pc=mc.target;[...ib.branches].some(Uc=>Uc.contains(Pc))||(null===sa||void 0===sa||sa(mc),null===La||void 0===La||La(mc),mc.defaultPrevented||null===Ua||void 0===Ua||Ua())},Sb);Hk(mc=>{yc===ib.layers.size-1&&(null===ea||void 0===ea||ea(mc),!mc.defaultPrevented&&Ua&&(mc.preventDefault(),Ua()))},Sb);(0,eo.useEffect)(()=>{if(nb)return N&&
(0===ib.layersWithOutsidePointerEventsDisabled.size&&(HB=Sb.body.style.pointerEvents,Sb.body.style.pointerEvents="none"),ib.layersWithOutsidePointerEventsDisabled.add(nb)),ib.layers.add(nb),Tl(),()=>{N&&1===ib.layersWithOutsidePointerEventsDisabled.size&&(Sb.body.style.pointerEvents=HB)}},[nb,Sb,N,ib]);(0,eo.useEffect)(()=>()=>{nb&&(ib.layers.delete(nb),ib.layersWithOutsidePointerEventsDisabled.delete(nb),Tl())},[nb,ib]);(0,eo.useEffect)(()=>{const mc=()=>Nb({});document.addEventListener("dismissableLayer.update",
mc);return()=>document.removeEventListener("dismissableLayer.update",mc)},[]);return(0,eo.createElement)(Yk.div,Se({},cb,{ref:d,style:me({pointerEvents:k?bc?"auto":"none":void 0},a.style),onFocusCapture:gg(a.onFocusCapture,qc.onFocusCapture),onBlurCapture:gg(a.onBlurCapture,qc.onBlurCapture),onPointerDownCapture:gg(a.onPointerDownCapture,lc.onPointerDownCapture)}))}),IB=Df(ba(22)),pG=ba(22),Vm=(null===globalThis||void 0===globalThis?0:globalThis.document)?pG.useLayoutEffect:()=>{},qG=IB["useId".toString()]||
(()=>{}),rG=0,pm=ba(22),sG=(a,d,k)=>hi(void 0,null,function*(){const {placement:N="bottom",strategy:ea="absolute",middleware:ka=[],platform:sa}=k,La=yield null==sa.isRTL?void 0:sa.isRTL(d);let Ua=yield sa.getElementRects({reference:a,floating:d,strategy:ea}),{x:cb,y:ib}=il(Ua,N,La),nb=N,Pb={},Sb=0;for(let Nb=0;Nb<ka.length;Nb++){const {name:lc,fn:yc}=ka[Nb],{x:bc,y:qc,data:mc,reset:Pc}=yield yc({x:cb,y:ib,initialPlacement:N,placement:nb,strategy:ea,middlewareData:Pb,rects:Ua,platform:sa,elements:{reference:a,
floating:d}});cb=null!=bc?bc:cb;ib=null!=qc?qc:ib;Pb=uf(me({},Pb),{[lc]:me(me({},Pb[lc]),mc)});Pc&&50>=Sb&&(Sb++,"object"==typeof Pc&&(Pc.placement&&(nb=Pc.placement),Pc.rects&&(Ua=!0===Pc.rects?yield sa.getElementRects({reference:a,floating:d,strategy:ea}):Pc.rects),{x:cb,y:ib}=il(Ua,nb,La)),Nb=-1)}return{x:cb,y:ib,placement:nb,strategy:ea,middlewareData:Pb}}),by=Math.min,Nq=Math.max,JB=a=>({name:"arrow",options:a,fn(d){return hi(this,null,function*(){const {element:k,padding:N=0}=null!=a?a:{},{x:ea,
y:ka,placement:sa,rects:La,platform:Ua}=d;if(null==k)return{};const cb=Qm(N),ib={x:ea,y:ka},nb=uk(sa),Pb=sa.split("-")[1],Sb=km(nb);var Nb=yield Ua.getDimensions(k);const lc="y"===nb?"top":"left",yc="y"===nb?"bottom":"right";var bc=La.reference[Sb]+La.reference[nb]-ib[nb]-La.floating[Sb];const qc=ib[nb]-La.reference[nb];var mc=yield null==Ua.getOffsetParent?void 0:Ua.getOffsetParent(k);let Pc=mc?"y"===nb?mc.clientHeight||0:mc.clientWidth||0:0;0===Pc&&(Pc=La.floating[Sb]);mc=cb[lc];const Uc=Pc-Nb[Sb]-
cb[yc];Nb=Pc/2-Nb[Sb]/2+(bc/2-qc/2);bc=Nq(mc,by(Nb,Uc));return{[nb]:ib[nb]-(0<("start"===Pb?cb[lc]:cb[yc])&&Nb!==bc&&La.reference[Sb]<=La.floating[Sb]?Nb<mc?mc-Nb:Uc-Nb:0),data:{[nb]:bc,centerOffset:Nb-bc}}})}}),tG={left:"right",right:"left",bottom:"top",top:"bottom"},uG={start:"end",end:"start"},KB=["top","right","bottom","left"];KB.reduce((a,d)=>a.concat(d,d+"-start",d+"-end"),[]);var LB=function(a){return void 0===a&&(a={}),{name:"flip",options:a,fn(d){return hi(this,null,function*(){var k;const {placement:N,
middlewareData:ea,rects:ka,initialPlacement:sa,platform:La,elements:Ua}=d;var cb=a;const {mainAxis:ib=!0,crossAxis:nb=!0,fallbackPlacements:Pb,fallbackStrategy:Sb="bestFit",flipAlignment:Nb=!0}=cb;cb=Sf(cb,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const lc=ei(N);var yc=Pb||(lc!==sa&&Nb?function(Ed){const Ud=hl(Ed);return[Ui(Ed),Ud,Ui(Ud)]}(sa):[hl(sa)]);yc=[sa,...yc];const bc=yield Dl(d,cb),qc=[];cb=(null==(k=ea.flip)?void 0:k.overflows)||[];if(ib&&qc.push(bc[lc]),
nb){const {main:Ed,cross:Ud}=Ik(N,ka,yield null==La.isRTL?void 0:La.isRTL(Ua.floating));qc.push(bc[Ed],bc[Ud])}if(cb=[...cb,{placement:N,overflows:qc}],!qc.every(Ed=>0>=Ed)){var mc,Pc;k=(null!=(mc=null==(Pc=ea.flip)?void 0:Pc.index)?mc:0)+1;if(mc=yc[k])return{data:{index:k,overflows:cb},reset:{placement:mc}};mc="bottom";switch(Sb){case "bestFit":var Uc;(Pc=null==(Uc=cb.map(Ed=>[Ed,Ed.overflows.filter(Ud=>0<Ud).reduce((Ud,ff)=>Ud+ff,0)]).sort((Ed,Ud)=>Ed[1]-Ud[1])[0])?void 0:Uc[0].placement)&&(mc=
Pc);break;case "initialPlacement":mc=sa}if(N!==mc)return{reset:{placement:mc}}}return{}})}}},MB=function(a){a=void 0===a?{}:a;let {strategy:d="referenceHidden"}=a,k=Sf(a,["strategy"]);return{name:"hide",fn(N){return hi(this,null,function*(){var {rects:ea}=N;switch(d){case "referenceHidden":return ea=wk(yield Dl(N,uf(me({},k),{elementContext:"reference"})),ea.reference),{data:{referenceHiddenOffsets:ea,referenceHidden:Vj(ea)}};case "escaped":return ea=wk(yield Dl(N,uf(me({},k),{altBoundary:!0})),ea.floating),
{data:{escapedOffsets:ea,escaped:Vj(ea)}};default:return{}}})}}},NB=function(a){return void 0===a&&(a=0),{name:"offset",options:a,fn(d){return hi(this,null,function*(){const {x:k,y:N}=d,ea=yield function(ka,sa){return hi(this,null,function*(){const {placement:La,platform:Ua,elements:cb}=ka;var ib=yield null==Ua.isRTL?void 0:Ua.isRTL(cb.floating),nb=ei(La);const Pb=La.split("-")[1],Sb="x"===uk(La);nb=["left","top"].includes(nb)?-1:1;ib=ib&&Sb?-1:1;const Nb="function"==typeof sa?sa(ka):sa;let {mainAxis:lc,
crossAxis:yc,alignmentAxis:bc}="number"==typeof Nb?{mainAxis:Nb,crossAxis:0,alignmentAxis:null}:me({mainAxis:0,crossAxis:0,alignmentAxis:null},Nb);return Pb&&"number"==typeof bc&&(yc="end"===Pb?-1*bc:bc),Sb?{x:yc*ib,y:lc*nb}:{x:lc*nb,y:yc*ib}})}(d,a);return{x:k+ea.x,y:N+ea.y,data:ea}})}}},OB=function(a){return void 0===a&&(a={}),{name:"shift",options:a,fn(d){return hi(this,null,function*(){const {x:k,y:N,placement:ea}=d;var ka=a;const {mainAxis:sa=!0,crossAxis:La=!1,limiter:Ua={fn:Sb=>{let {x:Nb,
y:lc}=Sb;return{x:Nb,y:lc}}}}=ka;var cb=Sf(ka,["mainAxis","crossAxis","limiter"]);ka={x:k,y:N};cb=yield Dl(d,cb);const ib=uk(ei(ea)),nb="x"===ib?"y":"x";let Pb=ka[ib];ka=ka[nb];sa&&(Pb=Nq(Pb+cb["y"===ib?"top":"left"],by(Pb,Pb-cb["y"===ib?"bottom":"right"])));La&&(ka=Nq(ka+cb["y"===nb?"top":"left"],by(ka,ka-cb["y"===nb?"bottom":"right"])));ka=Ua.fn(uf(me({},d),{[ib]:Pb,[nb]:ka}));return uf(me({},ka),{data:{x:ka.x-k,y:ka.y-N}})})}}},PB=function(a){return void 0===a&&(a={}),{options:a,fn(d){const {x:k,
y:N,placement:ea,rects:ka,middlewareData:sa}=d,{offset:La=0,mainAxis:Ua=!0,crossAxis:cb=!0}=a;var ib={x:k,y:N};d=uk(ea);const nb="x"===d?"y":"x";let Pb=ib[d];ib=ib[nb];var Sb="function"==typeof La?La(uf(me({},ka),{placement:ea})):La;Sb="number"==typeof Sb?{mainAxis:Sb,crossAxis:0}:me({mainAxis:0,crossAxis:0},Sb);if(Ua){var Nb="y"===d?"height":"width",lc=ka.reference[d]-ka.floating[Nb]+Sb.mainAxis;Nb=ka.reference[d]+ka.reference[Nb]-Sb.mainAxis;Pb<lc?Pb=lc:Pb>Nb&&(Pb=Nb)}if(cb){var yc,bc,qc,mc;const Pc=
"y"===d?"width":"height";lc=["top","left"].includes(ei(ea));Nb=ka.reference[nb]-ka.floating[Pc]+(lc&&null!=(yc=null==(bc=sa.offset)?void 0:bc[nb])?yc:0)+(lc?0:Sb.crossAxis);yc=ka.reference[nb]+ka.reference[Pc]+(lc?0:null!=(qc=null==(mc=sa.offset)?void 0:mc[nb])?qc:0)-(lc?Sb.crossAxis:0);ib<Nb?ib=Nb:ib>yc&&(ib=yc)}return{[d]:Pb,[nb]:ib}}}},vG=function(a){return void 0===a&&(a={}),{name:"size",options:a,fn(d){return hi(this,null,function*(){const {placement:k,rects:N,platform:ea,elements:ka}=d;var sa=
a,{apply:La}=sa;sa=Sf(sa,["apply"]);sa=yield Dl(d,sa);var Ua=ei(k),cb=k.split("-")[1],ib,nb;"top"===Ua||"bottom"===Ua?(ib=Ua,nb=cb===((yield null==ea.isRTL?void 0:ea.isRTL(ka.floating))?"start":"end")?"left":"right"):(nb=Ua,ib="end"===cb?"top":"bottom");Ua=Nq(sa.left,0);cb=Nq(sa.right,0);const Pb=Nq(sa.top,0),Sb=Nq(sa.bottom,0);nb={availableHeight:N.floating.height-(["left","right"].includes(k)?2*(0!==Pb||0!==Sb?Pb+Sb:Nq(sa.top,sa.bottom)):sa[ib]),availableWidth:N.floating.width-(["top","bottom"].includes(k)?
2*(0!==Ua||0!==cb?Ua+cb:Nq(sa.left,sa.right)):sa[nb])};ib=yield ea.getDimensions(ka.floating);null==La||La(me(me({},d),nb));La=yield ea.getDimensions(ka.floating);return ib.width!==La.width||ib.height!==La.height?{reset:{rects:!0}}:{}})}}},QB=Math.min,$u=Math.max,jw=Math.round,wG={getClippingRect:function(a){let {element:d,boundary:k,rootBoundary:N,strategy:ea}=a;a=[...("clippingAncestors"===k?xo(d):[].concat(k)),N];a=a.reduce((ka,sa)=>{sa=Kn(d,sa,ea);return ka.top=$u(sa.top,ka.top),ka.right=QB(sa.right,
ka.right),ka.bottom=QB(sa.bottom,ka.bottom),ka.left=$u(sa.left,ka.left),ka},Kn(d,a[0],ea));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(a){let {rect:d,offsetParent:k,strategy:N}=a;var ea=ek(k);const ka=nk(k);if(k===ka)return d;a={scrollLeft:0,scrollTop:0};var sa=0,La=0;(ea||!ea&&"fixed"!==N)&&(("body"!==wi(k)||ej(ka))&&(a=Pm(k)),ek(k))&&(ea=Dj(k,!0),sa=ea.x+k.clientLeft,La=ea.y+k.clientTop);return uf(me({},d),{x:d.x-
a.scrollLeft+sa,y:d.y-a.scrollTop+La})},isElement:Oj,getDimensions:Ek,getOffsetParent:Pj,getDocumentElement:nk,getElementRects:a=>{let {reference:d,floating:k,strategy:N}=a;a=Pj(k);var ea=ek(a);const ka=nk(a);var sa;if(sa=ea)sa=Dj(a),sa=jw(sa.width)!==a.offsetWidth||jw(sa.height)!==a.offsetHeight;sa=Dj(d,sa,"fixed"===N);let La={scrollLeft:0,scrollTop:0};var Ua=0,cb=0;if(ea||!ea&&"fixed"!==N)(("body"!==wi(a)||ej(ka))&&(La=Pm(a)),ek(a))?(ea=Dj(a,!0),Ua=ea.x+a.clientLeft,cb=ea.y+a.clientTop):ka&&(Ua=
co(ka));return{reference:{x:sa.left+La.scrollLeft-Ua,y:sa.top+La.scrollTop-cb,width:sa.width,height:sa.height},floating:uf(me({},Ek(k)),{x:0,y:0})}},getClientRects:a=>Array.from(a.getClientRects()),isRTL:a=>"rtl"===oj(a).direction},xG=(a,d,k)=>sG(a,d,me({platform:wG},k)),Jo=Df(ba(22),1),RB=ba(22),yG=Df(ba(31),1),cy="undefined"!==typeof document?RB.useLayoutEffect:RB.useEffect,SB=a=>{const {element:d,padding:k}=a;return{name:"arrow",options:a,fn(N){if(Object.prototype.hasOwnProperty.call(d,"current")){if(null!=
d.current)return JB({element:d.current,padding:k}).fn(N)}else if(d)return JB({element:d,padding:k}).fn(N);return{}}}},dy=ba(22),zG=(0,dy.forwardRef)((a,d)=>{const {children:k,width:N=10,height:ea=5}=a,ka=Sf(a,["children","width","height"]);return(0,dy.createElement)(Yk.svg,Se({},ka,{ref:d,width:N,height:ea,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),a.asChild?k:(0,dy.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),AG=ba(22),[ey,Vt]=Vh("Popper"),[BG,TB]=ey("Popper"),fy=(0,pm.forwardRef)((a,
d)=>{const {__scopePopper:k,virtualRef:N}=a;a=Sf(a,["__scopePopper","virtualRef"]);const ea=TB("PopperAnchor",k),ka=(0,pm.useRef)(null);d=oh(d,ka);(0,pm.useEffect)(()=>{ea.onAnchorChange((null===N||void 0===N?void 0:N.current)||ka.current)});return N?null:(0,pm.createElement)(Yk.div,Se({},a,{ref:d}))}),[CG,DG]=ey("PopperContent"),[EG,FG]=ey("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),gy=(0,pm.forwardRef)((a,d)=>{var k,N,ea,ka,sa,La,Ua,cb;const {__scopePopper:ib,side:nb="bottom",sideOffset:Pb=
0,align:Sb="center",alignOffset:Nb=0,arrowPadding:lc=0,collisionBoundary:yc=[],collisionPadding:bc=0,sticky:qc="partial",hideWhenDetached:mc=!1,avoidCollisions:Pc=!0}=a;a=Sf(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Uc=TB("PopperContent",ib),[Ed,Ud]=(0,pm.useState)(null);d=oh(d,$k=>Ud($k));const [ff,oe]=(0,pm.useState)(null);var Ue=xb(ff),Bf=null!==(k=null===Ue||void 0===Ue?void 0:Ue.width)&&
void 0!==k?k:0;k=null!==(N=null===Ue||void 0===Ue?void 0:Ue.height)&&void 0!==N?N:0;N=nb+("center"!==Sb?"-"+Sb:"");Ue="number"===typeof bc?bc:me({top:0,right:0,bottom:0,left:0},bc);const gf=Array.isArray(yc)?yc:[yc],vf=0<gf.length;Ue={padding:Ue,boundary:gf.filter(Ub),altBoundary:vf};const {reference:Rd,floating:wd,strategy:Jd,x:rd,y:Md,placement:Te,middlewareData:of,update:lg}=ac({strategy:"fixed",placement:N,whileElementsMounted:Xb,middleware:[NB({mainAxis:Pb+k,alignmentAxis:Nb}),Pc?OB(me({mainAxis:!0,
crossAxis:!1,limiter:"partial"===qc?PB():void 0},Ue)):void 0,ff?SB({element:ff,padding:lc}):void 0,Pc?LB(me({},Ue)):void 0,HG({arrowWidth:Bf,arrowHeight:k}),mc?MB({strategy:"referenceHidden"}):void 0].filter(ic)});Vm(()=>{Rd(Uc.anchor)},[Rd,Uc.anchor]);const Fg=null!==rd&&null!==Md,[wf,Xg]=Db(Te);Bf=null===(ea=of.arrow)||void 0===ea?void 0:ea.x;ea=null===(ka=of.arrow)||void 0===ka?void 0:ka.y;ka=0!==(null===(sa=of.arrow)||void 0===sa?void 0:sa.centerOffset);const [Xf,jh]=(0,pm.useState)();Vm(()=>
{Ed&&jh(window.getComputedStyle(Ed).zIndex)},[Ed]);const {hasParent:zh,positionUpdateFns:qj}=FG("PopperContent",ib),Rk=!zh;(0,pm.useLayoutEffect)(()=>{if(!Rk)return qj.add(lg),()=>{qj.delete(lg)}},[Rk,qj,lg]);(0,pm.useLayoutEffect)(()=>{Rk&&Fg&&Array.from(qj).reverse().forEach($k=>requestAnimationFrame($k))},[Rk,Fg,qj]);sa=uf(me({"data-side":wf,"data-align":Xg},a),{ref:d,style:uf(me({},a.style),{animation:Fg?void 0:"none",opacity:null!==(La=of.hide)&&void 0!==La&&La.referenceHidden?0:void 0})});return(0,pm.createElement)("div",
{ref:wd,"data-radix-popper-content-wrapper":"",style:{position:Jd,left:0,top:0,transform:Fg?`translate3d(${Math.round(rd)}px, ${Math.round(Md)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Xf,["--radix-popper-transform-origin"]:[null===(Ua=of.transformOrigin)||void 0===Ua?void 0:Ua.x,null===(cb=of.transformOrigin)||void 0===cb?void 0:cb.y].join(" ")}},(0,pm.createElement)(CG,{scope:ib,placedSide:wf,onArrowChange:oe,arrowX:Bf,arrowY:ea,shouldHideArrow:ka},Rk?(0,pm.createElement)(EG,
{scope:ib,hasParent:!0,positionUpdateFns:qj},(0,pm.createElement)(Yk.div,sa)):(0,pm.createElement)(Yk.div,sa)))}),GG={top:"bottom",right:"left",bottom:"top",left:"right"},UB=(0,pm.forwardRef)(function(a,d){var {__scopePopper:k}=a;a=Sf(a,["__scopePopper"]);k=DG("PopperArrow",k);return(0,pm.createElement)("span",{ref:k.onArrowChange,style:{position:"absolute",left:k.arrowX,top:k.arrowY,[GG[k.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[k.placedSide],transform:{top:"translateY(100%)",
right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[k.placedSide],visibility:k.shouldHideArrow?"hidden":void 0}},(0,pm.createElement)(zG,Se({},a,{ref:d,style:uf(me({},a.style),{display:"block"})})))}),HG=a=>({name:"transformOrigin",options:a,fn(d){var k,N,ea,ka,sa;const {placement:La,rects:Ua,middlewareData:cb}=d,ib=(d=0!==(null===(k=cb.arrow)||void 0===k?void 0:k.centerOffset))?0:a.arrowWidth;k=d?0:a.arrowHeight;const [nb,
Pb]=Db(La),Sb={start:"0%",center:"50%",end:"100%"}[Pb],Nb=(null!==(N=null===(ea=cb.arrow)||void 0===ea?void 0:ea.x)&&void 0!==N?N:0)+ib/2;N=(null!==(ka=null===(sa=cb.arrow)||void 0===sa?void 0:sa.y)&&void 0!==ka?ka:0)+k/2;sa=ka="";"bottom"===nb?(ka=d?Sb:`${Nb}px`,sa=`${-k}px`):"top"===nb?(ka=d?Sb:`${Nb}px`,sa=`${Ua.floating.height+k}px`):"right"===nb?(ka=`${-k}px`,sa=d?Sb:`${N}px`):"left"===nb&&(ka=`${Ua.floating.width+k}px`,sa=d?Sb:`${N}px`);return{data:{x:ka,y:sa}}}}),hy=a=>{const {__scopePopper:d,
children:k}=a,[N,ea]=(0,pm.useState)(null);return(0,pm.createElement)(BG,{scope:d,anchor:N,onAnchorChange:ea},k)},VB=ba(22),IG=Df(ba(31)),JG=(0,VB.forwardRef)((a,d)=>{var k;const {container:N=null===globalThis||void 0===globalThis?void 0:null===(k=globalThis.document)||void 0===k?void 0:k.body}=a;a=Sf(a,["container"]);return N?IG.default.createPortal((0,VB.createElement)(Yk.div,Se({},a,{ref:d})),N):null}),Oq=ba(22),KG=ba(31),av=a=>{const {present:d,children:k}=a;a=dc(d);const N="function"===typeof k?
k({present:a.isPresent}):Oq.Children.only(k),ea=oh(a.ref,N.ref);return"function"===typeof k||a.isPresent?(0,Oq.cloneElement)(N,{ref:ea}):null};av.displayName="Presence";var kw=ba(22),WB=ba(22),LG=(0,WB.forwardRef)((a,d)=>(0,WB.createElement)(Yk.span,Se({},a,{ref:d,style:me({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),[lw]=Vh("Tooltip",[Vt]),mw=Vt(),[MG,iy]=lw("TooltipProvider"),[NG,
bv]=lw("Tooltip"),OG=(0,yh.forwardRef)((a,d)=>{var {__scopeTooltip:k}=a;const N=Sf(a,["__scopeTooltip"]),ea=bv("TooltipTrigger",k),ka=iy("TooltipTrigger",k);k=mw(k);const sa=(0,yh.useRef)(null);d=oh(d,sa,ea.onTriggerChange);const La=(0,yh.useRef)(!1),Ua=(0,yh.useRef)(!1),cb=(0,yh.useCallback)(()=>La.current=!1,[]);(0,yh.useEffect)(()=>()=>document.removeEventListener("pointerup",cb),[cb]);return(0,yh.createElement)(fy,Se({asChild:!0},k),(0,yh.createElement)(Yk.button,Se({"aria-describedby":ea.open?
ea.contentId:void 0,"data-state":ea.stateAttribute},N,{ref:d,onPointerMove:gg(a.onPointerMove,ib=>{"touch"===ib.pointerType||Ua.current||ka.isPointerInTransitRef.current||(ea.onTriggerEnter(),Ua.current=!0)}),onPointerLeave:gg(a.onPointerLeave,()=>{ea.onTriggerLeave();Ua.current=!1}),onPointerDown:gg(a.onPointerDown,()=>{La.current=!0;document.addEventListener("pointerup",cb,{once:!0})}),onFocus:gg(a.onFocus,()=>{if(!La.current)ea.onOpen()}),onBlur:gg(a.onBlur,ea.onClose),onClick:gg(a.onClick,ea.onClose)})))}),
[PG,QG]=lw("TooltipPortal",{forceMount:void 0}),RG=(0,yh.forwardRef)((a,d)=>{var k=QG("TooltipContent",a.__scopeTooltip);const {forceMount:N=k.forceMount,side:ea="top"}=a;k=Sf(a,["forceMount","side"]);a=bv("TooltipContent",a.__scopeTooltip);return(0,yh.createElement)(av,{present:N||a.open},a.disableHoverableContent?(0,yh.createElement)(XB,Se({side:ea},k,{ref:d})):(0,yh.createElement)(SG,Se({side:ea},k,{ref:d})))}),SG=(0,yh.forwardRef)((a,d)=>{const k=bv("TooltipContent",a.__scopeTooltip),N=iy("TooltipContent",
a.__scopeTooltip),ea=(0,yh.useRef)(null);d=oh(d,ea);const [ka,sa]=(0,yh.useState)(null),{trigger:La,onClose:Ua}=k,cb=ea.current,{onPointerInTransitChange:ib}=N,nb=(0,yh.useCallback)(()=>{sa(null);ib(!1)},[ib]),Pb=(0,yh.useCallback)((Sb,Nb)=>{const lc=md({x:Sb.clientX,y:Sb.clientY},Sb.currentTarget.getBoundingClientRect()),yc="right"===lc||"bottom"===lc?-5:5;Sb="right"===lc||"left"===lc?{x:Sb.clientX+yc,y:Sb.clientY}:{x:Sb.clientX,y:Sb.clientY+yc};Nb=Nb.getBoundingClientRect();const {top:bc,right:qc,
bottom:mc,left:Pc}=Nb;Nb=kd([Sb,{x:Pc,y:bc},{x:qc,y:bc},{x:qc,y:mc},{x:Pc,y:mc}]);sa(Nb);ib(!0)},[ib]);(0,yh.useEffect)(()=>()=>nb(),[nb]);(0,yh.useEffect)(()=>{if(La&&cb){const Sb=lc=>Pb(lc,cb),Nb=lc=>Pb(lc,La);La.addEventListener("pointerleave",Sb);cb.addEventListener("pointerleave",Nb);return()=>{La.removeEventListener("pointerleave",Sb);cb.removeEventListener("pointerleave",Nb)}}},[La,cb,Pb,nb]);(0,yh.useEffect)(()=>{if(ka){const Sb=Nb=>{var lc=Nb.target;Nb={x:Nb.clientX,y:Nb.clientY};lc=(null===
La||void 0===La?void 0:La.contains(lc))||(null===cb||void 0===cb?void 0:cb.contains(lc));const {x:yc,y:bc}=Nb;Nb=!1;for(let qc=0,mc=ka.length-1;qc<ka.length;mc=qc++){const Pc=ka[qc].x,Uc=ka[qc].y,Ed=ka[mc].x,Ud=ka[mc].y;Uc>bc!==Ud>bc&&yc<(Ed-Pc)*(bc-Uc)/(Ud-Uc)+Pc&&(Nb=!Nb)}Nb=!Nb;lc?nb():Nb&&(nb(),Ua())};document.addEventListener("pointermove",Sb);return()=>document.removeEventListener("pointermove",Sb)}},[La,cb,ka,Ua,nb]);return(0,yh.createElement)(XB,Se({},a,{ref:d}))}),[TG,UG]=lw("Tooltip",{isInside:!1}),
XB=(0,yh.forwardRef)((a,d)=>{const {__scopeTooltip:k,children:N,"aria-label":ea,onEscapeKeyDown:ka,onPointerDownOutside:sa}=a;a=Sf(a,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const La=bv("TooltipContent",k),Ua=mw(k),{onClose:cb}=La;(0,yh.useEffect)(()=>{document.addEventListener("tooltip.open",cb);return()=>document.removeEventListener("tooltip.open",cb)},[cb]);(0,yh.useEffect)(()=>{if(La.trigger){const ib=nb=>{nb=nb.target;null!==nb&&void 0!==nb&&nb.contains(La.trigger)&&
cb()};window.addEventListener("scroll",ib,{capture:!0});return()=>window.removeEventListener("scroll",ib,{capture:!0})}},[La.trigger,cb]);return(0,yh.createElement)(ay,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:ka,onPointerDownOutside:sa,onFocusOutside:ib=>ib.preventDefault(),onDismiss:cb},(0,yh.createElement)(gy,Se({"data-state":La.stateAttribute},Ua,a,{ref:d,style:uf(me({},a.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),(0,yh.createElement)(GB,
null,N),(0,yh.createElement)(TG,{scope:k,isInside:!0},(0,yh.createElement)(LG,{id:La.contentId,role:"tooltip"},ea||N))))}),VG=(0,yh.forwardRef)((a,d)=>{const {__scopeTooltip:k}=a;a=Sf(a,["__scopeTooltip"]);const N=mw(k);return UG("TooltipArrow",k).isInside?null:(0,yh.createElement)(UB,Se({},N,a,{ref:d}))}),WG=a=>{const {__scopeTooltip:d,delayDuration:k=700,skipDelayDuration:N=300,disableHoverableContent:ea=!1,children:ka}=a,[sa,La]=(0,yh.useState)(!0),Ua=(0,yh.useRef)(!1),cb=(0,yh.useRef)(0);(0,yh.useEffect)(()=>
{const ib=cb.current;return()=>window.clearTimeout(ib)},[]);return(0,yh.createElement)(MG,{scope:d,isOpenDelayed:sa,delayDuration:k,onOpen:(0,yh.useCallback)(()=>{window.clearTimeout(cb.current);La(!1)},[]),onClose:(0,yh.useCallback)(()=>{window.clearTimeout(cb.current);cb.current=window.setTimeout(()=>La(!0),N)},[N]),isPointerInTransitRef:Ua,onPointerInTransitChange:(0,yh.useCallback)(ib=>{Ua.current=ib},[]),disableHoverableContent:ea},ka)},XG=a=>{const {__scopeTooltip:d,children:k,open:N,defaultOpen:ea=
!1,onOpenChange:ka,disableHoverableContent:sa,delayDuration:La}=a,Ua=iy("Tooltip",a.__scopeTooltip);a=mw(d);const [cb,ib]=(0,yh.useState)(null),nb=Zh(),Pb=(0,yh.useRef)(0),Sb=null!==sa&&void 0!==sa?sa:Ua.disableHoverableContent,Nb=null!==La&&void 0!==La?La:Ua.delayDuration,lc=(0,yh.useRef)(!1),[yc=!1,bc]=Ic({prop:N,defaultProp:ea,onChange:Ed=>{if(Ed)Ua.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));else Ua.onClose();null===ka||void 0===ka||ka(Ed)}}),qc=(0,yh.useMemo)(()=>yc?lc.current?
"delayed-open":"instant-open":"closed",[yc]),mc=(0,yh.useCallback)(()=>{window.clearTimeout(Pb.current);lc.current=!1;bc(!0)},[bc]),Pc=(0,yh.useCallback)(()=>{window.clearTimeout(Pb.current);bc(!1)},[bc]),Uc=(0,yh.useCallback)(()=>{window.clearTimeout(Pb.current);Pb.current=window.setTimeout(()=>{lc.current=!0;bc(!0)},Nb)},[Nb,bc]);(0,yh.useEffect)(()=>()=>window.clearTimeout(Pb.current),[]);return(0,yh.createElement)(hy,a,(0,yh.createElement)(NG,{scope:d,contentId:nb,open:yc,stateAttribute:qc,trigger:cb,
onTriggerChange:ib,onTriggerEnter:(0,yh.useCallback)(()=>{Ua.isOpenDelayed?Uc():mc()},[Ua.isOpenDelayed,Uc,mc]),onTriggerLeave:(0,yh.useCallback)(()=>{Sb?Pc():window.clearTimeout(Pb.current)},[Pc,Sb]),onOpen:mc,onClose:Pc,disableHoverableContent:Sb},k))},YG=OG,ZG=a=>{const {__scopeTooltip:d,forceMount:k,children:N,container:ea}=a;a=bv("TooltipPortal",d);return(0,yh.createElement)(PG,{scope:d,forceMount:k},(0,yh.createElement)(av,{present:k||a.open},(0,yh.createElement)(JG,{asChild:!0,container:ea},
N)))},$G=RG,aH=VG,Gr=ba(598),YB=ba(598),jy=ba(598),bH=({style:a,icon:d,onClick:k})=>(0,jy.jsx)("button",{"data-html2canvas-ignore":"true",style:a,className:"tl-circle-button",onPointerDown:k,children:(0,jy.jsx)("div",{className:"tl-circle-button-icons-wrapper",children:(0,jy.jsx)(Eh,{name:d})})}),ZB=ba(22),$B=(0,ZB.forwardRef)((a,d)=>{const {pressed:k,defaultPressed:N=!1,onPressedChange:ea}=a,ka=Sf(a,["pressed","defaultPressed","onPressedChange"]),[sa=!1,La]=Ic({prop:k,onChange:ea,defaultProp:N});
return(0,ZB.createElement)(Yk.button,Se({type:"button","aria-pressed":sa,"data-state":sa?"on":"off","data-disabled":a.disabled?"":void 0},ka,{ref:d,onClick:gg(a.onClick,()=>{a.disabled||La(!sa)})}))}),cH=$B,ky=ba(598),ep=ba(22),lh=ba(22),iq=Df(ba(22)),aC=ba(22),dH=(0,aC.createContext)(void 0),eH=ba(22),ly=0,Hr=ba(22),bC={bubbles:!1,cancelable:!0},cC=(0,Hr.forwardRef)((a,d)=>{const {loop:k=!1,trapped:N=!1,onMountAutoFocus:ea,onUnmountAutoFocus:ka}=a;a=Sf(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);
const [sa,La]=(0,Hr.useState)(null),Ua=nj(ea),cb=nj(ka),ib=(0,Hr.useRef)(null);d=oh(d,Sb=>La(Sb));const nb=(0,Hr.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,Hr.useEffect)(()=>{if(N){let Sb=function(lc){!nb.paused&&sa&&(lc=lc.target,sa.contains(lc)?ib.current=lc:tf(ib.current,{select:!0}))},Nb=function(lc){!nb.paused&&sa&&(sa.contains(lc.relatedTarget)||tf(ib.current,{select:!0}))};document.addEventListener("focusin",Sb);document.addEventListener("focusout",Nb);
return()=>{document.removeEventListener("focusin",Sb);document.removeEventListener("focusout",Nb)}}},[N,sa,nb.paused]);(0,Hr.useEffect)(()=>{if(sa){dC.add(nb);const Sb=document.activeElement;if(!sa.contains(Sb)){const Nb=new CustomEvent("focusScope.autoFocusOnMount",bC);sa.addEventListener("focusScope.autoFocusOnMount",Ua);sa.dispatchEvent(Nb);Nb.defaultPrevented||(mf(Mh(nf(sa)),{select:!0}),document.activeElement===Sb&&tf(sa))}return()=>{sa.removeEventListener("focusScope.autoFocusOnMount",Ua);setTimeout(()=>
{const Nb=new CustomEvent("focusScope.autoFocusOnUnmount",bC);sa.addEventListener("focusScope.autoFocusOnUnmount",cb);sa.dispatchEvent(Nb);Nb.defaultPrevented||tf(null!==Sb&&void 0!==Sb?Sb:document.body,{select:!0});sa.removeEventListener("focusScope.autoFocusOnUnmount",cb);dC.remove(nb)},0)}}},[sa,Ua,cb,nb]);const Pb=(0,Hr.useCallback)(Sb=>{if((k||N)&&!nb.paused){var Nb=document.activeElement;if("Tab"===Sb.key&&!Sb.altKey&&!Sb.ctrlKey&&!Sb.metaKey&&Nb){const yc=Sb.currentTarget;var lc=yc;const bc=
nf(lc),qc=Kg(bc,lc);lc=Kg(bc.reverse(),lc);const [mc,Pc]=[qc,lc];mc&&Pc?Sb.shiftKey||Nb!==Pc?Sb.shiftKey&&Nb===mc&&(Sb.preventDefault(),k&&tf(Pc,{select:!0})):(Sb.preventDefault(),k&&tf(mc,{select:!0})):Nb===yc&&Sb.preventDefault()}}},[k,N,nb.paused]);return(0,Hr.createElement)(Yk.div,Se({tabIndex:-1},a,{ref:d,onKeyDown:Pb}))}),dC=function(){let a=[];return{add(d){const k=a[0];d===k||null!==k&&void 0!==k&&k.pause();a=ph(a,d);a.unshift(d)},remove(d){var k;a=ph(a,d);null===(k=a[0])||void 0===k||k.resume()}}}(),
qm=ba(22),fH={bubbles:!1,cancelable:!0},[my,eC,gH]=sg("RovingFocusGroup"),[hH,nw]=Vh("RovingFocusGroup",[gH]),[iH,jH]=hH("RovingFocusGroup"),fC=(0,qm.forwardRef)((a,d)=>(0,qm.createElement)(my.Provider,{scope:a.__scopeRovingFocusGroup},(0,qm.createElement)(my.Slot,{scope:a.__scopeRovingFocusGroup},(0,qm.createElement)(kH,Se({},a,{ref:d}))))),kH=(0,qm.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:k,orientation:N,loop:ea=!1,dir:ka,currentTabStopId:sa,defaultCurrentTabStopId:La,onCurrentTabStopIdChange:Ua,
onEntryFocus:cb}=a,ib=Sf(a,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),nb=(0,qm.useRef)(null);d=oh(d,nb);const Pb=Gg(ka),[Sb=null,Nb]=Ic({prop:sa,defaultProp:La,onChange:Ua}),[lc,yc]=(0,qm.useState)(!1),bc=nj(cb),qc=eC(k),mc=(0,qm.useRef)(!1),[Pc,Uc]=(0,qm.useState)(0);(0,qm.useEffect)(()=>{const Ed=nb.current;if(Ed)return Ed.addEventListener("rovingFocusGroup.onEntryFocus",bc),()=>Ed.removeEventListener("rovingFocusGroup.onEntryFocus",
bc)},[bc]);return(0,qm.createElement)(iH,{scope:k,orientation:N,dir:Pb,loop:ea,currentTabStopId:Sb,onItemFocus:(0,qm.useCallback)(Ed=>Nb(Ed),[Nb]),onItemShiftTab:(0,qm.useCallback)(()=>yc(!0),[]),onFocusableItemAdd:(0,qm.useCallback)(()=>Uc(Ed=>Ed+1),[]),onFocusableItemRemove:(0,qm.useCallback)(()=>Uc(Ed=>Ed-1),[])},(0,qm.createElement)(Yk.div,Se({tabIndex:lc||0===Pc?-1:0,"data-orientation":N},ib,{ref:d,style:me({outline:"none"},a.style),onMouseDown:gg(a.onMouseDown,()=>{mc.current=!0}),onFocus:gg(a.onFocus,
Ed=>{var Ud=!mc.current;if(Ed.target===Ed.currentTarget&&Ud&&!lc&&(Ud=new CustomEvent("rovingFocusGroup.onEntryFocus",fH),Ed.currentTarget.dispatchEvent(Ud),!Ud.defaultPrevented)){Ed=qc().filter(oe=>oe.focusable);Ud=Ed.find(oe=>oe.active);const ff=Ed.find(oe=>oe.id===Sb);Ed=[Ud,ff,...Ed].filter(Boolean).map(oe=>oe.ref.current);Ug(Ed)}mc.current=!1}),onBlur:gg(a.onBlur,()=>yc(!1))})))}),gC=(0,qm.forwardRef)((a,d)=>{const {__scopeRovingFocusGroup:k,focusable:N=!0,active:ea=!1}=a,ka=Sf(a,["__scopeRovingFocusGroup",
"focusable","active"]),sa=Zh(),La=jH("RovingFocusGroupItem",k),Ua=La.currentTabStopId===sa,cb=eC(k),{onFocusableItemAdd:ib,onFocusableItemRemove:nb}=La;(0,qm.useEffect)(()=>{if(N)return ib(),()=>nb()},[N,ib,nb]);return(0,qm.createElement)(my.ItemSlot,{scope:k,id:sa,focusable:N,active:ea},(0,qm.createElement)(Yk.span,Se({tabIndex:Ua?0:-1,"data-orientation":La.orientation},ka,{ref:d,onMouseDown:gg(a.onMouseDown,Pb=>{if(N)La.onItemFocus(sa);else Pb.preventDefault()}),onFocus:gg(a.onFocus,()=>La.onItemFocus(sa)),
onKeyDown:gg(a.onKeyDown,Pb=>{if("Tab"===Pb.key&&Pb.shiftKey)La.onItemShiftTab();else if(Pb.target===Pb.currentTarget){var Sb=bi(Pb,La.orientation,La.dir);if(void 0!==Sb){Pb.preventDefault();let Nb=cb().filter(lc=>lc.focusable).map(lc=>lc.ref.current);if("last"===Sb)Nb.reverse();else if("prev"===Sb||"next"===Sb)"prev"===Sb&&Nb.reverse(),Pb=Nb.indexOf(Pb.currentTarget),Nb=La.loop?Lg(Nb,Pb+1):Nb.slice(Pb+1);setTimeout(()=>Ug(Nb))}}})})))}),lH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",
PageUp:"first",Home:"first",PageDown:"last",End:"last"},mH=function(a){return"undefined"===typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body},Wt=new WeakMap,ow=new WeakMap,pw={},ny=0,oy=function(a,d,k){void 0===d&&(d=mH(a));void 0===k&&(k="data-aria-hidden");var N=Array.isArray(a)?a:[a];pw[k]||(pw[k]=new WeakMap);var ea=pw[k],ka=[],sa=new Set,La=function(cb){cb&&!sa.has(cb)&&(sa.add(cb),La(cb.parentNode))};N.forEach(La);var Ua=function(cb){!cb||0<=N.indexOf(cb)||Array.prototype.forEach.call(cb.children,
function(ib){if(sa.has(ib))Ua(ib);else{var nb=ib.getAttribute("aria-hidden");nb=null!==nb&&"false"!==nb;var Pb=(Wt.get(ib)||0)+1,Sb=(ea.get(ib)||0)+1;Wt.set(ib,Pb);ea.set(ib,Sb);ka.push(ib);1===Pb&&nb&&ow.set(ib,!0);1===Sb&&ib.setAttribute(k,"true");nb||ib.setAttribute("aria-hidden","true")}})};Ua(d);sa.clear();ny++;return function(){ka.forEach(function(cb){var ib=Wt.get(cb)-1,nb=ea.get(cb)-1;Wt.set(cb,ib);ea.set(cb,nb);ib||(ow.has(cb)||cb.removeAttribute("aria-hidden"),ow.delete(cb));nb||cb.removeAttribute(k)});
ny--;ny||(Wt=new WeakMap,Wt=new WeakMap,ow=new WeakMap,pw={})}},nH=Df(ms(),1),{__assign:Ir,__rest:fp,__spreadArray:oH}=nH.default,hC=Df(ba(22)),Pq=Df(ba(22)),iC=ba(22),An=Df(ba(22)),fo=function(a){var d=a.sideCar;a=fp(a,["sideCar"]);if(!d)throw Error("Sidecar: please provide `sideCar` property to import the right car");d=d.read();if(!d)throw Error("Sidecar medium not found");return An.createElement(d,Ir({},a))};fo.isSideCarExport=!0;var Pv=function(a){void 0===a&&(a={});var d=Ml(null);d.options=Ir({async:!0,
ssr:!1},a);return d}(),rx=function(){},Qv=Pq.forwardRef(function(a,d){var k=Pq.useRef(null),N=Pq.useState({onScrollCapture:rx,onWheelCapture:rx,onTouchMoveCapture:rx}),ea=N[0];N=N[1];var ka=a.forwardProps,sa=a.children,La=a.className,Ua=a.removeScrollBar,cb=a.enabled,ib=a.shards,nb=a.sideCar,Pb=a.noIsolation,Sb=a.inert,Nb=a.allowPinchZoom,lc=a.as;lc=void 0===lc?"div":lc;a=fp(a,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));
d=Aj([k,d]);ea=Ir(Ir({},a),ea);return Pq.createElement(Pq.Fragment,null,cb&&Pq.createElement(nb,{sideCar:Pv,removeScrollBar:Ua,shards:ib,noIsolation:Pb,inert:Sb,setCallbacks:N,allowPinchZoom:!!Nb,lockRef:k}),ka?Pq.cloneElement(Pq.Children.only(sa),Ir(Ir({},ea),{ref:d})):Pq.createElement(lc,Ir({},ea,{className:La,ref:d}),sa))});Qv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Qv.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var mm=Df(ba(22)),Hz=Df(ba(22)),
vt=Df(ba(22)),sx=function(){var a=0,d=null;return{add:function(k){if(0==a){if(document){var N=document.createElement("style");N.type="text/css";var ea="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;ea&&N.setAttribute("nonce",ea)}else N=null;if(d=N)N=d,N.styleSheet?N.styleSheet.cssText=k:N.appendChild(document.createTextNode(k)),k=d,(document.head||document.getElementsByTagName("head")[0]).appendChild(k)}a++},remove:function(){a--;!a&&d&&(d.parentNode&&d.parentNode.removeChild(d),
d=null)}}},pH=function(){var a=sx();return function(d,k){vt.useEffect(function(){a.add(d);return function(){a.remove()}},[d&&k])}},py=function(){var a=pH();return function(d){a(d.styles,d.dynamic);return null}},jC={left:0,top:0,right:0,gap:0},kC=py(),lC=function(a,d,k,N){var ea=a.left,ka=a.top,sa=a.right;a=a.gap;void 0===k&&(k="margin");return"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(N,";\n   padding-right: ").concat(a,"px ").concat(N,";\n  }\n  body {\n    overflow: hidden ").concat(N,
";\n    overscroll-behavior: contain;\n    ").concat([d&&"position: relative ".concat(N,";"),"margin"===k&&"\n    padding-left: ".concat(ea,"px;\n    padding-top: ").concat(ka,"px;\n    padding-right: ").concat(sa,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(N,";\n    "),"padding"===k&&"padding-right: ".concat(a,"px ").concat(N,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(a,"px ").concat(N,
";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(a,"px ").concat(N,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(N,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(N,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},bE=function(a){var d=a.noRelative,k=a.noImportant;
a=a.gapMode;var N=void 0===a?"margin":a;a=Hz.useMemo(function(){var ea=N;void 0===ea&&(ea="margin");if("undefined"===typeof window)ea=jC;else{var ka=window.getComputedStyle(document.body),sa=ka["padding"===ea?"paddingTop":"marginTop"],La=ka["padding"===ea?"paddingRight":"marginRight"];ea=[parseInt(ka["padding"===ea?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(sa||"",10)||0,parseInt(La||"",10)||0];ea={left:ea[0],top:ea[1],right:ea[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+
ea[2]-ea[0])}}return ea},[N]);return Hz.createElement(kC,{styles:lC(a,!d,N,k?"":"!important")})},Ht=!1;if("undefined"!==typeof window)try{var Ou=Object.defineProperty({},"passive",{get:function(){return Ht=!0}});window.addEventListener("test",Ou,Ou);window.removeEventListener("test",Ou,Ou)}catch(a){Ht=!1}var Ls=Ht?{passive:!1}:!1,mC=function(a,d){var k=window.getComputedStyle(a);return"hidden"!==k[d]&&!(k.overflowY===k.overflowX&&"TEXTAREA"!==a.tagName&&"visible"===k[d])},nC=function(a,d){do{"undefined"!==
typeof ShadowRoot&&d instanceof ShadowRoot&&(d=d.host);if(oC(a,d)){var k=qy(a,d);if(k[1]>k[2])return!0}d=d.parentNode}while(d&&d!==document.body);return!1},oC=function(a,d){return"v"===a?mC(d,"overflowY"):mC(d,"overflowX")},qy=function(a,d){return"v"===a?[d.scrollTop,d.scrollHeight,d.clientHeight]:[d.scrollLeft,d.scrollWidth,d.clientWidth]},Xt=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},yk=function(a){return a&&"current"in a?a.current:a},
xp=function(a){return"\n  .block-interactivity-".concat(a," {pointer-events: none;}\n  .allow-interactivity-").concat(a," {pointer-events: all;}\n")},Kl=0,gp=[];Pv.useMedium(function(a){var d=mm.useRef([]),k=mm.useRef([0,0]),N=mm.useRef(),ea=mm.useState(Kl++)[0],ka=mm.useState(function(){return py()})[0],sa=mm.useRef(a);mm.useEffect(function(){sa.current=a},[a]);mm.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(ea));var Nb=oH([a.lockRef.current],(a.shards||
[]).map(yk),!0).filter(Boolean);Nb.forEach(function(lc){return lc.classList.add("allow-interactivity-".concat(ea))});return function(){document.body.classList.remove("block-interactivity-".concat(ea));Nb.forEach(function(lc){return lc.classList.remove("allow-interactivity-".concat(ea))})}}},[a.inert,a.lockRef.current,a.shards]);var La=mm.useCallback(function(Nb,lc){if("touches"in Nb&&2===Nb.touches.length)return!sa.current.allowPinchZoom;var yc=Xt(Nb),bc=k.current,qc="deltaX"in Nb?Nb.deltaX:bc[0]-
yc[0];bc="deltaY"in Nb?Nb.deltaY:bc[1]-yc[1];var mc=Nb.target,Pc=Math.abs(qc)>Math.abs(bc)?"h":"v";if("touches"in Nb&&"h"===Pc&&"range"===mc.type)return!1;var Uc=nC(Pc,mc);if(!Uc)return!0;Uc?yc=Pc:(yc="v"===Pc?"h":"v",Uc=nC(Pc,mc));if(!Uc)return!1;!N.current&&"changedTouches"in Nb&&(qc||bc)&&(N.current=yc);if(!yc)return!0;yc=N.current||yc;bc="h"===yc?qc:bc;qc=window.getComputedStyle(lc).direction;qc="h"===yc&&"rtl"===qc?-1:1;Pc=qc*bc;Nb=Nb.target;bc=lc.contains(Nb);mc=!1;Pc=0<Pc;var Ed=Uc=0;do{var Ud=
qy(yc,Nb),ff=Ud[0];Ud=Ud[1]-Ud[2]-qc*ff;(ff||Ud)&&oC(yc,Nb)&&(Uc+=Ud,Ed+=ff);Nb=Nb.parentNode}while(!bc&&Nb!==document.body||bc&&(lc.contains(Nb)||lc===Nb));Pc&&0===Uc?mc=!0:Pc||0!==Ed||(mc=!0);return mc},[]),Ua=mm.useCallback(function(Nb){if(gp.length&&gp[gp.length-1]===ka){var lc="deltaY"in Nb?[Nb.deltaX,Nb.deltaY]:Xt(Nb),yc=d.current.filter(function(bc){var qc;if(qc=bc.name===Nb.type&&bc.target===Nb.target)bc=bc.delta,qc=bc[0]===lc[0]&&bc[1]===lc[1];return qc})[0];yc&&yc.should?Nb.cancelable&&
Nb.preventDefault():yc||(yc=(sa.current.shards||[]).map(yk).filter(Boolean).filter(function(bc){return bc.contains(Nb.target)}),(0<yc.length?La(Nb,yc[0]):!sa.current.noIsolation)&&Nb.cancelable&&Nb.preventDefault())}},[]),cb=mm.useCallback(function(Nb,lc,yc,bc){var qc={name:Nb,delta:lc,target:yc,should:bc};d.current.push(qc);setTimeout(function(){d.current=d.current.filter(function(mc){return mc!==qc})},1)},[]),ib=mm.useCallback(function(Nb){k.current=Xt(Nb);N.current=void 0},[]),nb=mm.useCallback(function(Nb){cb(Nb.type,
[Nb.deltaX,Nb.deltaY],Nb.target,La(Nb,a.lockRef.current))},[]),Pb=mm.useCallback(function(Nb){cb(Nb.type,Xt(Nb),Nb.target,La(Nb,a.lockRef.current))},[]);mm.useEffect(function(){gp.push(ka);a.setCallbacks({onScrollCapture:nb,onWheelCapture:nb,onTouchMoveCapture:Pb});document.addEventListener("wheel",Ua,Ls);document.addEventListener("touchmove",Ua,Ls);document.addEventListener("touchstart",ib,Ls);return function(){gp=gp.filter(function(Nb){return Nb!==ka});document.removeEventListener("wheel",Ua,Ls);
document.removeEventListener("touchmove",Ua,Ls);document.removeEventListener("touchstart",ib,Ls)}},[]);var Sb=a.removeScrollBar;return mm.createElement(mm.Fragment,null,a.inert?mm.createElement(ka,{styles:xp(ea)}):null,Sb?mm.createElement(bE,{gapMode:"margin"}):null)});var Xl=hC.forwardRef(function(a,d){return hC.createElement(Qv,Ir({},a,{ref:d,sideCar:fo}))});Xl.classNames=Qv.classNames;var Nn=["Enter"," "],fj=["ArrowUp","PageDown","End"],pC=["ArrowDown","PageUp","Home",...fj];[...Nn];[...Nn];var [Yt,
qw,ry]=sg("Menu"),[Jr,Zt]=Vh("Menu",[ry,Vt,nw]),$i=Vt(),rw=nw(),[sy,$t]=Jr("Menu"),[au,sw]=Jr("Menu"),Kr=(0,lh.forwardRef)((a,d)=>{var {__scopeMenu:k}=a;a=Sf(a,["__scopeMenu"]);k=$i(k);return(0,lh.createElement)(fy,Se({},k,a,{ref:d}))}),[,qH]=Jr("MenuPortal",{forceMount:void 0}),[tw,cv]=Jr("MenuContent"),uw=(0,lh.forwardRef)((a,d)=>{var k=qH("MenuContent",a.__scopeMenu);({forceMount:k=k.forceMount}=a);const N=Sf(a,["forceMount"]),ea=$t("MenuContent",a.__scopeMenu),ka=sw("MenuContent",a.__scopeMenu);
return(0,lh.createElement)(Yt.Provider,{scope:a.__scopeMenu},(0,lh.createElement)(av,{present:k||ea.open},(0,lh.createElement)(Yt.Slot,{scope:a.__scopeMenu},ka.modal?(0,lh.createElement)(dv,Se({},N,{ref:d})):(0,lh.createElement)(ty,Se({},N,{ref:d})))))}),dv=(0,lh.forwardRef)((a,d)=>{const k=$t("MenuContent",a.__scopeMenu),N=(0,lh.useRef)(null);d=oh(d,N);(0,lh.useEffect)(()=>{const ea=N.current;if(ea)return oy(ea)},[]);return(0,lh.createElement)(bu,Se({},a,{ref:d,trapFocus:k.open,disableOutsidePointerEvents:k.open,
disableOutsideScroll:!0,onFocusOutside:gg(a.onFocusOutside,ea=>ea.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>k.onOpenChange(!1)}))}),ty=(0,lh.forwardRef)((a,d)=>{const k=$t("MenuContent",a.__scopeMenu);return(0,lh.createElement)(bu,Se({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>k.onOpenChange(!1)}))}),bu=(0,lh.forwardRef)((a,d)=>{const {__scopeMenu:k,loop:N=!1,trapFocus:ea,onOpenAutoFocus:ka,onCloseAutoFocus:sa,disableOutsidePointerEvents:La,
onEscapeKeyDown:Ua,onPointerDownOutside:cb,onFocusOutside:ib,onInteractOutside:nb,onDismiss:Pb,disableOutsideScroll:Sb}=a,Nb=Sf(a,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),lc=$t("MenuContent",k),yc=sw("MenuContent",k),bc=$i(k),qc=rw(k),mc=qw(k),[Pc,Uc]=(0,lh.useState)(null),Ed=(0,lh.useRef)(null);d=oh(d,Ed,lc.onContentChange);const Ud=(0,lh.useRef)(0),
ff=(0,lh.useRef)(""),oe=(0,lh.useRef)(0),Ue=(0,lh.useRef)(null),Bf=(0,lh.useRef)("right"),gf=(0,lh.useRef)(0),vf=Sb?Xl:lh.Fragment,Rd=Sb?{as:hq,allowPinchZoom:!0}:void 0,wd=rd=>{var Md,Te;rd=ff.current+rd;const of=mc().filter(Xf=>!Xf.disabled),lg=document.activeElement,Fg=null===(Md=of.find(Xf=>Xf.ref.current===lg))||void 0===Md?void 0:Md.textValue;Md=of.map(Xf=>Xf.textValue);const wf=Ij(Md,rd,Fg),Xg=null===(Te=of.find(Xf=>Xf.textValue===wf))||void 0===Te?void 0:Te.ref.current;(function zh(jh){ff.current=
jh;window.clearTimeout(Ud.current);""!==jh&&(Ud.current=window.setTimeout(()=>zh(""),1E3))})(rd);Xg&&setTimeout(()=>Xg.focus())};(0,lh.useEffect)(()=>()=>window.clearTimeout(Ud.current),[]);Yf();const Jd=(0,lh.useCallback)(rd=>{var Md,Te,of;if(of=Bf.current===(null===(Md=Ue.current)||void 0===Md?void 0:Md.side)){if(Md=null===(Te=Ue.current)||void 0===Te?void 0:Te.area){const {x:lg,y:Fg}={x:rd.clientX,y:rd.clientY};rd=!1;for(let wf=0,Xg=Md.length-1;wf<Md.length;Xg=wf++){Te=Md[wf].x;of=Md[wf].y;const Xf=
Md[Xg].x,jh=Md[Xg].y;of>Fg!==jh>Fg&&lg<(Xf-Te)*(Fg-of)/(jh-of)+Te&&(rd=!rd)}Md=rd}else Md=!1;of=Md}return of},[]);return(0,lh.createElement)(tw,{scope:k,searchRef:ff,onItemEnter:(0,lh.useCallback)(rd=>{Jd(rd)&&rd.preventDefault()},[Jd]),onItemLeave:(0,lh.useCallback)(rd=>{var Md;Jd(rd)||(null===(Md=Ed.current)||void 0===Md||Md.focus(),Uc(null))},[Jd]),onTriggerLeave:(0,lh.useCallback)(rd=>{Jd(rd)&&rd.preventDefault()},[Jd]),pointerGraceTimerRef:oe,onPointerGraceIntentChange:(0,lh.useCallback)(rd=>
{Ue.current=rd},[])},(0,lh.createElement)(vf,Rd,(0,lh.createElement)(cC,{asChild:!0,trapped:ea,onMountAutoFocus:gg(ka,rd=>{var Md;rd.preventDefault();null===(Md=Ed.current)||void 0===Md||Md.focus()}),onUnmountAutoFocus:sa},(0,lh.createElement)(ay,{asChild:!0,disableOutsidePointerEvents:La,onEscapeKeyDown:Ua,onPointerDownOutside:cb,onFocusOutside:ib,onInteractOutside:nb,onDismiss:Pb},(0,lh.createElement)(fC,Se({asChild:!0},qc,{dir:yc.dir,orientation:"vertical",loop:N,currentTabStopId:Pc,onCurrentTabStopIdChange:Uc,
onEntryFocus:rd=>{yc.isUsingKeyboardRef.current||rd.preventDefault()}}),(0,lh.createElement)(gy,Se({role:"menu","aria-orientation":"vertical","data-state":lc.open?"open":"closed","data-radix-menu-content":"",dir:yc.dir},bc,Nb,{ref:d,style:me({outline:"none"},Nb.style),onKeyDown:gg(Nb.onKeyDown,rd=>{var Md=rd.target.closest("[data-radix-menu-content]")===rd.currentTarget;const Te=rd.ctrlKey||rd.altKey||rd.metaKey,of=1===rd.key.length;Md&&("Tab"===rd.key&&rd.preventDefault(),!Te&&of&&wd(rd.key));rd.target===
Ed.current&&pC.includes(rd.key)&&(rd.preventDefault(),Md=mc().filter(lg=>!lg.disabled).map(lg=>lg.ref.current),fj.includes(rd.key)&&Md.reverse(),Zn(Md))}),onBlur:gg(a.onBlur,rd=>{rd.currentTarget.contains(rd.target)||(window.clearTimeout(Ud.current),ff.current="")}),onPointerMove:gg(a.onPointerMove,Bo(rd=>{const Md=gf.current!==rd.clientX;rd.currentTarget.contains(rd.target)&&Md&&(Bf.current=rd.clientX>gf.current?"right":"left",gf.current=rd.clientX)}))})))))))}),uy=(0,lh.forwardRef)((a,d)=>{const {disabled:k=
!1,onSelect:N}=a,ea=Sf(a,["disabled","onSelect"]),ka=(0,lh.useRef)(null),sa=sw("MenuItem",a.__scopeMenu),La=cv("MenuItem",a.__scopeMenu);d=oh(d,ka);const Ua=(0,lh.useRef)(!1);return(0,lh.createElement)(qC,Se({},ea,{ref:d,disabled:k,onClick:gg(a.onClick,()=>{const cb=ka.current;if(!k&&cb){const ib=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});cb.addEventListener("menu.itemSelect",nb=>null===N||void 0===N?void 0:N(nb),{once:!0});Ul(cb,ib);if(ib.defaultPrevented)Ua.current=!1;else sa.onClose()}}),
onPointerDown:cb=>{var ib;null===(ib=a.onPointerDown)||void 0===ib||ib.call(a,cb);Ua.current=!0},onPointerUp:gg(a.onPointerUp,cb=>{var ib;Ua.current||null===(ib=cb.currentTarget)||void 0===ib||ib.click()}),onKeyDown:gg(a.onKeyDown,cb=>{const ib=""!==La.searchRef.current;k||ib&&" "===cb.key||!Nn.includes(cb.key)||(cb.currentTarget.click(),cb.preventDefault())})}))}),qC=(0,lh.forwardRef)((a,d)=>{const {__scopeMenu:k,disabled:N=!1,textValue:ea}=a,ka=Sf(a,["__scopeMenu","disabled","textValue"]),sa=cv("MenuItem",
k),La=rw(k),Ua=(0,lh.useRef)(null);d=oh(d,Ua);const [cb,ib]=(0,lh.useState)(!1),[nb,Pb]=(0,lh.useState)("");(0,lh.useEffect)(()=>{const Sb=Ua.current;if(Sb){var Nb;Pb((null!==(Nb=Sb.textContent)&&void 0!==Nb?Nb:"").trim())}},[ka.children]);return(0,lh.createElement)(Yt.ItemSlot,{scope:k,disabled:N,textValue:null!==ea&&void 0!==ea?ea:nb},(0,lh.createElement)(gC,Se({asChild:!0},La,{focusable:!N}),(0,lh.createElement)(Yk.div,Se({role:"menuitem","data-highlighted":cb?"":void 0,"aria-disabled":N||void 0,
"data-disabled":N?"":void 0},ka,{ref:d,onPointerMove:gg(a.onPointerMove,Bo(Sb=>{if(N)sa.onItemLeave(Sb);else sa.onItemEnter(Sb),Sb.defaultPrevented||Sb.currentTarget.focus()})),onPointerLeave:gg(a.onPointerLeave,Bo(Sb=>sa.onItemLeave(Sb))),onFocus:gg(a.onFocus,()=>ib(!0)),onBlur:gg(a.onBlur,()=>ib(!1))}))))});Jr("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});Jr("MenuItemIndicator",{checked:!1});var rH=(0,lh.forwardRef)((a,d)=>{a=Sf(a,["__scopeMenu"]);return(0,lh.createElement)(Yk.div,Se({role:"separator",
"aria-orientation":"horizontal"},a,{ref:d}))});Jr("MenuSub");var Us=a=>{const {__scopeMenu:d,open:k=!1,children:N,dir:ea,onOpenChange:ka,modal:sa=!0}=a;a=$i(d);const [La,Ua]=(0,lh.useState)(null),cb=(0,lh.useRef)(!1),ib=nj(ka),nb=Gg(ea);(0,lh.useEffect)(()=>{const Pb=()=>{cb.current=!0;document.addEventListener("pointerdown",Sb,{capture:!0,once:!0});document.addEventListener("pointermove",Sb,{capture:!0,once:!0})},Sb=()=>cb.current=!1;document.addEventListener("keydown",Pb,{capture:!0});return()=>
{document.removeEventListener("keydown",Pb,{capture:!0});document.removeEventListener("pointerdown",Sb,{capture:!0});document.removeEventListener("pointermove",Sb,{capture:!0})}},[]);return(0,lh.createElement)(hy,a,(0,lh.createElement)(sy,{scope:d,open:k,onOpenChange:ib,content:La,onContentChange:Ua},(0,lh.createElement)(au,{scope:d,onClose:(0,lh.useCallback)(()=>ib(!1),[ib]),isUsingKeyboardRef:cb,dir:nb,modal:sa},N)))},[ev]=Vh("DropdownMenu",[Zt]),Vs=Zt(),[vw,vy]=ev("DropdownMenu"),ww=(0,ep.forwardRef)((a,
d)=>{const {__scopeDropdownMenu:k,disabled:N=!1}=a,ea=Sf(a,["__scopeDropdownMenu","disabled"]),ka=vy("DropdownMenuTrigger",k),sa=Vs(k);return(0,ep.createElement)(Kr,Se({asChild:!0},sa),(0,ep.createElement)(Yk.button,Se({type:"button",id:ka.triggerId,"aria-haspopup":"menu","aria-expanded":ka.open,"aria-controls":ka.open?ka.contentId:void 0,"data-state":ka.open?"open":"closed","data-disabled":N?"":void 0,disabled:N},ea,{ref:Pg(d,ka.triggerRef),onPointerDown:gg(a.onPointerDown,La=>{N||0!==La.button||
!1!==La.ctrlKey||(ka.onOpenToggle(),ka.open||La.preventDefault())}),onKeyDown:gg(a.onKeyDown,La=>{if(!N){if(["Enter"," "].includes(La.key))ka.onOpenToggle();if("ArrowDown"===La.key)ka.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(La.key)&&La.preventDefault()}})})))}),sH=(0,ep.forwardRef)((a,d)=>{var {__scopeDropdownMenu:k}=a;const N=Sf(a,["__scopeDropdownMenu"]),ea=vy("DropdownMenuContent",k);k=Vs(k);const ka=(0,ep.useRef)(!1);return(0,ep.createElement)(uw,Se({id:ea.contentId,"aria-labelledby":ea.triggerId},
k,N,{ref:d,onCloseAutoFocus:gg(a.onCloseAutoFocus,sa=>{var La;ka.current||null===(La=ea.triggerRef.current)||void 0===La||La.focus();ka.current=!1;sa.preventDefault()}),onInteractOutside:gg(a.onInteractOutside,sa=>{sa=sa.detail.originalEvent;const La=0===sa.button&&!0===sa.ctrlKey;sa=2===sa.button||La;if(!ea.modal||sa)ka.current=!0}),style:uf(me({},a.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),Ws=(0,ep.forwardRef)((a,d)=>{var {__scopeDropdownMenu:k}=
a;a=Sf(a,["__scopeDropdownMenu"]);k=Vs(k);return(0,ep.createElement)(uy,Se({},k,a,{ref:d}))}),tH=a=>{const {__scopeDropdownMenu:d,children:k,dir:N,open:ea,defaultOpen:ka,onOpenChange:sa,modal:La=!0}=a;a=Vs(d);const Ua=(0,ep.useRef)(null),[cb=!1,ib]=Ic({prop:ea,defaultProp:ka,onChange:sa});return(0,ep.createElement)(vw,{scope:d,triggerId:Zh(),triggerRef:Ua,contentId:Zh(),open:cb,onOpenChange:ib,onOpenToggle:(0,ep.useCallback)(()=>ib(nb=>!nb),[ib]),modal:La},(0,ep.createElement)(Us,Se({},a,{open:cb,
onOpenChange:ib,dir:N,modal:La}),k))},gj=Df(ba(22)).default.createContext({}),uH=Df(ba(22)),cu=ba(598),nl=a=>{var {action:d}=a;a=Sf(a,["action"]);var {renderers:k}=uH.useContext(gj);k=null==k?void 0:k.KeyboardShortcut;return(0,cu.jsx)("div",uf(me({className:"tl-menu-right-slot"},a),{children:(0,cu.jsx)(k,{action:d})}))};ba(22);var go=ba(598),wy=pe(function(){const a=Cg(),d=k=>{k.preventDefault()};return(0,go.jsxs)(tH,{children:[(0,go.jsx)(ww,{className:"tl-button text-sm px-2 important",id:"tl-zoom",
children:(100*a.viewport.camera.zoom).toFixed(0)+"%"}),(0,go.jsxs)(sH,{onCloseAutoFocus:k=>k.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,go.jsxs)(Ws,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToFit,children:["Zoom to drawing",(0,go.jsx)(nl,{action:"whiteboard/zoom-to-fit"})]}),(0,go.jsxs)(Ws,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomToSelection,disabled:0===a.selectedShapesArray.length,children:["Zoom to fit selection",(0,go.jsx)(nl,{action:"whiteboard/zoom-to-selection"})]}),
(0,go.jsxs)(Ws,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomIn,children:["Zoom in",(0,go.jsx)(nl,{action:"whiteboard/zoom-in"})]}),(0,go.jsxs)(Ws,{className:"tl-menu-item",onSelect:d,onClick:a.api.zoomOut,children:["Zoom out",(0,go.jsx)(nl,{action:"whiteboard/zoom-out"})]}),(0,go.jsxs)(Ws,{className:"tl-menu-item",onSelect:d,onClick:a.api.resetZoom,children:["Reset zoom",(0,go.jsx)(nl,{action:"whiteboard/reset-zoom"})]})]})]})}),xy=ba(22),fv=["horizontal","vertical"],Lr=(0,xy.forwardRef)((a,
d)=>{const {decorative:k,orientation:N="horizontal"}=a;a=Sf(a,["decorative","orientation"]);const ea=fv.includes(N)?N:"horizontal";return(0,xy.createElement)(Yk.div,Se({"data-orientation":ea},k?{role:"none"}:{"aria-orientation":"vertical"===ea?ea:void 0,role:"separator"},a,{ref:d}))});Lr.propTypes={orientation(a,d,k){a=a[d];d=String(a);return a&&!fv.includes(a)?Error(`Invalid prop \`orientation\` of value \`${d}\` supplied to \`${k}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};var ol=ba(598),gv=pe(function(){const a=Cg(),{handlers:{t:d}}=Fr.useContext(gj),k=Fr.useCallback(()=>{a.api.undo()},[a]),N=Fr.useCallback(()=>{a.api.redo()},[a]),ea=Fr.useCallback(()=>{a.api.zoomIn()},[a]),ka=Fr.useCallback(()=>{a.api.zoomOut()},[a]),sa=Fr.useCallback(()=>{a.api.toggleGrid()},[a]),La=Fr.useCallback(()=>{a.api.toggleSnapToGrid()},[a]),Ua=Fr.useCallback(()=>{a.api.togglePenMode()},[a]);return(0,ol.jsxs)("div",{className:"tl-action-bar","data-html2canvas-ignore":"true",
children:[!a.readOnly&&(0,ol.jsxs)("div",{className:"tl-toolbar tl-history-bar mr-2 mb-2",children:[(0,ol.jsx)(he,{tooltip:d("whiteboard/undo"),onClick:k,children:(0,ol.jsx)(Eh,{name:"arrow-back-up"})}),(0,ol.jsx)(he,{tooltip:d("whiteboard/redo"),onClick:N,children:(0,ol.jsx)(Eh,{name:"arrow-forward-up"})})]}),(0,ol.jsxs)("div",{className:"tl-toolbar tl-zoom-bar mr-2 mb-2",children:[(0,ol.jsx)(he,{tooltip:d("whiteboard/zoom-in"),onClick:ea,id:"tl-zoom-in",children:(0,ol.jsx)(Eh,{name:"plus"})}),(0,ol.jsx)(he,
{tooltip:d("whiteboard/zoom-out"),onClick:ka,id:"tl-zoom-out",children:(0,ol.jsx)(Eh,{name:"minus"})}),(0,ol.jsx)(Lr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,ol.jsx)(wy,{})]}),(0,ol.jsxs)("div",{className:"tl-toolbar tl-grid-bar mr-2 mb-2",children:[(0,ol.jsx)(Re,{tooltip:d("whiteboard/toggle-grid"),className:"tl-button",pressed:a.settings.showGrid,id:"tl-show-grid",onPressedChange:sa,children:(0,ol.jsx)(Eh,{name:"grid-dots"})}),!a.readOnly&&(0,ol.jsx)(Re,{tooltip:d("whiteboard/snap-to-grid"),
className:"tl-button",pressed:a.settings.snapToGrid,id:"tl-snap-to-grid",onPressedChange:La,children:(0,ol.jsx)(Eh,{name:a.settings.snapToGrid?"magnet":"magnet-off"})})]}),!a.readOnly&&(0,ol.jsx)("div",{className:"tl-toolbar tl-pen-mode-bar mb-2",children:(0,ol.jsx)(Re,{tooltip:d("whiteboard/toggle-pen-mode"),className:"tl-button",pressed:a.settings.penMode,id:"tl-toggle-pen-mode",onPressedChange:Ua,children:(0,ol.jsx)(Eh,{name:a.settings.penMode?"pencil":"pencil-off"})})})]})}),xw=Df(ba(22)),rC=
Df(ba(31)),On=ba(598),Wm=a=>`[${a.map(d=>{var k;return null!=(k=null==d?void 0:d.toFixed(2))?k:"-"}).join(", ")}]`,jq=pe(()=>{var a;const {viewport:{bounds:d,camera:{point:k,zoom:N}},inputs:ea}=Bh(),ka=xw.default.useRef();xw.default.useEffect(()=>{const La=document.getElementById("tl-statusbar-anchor");ka.current=La},[]);const sa=[["Z",null!=(a=null==N?void 0:N.toFixed(2))?a:"null"],["MP",Wm(ea.currentPoint)],["MS",Wm(ea.currentScreenPoint)],["VP",Wm(k)],["VBR",Wm([d.maxX,d.maxY])]].map(La=>La.join("")).join("|");
a=ka.current?rC.default.createPortal((0,On.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:sa}),ka.current):null;return(0,On.jsx)(On.Fragment,{children:a})}),du=Df(ba(22)),hv=ba(598),yp=pe(a=>{var {id:d,icon:k,tooltip:N,tooltipSide:ea="left",handleClick:ka}=a;a=Sf(a,["id","icon","tooltip","tooltipSide","handleClick"]);var sa;const La=Cg(),Ua=null==(sa=[...La.Tools,Nt,Ot])?void 0:sa.find(cb=>cb.id===d);sa=(sa=null==Ua?void 0:Ua.shortcut)&&N?(0,hv.jsxs)("div",{className:"flex",
children:[N,(0,hv.jsx)(nl,{action:sa})]}):N;return(0,hv.jsx)(he,uf(me({},a),{tooltipSide:ea,tooltip:sa,"data-tool":d,"data-selected":d===La.selectedTool.id,onClick:ka,children:"string"===typeof k?(0,hv.jsx)(Eh,{name:k}):k}))}),Rj=ba(22),[yw]=Vh("Popover",[Vt]),eu=Vt(),[yy,fu]=yw("Popover"),zw=(0,Rj.forwardRef)((a,d)=>{var {__scopePopover:k}=a;const N=Sf(a,["__scopePopover"]),ea=fu("PopoverTrigger",k);k=eu(k);d=oh(d,ea.triggerRef);a=(0,Rj.createElement)(Yk.button,Se({type:"button","aria-haspopup":"dialog",
"aria-expanded":ea.open,"aria-controls":ea.contentId,"data-state":ea.open?"open":"closed"},N,{ref:d,onClick:gg(a.onClick,ea.onOpenToggle)}));return ea.hasCustomAnchor?a:(0,Rj.createElement)(fy,Se({asChild:!0},k),a)}),[,sC]=yw("PopoverPortal",{forceMount:void 0}),Xs=(0,Rj.forwardRef)((a,d)=>{var k=sC("PopoverContent",a.__scopePopover);({forceMount:k=k.forceMount}=a);const N=Sf(a,["forceMount"]);a=fu("PopoverContent",a.__scopePopover);return(0,Rj.createElement)(av,{present:k||a.open},a.modal?(0,Rj.createElement)(tC,
Se({},N,{ref:d})):(0,Rj.createElement)(vH,Se({},N,{ref:d})))}),tC=(0,Rj.forwardRef)((a,d)=>{const k=fu("PopoverContent",a.__scopePopover),N=(0,Rj.useRef)(null);d=oh(d,N);const ea=(0,Rj.useRef)(!1);(0,Rj.useEffect)(()=>{const ka=N.current;if(ka)return oy(ka)},[]);return(0,Rj.createElement)(Xl,{as:hq,allowPinchZoom:!0},(0,Rj.createElement)(Ys,Se({},a,{ref:d,trapFocus:k.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:gg(a.onCloseAutoFocus,ka=>{var sa;ka.preventDefault();ea.current||null===(sa=k.triggerRef.current)||
void 0===sa||sa.focus()}),onPointerDownOutside:gg(a.onPointerDownOutside,ka=>{ka=ka.detail.originalEvent;const sa=0===ka.button&&!0===ka.ctrlKey;ea.current=2===ka.button||sa},{checkForDefaultPrevented:!1}),onFocusOutside:gg(a.onFocusOutside,ka=>ka.preventDefault(),{checkForDefaultPrevented:!1})})))}),vH=(0,Rj.forwardRef)((a,d)=>{const k=fu("PopoverContent",a.__scopePopover),N=(0,Rj.useRef)(!1);return(0,Rj.createElement)(Ys,Se({},a,{ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:ea=>
{var ka;null===(ka=a.onCloseAutoFocus)||void 0===ka||ka.call(a,ea);if(!ea.defaultPrevented){var sa;N.current||null===(sa=k.triggerRef.current)||void 0===sa||sa.focus();ea.preventDefault()}N.current=!1},onInteractOutside:ea=>{var ka,sa;null===(ka=a.onInteractOutside)||void 0===ka||ka.call(a,ea);ea.defaultPrevented||(N.current=!0);ka=ea.target;(null===(sa=k.triggerRef.current)||void 0===sa?0:sa.contains(ka))&&ea.preventDefault()}}))}),Ys=(0,Rj.forwardRef)((a,d)=>{const {__scopePopover:k,trapFocus:N,
onOpenAutoFocus:ea,onCloseAutoFocus:ka,disableOutsidePointerEvents:sa,onEscapeKeyDown:La,onPointerDownOutside:Ua,onFocusOutside:cb,onInteractOutside:ib}=a;a=Sf(a,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));const nb=fu("PopoverContent",k),Pb=eu(k);Yf();return(0,Rj.createElement)(cC,{asChild:!0,loop:!0,trapped:N,onMountAutoFocus:ea,onUnmountAutoFocus:ka},(0,Rj.createElement)(ay,
{asChild:!0,disableOutsidePointerEvents:sa,onInteractOutside:ib,onEscapeKeyDown:La,onPointerDownOutside:Ua,onFocusOutside:cb,onDismiss:()=>nb.onOpenChange(!1)},(0,Rj.createElement)(gy,Se({"data-state":nb.open?"open":"closed",role:"dialog",id:nb.contentId},Pb,a,{ref:d,style:uf(me({},a.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),Aw=(0,Rj.forwardRef)((a,d)=>{var {__scopePopover:k}=a;a=Sf(a,["__scopePopover"]);k=eu(k);return(0,Rj.createElement)(UB,
Se({},k,a,{ref:d}))}),zy=a=>{const {__scopePopover:d,children:k,open:N,defaultOpen:ea,onOpenChange:ka,modal:sa=!1}=a;a=eu(d);const La=(0,Rj.useRef)(null),[Ua,cb]=(0,Rj.useState)(!1),[ib=!1,nb]=Ic({prop:N,defaultProp:ea,onChange:ka});return(0,Rj.createElement)(hy,a,(0,Rj.createElement)(yy,{scope:d,contentId:Zh(),triggerRef:La,open:ib,onOpenChange:nb,onOpenToggle:(0,Rj.useCallback)(()=>nb(Pb=>!Pb),[nb]),hasCustomAnchor:Ua,onCustomAnchorAdd:(0,Rj.useCallback)(()=>cb(!0),[]),onCustomAnchorRemove:(0,Rj.useCallback)(()=>
cb(!1),[]),modal:sa},k))},uC=Df(ba(22)),kq=ba(598),Ay=pe(function(a){var {popoverSide:d="left",setGeometry:k,activeGeometry:N,chevron:ea=!0}=a;a=Sf(a,["popoverSide","setGeometry","activeGeometry","chevron"]);var {handlers:{t:ka}}=uC.default.useContext(gj);const sa=[{id:"box",icon:"square",tooltip:ka("whiteboard/rectangle")},{id:"ellipse",icon:"circle",tooltip:ka("whiteboard/circle")},{id:"polygon",icon:"triangle",tooltip:ka("whiteboard/triangle")}];ka={id:"shapes",icon:"triangle-square-circle",tooltip:ka("whiteboard/shape")};
ka=N?sa.find(La=>La.id===N):ka;return(0,kq.jsxs)(zy,{children:[(0,kq.jsx)(zw,{asChild:!0,children:(0,kq.jsxs)("div",uf(me({},a),{className:"tl-geometry-tools-pane-anchor",children:[(0,kq.jsx)(yp,uf(me({},ka),{tooltipSide:d})),ea&&(0,kq.jsx)(Eh,{"data-selected":N,className:"tl-popover-indicator",name:"chevron-down-left"})]}))}),(0,kq.jsxs)(Xs,{className:"tl-popover-content",side:d,sideOffset:15,children:[(0,kq.jsx)("div",{className:`tl-toolbar tl-geometry-toolbar ${["left","right"].includes(d)?"flex-col":
"flex-row"}`,children:sa.map(La=>(0,kq.jsx)(yp,{id:La.id,icon:La.icon,tooltip:N?La.tooltip:"",handleClick:k,tooltipSide:d},La.id))}),(0,kq.jsx)(Aw,{className:"tl-popover-arrow"})]})]})}),xi=ba(22),By=ba(22),iv=["PageUp","PageDown"],Cy=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],vC={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},
[Dy,wC,Qq]=sg("Slider"),[lq]=Vh("Slider",[Qq]),[gu,mq]=lq("Slider"),xC=(0,xi.forwardRef)((a,d)=>{function k(gf){const vf=yq(oe,gf);ka(gf,vf)}function N(gf){ka(gf,Ed.current)}function ea(){oe[Ed.current]!==Bf.current[Ed.current]&&yc(oe)}function ka(gf,vf,{commit:Rd}={commit:!1}){const wd=(String(cb).split(".")[1]||"").length;gf=qn(Math.round((gf-La)/cb)*cb+La,wd);const Jd=Co(gf,[La,Ua]);Ue((rd=[])=>{const Md=xj(rd,Jd,vf);var Te=Pb*cb;if(0<Te){const of=Sm(Md);Te=Math.min(...of)>=Te}else Te=!0;return Te?
(Ed.current=Md.indexOf(Jd),(Te=String(Md)!==String(rd))&&Rd&&yc(Md),Te?Md:rd):rd})}const {name:sa,min:La=0,max:Ua=100,step:cb=1,orientation:ib="horizontal",disabled:nb=!1,minStepsBetweenThumbs:Pb=0,defaultValue:Sb=[La],value:Nb,onValueChange:lc=()=>{},onValueCommit:yc=()=>{},inverted:bc=!1}=a,qc=Sf(a,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),[mc,Pc]=(0,xi.useState)(null);d=oh(d,gf=>Pc(gf));const Uc=(0,xi.useRef)(new Set),
Ed=(0,xi.useRef)(0);var Ud="horizontal"===ib;const ff=mc?!!mc.closest("form"):!0;Ud=Ud?AC:lf;const [oe=[],Ue]=Ic({prop:Nb,defaultProp:Sb,onChange:gf=>{var vf;null===(vf=[...Uc.current][Ed.current])||void 0===vf||vf.focus();lc(gf)}}),Bf=(0,xi.useRef)(oe);return(0,xi.createElement)(gu,{scope:a.__scopeSlider,disabled:nb,min:La,max:Ua,valueIndexToChangeRef:Ed,thumbs:Uc.current,values:oe,orientation:ib},(0,xi.createElement)(Dy.Provider,{scope:a.__scopeSlider},(0,xi.createElement)(Dy.Slot,{scope:a.__scopeSlider},
(0,xi.createElement)(Ud,Se({"aria-disabled":nb,"data-disabled":nb?"":void 0},qc,{ref:d,onPointerDown:gg(qc.onPointerDown,()=>{nb||(Bf.current=oe)}),min:La,max:Ua,inverted:bc,onSlideStart:nb?void 0:k,onSlideMove:nb?void 0:N,onSlideEnd:nb?void 0:ea,onHomeKeyDown:()=>!nb&&ka(La,0,{commit:!0}),onEndKeyDown:()=>!nb&&ka(Ua,oe.length-1,{commit:!0}),onStepKeyDown:({event:gf,direction:vf})=>{if(!nb){gf=iv.includes(gf.key)||gf.shiftKey&&Cy.includes(gf.key);const Rd=Ed.current;ka(oe[Rd]+cb*(gf?10:1)*vf,Rd,{commit:!0})}}})))),
ff&&oe.map((gf,vf)=>(0,xi.createElement)(jv,{key:vf,name:sa?sa+(1<oe.length?"[]":""):void 0,value:gf})))}),[yC,zC]=lq("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),AC=(0,xi.forwardRef)((a,d)=>{function k(qc){const mc=Nb.current||Pb.getBoundingClientRect(),Pc=xn([0,mc.width],bc?[N,ea]:[ea,N]);Nb.current=mc;return Pc(qc-mc.left)}const {min:N,max:ea,dir:ka,inverted:sa,onSlideStart:La,onSlideMove:Ua,onSlideEnd:cb,onStepKeyDown:ib}=a,nb=Sf(a,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),
[Pb,Sb]=(0,xi.useState)(null);d=oh(d,qc=>Sb(qc));const Nb=(0,xi.useRef)(),lc=Gg(ka),yc="ltr"===lc,bc=yc&&!sa||!yc&&sa;return(0,xi.createElement)(yC,{scope:a.__scopeSlider,startEdge:bc?"left":"right",endEdge:bc?"right":"left",direction:bc?1:-1,size:"width"},(0,xi.createElement)(tg,Se({dir:lc,"data-orientation":"horizontal"},nb,{ref:d,style:uf(me({},nb.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),onSlideStart:qc=>{qc=k(qc.clientX);null===La||void 0===La||La(qc)},onSlideMove:qc=>{qc=
k(qc.clientX);null===Ua||void 0===Ua||Ua(qc)},onSlideEnd:()=>{Nb.current=void 0;null===cb||void 0===cb||cb()},onStepKeyDown:qc=>{const mc=vC[bc?"from-left":"from-right"].includes(qc.key);null===ib||void 0===ib||ib({event:qc,direction:mc?-1:1})}})))}),lf=(0,xi.forwardRef)((a,d)=>{function k(Nb){const lc=Pb.current||nb.current.getBoundingClientRect(),yc=xn([0,lc.height],Sb?[ea,N]:[N,ea]);Pb.current=lc;return yc(Nb-lc.top)}const {min:N,max:ea,inverted:ka,onSlideStart:sa,onSlideMove:La,onSlideEnd:Ua,
onStepKeyDown:cb}=a,ib=Sf(a,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),nb=(0,xi.useRef)(null);d=oh(d,nb);const Pb=(0,xi.useRef)(),Sb=!ka;return(0,xi.createElement)(yC,{scope:a.__scopeSlider,startEdge:Sb?"bottom":"top",endEdge:Sb?"top":"bottom",size:"height",direction:Sb?1:-1},(0,xi.createElement)(tg,Se({"data-orientation":"vertical"},ib,{ref:d,style:uf(me({},ib.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),onSlideStart:Nb=>{Nb=k(Nb.clientY);null===
sa||void 0===sa||sa(Nb)},onSlideMove:Nb=>{Nb=k(Nb.clientY);null===La||void 0===La||La(Nb)},onSlideEnd:()=>{Pb.current=void 0;null===Ua||void 0===Ua||Ua()},onStepKeyDown:Nb=>{const lc=vC[Sb?"from-bottom":"from-top"].includes(Nb.key);null===cb||void 0===cb||cb({event:Nb,direction:lc?-1:1})}})))}),tg=(0,xi.forwardRef)((a,d)=>{const {__scopeSlider:k,onSlideStart:N,onSlideMove:ea,onSlideEnd:ka,onHomeKeyDown:sa,onEndKeyDown:La,onStepKeyDown:Ua}=a,cb=Sf(a,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),
ib=mq("Slider",k);return(0,xi.createElement)(Yk.span,Se({},cb,{ref:d,onKeyDown:gg(a.onKeyDown,nb=>{"Home"===nb.key?(sa(nb),nb.preventDefault()):"End"===nb.key?(La(nb),nb.preventDefault()):iv.concat(Cy).includes(nb.key)&&(Ua(nb),nb.preventDefault())}),onPointerDown:gg(a.onPointerDown,nb=>{const Pb=nb.target;Pb.setPointerCapture(nb.pointerId);nb.preventDefault();ib.thumbs.has(Pb)?Pb.focus():N(nb)}),onPointerMove:gg(a.onPointerMove,nb=>{nb.target.hasPointerCapture(nb.pointerId)&&ea(nb)}),onPointerUp:gg(a.onPointerUp,
nb=>{const Pb=nb.target;Pb.hasPointerCapture(nb.pointerId)&&(Pb.releasePointerCapture(nb.pointerId),ka(nb))})}))}),rf=(0,xi.forwardRef)((a,d)=>{var {__scopeSlider:k}=a;a=Sf(a,["__scopeSlider"]);k=mq("SliderTrack",k);return(0,xi.createElement)(Yk.span,Se({"data-disabled":k.disabled?"":void 0,"data-orientation":k.orientation},a,{ref:d}))}),ag=(0,xi.forwardRef)((a,d)=>{var {__scopeSlider:k}=a;const N=Sf(a,["__scopeSlider"]),ea=mq("SliderRange",k);k=zC("SliderRange",k);var ka=(0,xi.useRef)(null);d=oh(d,
ka);var sa=ea.values.length;ka=ea.values.map(La=>Ri(La,ea.min,ea.max));sa=1<sa?Math.min(...ka):0;ka=100-Math.max(...ka);return(0,xi.createElement)(Yk.span,Se({"data-orientation":ea.orientation,"data-disabled":ea.disabled?"":void 0},N,{ref:d,style:uf(me({},a.style),{[k.startEdge]:sa+"%",[k.endEdge]:ka+"%"})}))}),Ko=(0,xi.forwardRef)((a,d)=>{const k=wC(a.__scopeSlider),[N,ea]=(0,xi.useState)(null);d=oh(d,sa=>ea(sa));const ka=(0,xi.useMemo)(()=>N?k().findIndex(sa=>sa.ref.current===N):-1,[k,N]);return(0,xi.createElement)(Ll,
Se({},a,{ref:d,index:ka}))}),Ll=(0,xi.forwardRef)((a,d)=>{const {__scopeSlider:k,index:N}=a,ea=Sf(a,["__scopeSlider","index"]),ka=mq("SliderThumb",k),sa=zC("SliderThumb",k),[La,Ua]=(0,xi.useState)(null);d=oh(d,Sb=>Ua(Sb));var cb=xb(La);const ib=ka.values[N],nb=void 0===ib?0:Ri(ib,ka.min,ka.max),Pb=ul(N,ka.values.length);cb=(cb=null===cb||void 0===cb?void 0:cb[sa.size])?hm(cb,nb,sa.direction):0;(0,xi.useEffect)(()=>{if(La)return ka.thumbs.add(La),()=>{ka.thumbs.delete(La)}},[La,ka.thumbs]);return(0,xi.createElement)("span",
{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[sa.startEdge]:`calc(${nb}% + ${cb}px)`}},(0,xi.createElement)(Dy.ItemSlot,{scope:a.__scopeSlider},(0,xi.createElement)(Yk.span,Se({role:"slider","aria-label":a["aria-label"]||Pb,"aria-valuemin":ka.min,"aria-valuenow":ib,"aria-valuemax":ka.max,"aria-orientation":ka.orientation,"data-orientation":ka.orientation,"data-disabled":ka.disabled?"":void 0,tabIndex:ka.disabled?void 0:0},ea,{ref:d,style:void 0===ib?{display:"none"}:
a.style,onFocus:gg(a.onFocus,()=>{ka.valueIndexToChangeRef.current=N})}))))}),jv=a=>{const {value:d}=a;a=Sf(a,["value"]);const k=(0,xi.useRef)(null),N=Mn(d);(0,xi.useEffect)(()=>{const ea=k.current,ka=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(N!==d&&ka){const sa=new Event("input",{bubbles:!0});ka.call(ea,d);ea.dispatchEvent(sa)}},[N,d]);return(0,xi.createElement)("input",Se({style:{display:"none"}},a,{ref:k,defaultValue:d}))},zk=xC,nq=rf,bf=ag,kg=Ko,nn=Df(ba(22)),
We=ba(598),Mr=pe(a=>{var {side:d,align:k,alignOffset:N,label:ea,arrow:ka,children:sa,border:La}=a;a=Sf(a,"side align alignOffset label arrow children border".split(" "));const Ua=nn.useRef(null),[cb,ib]=nn.useState(!1),{viewport:{bounds:nb,camera:{point:Pb,zoom:Sb}}}=Cg(),[Nb,lc]=nn.useState(0);nn.useEffect(()=>{if(Ua.current&&cb){var yc=Ua.current.getBoundingClientRect();Ef.boundsContain(nb,{minX:yc.x,minY:yc.y,maxX:yc.right,maxY:yc.bottom,width:yc.width,height:yc.height})||lc(bc=>bc+1)}},[Pb[0],
Pb[1],Sb,cb]);return(0,We.jsxs)(zy,{onOpenChange:yc=>ib(yc),children:[(0,We.jsx)(zw,uf(me({},a),{"data-border":La,className:"tl-button tl-popover-trigger-button",children:ea})),(0,We.jsxs)(Xs,{ref:Ua,className:"tl-popover-content",align:k,alignOffset:N,side:d,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[sa,ka&&(0,We.jsx)(Aw,{className:"tl-popover-arrow"})]},"popover-content-"+Nb)]})}),Ey=Df(ba(22)),Yl=ba(598),kv=Df(ba(22)),sf=ba(22),Rq=ba(31),hp=Df(ba(22)),jk=
ba(22),oq=ba(22),Nr=ba(31),Qk="a button div form h2 h3 img input label li nav ol p span svg ul".split(" ").reduce((a,d)=>{const k=(0,oq.forwardRef)((N,ea)=>{var {asChild:ka}=N;N=Sf(N,["asChild"]);ka=ka?hq:d;(0,oq.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,oq.createElement)(ka,Se({},N,{ref:ea}))});k.displayName=`Primitive.${d}`;return uf(me({},a),{[d]:k})},{}),Tg,Pn=(0,jk.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Sq=(0,jk.forwardRef)((a,
d)=>{var k;const {disableOutsidePointerEvents:N=!1,onEscapeKeyDown:ea,onPointerDownOutside:ka,onFocusOutside:sa,onInteractOutside:La,onDismiss:Ua}=a,cb=Sf(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),ib=(0,jk.useContext)(Pn),[nb,Pb]=(0,jk.useState)(null),Sb=null!==(k=null===nb||void 0===nb?void 0:nb.ownerDocument)&&void 0!==k?k:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Nb]=(0,jk.useState)({});
d=oh(d,mc=>Pb(mc));k=Array.from(ib.layers);var [lc]=[...ib.layersWithOutsidePointerEventsDisabled].slice(-1);lc=k.indexOf(lc);const yc=nb?k.indexOf(nb):-1;k=0<ib.layersWithOutsidePointerEventsDisabled.size;const bc=yc>=lc;lc=po(mc=>{const Pc=mc.target,Uc=[...ib.branches].some(Ed=>Ed.contains(Pc));bc&&!Uc&&(null===ka||void 0===ka||ka(mc),null===La||void 0===La||La(mc),mc.defaultPrevented||null===Ua||void 0===Ua||Ua())},Sb);const qc=$l(mc=>{const Pc=mc.target;[...ib.branches].some(Uc=>Uc.contains(Pc))||
(null===sa||void 0===sa||sa(mc),null===La||void 0===La||La(mc),mc.defaultPrevented||null===Ua||void 0===Ua||Ua())},Sb);Hk(mc=>{yc===ib.layers.size-1&&(null===ea||void 0===ea||ea(mc),!mc.defaultPrevented&&Ua&&(mc.preventDefault(),Ua()))},Sb);(0,jk.useEffect)(()=>{if(nb)return N&&(0===ib.layersWithOutsidePointerEventsDisabled.size&&(Tg=Sb.body.style.pointerEvents,Sb.body.style.pointerEvents="none"),ib.layersWithOutsidePointerEventsDisabled.add(nb)),ib.layers.add(nb),xm(),()=>{N&&1===ib.layersWithOutsidePointerEventsDisabled.size&&
(Sb.body.style.pointerEvents=Tg)}},[nb,Sb,N,ib]);(0,jk.useEffect)(()=>()=>{nb&&(ib.layers.delete(nb),ib.layersWithOutsidePointerEventsDisabled.delete(nb),xm())},[nb,ib]);(0,jk.useEffect)(()=>{const mc=()=>Nb({});document.addEventListener("dismissableLayer.update",mc);return()=>document.removeEventListener("dismissableLayer.update",mc)},[]);return(0,jk.createElement)(Qk.div,Se({},cb,{ref:d,style:me({pointerEvents:k?bc?"auto":"none":void 0},a.style),onFocusCapture:gg(a.onFocusCapture,qc.onFocusCapture),
onBlurCapture:gg(a.onBlurCapture,qc.onBlurCapture),onPointerDownCapture:gg(a.onPointerDownCapture,lc.onPointerDownCapture)}))}),Tq=ba(22),Or={bubbles:!1,cancelable:!0},Wg=(0,Tq.forwardRef)((a,d)=>{const {loop:k=!1,trapped:N=!1,onMountAutoFocus:ea,onUnmountAutoFocus:ka}=a;a=Sf(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [sa,La]=(0,Tq.useState)(null),Ua=nj(ea),cb=nj(ka),ib=(0,Tq.useRef)(null);d=oh(d,Sb=>La(Sb));const nb=(0,Tq.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=
!1}}).current;(0,Tq.useEffect)(()=>{if(N){let Sb=function(lc){!nb.paused&&sa&&(lc=lc.target,sa.contains(lc)?ib.current=lc:am(ib.current,{select:!0}))},Nb=function(lc){!nb.paused&&sa&&(sa.contains(lc.relatedTarget)||am(ib.current,{select:!0}))};document.addEventListener("focusin",Sb);document.addEventListener("focusout",Nb);return()=>{document.removeEventListener("focusin",Sb);document.removeEventListener("focusout",Nb)}}},[N,sa,nb.paused]);(0,Tq.useEffect)(()=>{if(sa){Fy.add(nb);const Sb=document.activeElement;
if(!sa.contains(Sb)){const Nb=new CustomEvent("focusScope.autoFocusOnMount",Or);sa.addEventListener("focusScope.autoFocusOnMount",Ua);sa.dispatchEvent(Nb);Nb.defaultPrevented||(Gn(qo($n(sa)),{select:!0}),document.activeElement===Sb&&am(sa))}return()=>{sa.removeEventListener("focusScope.autoFocusOnMount",Ua);setTimeout(()=>{const Nb=new CustomEvent("focusScope.autoFocusOnUnmount",Or);sa.addEventListener("focusScope.autoFocusOnUnmount",cb);sa.dispatchEvent(Nb);Nb.defaultPrevented||am(null!==Sb&&void 0!==
Sb?Sb:document.body,{select:!0});sa.removeEventListener("focusScope.autoFocusOnUnmount",cb);Fy.remove(nb)},0)}}},[sa,Ua,cb,nb]);const Pb=(0,Tq.useCallback)(Sb=>{if((k||N)&&!nb.paused){var Nb=document.activeElement;if("Tab"===Sb.key&&!Sb.altKey&&!Sb.ctrlKey&&!Sb.metaKey&&Nb){const yc=Sb.currentTarget;var lc=yc;const bc=$n(lc),qc=tn(bc,lc);lc=tn(bc.reverse(),lc);const [mc,Pc]=[qc,lc];mc&&Pc?Sb.shiftKey||Nb!==Pc?Sb.shiftKey&&Nb===mc&&(Sb.preventDefault(),k&&am(Pc,{select:!0})):(Sb.preventDefault(),k&&
am(mc,{select:!0})):Nb===yc&&Sb.preventDefault()}}},[k,N,nb.paused]);return(0,Tq.createElement)(Qk.div,Se({tabIndex:-1},a,{ref:d,onKeyDown:Pb}))}),Fy=function(){let a=[];return{add(d){const k=a[0];d===k||null!==k&&void 0!==k&&k.pause();a=rn(a,d);a.unshift(d)},remove(d){var k;a=rn(a,d);null===(k=a[0])||void 0===k||k.resume()}}}(),Zk=ba(22),[eh,hu]=Vh("Popper"),[qk,pl]=eh("Popper"),iu=(0,Zk.forwardRef)((a,d)=>{const {__scopePopper:k,virtualRef:N}=a;a=Sf(a,["__scopePopper","virtualRef"]);const ea=pl("PopperAnchor",
k),ka=(0,Zk.useRef)(null);d=oh(d,ka);(0,Zk.useEffect)(()=>{ea.onAnchorChange((null===N||void 0===N?void 0:N.current)||ka.current)});return N?null:(0,Zk.createElement)(Qk.div,Se({},a,{ref:d}))}),[lv]=eh("PopperContent"),[Gy,ju]=eh("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),rm=(0,Zk.forwardRef)((a,d)=>{var k,N,ea,ka,sa,La,Ua,cb;const {__scopePopper:ib,side:nb="bottom",sideOffset:Pb=0,align:Sb="center",alignOffset:Nb=0,arrowPadding:lc=0,collisionBoundary:yc=[],collisionPadding:bc=0,sticky:qc=
"partial",hideWhenDetached:mc=!1,avoidCollisions:Pc=!0,onPlaced:Uc}=a,Ed=Sf(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions onPlaced".split(" ")),Ud=pl("PopperContent",ib),[ff,oe]=(0,Zk.useState)(null);d=oh(d,Ip=>oe(Ip));const [Ue,Bf]=(0,Zk.useState)(null);var gf=xb(Ue),vf=null!==(k=null===gf||void 0===gf?void 0:gf.width)&&void 0!==k?k:0;k=null!==(N=null===gf||void 0===gf?void 0:gf.height)&&void 0!==N?N:0;N=
nb+("center"!==Sb?"-"+Sb:"");gf="number"===typeof bc?bc:me({top:0,right:0,bottom:0,left:0},bc);const Rd=Array.isArray(yc)?yc:[yc],wd=0<Rd.length;gf={padding:gf,boundary:Rd.filter(fh),altBoundary:wd};const {reference:Jd,floating:rd,strategy:Md,x:Te,y:of,placement:lg,middlewareData:Fg,update:wf}=ac({strategy:"fixed",placement:N,whileElementsMounted:Xb,middleware:[BC(),NB({mainAxis:Pb+k,alignmentAxis:Nb}),Pc?OB(me({mainAxis:!0,crossAxis:!1,limiter:"partial"===qc?PB():void 0},gf)):void 0,Ue?SB({element:Ue,
padding:lc}):void 0,Pc?LB(me({},gf)):void 0,vG(uf(me({},gf),{apply:({elements:Ip,availableWidth:Cu,availableHeight:Du})=>{Ip.floating.style.setProperty("--radix-popper-available-width",`${Cu}px`);Ip.floating.style.setProperty("--radix-popper-available-height",`${Du}px`)}})),wH({arrowWidth:vf,arrowHeight:k}),mc?MB({strategy:"referenceHidden"}):void 0].filter(ro)});Vm(()=>{Jd(Ud.anchor)},[Jd,Ud.anchor]);const Xg=null!==Te&&null!==of,[Xf,jh]=so(lg),zh=nj(Uc);Vm(()=>{Xg&&(null===zh||void 0===zh||zh())},
[Xg,zh]);vf=null===(ea=Fg.arrow)||void 0===ea?void 0:ea.x;ea=null===(ka=Fg.arrow)||void 0===ka?void 0:ka.y;ka=0!==(null===(sa=Fg.arrow)||void 0===sa?void 0:sa.centerOffset);const [qj,Rk]=(0,Zk.useState)();Vm(()=>{ff&&Rk(window.getComputedStyle(ff).zIndex)},[ff]);const {hasParent:$k,positionUpdateFns:wq}=ju("PopperContent",ib),no=!$k;(0,Zk.useLayoutEffect)(()=>{if(!no)return wq.add(wf),()=>{wq.delete(wf)}},[no,wq,wf]);Vm(()=>{no&&Xg&&Array.from(wq).reverse().forEach(Ip=>requestAnimationFrame(Ip))},
[no,Xg,wq]);sa=uf(me({"data-side":Xf,"data-align":jh},Ed),{ref:d,style:uf(me({},Ed.style),{animation:Xg?void 0:"none",opacity:null!==(La=Fg.hide)&&void 0!==La&&La.referenceHidden?0:void 0})});return(0,Zk.createElement)("div",{ref:rd,"data-radix-popper-content-wrapper":"",style:{position:Md,left:0,top:0,transform:Xg?`translate3d(${Math.round(Te)}px, ${Math.round(of)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:qj,["--radix-popper-transform-origin"]:[null===(Ua=Fg.transformOrigin)||
void 0===Ua?void 0:Ua.x,null===(cb=Fg.transformOrigin)||void 0===cb?void 0:cb.y].join(" ")},dir:a.dir},(0,Zk.createElement)(lv,{scope:ib,placedSide:Xf,onArrowChange:Bf,arrowX:vf,arrowY:ea,shouldHideArrow:ka},no?(0,Zk.createElement)(Gy,{scope:ib,hasParent:!0,positionUpdateFns:wq},(0,Zk.createElement)(Qk.div,sa)):(0,Zk.createElement)(Qk.div,sa)))}),BC=()=>({name:"anchorCssProperties",fn(a){const {rects:d,elements:k}=a,{width:N,height:ea}=d.reference;k.floating.style.setProperty("--radix-popper-anchor-width",
`${N}px`);k.floating.style.setProperty("--radix-popper-anchor-height",`${ea}px`);return{}}}),wH=a=>({name:"transformOrigin",options:a,fn(d){var k,N,ea,ka,sa;const {placement:La,rects:Ua,middlewareData:cb}=d,ib=(d=0!==(null===(k=cb.arrow)||void 0===k?void 0:k.centerOffset))?0:a.arrowWidth;k=d?0:a.arrowHeight;const [nb,Pb]=so(La),Sb={start:"0%",center:"50%",end:"100%"}[Pb],Nb=(null!==(N=null===(ea=cb.arrow)||void 0===ea?void 0:ea.x)&&void 0!==N?N:0)+ib/2;N=(null!==(ka=null===(sa=cb.arrow)||void 0===
sa?void 0:sa.y)&&void 0!==ka?ka:0)+k/2;sa=ka="";"bottom"===nb?(ka=d?Sb:`${Nb}px`,sa=`${-k}px`):"top"===nb?(ka=d?Sb:`${Nb}px`,sa=`${Ua.floating.height+k}px`):"right"===nb?(ka=`${-k}px`,sa=d?Sb:`${N}px`):"left"===nb&&(ka=`${Ua.floating.width+k}px`,sa=d?Sb:`${N}px`);return{data:{x:ka,y:sa}}}}),xH=a=>{const {__scopePopper:d,children:k}=a,[N,ea]=(0,Zk.useState)(null);return(0,Zk.createElement)(qk,{scope:d,anchor:N,onAnchorChange:ea},k)},CC=ba(22),Pr=Df(ba(31)),Qr=(0,CC.forwardRef)((a,d)=>{var k;const {container:N=
null===globalThis||void 0===globalThis?void 0:null===(k=globalThis.document)||void 0===k?void 0:k.body}=a;a=Sf(a,["container"]);return N?Pr.default.createPortal((0,CC.createElement)(Qk.div,Se({},a,{ref:d})),N):null}),Wj=ba(22),DC=(0,Wj.forwardRef)((a,d)=>(0,Wj.createElement)(Qk.span,Se({},a,{ref:d,style:me({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),Hy=[" ","Enter","ArrowUp","ArrowDown"],
yH=[" ","Enter"],[zp,Bw,Cw]=function(a){var d=a+"CollectionProvider";const [k,N]=Vh(d),[ea,ka]=k(d,{collectionRef:{current:null},itemMap:new Map}),sa=ib=>{const {scope:nb,children:Pb}=ib;ib=hp.default.useRef(null);const Sb=hp.default.useRef(new Map).current;return hp.default.createElement(ea,{scope:nb,itemMap:Sb,collectionRef:ib},Pb)};Object.assign(sa,{displayName:d});const La=a+"CollectionSlot";d=hp.default.forwardRef((ib,nb)=>{const {scope:Pb,children:Sb}=ib;ib=ka(La,Pb);nb=oh(nb,ib.collectionRef);
return hp.default.createElement(hq,{ref:nb},Sb)});Object.assign(d,{displayName:La});const Ua=a+"CollectionItemSlot",cb=hp.default.forwardRef((ib,nb)=>{const {scope:Pb,children:Sb}=ib,Nb=Sf(ib,["scope","children"]),lc=hp.default.useRef(null);ib=oh(nb,lc);const yc=ka(Ua,Pb);hp.default.useEffect(()=>{yc.itemMap.set(lc,me({ref:lc},Nb));return()=>void yc.itemMap.delete(lc)});return hp.default.createElement(hq,{["data-radix-collection-item"]:"",ref:ib},Sb)});Object.assign(cb,{displayName:Ua});return[{Provider:sa,
Slot:d,ItemSlot:cb},function(ib){const nb=ka(a+"CollectionConsumer",ib);return hp.default.useCallback(()=>{const Pb=nb.collectionRef.current;if(!Pb)return[];const Sb=Array.from(Pb.querySelectorAll("[data-radix-collection-item]"));return Array.from(nb.itemMap.values()).sort((Nb,lc)=>Sb.indexOf(Nb.ref.current)-Sb.indexOf(lc.ref.current))},[nb.collectionRef,nb.itemMap])},N]}("Select"),[ku]=Vh("Select",[Cw,hu]),lu=hu(),[Iy,Uq]=ku("Select"),[Jy,EC]=ku("Select"),FC=(0,sf.forwardRef)((a,d)=>{const {__scopeSelect:k,
disabled:N=!1}=a;a=Sf(a,["__scopeSelect","disabled"]);const ea=lu(k),ka=Uq("SelectTrigger",k),sa=ka.disabled||N;d=oh(d,ka.onTriggerChange);const La=Bw(k),[Ua,cb,ib]=bm(nb=>{const Pb=La().filter(Nb=>!Nb.disabled),Sb=Pb.find(Nb=>Nb.value===ka.value);nb=Ol(Pb,nb,Sb);if(void 0!==nb)ka.onValueChange(nb.value)});return(0,sf.createElement)(iu,Se({asChild:!0},ea),(0,sf.createElement)(Qk.button,Se({type:"button",role:"combobox","aria-controls":ka.contentId,"aria-expanded":ka.open,"aria-required":ka.required,
"aria-autocomplete":"none",dir:ka.dir,"data-state":ka.open?"open":"closed",disabled:sa,"data-disabled":sa?"":void 0,"data-placeholder":void 0===ka.value?"":void 0},a,{ref:d,onClick:gg(a.onClick,nb=>{nb.currentTarget.focus()}),onPointerDown:gg(a.onPointerDown,nb=>{const Pb=nb.target;Pb.hasPointerCapture(nb.pointerId)&&Pb.releasePointerCapture(nb.pointerId);0===nb.button&&!1===nb.ctrlKey&&(sa||(ka.onOpenChange(!0),ib()),ka.triggerPointerDownPosRef.current={x:Math.round(nb.pageX),y:Math.round(nb.pageY)},
nb.preventDefault())}),onKeyDown:gg(a.onKeyDown,nb=>{const Pb=""!==Ua.current;nb.ctrlKey||nb.altKey||nb.metaKey||1!==nb.key.length||cb(nb.key);Pb&&" "===nb.key||!Hy.includes(nb.key)||(sa||(ka.onOpenChange(!0),ib()),nb.preventDefault())})})))}),GC=(0,sf.forwardRef)((a,d)=>{const {__scopeSelect:k,children:N,placeholder:ea}=a;a=Sf(a,["__scopeSelect","className","style","children","placeholder"]);const ka=Uq("SelectValue",k),{onValueNodeHasChildrenChange:sa}=ka,La=void 0!==N;d=oh(d,ka.onValueNodeChange);
Vm(()=>{sa(La)},[sa,La]);return(0,sf.createElement)(Qk.span,Se({},a,{ref:d,style:{pointerEvents:"none"}}),void 0===ka.value&&void 0!==ea?ea:N)}),Zs=(0,sf.forwardRef)((a,d)=>{const {children:k}=a;a=Sf(a,["__scopeSelect","children"]);return(0,sf.createElement)(Qk.span,Se({"aria-hidden":!0},a,{ref:d}),k||"▼")}),$s=(0,sf.forwardRef)((a,d)=>{const k=Uq("SelectContent",a.__scopeSelect),[N,ea]=(0,sf.useState)();Vm(()=>{ea(new DocumentFragment)},[]);return k.open?(0,sf.createElement)(HC,Se({},a,{ref:d})):
N?(0,Rq.createPortal)((0,sf.createElement)(Dw,{scope:a.__scopeSelect},(0,sf.createElement)(zp.Slot,{scope:a.__scopeSelect},(0,sf.createElement)("div",null,a.children))),N):null}),[Dw,Rr]=ku("SelectContent"),HC=(0,sf.forwardRef)((a,d)=>{const {__scopeSelect:k,position:N="item-aligned",onCloseAutoFocus:ea,onEscapeKeyDown:ka,onPointerDownOutside:sa,side:La,sideOffset:Ua,align:cb,alignOffset:ib,arrowPadding:nb,collisionBoundary:Pb,collisionPadding:Sb,sticky:Nb,hideWhenDetached:lc,avoidCollisions:yc}=
a;a=Sf(a,"__scopeSelect position onCloseAutoFocus onEscapeKeyDown onPointerDownOutside side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const bc=Uq("SelectContent",k),[qc,mc]=(0,sf.useState)(null),[Pc,Uc]=(0,sf.useState)(null);d=oh(d,Xf=>mc(Xf));const [Ed,Ud]=(0,sf.useState)(null),[ff,oe]=(0,sf.useState)(null),Ue=Bw(k),[Bf,gf]=(0,sf.useState)(!1),vf=(0,sf.useRef)(!1);(0,sf.useEffect)(()=>{if(qc)return oy(qc)},[qc]);
Yf();const Rd=(0,sf.useCallback)(Xf=>{const [jh,...zh]=Ue().map($k=>$k.ref.current),[qj]=zh.slice(-1),Rk=document.activeElement;for(const $k of Xf){if($k===Rk)break;null===$k||void 0===$k||$k.scrollIntoView({block:"nearest"});$k===jh&&Pc&&(Pc.scrollTop=0);$k===qj&&Pc&&(Pc.scrollTop=Pc.scrollHeight);null===$k||void 0===$k||$k.focus();if(document.activeElement!==Rk)break}},[Ue,Pc]),wd=(0,sf.useCallback)(()=>Rd([Ed,qc]),[Rd,Ed,qc]);(0,sf.useEffect)(()=>{Bf&&wd()},[Bf,wd]);const {onOpenChange:Jd,triggerPointerDownPosRef:rd}=
bc;(0,sf.useEffect)(()=>{if(qc){var Xf=0,jh=0;const zh=Rk=>{var $k,wq,no,Ip;Xf=Math.abs(Math.round(Rk.pageX)-(null!==($k=null===(wq=rd.current)||void 0===wq?void 0:wq.x)&&void 0!==$k?$k:0));jh=Math.abs(Math.round(Rk.pageY)-(null!==(no=null===(Ip=rd.current)||void 0===Ip?void 0:Ip.y)&&void 0!==no?no:0))},qj=Rk=>{10>=Xf&&10>=jh?Rk.preventDefault():qc.contains(Rk.target)||Jd(!1);document.removeEventListener("pointermove",zh);rd.current=null};null!==rd.current&&(document.addEventListener("pointermove",
zh),document.addEventListener("pointerup",qj,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",zh);document.removeEventListener("pointerup",qj,{capture:!0})}}},[qc,Jd,rd]);(0,sf.useEffect)(()=>{const Xf=()=>Jd(!1);window.addEventListener("blur",Xf);window.addEventListener("resize",Xf);return()=>{window.removeEventListener("blur",Xf);window.removeEventListener("resize",Xf)}},[Jd]);const [Md,Te]=bm(Xf=>{const jh=Ue().filter(Rk=>!Rk.disabled),zh=jh.find(Rk=>Rk.ref.current===
document.activeElement),qj=Ol(jh,Xf,zh);qj&&setTimeout(()=>qj.ref.current.focus())}),of=(0,sf.useCallback)((Xf,jh,zh)=>{zh=!vf.current&&!zh;if(void 0!==bc.value&&bc.value===jh||zh)Ud(Xf),zh&&(vf.current=!0)},[bc.value]),lg=(0,sf.useCallback)(()=>null===qc||void 0===qc?void 0:qc.focus(),[qc]),Fg=(0,sf.useCallback)((Xf,jh,zh)=>{zh=!vf.current&&!zh;(void 0!==bc.value&&bc.value===jh||zh)&&oe(Xf)},[bc.value]),wf="popper"===N?at:mu,Xg=wf===at?{side:La,sideOffset:Ua,align:cb,alignOffset:ib,arrowPadding:nb,
collisionBoundary:Pb,collisionPadding:Sb,sticky:Nb,hideWhenDetached:lc,avoidCollisions:yc}:{};return(0,sf.createElement)(Dw,{scope:k,content:qc,viewport:Pc,onViewportChange:Uc,itemRefCallback:of,selectedItem:Ed,onItemLeave:lg,itemTextRefCallback:Fg,focusSelectedItem:wd,selectedItemText:ff,position:N,isPositioned:Bf,searchRef:Md},(0,sf.createElement)(Xl,{as:hq,allowPinchZoom:!0},(0,sf.createElement)(Wg,{asChild:!0,trapped:bc.open,onMountAutoFocus:Xf=>{Xf.preventDefault()},onUnmountAutoFocus:gg(ea,
Xf=>{var jh;null===(jh=bc.trigger)||void 0===jh||jh.focus({preventScroll:!0});Xf.preventDefault()})},(0,sf.createElement)(Sq,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:ka,onPointerDownOutside:sa,onFocusOutside:Xf=>Xf.preventDefault(),onDismiss:()=>bc.onOpenChange(!1)},(0,sf.createElement)(wf,Se({role:"listbox",id:bc.contentId,"data-state":bc.open?"open":"closed",dir:bc.dir,onContextMenu:Xf=>Xf.preventDefault()},a,Xg,{onPlaced:()=>gf(!0),ref:d,style:me({display:"flex",flexDirection:"column",
outline:"none"},a.style),onKeyDown:gg(a.onKeyDown,Xf=>{var jh=Xf.ctrlKey||Xf.altKey||Xf.metaKey;"Tab"===Xf.key&&Xf.preventDefault();jh||1!==Xf.key.length||Te(Xf.key);if(["ArrowUp","ArrowDown","Home","End"].includes(Xf.key)){let zh=Ue().filter(qj=>!qj.disabled).map(qj=>qj.ref.current);["ArrowUp","End"].includes(Xf.key)&&(zh=zh.slice().reverse());["ArrowUp","ArrowDown"].includes(Xf.key)&&(jh=zh.indexOf(Xf.target),zh=zh.slice(jh+1));setTimeout(()=>Rd(zh));Xf.preventDefault()}})}))))))}),mu=(0,sf.forwardRef)((a,
d)=>{const {__scopeSelect:k,onPlaced:N}=a;a=Sf(a,["__scopeSelect","onPlaced"]);const ea=Uq("SelectContent",k);var ka=Rr("SelectContent",k);const [sa,La]=(0,sf.useState)(null),[Ua,cb]=(0,sf.useState)(null);d=oh(d,Pc=>cb(Pc));const ib=Bw(k),nb=(0,sf.useRef)(!1),Pb=(0,sf.useRef)(!0),{viewport:Sb,selectedItem:Nb,selectedItemText:lc,focusSelectedItem:yc}=ka,bc=(0,sf.useCallback)(()=>{if(ea.trigger&&ea.valueNode&&sa&&Ua&&Sb&&Nb&&lc){var Pc=ea.trigger.getBoundingClientRect(),Uc=Ua.getBoundingClientRect(),
Ed=ea.valueNode.getBoundingClientRect(),Ud=lc.getBoundingClientRect();"rtl"!==ea.dir?(Ud=Ed.left-(Ud.left-Uc.left),Ed=Pc.width+(Pc.left-Ud),Uc=Co(Ud,[10,window.innerWidth-10-Math.max(Ed,Uc.width)]),sa.style.minWidth=Ed+"px",sa.style.left=Uc+"px"):(Ud=window.innerWidth-Ed.right-(Uc.right-Ud.right),Ed=Pc.width+(window.innerWidth-Pc.right-Ud),Uc=Co(Ud,[10,window.innerWidth-10-Math.max(Ed,Uc.width)]),sa.style.minWidth=Ed+"px",sa.style.right=Uc+"px");const vf=ib();Uc=window.innerHeight-20;var ff=Sb.scrollHeight,
oe=window.getComputedStyle(Ua);Ed=parseInt(oe.borderTopWidth,10);var Ue=parseInt(oe.paddingTop,10);Ud=parseInt(oe.borderBottomWidth,10);oe=parseInt(oe.paddingBottom,10);var Bf=Ed+Ue+ff+oe+Ud;ff=Math.min(5*Nb.offsetHeight,Bf);var gf=window.getComputedStyle(Sb);oe=parseInt(gf.paddingTop,10);gf=parseInt(gf.paddingBottom,10);const Rd=Pc.top+Pc.height/2-10,wd=Uc-Rd;Pc=Nb.offsetHeight/2;Ue=Ed+Ue+(Nb.offsetTop+Pc);Bf-=Ue;Ue<=Rd?(Ed=Nb===vf[vf.length-1].ref.current,sa.style.bottom="0px",sa.style.height=Ue+
Math.max(wd,Pc+(Ed?gf:0)+(Ua.clientHeight-Sb.offsetTop-Sb.offsetHeight)+Ud)+"px"):(Ud=Nb===vf[0].ref.current,sa.style.top="0px",sa.style.height=Math.max(Rd,Ed+Sb.offsetTop+(Ud?oe:0)+Pc)+Bf+"px",Sb.scrollTop=Ue-Rd+Sb.offsetTop);sa.style.margin="10px 0";sa.style.minHeight=ff+"px";sa.style.maxHeight=Uc+"px";null===N||void 0===N||N();requestAnimationFrame(()=>nb.current=!0)}},[ib,ea.trigger,ea.valueNode,sa,Ua,Sb,Nb,lc,ea.dir,N]);Vm(()=>bc(),[bc]);const [qc,mc]=(0,sf.useState)();Vm(()=>{Ua&&mc(window.getComputedStyle(Ua).zIndex)},
[Ua]);ka=(0,sf.useCallback)(Pc=>{Pc&&!0===Pb.current&&(bc(),null===yc||void 0===yc||yc(),Pb.current=!1)},[bc,yc]);return(0,sf.createElement)(mv,{scope:k,contentWrapper:sa,shouldExpandOnScrollRef:nb,onScrollButtonChange:ka},(0,sf.createElement)("div",{ref:La,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:qc}},(0,sf.createElement)(Qk.div,Se({},a,{ref:d,style:me({boxSizing:"border-box",maxHeight:"100%"},a.style)}))))}),at=(0,sf.forwardRef)((a,d)=>{const {__scopeSelect:k,align:N=
"start",collisionPadding:ea=10}=a;a=Sf(a,["__scopeSelect","align","collisionPadding"]);const ka=lu(k);return(0,sf.createElement)(rm,Se({},ka,a,{ref:d,align:N,collisionPadding:ea,style:uf(me({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)",
"--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))}),[mv,bt]=ku("SelectContent",{}),nv=(0,sf.forwardRef)((a,d)=>{const {__scopeSelect:k}=a;a=Sf(a,["__scopeSelect"]);const N=Rr("SelectViewport",k),ea=bt("SelectViewport",k);d=oh(d,N.onViewportChange);const ka=(0,sf.useRef)(0);return(0,sf.createElement)(sf.Fragment,null,(0,sf.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),
(0,sf.createElement)(zp.Slot,{scope:k},(0,sf.createElement)(Qk.div,Se({"data-radix-select-viewport":"",role:"presentation"},a,{ref:d,style:me({position:"relative",flex:1,overflow:"auto"},a.style),onScroll:gg(a.onScroll,sa=>{sa=sa.currentTarget;const {contentWrapper:La,shouldExpandOnScrollRef:Ua}=ea;if(null!==Ua&&void 0!==Ua&&Ua.current&&La){var cb=Math.abs(ka.current-sa.scrollTop);if(0<cb){var ib=window.innerHeight-20,nb=parseFloat(La.style.minHeight);const Pb=parseFloat(La.style.height);nb=Math.max(nb,
Pb);nb<ib&&(cb=nb+cb,ib=Math.min(ib,cb),cb-=ib,La.style.height=ib+"px","0px"===La.style.bottom&&(sa.scrollTop=0<cb?cb:0,La.style.justifyContent="flex-end"))}}ka.current=sa.scrollTop})}))))});ku("SelectGroup");var [Sr,ip]=ku("SelectItem"),IC=(0,sf.forwardRef)((a,d)=>{const {__scopeSelect:k,value:N,disabled:ea=!1,textValue:ka}=a;a=Sf(a,["__scopeSelect","value","disabled","textValue"]);const sa=Uq("SelectItem",k),La=Rr("SelectItem",k),Ua=sa.value===N,[cb,ib]=(0,sf.useState)(null!==ka&&void 0!==ka?ka:
""),[nb,Pb]=(0,sf.useState)(!1);d=oh(d,lc=>{var yc;return null===(yc=La.itemRefCallback)||void 0===yc?void 0:yc.call(La,lc,N,ea)});const Sb=Zh(),Nb=()=>{ea||(sa.onValueChange(N),sa.onOpenChange(!1))};return(0,sf.createElement)(Sr,{scope:k,value:N,disabled:ea,textId:Sb,isSelected:Ua,onItemTextChange:(0,sf.useCallback)(lc=>{ib(yc=>{var bc;return yc||(null!==(bc=null===lc||void 0===lc?void 0:lc.textContent)&&void 0!==bc?bc:"").trim()})},[])},(0,sf.createElement)(zp.ItemSlot,{scope:k,value:N,disabled:ea,
textValue:cb},(0,sf.createElement)(Qk.div,Se({role:"option","aria-labelledby":Sb,"data-highlighted":nb?"":void 0,"aria-selected":Ua&&nb,"data-state":Ua?"checked":"unchecked","aria-disabled":ea||void 0,"data-disabled":ea?"":void 0,tabIndex:ea?void 0:-1},a,{ref:d,onFocus:gg(a.onFocus,()=>Pb(!0)),onBlur:gg(a.onBlur,()=>Pb(!1)),onPointerUp:gg(a.onPointerUp,Nb),onPointerMove:gg(a.onPointerMove,lc=>{if(ea){var yc;null===(yc=La.onItemLeave)||void 0===yc||yc.call(La)}else lc.currentTarget.focus({preventScroll:!0})}),
onPointerLeave:gg(a.onPointerLeave,lc=>{if(lc.currentTarget===document.activeElement){var yc;null===(yc=La.onItemLeave)||void 0===yc||yc.call(La)}}),onKeyDown:gg(a.onKeyDown,lc=>{var yc;if(""===(null===(yc=La.searchRef)||void 0===yc?void 0:yc.current)||" "!==lc.key)yH.includes(lc.key)&&Nb()," "===lc.key&&lc.preventDefault()})}))))}),Lo=(0,sf.forwardRef)((a,d)=>{var {__scopeSelect:k}=a;a=Sf(a,["__scopeSelect","className","style"]);const N=Uq("SelectItemText",k),ea=Rr("SelectItemText",k),ka=ip("SelectItemText",
k);k=EC("SelectItemText",k);const [sa,La]=(0,sf.useState)(null);d=oh(d,Pb=>La(Pb),ka.onItemTextChange,Pb=>{var Sb;return null===(Sb=ea.itemTextRefCallback)||void 0===Sb?void 0:Sb.call(ea,Pb,ka.value,ka.disabled)});const Ua=null===sa||void 0===sa?void 0:sa.textContent,cb=(0,sf.useMemo)(()=>(0,sf.createElement)("option",{key:ka.value,value:ka.value,disabled:ka.disabled},Ua),[ka.disabled,ka.value,Ua]),{onNativeOptionAdd:ib,onNativeOptionRemove:nb}=k;Vm(()=>{ib(cb);return()=>nb(cb)},[ib,nb,cb]);return(0,sf.createElement)(sf.Fragment,
null,(0,sf.createElement)(Qk.span,Se({id:ka.textId},a,{ref:d})),ka.isSelected&&N.valueNode&&!N.valueNodeHasChildren?(0,Rq.createPortal)(a.children,N.valueNode):null)}),nu=(0,sf.forwardRef)((a,d)=>{const k=Rr("SelectScrollUpButton",a.__scopeSelect),N=bt("SelectScrollUpButton",a.__scopeSelect),[ea,ka]=(0,sf.useState)(!1);d=oh(d,N.onScrollButtonChange);Vm(()=>{if(k.viewport&&k.isPositioned){let sa=function(){ka(0<La.scrollTop)};const La=k.viewport;sa();La.addEventListener("scroll",sa);return()=>La.removeEventListener("scroll",
sa)}},[k.viewport,k.isPositioned]);return ea?(0,sf.createElement)(Vq,Se({},a,{ref:d,onAutoScroll:()=>{const {viewport:sa,selectedItem:La}=k;sa&&La&&(sa.scrollTop-=La.offsetHeight)}})):null}),Ew=(0,sf.forwardRef)((a,d)=>{const k=Rr("SelectScrollDownButton",a.__scopeSelect),N=bt("SelectScrollDownButton",a.__scopeSelect),[ea,ka]=(0,sf.useState)(!1);d=oh(d,N.onScrollButtonChange);Vm(()=>{if(k.viewport&&k.isPositioned){let sa=function(){ka(Math.ceil(La.scrollTop)<La.scrollHeight-La.clientHeight)};const La=
k.viewport;sa();La.addEventListener("scroll",sa);return()=>La.removeEventListener("scroll",sa)}},[k.viewport,k.isPositioned]);return ea?(0,sf.createElement)(Vq,Se({},a,{ref:d,onAutoScroll:()=>{const {viewport:sa,selectedItem:La}=k;sa&&La&&(sa.scrollTop+=La.offsetHeight)}})):null}),Vq=(0,sf.forwardRef)((a,d)=>{const {__scopeSelect:k,onAutoScroll:N}=a;a=Sf(a,["__scopeSelect","onAutoScroll"]);const ea=Rr("SelectScrollButton",k),ka=(0,sf.useRef)(null),sa=Bw(k),La=(0,sf.useCallback)(()=>{null!==ka.current&&
(window.clearInterval(ka.current),ka.current=null)},[]);(0,sf.useEffect)(()=>()=>La(),[La]);Vm(()=>{var Ua;const cb=sa().find(ib=>ib.ref.current===document.activeElement);null===cb||void 0===cb||null===(Ua=cb.ref.current)||void 0===Ua||Ua.scrollIntoView({block:"nearest"})},[sa]);return(0,sf.createElement)(Qk.div,Se({"aria-hidden":!0},a,{ref:d,style:me({flexShrink:0},a.style),onPointerMove:gg(a.onPointerMove,()=>{var Ua;null===(Ua=ea.onItemLeave)||void 0===Ua||Ua.call(ea);null===ka.current&&(ka.current=
window.setInterval(N,50))}),onPointerLeave:gg(a.onPointerLeave,()=>{La()})}))}),Ky=(0,sf.forwardRef)((a,d)=>{const {value:k}=a;a=Sf(a,["value"]);const N=(0,sf.useRef)(null);d=oh(d,N);const ea=Mn(k);(0,sf.useEffect)(()=>{const ka=N.current,sa=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(ea!==k&&sa){const La=new Event("change",{bubbles:!0});sa.call(ka,k);ka.dispatchEvent(La)}},[ea,k]);return(0,sf.createElement)(DC,{asChild:!0},(0,sf.createElement)("select",Se({},
a,{ref:d,defaultValue:k})))});Ky.displayName="BubbleSelect";var KC=a=>{const {__scopeSelect:d,children:k,open:N,defaultOpen:ea,onOpenChange:ka,value:sa,defaultValue:La,onValueChange:Ua,dir:cb,name:ib,autoComplete:nb,disabled:Pb,required:Sb}=a,Nb=lu(d),[lc,yc]=(0,sf.useState)(null),[bc,qc]=(0,sf.useState)(null),[mc,Pc]=(0,sf.useState)(!1),Uc=Gg(cb),[Ed=!1,Ud]=Ic({prop:N,defaultProp:ea,onChange:ka}),[ff,oe]=Ic({prop:sa,defaultProp:La,onChange:Ua}),Ue=(0,sf.useRef)(null),Bf=lc?!!lc.closest("form"):!0,
[gf,vf]=(0,sf.useState)(new Set),Rd=Array.from(gf).map(wd=>wd.props.value).join(";");return(0,sf.createElement)(xH,Nb,(0,sf.createElement)(Iy,{required:Sb,scope:d,trigger:lc,onTriggerChange:yc,valueNode:bc,onValueNodeChange:qc,valueNodeHasChildren:mc,onValueNodeHasChildrenChange:Pc,contentId:Zh(),value:ff,onValueChange:oe,open:Ed,onOpenChange:Ud,dir:Uc,triggerPointerDownPosRef:Ue,disabled:Pb},(0,sf.createElement)(zp.Provider,{scope:d},(0,sf.createElement)(Jy,{scope:a.__scopeSelect,onNativeOptionAdd:(0,sf.useCallback)(wd=>
{vf(Jd=>(new Set(Jd)).add(wd))},[]),onNativeOptionRemove:(0,sf.useCallback)(wd=>{vf(Jd=>{Jd=new Set(Jd);Jd.delete(wd);return Jd})},[])},k)),Bf?(0,sf.createElement)(Ky,{key:Rd,"aria-hidden":!0,required:Sb,tabIndex:-1,name:ib,autoComplete:nb,value:ff,onChange:wd=>oe(wd.target.value),disabled:Pb},void 0===ff?(0,sf.createElement)("option",{value:""}):null,Array.from(gf)):null))},LC=FC,Xm=GC,Ly=Zs,JC=a=>(0,sf.createElement)(Qr,Se({asChild:!0},a)),ho=$s,Id=nv,MC=IC,gi=Lo,li=nu,NC=Ew,Fm=ba(598),Fw=Df(ba(22)),
OC=ba(598),Qn=ba(598),Gw=pe(function(){const a=Cg(),{handlers:{t:d}}=du.useContext(gj),k=du.useCallback(sa=>{a.api.setColor(sa)},[]),N=du.useCallback(sa=>{(sa=sa.currentTarget.dataset.tool)&&a.selectTool(sa)},[]),[ea,ka]=du.useState(()=>{var sa;return null!=(sa=Object.values(Up).find(La=>La===a.selectedTool.id))?sa:Object.values(Up)[0]});du.useEffect(()=>{ka(sa=>{var La;return null!=(La=Object.values(Up).find(Ua=>Ua===a.selectedTool.id))?La:sa})},[a.selectedTool.id]);return(0,Qn.jsx)("div",{className:"tl-primary-tools",
"data-html2canvas-ignore":"true",children:(0,Qn.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,Qn.jsx)(yp,{handleClick:()=>a.selectTool("select"),tooltip:d("whiteboard/select"),id:"select",icon:"select-cursor"}),(0,Qn.jsx)(yp,{handleClick:()=>a.selectTool("move"),tooltip:d("whiteboard/pan"),id:"move",icon:a.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,Qn.jsx)(Lr,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,Qn.jsx)(yp,{handleClick:()=>a.selectTool("logseq-portal"),
tooltip:d("whiteboard/add-block-or-page"),id:"logseq-portal",icon:"circle-plus"}),(0,Qn.jsx)(yp,{handleClick:()=>a.selectTool("pencil"),tooltip:d("whiteboard/draw"),id:"pencil",icon:"ballpen"}),(0,Qn.jsx)(yp,{handleClick:()=>a.selectTool("highlighter"),tooltip:d("whiteboard/highlight"),id:"highlighter",icon:"highlight"}),(0,Qn.jsx)(yp,{handleClick:()=>a.selectTool("erase"),tooltip:d("whiteboard/eraser"),id:"erase",icon:"eraser"}),(0,Qn.jsx)(yp,{handleClick:()=>a.selectTool("line"),tooltip:d("whiteboard/connector"),
id:"line",icon:"connector"}),(0,Qn.jsx)(yp,{handleClick:()=>a.selectTool("text"),tooltip:d("whiteboard/text"),id:"text",icon:"text"}),(0,Qn.jsx)(Ay,{activeGeometry:ea,setGeometry:N}),(0,Qn.jsx)(Lr,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,Qn.jsx)(hn,{popoverSide:"left",color:a.settings.color,setColor:k}),(0,Qn.jsx)(So,{scaleLevel:a.settings.scaleLevel,popoverSide:"left",compact:!0})]})})}),Hw=ba(598),PC=pe(function(){const a=Cg();return(0,Hw.jsxs)("div",
{className:"tl-statusbar","data-html2canvas-ignore":"true",children:[a.selectedTool.id," | ",a.selectedTool.currentState.id,(0,Hw.jsx)("div",{style:{flex:1}}),(0,Hw.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})}),io=ba(598),QC=pe(function(){const a=Cg();return(0,io.jsxs)(io.Fragment,{children:[Rf()&&(0,io.jsx)(PC,{}),Rf()&&(0,io.jsx)(jq,{}),!a.readOnly&&(0,io.jsx)(Gw,{}),(0,io.jsx)(gv,{})]})}),ou=Df(ba(22)),sm=Df(ba(22)),My=Df(ba(22)),RC=Df(ba(22)),Rn=ba(598),Ny=({id:a,showReferenceContent:d=
!1})=>{var k;const {handlers:{isWhiteboardPage:N,redirectToPage:ea,sidebarAddBlock:ka,queryBlockByUUID:sa},renderers:{Breadcrumb:La,PageName:Ua}}=RC.default.useContext(gj);var cb="";let ib=Jj(a)?"B":"P",nb="";if(Jj(a)){cb=sa(a);if(!cb)return(0,Rn.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});nb=cb.content;cb="whiteboard-shape"===(null==(k=cb.properties)?void 0:k["ls-type"])?"link-to-whiteboard":"link-to-block"}else cb=N(a)?"link-to-whiteboard":"link-to-page";k=nb&&
23<nb.length?nb.slice(0,20)+"...":nb;return(0,Rn.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:Pb=>{Pb.stopPropagation();Pb.shiftKey?ka(a,"B"===ib?"block":"page"):ea(a)},children:[(0,Rn.jsx)(Eh,{name:cb}),(0,Rn.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===ib?(0,Rn.jsx)(Ua,{pageName:a}):(0,Rn.jsxs)(Rn.Fragment,{children:[(0,Rn.jsx)(La,{levelLimit:1,blockId:a,endSeparator:d}),d&&k]})})]})},Gm=Df(ba(22)),Cn=ba(22),zH=["children"],
Wq="undefined"!==typeof document?Cn.useLayoutEffect:Cn.useEffect,uh=Df(ba(22)),si=ba(22),Oy=ba(31),ov,tm,TC="undefined"!=typeof document?si.useLayoutEffect:si.useEffect;!function(a){a[a.DEBUG=0]="DEBUG";a[a.INFO=1]="INFO";a[a.WARN=2]="WARN";a[a.ERROR=3]="ERROR"}(tm||={});var SC=((ov={})[tm.DEBUG]="debug",ov[tm.INFO]="log",ov[tm.WARN]="warn",ov[tm.ERROR]="error",ov),Xq=oi(function(){var a=fg(tm.ERROR);return{log:fg(function(d,k,N){var ea;void 0===N&&(N=tm.INFO);N>=(null!=(ea=("undefined"==typeof globalThis?
window:globalThis).VIRTUOSO_LOG_LEVEL)?ea:a(4))&&console[SC[N]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",d,k)}),logLevel:a}},[],{singleton:!0}),jo=oi(function(){var a=Vg(),d=Vg(),k=fg(0),N=Vg(),ea=fg(0),ka=Vg(),sa=Vg(),La=fg(0),Ua=fg(0),cb=fg(0),ib=fg(0),nb=Vg(),Pb=Vg(),Sb=fg(!1),Nb=fg(!1);return ig(Pf(a,zg(function(lc){return lc.scrollTop})),d),ig(Pf(a,zg(function(lc){return lc.scrollHeight})),sa),ig(d,ea),{scrollContainerState:a,scrollTop:d,viewportHeight:ka,
headerHeight:La,fixedHeaderHeight:Ua,fixedFooterHeight:cb,footerHeight:ib,scrollHeight:sa,smoothScrollTargetReached:N,react18ConcurrentRendering:Nb,scrollTo:nb,scrollBy:Pb,statefulScrollTop:ea,deviation:k,scrollingInProgress:Sb}},[],{singleton:!0}),aj={lvl:0},Py=oi(function(){return{recalcInProgress:fg(!1)}},[],{singleton:!0}),AH={offsetHeight:"height",offsetWidth:"width"},Yq=oi(function(a){var d=a[0].log,k=a[1].recalcInProgress;a=Vg();var N=Vg(),ea=Sj(N,0),ka=Vg(),sa=Vg(),La=fg(0),Ua=fg([]),cb=fg(void 0),
ib=fg(void 0),nb=fg(function(qc,mc){return Ki(qc,AH[mc])}),Pb=fg(void 0),Sb=fg(0),Nb={offsetTree:[],sizeTree:aj,groupOffsetTree:aj,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},lc=Sj(Pf(a,Ph(Ua,d,Sb),ok(ni,Nb),$h()),Nb);ig(Pf(Ua,wg(function(qc){return 0<qc.length}),Ph(lc,Sb),zg(function(qc){var mc=qc[0],Pc=qc[1],Uc=qc[2];qc=mc.reduce(function(Ed,Ud,ff){return Ba(Ed,Ud,ji(Ud,Pc.offsetTree,Uc)||ff)},aj);return wh({},Pc,{groupIndices:mc,groupOffsetTree:qc})})),lc);ig(Pf(N,Ph(lc),wg(function(qc){return qc[0]<
qc[1].lastIndex}),zg(function(qc){var mc=qc[1];return[{startIndex:qc[0],endIndex:mc.lastIndex,size:mc.lastSize}]})),a);ig(cb,ib);var yc=Sj(Pf(cb,zg(function(qc){return void 0===qc})),!0);ig(Pf(ib,wg(function(qc){return void 0!==qc&&lc(4).sizeTree===aj}),zg(function(qc){return[{startIndex:0,endIndex:0,size:qc}]})),a);Nb=Sk(Pf(a,Ph(lc),ok(function(qc,mc){mc=mc[1];return{changed:mc!==qc.sizes,sizes:mc}},{changed:!1,sizes:Nb}),zg(function(qc){return qc.changed})));Ah(Pf(La,ok(function(qc,mc){return{diff:qc.prev-
mc,prev:mc}},{diff:0,prev:0}),zg(function(qc){return qc.diff})),function(qc){0<qc?(k(0,!0),ka(0,qc)):0>qc&&sa(0,qc)});Ah(Pf(La,Ph(d)),function(qc){0>qc[0]&&(0,qc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:La},tm.ERROR)});d=Sk(ka);ig(Pf(ka,Ph(lc),zg(function(qc){var mc=qc[0];qc=qc[1];if(0<qc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return Ka(qc.sizeTree).reduce(function(Pc,
Uc){var Ed=Uc.k;Uc=Uc.v;return{ranges:[].concat(Pc.ranges,[{startIndex:Pc.prevIndex,endIndex:Ed+mc-1,size:Pc.prevSize}]),prevIndex:Ed+mc,prevSize:Uc}},{ranges:[],prevIndex:0,prevSize:qc.lastSize}).ranges})),a);var bc=Sk(Pf(sa,Ph(lc,Sb),zg(function(qc){return ji(-qc[0],qc[1].offsetTree,qc[2])})));return ig(Pf(sa,Ph(lc,Sb),zg(function(qc){var mc=qc[0],Pc=qc[1];qc=qc[2];if(0<Pc.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Uc=Ka(Pc.sizeTree).reduce(function(Ed,
Ud){return Ba(Ed,Math.max(0,Ud.k+mc),Ud.v)},aj);return wh({},Pc,{sizeTree:Uc},Yi(Pc.offsetTree,0,Uc,qc))})),lc),{data:Pb,totalCount:N,sizeRanges:a,groupIndices:Ua,defaultItemSize:ib,fixedItemSize:cb,unshiftWith:ka,shiftWith:sa,shiftWithOffset:bc,beforeUnshiftWith:d,firstItemIndex:La,gap:Sb,sizes:lc,listRefresh:Nb,statefulTotalCount:ea,trackItemSizes:yc,itemSize:nb}},jj(Xq,Py),{singleton:!0}),BH="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,pv=oi(function(a){function d(){yc&&
(yc(),yc=null);qc&&(qc(),qc=null);bc&&(clearTimeout(bc),bc=null);La(0,!1)}var k=a[0],N=k.sizes,ea=k.totalCount,ka=k.listRefresh;k=k.gap;var sa=a[1],La=sa.scrollingInProgress,Ua=sa.viewportHeight,cb=sa.scrollTo,ib=sa.smoothScrollTargetReached,nb=sa.headerHeight,Pb=sa.footerHeight,Sb=sa.fixedHeaderHeight;sa=sa.fixedFooterHeight;a=a[2].log;var Nb=Vg(),lc=fg(0),yc=null,bc=null,qc=null;return ig(Pf(Nb,Ph(N,Ua,ea,lc,nb,Pb,a),Ph(k,Sb,sa),zg(function(mc){var Pc=mc[0],Uc=Pc[0],Ed=Pc[1],Ud=Pc[2],ff=Pc[3],oe=
Pc[4],Ue=Pc[5],Bf=Pc[6],gf=Pc[7],vf=mc[1];Pc=mc[2];mc=mc[3];var Rd=qi(Uc),wd=Rd.align,Jd=Rd.behavior,rd=Rd.offset;--ff;Rd=yi(Rd,Ed,ff);Ue=ji(Rd,Ed.offsetTree,vf)+Ue;"end"===wd?(Ue+=Pc+ca(Ed.sizeTree,Rd)[1]-Ud+mc,Rd===ff&&(Ue+=Bf)):"center"===wd?Ue+=(Pc+ca(Ed.sizeTree,Rd)[1]-Ud+mc)/2:Ue-=oe;rd&&(Ue+=rd);var Md=function(of){d();of?(gf("retrying to scroll to",{location:Uc},tm.DEBUG),Nb(0,Uc)):gf("list did not change, scroll successful",{},tm.DEBUG)};if(d(),"smooth"===Jd){var Te=!1;qc=Ah(ka,function(of){Te=
Te||of});yc=bl(ib,function(){Md(Te)})}else yc=bl(Pf(ka,function(of){var lg=setTimeout(function(){of(!1)},150);return function(Fg){Fg&&(of(!0),clearTimeout(lg))}}),Md);bc=setTimeout(function(){d()},1200);La(0,!0);return gf("scrolling from index to",{index:Rd,top:Ue,behavior:Jd},tm.DEBUG),{top:Ue,behavior:Jd}})),cb),{scrollToIndex:Nb,topListHeight:lc}},jj(Yq,jo,Xq),{singleton:!0}),CH={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},
pu=oi(function(a){var d=a[0],k=d.scrollContainerState;a=d.scrollTop;var N=d.viewportHeight,ea=d.headerHeight,ka=d.footerHeight,sa=d.scrollBy;d=fg(!1);var La=fg(!0),Ua=Vg(),cb=Vg(),ib=fg(4),nb=fg(0),Pb=Sj(Pf(Vp(Pf(Ih(a),lm(1),Hn(!0)),Pf(Ih(a),lm(1),Hn(!1),Qj(100))),$h()),!1),Sb=Sj(Pf(Vp(Pf(sa,Hn(!0)),Pf(sa,Hn(!1),Qj(200))),$h()),!1);ig(Pf(gk(Ih(a),Ih(nb)),zg(function(Nb){return Nb[0]<=Nb[1]}),$h()),La);ig(Pf(La,jn(50)),cb);N=Sk(Pf(gk(k,Ih(N),Ih(ea),Ih(ka),Ih(ib)),ok(function(Nb,lc){var yc,bc,qc=lc[0],
mc=qc.scrollTop;qc=qc.scrollHeight;var Pc=lc[1],Uc={viewportHeight:Pc,scrollTop:mc,scrollHeight:qc};return mc+Pc-qc>-lc[4]?(mc>Nb.state.scrollTop?(yc="SCROLLED_DOWN",bc=Nb.state.scrollTop-mc):(yc="SIZE_DECREASED",bc=Nb.state.scrollTop-mc||Nb.scrollTopDelta),{atBottom:!0,state:Uc,atBottomBecause:yc,scrollTopDelta:bc}):{atBottom:!1,notAtBottomBecause:Uc.scrollHeight>Nb.state.scrollHeight?"SIZE_INCREASED":Pc<Nb.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":mc<Nb.state.scrollTop?"SCROLLING_UPWARDS":
"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Uc}},CH),$h(function(Nb,lc){return Nb&&Nb.atBottom===lc.atBottom})));ea=Sj(Pf(k,ok(function(Nb,lc){var yc=lc.scrollTop,bc=lc.scrollHeight;lc=lc.viewportHeight;return 1.01>Math.abs(Nb.scrollHeight-bc)?{scrollTop:yc,scrollHeight:bc,jump:0,changed:!1}:Nb.scrollTop!==yc&&1>bc-(yc+lc)?{scrollHeight:bc,scrollTop:yc,jump:Nb.scrollTop-yc,changed:!0}:{scrollHeight:bc,scrollTop:yc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),wg(function(Nb){return Nb.changed}),
zg(function(Nb){return Nb.jump})),0);ig(Pf(N,zg(function(Nb){return Nb.atBottom})),d);ig(Pf(d,jn(50)),Ua);ka=fg("down");ig(Pf(k,zg(function(Nb){return Nb.scrollTop}),$h(),ok(function(Nb,lc){return Sb(4)?{direction:Nb.direction,prevScrollTop:lc}:{direction:lc<Nb.prevScrollTop?"up":"down",prevScrollTop:lc}},{direction:"down",prevScrollTop:0}),zg(function(Nb){return Nb.direction})),ka);ig(Pf(k,jn(50),Hn("none")),ka);k=fg(0);return ig(Pf(Pb,wg(function(Nb){return!Nb}),Hn(0)),k),ig(Pf(a,jn(100),Ph(Pb),
wg(function(Nb){return!!Nb[1]}),ok(function(Nb,lc){return[Nb[1],lc[0]]},[0,0]),zg(function(Nb){return Nb[1]-Nb[0]})),k),{isScrolling:Pb,isAtTop:La,isAtBottom:d,atBottomState:N,atTopStateChange:cb,atBottomStateChange:Ua,scrollDirection:ka,atBottomThreshold:ib,atTopThreshold:nb,scrollVelocity:k,lastJumpDueToItemResize:ea}},jj(jo)),Tr=oi(function(a){var d=a[0].log;a=fg(!1);var k=Sk(Pf(a,wg(function(N){return N}),$h()));return Ah(a,function(N){N&&d(4)("props updated",{},tm.DEBUG)}),{propsReady:a,didMount:k}},
jj(Xq),{singleton:!0}),Iw=oi(function(a){var d=a[0],k=d.sizes,N=d.listRefresh;d=d.defaultItemSize;var ea=a[1].scrollTop,ka=a[2].scrollToIndex;a=a[3].didMount;var sa=fg(!0),La=fg(0);return ig(Pf(a,Ph(La),wg(function(Ua){return!!Ua[1]}),Hn(!1)),sa),Ah(Pf(gk(N,a),Ph(sa,k,d),wg(function(Ua){var cb=Ua[1],ib=Ua[3];return Ua[0][1]&&(Ua[2].sizeTree!==aj||void 0!==ib)&&!cb}),Ph(La)),function(Ua){var cb=Ua[1];setTimeout(function(){bl(ea,function(){sa(0,!0)});ka(0,cb)})}),{scrolledToInitialItem:sa,initialTopMostItemIndex:La}},
jj(Yq,jo,pv,Tr),{singleton:!0}),DH=oi(function(a){function d(lc){Ua(0,{index:"LAST",align:"end",behavior:lc})}function k(lc){var yc=bl(La,function(bc){!lc||bc.atBottom||"SIZE_INCREASED"!==bc.notAtBottomBecause||Nb||(nb(4)("scrolling to bottom due to increased size",{},tm.DEBUG),d("auto"))});setTimeout(yc,100)}var N=a[0],ea=N.totalCount,ka=N.listRefresh,sa=a[1];N=sa.isAtBottom;var La=sa.atBottomState,Ua=a[2].scrollToIndex;sa=a[3].scrolledToInitialItem;var cb=a[4],ib=cb.propsReady;cb=cb.didMount;var nb=
a[5].log;a=a[6].scrollingInProgress;var Pb=fg(!1),Sb=Vg(),Nb=null;return Ah(Pf(gk(Pf(Ih(ea),lm(1)),cb),Ph(Ih(Pb),N,sa,a),zg(function(lc){var yc=lc[0],bc=yc[0];yc=yc[1]&&lc[3];var qc="auto";yc&&(qc=lc[1],lc=lc[2]||lc[4],qc="function"==typeof qc?ri(qc(lc)):lc&&ri(qc),yc=yc&&!!qc);return{totalCount:bc,shouldFollow:yc,followOutputBehavior:qc}}),wg(function(lc){return lc.shouldFollow})),function(lc){var yc=lc.totalCount,bc=lc.followOutputBehavior;Nb&&(Nb(),Nb=null);Nb=bl(ka,function(){nb(4)("following output to ",
{totalCount:yc},tm.DEBUG);d(bc);Nb=null})}),Ah(Pf(gk(Ih(Pb),ea,ib),wg(function(lc){return lc[0]&&lc[2]}),ok(function(lc,yc){yc=yc[1];return{refreshed:lc.value===yc,value:yc}},{refreshed:!1,value:0}),wg(function(lc){return lc.refreshed}),Ph(Pb,ea)),function(lc){k(!1!==lc[1])}),Ah(Sb,function(){k(!1!==Pb(4))}),Ah(gk(Ih(Pb),La),function(lc){var yc=lc[1];lc[0]&&!yc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===yc.notAtBottomBecause&&d("auto")}),{followOutput:Pb,autoscrollToBottom:Sb}},jj(Yq,pu,pv,Iw,Tr,Xq,
jo)),UC=oi(function(a){var d=a[0],k=d.totalCount,N=d.groupIndices;d=d.sizes;var ea=a[1];a=ea.scrollTop;ea=ea.headerHeight;var ka=Vg(),sa=Vg(),La=Sk(Pf(ka,zg(vi)));return ig(Pf(La,zg(function(Ua){return Ua.totalCount})),k),ig(Pf(La,zg(function(Ua){return Ua.groupIndices})),N),ig(Pf(gk(a,d,ea),wg(function(Ua){return Ua[1].groupOffsetTree!==aj}),zg(function(Ua){return ca(Ua[1].groupOffsetTree,Math.max(Ua[0]-Ua[2],0),"v")[0]}),$h(),zg(function(Ua){return[Ua]})),sa),{groupCounts:ka,topItemsIndexes:sa}},
jj(Yq,jo)),Qy=oi(function(a){var d=a[0];a=d.scrollTop;var k=d.viewportHeight,N=d.deviation,ea=d.headerHeight,ka=d.fixedHeaderHeight;d=Vg();var sa=fg(0),La=fg(0),Ua=fg(0);a=Sj(Pf(gk(Ih(a),Ih(k),Ih(ea),Ih(d,Tj),Ih(Ua),Ih(sa),Ih(ka),Ih(N),Ih(La)),zg(function(cb){var ib=cb[0],nb=cb[1],Pb=cb[2],Sb=cb[3],Nb=Sb[0];Sb=Sb[1];var lc=cb[4],yc=cb[6],bc=cb[7],qc=cb[8],mc=ib-bc;cb=cb[5]+yc;var Pc=Math.max(Pb-mc,0),Uc="none",Ed="number"==typeof qc?qc:qc.top||0;qc="number"==typeof qc?qc:qc.bottom||0;return Nb-=bc,
Sb+=Pb+yc,Nb+(Pb+yc)>ib+cb-Ed&&(Uc="up"),Sb-bc<ib-Pc+nb+qc&&(Uc="down"),"none"!==Uc?[Math.max(mc-Pb-Gl(lc,"top",Uc)-Ed,0),mc-Pc-yc+nb+Gl(lc,"bottom",Uc)+qc]:null}),wg(function(cb){return null!=cb}),$h(Tj)),[0,0]);return{listBoundary:d,overscan:Ua,topListHeight:sa,increaseViewportBy:La,visibleRange:a}},jj(jo),{singleton:!0}),VC={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},ko=oi(function(a){var d=a[0],k=d.sizes,N=d.totalCount,ea=d.data,
ka=d.firstItemIndex,sa=d.gap,La=a[1],Ua=a[2],cb=Ua.visibleRange;d=Ua.listBoundary;Ua=Ua.topListHeight;var ib=a[3],nb=ib.scrolledToInitialItem,Pb=ib.initialTopMostItemIndex;ib=a[4].topListHeight;var Sb=a[5],Nb=a[6].didMount,lc=a[7].recalcInProgress;a=fg([]);var yc=Vg();ig(La.topItemsIndexes,a);k=Sj(Pf(gk(Nb,lc,Ih(cb,Tj),Ih(N),Ih(k),Ih(Pb),nb,Ih(a),Ih(ka),Ih(sa),ea),wg(function(bc){return bc[0]&&!bc[1]}),zg(function(bc){var qc=bc[2],mc=qc[0],Pc=qc[1];qc=bc[3];var Uc=bc[5],Ed=bc[6],Ud=bc[7],ff=bc[8],
oe=bc[9],Ue=bc[10];bc=bc[4];var Bf=bc.sizeTree,gf=bc.offsetTree;if(0===qc||0===mc&&0===Pc)return wh({},VC,{totalCount:qc});if(Bf===aj)return gn(function(Fg,wf,Xg){return wf.groupOffsetTree!==aj?(Fg=Nh(Fg,wf),[{index:ca(wf.groupOffsetTree,Fg)[0],size:0,offset:0},{index:Fg,size:0,offset:0,data:Xg&&Xg[0]}]):[{index:Fg,size:0,offset:0,data:Xg&&Xg[0]}]}("number"==typeof Uc?Uc:"LAST"===Uc.index?qc-1:Uc.index,bc,Ue),[],qc,oe,bc,ff);Uc=[];if(0<Ud.length){var vf,Rd=Ud[0],wd=Ud[Ud.length-1],Jd=0;for(Bf=Mm(Xc(Bf,
Rd,wd));!(vf=Bf()).done;){var rd=vf.value;vf=rd.value;var Md=Math.min(rd.end,wd);for(rd=Math.max(rd.start,Rd);rd<=Md;rd++)Uc.push({index:rd,size:vf,offset:Jd,data:Ue&&Ue[rd]}),Jd+=vf}}if(!Ed)return gn([],Uc,qc,oe,bc,ff);var Te=0<Ud.length?Ud[Ud.length-1]+1:0,of=function(Fg,wf,Xg,Xf){return void 0===Xf&&(Xf=0),0<Xf&&(wf=Math.max(wf,Fg[Ne(Fg,Xf,dh)].offset)),Dd((zh=Xg,Rk=Ne(jh=Fg,wf,qj=Si),$k=Ne(jh,zh,qj,Rk),jh.slice(Rk,$k+1)),Rg);var jh,zh,qj,Rk,$k}(gf,mc,Pc,Te);if(0===of.length)return null;var lg=
qc-1;return gn(ij([],function(Fg){for(var wf,Xg=Mm(of);!(wf=Xg()).done;){var Xf=wf.value,jh=Xf.value;wf=jh.offset;var zh=Xf.start,qj=jh.size;jh.offset<mc&&(jh=(zh+=Math.floor((mc-jh.offset+oe)/(qj+oe)))-Xf.start,wf+=jh*qj+jh*oe);zh<Te&&(wf+=(Te-zh)*qj,zh=Te);for(Xf=Math.min(Xf.end,lg);zh<=Xf&&!(wf>=Pc);zh++)Fg.push({index:zh,size:qj,offset:wf,data:Ue&&Ue[zh]}),wf+=qj+oe}}),Uc,qc,oe,bc,ff)}),wg(function(bc){return null!==bc}),$h()),VC);return ig(Pf(ea,wg(function(bc){return void 0!==bc}),zg(function(bc){return bc.length})),
N),ig(Pf(k,zg(function(bc){return bc.topListHeight})),ib),ig(ib,Ua),ig(Pf(k,zg(function(bc){return[bc.top,bc.bottom]})),d),ig(Pf(k,zg(function(bc){return bc.items})),yc),wh({listState:k,topItemsIndexes:a,endReached:Sk(Pf(k,wg(function(bc){return 0<bc.items.length}),Ph(N,ea),wg(function(bc){var qc=bc[0].items;return qc[qc.length-1].originalIndex===bc[1]-1}),zg(function(bc){return[bc[1]-1,bc[2]]}),$h(Tj),zg(function(bc){return bc[0]}))),startReached:Sk(Pf(k,jn(200),wg(function(bc){var qc=bc.items;return 0<
qc.length&&qc[0].originalIndex===bc.topItems.length}),zg(function(bc){return bc.items[0].index}),$h())),rangeChanged:Sk(Pf(k,wg(function(bc){return 0<bc.items.length}),zg(function(bc){bc=bc.items;for(var qc=0,mc=bc.length-1;"group"===bc[qc].type&&qc<mc;)qc++;for(;"group"===bc[mc].type&&mc>qc;)mc--;return{startIndex:bc[qc].index,endIndex:bc[mc].index}}),$h(Tk))),itemsRendered:yc},Sb)},jj(Yq,UC,Qy,Iw,pv,pu,Tr,Py),{singleton:!0}),Ry=oi(function(a){var d=a[0],k=d.sizes,N=d.firstItemIndex,ea=d.data;d=
d.gap;var ka=a[1].listState;a=a[2].didMount;var sa=fg(0);return ig(Pf(a,Ph(sa),wg(function(La){return 0!==La[1]}),Ph(k,N,d,ea),zg(function(La){var Ua=La[0][1],cb=La[1],ib=La[2],nb=La[3];La=La[4];var Pb=void 0===La?[]:La;La=0;if(0<cb.groupIndices.length)for(var Sb,Nb=Mm(cb.groupIndices);!((Sb=Nb()).done||Sb.value-La>=Ua);)La++;Ua+=La;return gn(Array.from({length:Ua}).map(function(lc,yc){return{index:yc,size:0,offset:0,data:Pb[yc]}}),[],Ua,nb,cb,ib)})),ka),{initialItemCount:sa}},jj(Yq,ko,Tr),{singleton:!0}),
qv=oi(function(a){a=a[0].scrollVelocity;var d=fg(!1),k=Vg(),N=fg(!1);return ig(Pf(a,Ph(N,d,k),wg(function(ea){return!!ea[1]}),zg(function(ea){var ka=ea[0],sa=ea[1],La=ea[2];ea=ea[3];var Ua=sa.enter;if(La){if((0,sa.exit)(ka,ea))return!1}else if(Ua(ka,ea))return!0;return La}),$h()),d),Ah(Pf(gk(d,a,k),Ph(N)),function(ea){var ka=ea[0];ea=ea[1];return ka[0]&&ea&&ea.change&&ea.change(ka[1],ka[2])}),{isSeeking:d,scrollSeekConfiguration:N,scrollVelocity:a,scrollSeekRangeChanged:k}},jj(pu),{singleton:!0}),
Jw=oi(function(a){a=a[0].topItemsIndexes;var d=fg(0);return ig(Pf(d,wg(function(k){return 0<k}),zg(function(k){return Array.from({length:k}).map(function(N,ea){return ea})})),a),{topItemCount:d}},jj(ko)),rv=oi(function(a){var d=a[0],k=d.footerHeight,N=d.headerHeight,ea=d.fixedHeaderHeight;d=d.fixedFooterHeight;var ka=a[1].listState;a=Vg();k=Sj(Pf(gk(k,d,N,ea,ka),zg(function(sa){var La=sa[4];return sa[0]+sa[1]+sa[2]+sa[3]+La.offsetBottom+La.bottom})),0);return ig(Ih(k),a),{totalListHeight:k,totalListHeightChanged:a}},
jj(jo,ko),{singleton:!0}),WC=yn(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),Sy=oi(function(a){function d(yc){0<yc?(N(0,{top:-yc,behavior:"auto"}),ka(0,0)):(ka(0,0),N(0,{top:-yc,behavior:"auto"}))}var k=a[0],N=k.scrollBy,ea=k.scrollTop,ka=k.deviation,sa=k.scrollingInProgress,La=a[1];k=La.isScrolling;var Ua=La.isAtBottom,cb=La.scrollDirection,ib=a[3],nb=ib.beforeUnshiftWith,Pb=ib.shiftWithOffset,Sb=ib.sizes;ib=ib.gap;var Nb=a[4].log,lc=a[5].recalcInProgress;
a=Sk(Pf(a[2].listState,Ph(La.lastJumpDueToItemResize),ok(function(yc,bc){var qc=yc[1],mc=bc[0],Pc=mc.items,Uc=mc.totalCount;mc=mc.bottom+mc.offsetBottom;var Ed=0;return yc[2]===Uc&&0<qc.length&&0<Pc.length&&(0===Pc[0].originalIndex&&0===qc[0].originalIndex||0!=(Ed=mc-yc[3])&&(Ed+=bc[1])),[Ed,Pc,Uc,mc]},[0,[],0,0]),wg(function(yc){return 0!==yc[0]}),Ph(ea,cb,sa,Ua,Nb),wg(function(yc){return!yc[3]&&0!==yc[1]&&"up"===yc[2]}),zg(function(yc){var bc=yc[0][0];return(0,yc[5])("Upward scrolling compensation",
{amount:bc},tm.DEBUG),bc})));return Ah(Pf(a,Ph(ka,k)),function(yc){var bc=yc[0],qc=yc[1];yc[2]&&WC()?ka(0,qc-bc):d(-bc)}),Ah(Pf(gk(Sj(k,!1),ka,lc),wg(function(yc){return!yc[0]&&!yc[2]&&0!==yc[1]}),zg(function(yc){return yc[1]}),jn(1)),d),ig(Pf(Pb,zg(function(yc){return{top:-yc}})),N),Ah(Pf(nb,Ph(Sb,ib),zg(function(yc){var bc=yc[0];return bc*yc[1].lastSize+bc*yc[2]})),function(yc){ka(0,yc);requestAnimationFrame(function(){Jp(N,{top:yc});requestAnimationFrame(function(){ka(0,0);lc(0,!1)})})}),{deviation:ka}},
jj(jo,pu,ko,Yq,Xq,Py)),Ty=oi(function(a){var d=a[0].totalListHeight,k=a[1].didMount,N=a[2].scrollTo;a=fg(0);return Ah(Pf(k,Ph(a),wg(function(ea){return 0!==ea[1]}),zg(function(ea){return{top:ea[1]}})),function(ea){bl(Pf(d,wg(function(ka){return 0!==ka})),function(){setTimeout(function(){N(0,ea)})})}),{initialScrollTop:a}},jj(rv,Tr,jo),{singleton:!0}),ct=oi(function(a){var d=a[0].viewportHeight;a=a[1].totalListHeight;var k=fg(!1);return{alignToBottom:k,paddingTopAddition:Sj(Pf(gk(k,d,a),wg(function(N){return N[0]}),
zg(function(N){return Math.max(0,N[1]-N[2])}),$h()),0)}},jj(jo,rv),{singleton:!0}),Zq=oi(function(a){var d=a[0];a=d.scrollTo;d=d.scrollContainerState;var k=Vg(),N=Vg(),ea=Vg(),ka=fg(!1),sa=fg(void 0);return ig(Pf(gk(k,N),zg(function(La){var Ua=La[0];return{scrollTop:Math.max(0,Ua.scrollTop-La[1].offsetTop),scrollHeight:Ua.scrollHeight,viewportHeight:Ua.viewportHeight}})),d),ig(Pf(a,Ph(N),zg(function(La){var Ua=La[0];return wh({},Ua,{top:Ua.top+La[1].offsetTop})})),ea),{useWindowScroll:ka,customScrollParent:sa,
windowScrollContainerState:k,windowViewportRect:N,windowScrollTo:ea}},jj(jo)),Uy=["done","behavior","align"],XC=oi(function(a){var d=a[0],k=d.sizes,N=d.totalCount;d=d.gap;var ea=a[1],ka=ea.scrollTop,sa=ea.viewportHeight,La=ea.headerHeight,Ua=ea.fixedHeaderHeight,cb=ea.fixedFooterHeight,ib=ea.scrollingInProgress;a=a[2].scrollToIndex;ea=Vg();return ig(Pf(ea,Ph(k,sa,N,La,Ua,cb,ka),Ph(d),zg(function(nb){var Pb=nb[0],Sb=Pb[0],Nb=Pb[1],lc=Pb[2],yc=Pb[3],bc=Pb[4],qc=Pb[5],mc=Pb[6];Pb=Pb[7];var Pc=nb[1];
nb=Sb.done;var Uc=Sb.behavior,Ed=Sb.align,Ud=Lm(Sb,Uy),ff=null;Sb=yi(Sb,Nb,yc-1);bc=ji(Sb,Nb.offsetTree,Pc)+bc+qc;return bc<Pb+qc?ff=wh({},Ud,{behavior:Uc,align:null!=Ed?Ed:"start"}):bc+ca(Nb.sizeTree,Sb)[1]>Pb+lc-mc&&(ff=wh({},Ud,{behavior:Uc,align:null!=Ed?Ed:"end"})),ff?nb&&bl(Pf(ib,lm(1),wg(function(oe){return!1===oe})),nb):nb&&nb(),ff}),wg(function(nb){return null!==nb})),a),{scrollIntoView:ea}},jj(Yq,jo,pv,ko,Xq),{singleton:!0}),sv=["listState","topItemsIndexes"],EH=oi(function(a){return wh({},
a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},jj(Qy,Ry,Tr,qv,rv,Ty,ct,Zq,XC)),Vy=oi(function(a){var d=a[0],k=d.totalCount,N=d.sizeRanges,ea=d.fixedItemSize,ka=d.defaultItemSize,sa=d.trackItemSizes,La=d.itemSize,Ua=d.data,cb=d.firstItemIndex,ib=d.groupIndices,nb=d.statefulTotalCount;d=d.gap;var Pb=a[1],Sb=Pb.initialTopMostItemIndex;Pb=Pb.scrolledToInitialItem;var Nb=a[2],lc=a[3],yc=a[4],bc=yc.listState,qc=yc.topItemsIndexes;yc=Lm(yc,sv);var mc=a[5].scrollToIndex,Pc=a[7].topItemCount,Uc=a[8].groupCounts,
Ed=a[9];a=a[10];return ig(yc.rangeChanged,Ed.scrollSeekRangeChanged),ig(Pf(Ed.windowViewportRect,zg(function(Ud){return Ud.visibleHeight})),Nb.viewportHeight),wh({totalCount:k,data:Ua,firstItemIndex:cb,sizeRanges:N,initialTopMostItemIndex:Sb,scrolledToInitialItem:Pb,topItemsIndexes:qc,topItemCount:Pc,groupCounts:Uc,fixedItemHeight:ea,defaultItemHeight:ka,gap:d},lc,{statefulTotalCount:nb,listState:bc,scrollToIndex:mc,trackItemSizes:sa,itemSize:La,groupIndices:ib},yc,Ed,Nb,a)},jj(Yq,Iw,jo,DH,ko,pv,
Sy,Jw,UC,EH,Xq)),Ap=yn(function(){if("undefined"==typeof document)return"sticky";var a=document.createElement("div");return a.style.position="-webkit-sticky","-webkit-sticky"===a.style.position?"-webkit-sticky":"sticky"}),tv=uh.createContext(void 0),Kw=uh.createContext(void 0),YC=["placeholder"],ZC=["style","children"],Lw=["style","children"],$C=oi(function(){var a=fg(function(Ua){return"Item "+Ua}),d=fg(null),k=fg(function(Ua){return"Group "+Ua}),N=fg({}),ea=fg(Wp),ka=fg("div"),sa=fg(zi),La=function(Ua,
cb){return void 0===cb&&(cb=null),Sj(Pf(N,zg(function(ib){return ib[Ua]}),$h()),cb)};return{context:d,itemContent:a,groupContent:k,components:N,computeItemKey:ea,headerFooterTag:ka,scrollerRef:sa,FooterComponent:La("Footer"),HeaderComponent:La("Header"),TopItemListComponent:La("TopItemList"),ListComponent:La("List","div"),ItemComponent:La("Item","div"),GroupComponent:La("Group","div"),ScrollerComponent:La("Scroller","div"),EmptyPlaceholder:La("EmptyPlaceholder"),ScrollSeekPlaceholder:La("ScrollSeekPlaceholder")}}),
Sn=oi(function(a){function d(ea,ka,sa){ig(Pf(ea,Ph(N.components),zg(function(La){var Ua,cb=La[0];La=La[1];return console.warn("react-virtuoso: "+sa+" property is deprecated. Pass components."+ka+" instead."),wh({},La,((Ua={})[ka]=cb,Ua))})),N.components)}var k=a[0],N=a[1];a={item:Uk(N.itemContent,"Rename the %citem%c prop to %citemContent."),group:Uk(N.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Uk(k.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Uk(k.fixedItemHeight,
"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Uk(k.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:Vg(),maxHeightCacheSize:Vg(),footer:Vg(),header:Vg(),HeaderContainer:Vg(),FooterContainer:Vg(),ItemContainer:Vg(),ScrollContainer:Vg(),GroupContainer:Vg(),ListContainer:Vg(),emptyComponent:Vg(),scrollSeek:Vg()};return Ah(a.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.",
"color: red;","color: inherit;","color: blue;")}),Ah(a.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),Ah(a.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),Ah(a.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),
Ah(a.scrollSeek,function(ea){var ka=ea.placeholder;ea=Lm(ea,YC);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ka=wh({},(0,N.components)(4),{ScrollSeekPlaceholder:ka});(0,N.components)(0,ka);(0,k.scrollSeekConfiguration)(0,ea)}),d(a.footer,"Footer","footer"),d(a.header,"Header","header"),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,
"Scroller","ScrollContainer"),d(a.emptyComponent,"EmptyPlaceholder","emptyComponent"),d(a.GroupContainer,"Group","GroupContainer"),wh({},k,N,a)},jj(Vy,$C)),FH=function(a){return uh.createElement("div",{style:{height:a.height}})},uv={position:Ap(),zIndex:1,overflowAnchor:"none"},GH={overflowAnchor:"none"},aD=uh.memo(function(a){a=a.showTopList;a=void 0!==a&&a;var d=Ei("listState"),k=ii("sizeRanges"),N=Ei("useWindowScroll"),ea=Ei("customScrollParent"),ka=ii("windowScrollContainerState"),sa=ii("scrollContainerState");
N=ea||N?ka:sa;var La=Ei("itemContent"),Ua=Ei("context"),cb=Ei("groupContent");ka=Ei("trackItemSizes");sa=Ei("itemSize");var ib=Ei("log"),nb=ii("gap");k=Vi(k,sa,ka,a?zi:N,ib,nb,ea).callbackRef;ea=uh.useState(0);var Pb=ea[0],Sb=ea[1];dt("deviation",function(Pc){Pb!==Pc&&Sb(Pc)});ea=Ei("EmptyPlaceholder");var Nb=Ei("ScrollSeekPlaceholder")||FH;N=Ei("ListComponent");var lc=Ei("ItemComponent"),yc=Ei("GroupComponent"),bc=Ei("computeItemKey"),qc=Ei("isSeeking"),mc=0<Ei("groupIndices").length;ka=Ei("paddingTopAddition");
ka=a?{}:{boxSizing:"border-box",paddingTop:d.offsetTop+ka,paddingBottom:d.offsetBottom,marginTop:Pb};return!a&&0===d.totalCount&&ea?(0,si.createElement)(ea,Zj(ea,Ua)):(0,si.createElement)(N,wh({},Zj(N,Ua),{ref:k,style:ka,"data-test-id":a?"virtuoso-top-item-list":"virtuoso-item-list"}),(a?d.topItems:d.items).map(function(Pc){var Uc=Pc.originalIndex,Ed=bc(Uc+d.firstItemIndex,Pc.data,Ua);return qc?(0,si.createElement)(Nb,wh({},Zj(Nb,Ua),{key:Ed,index:Pc.index,height:Pc.size,type:Pc.type||"item"},"group"===
Pc.type?{}:{groupIndex:Pc.groupIndex})):"group"===Pc.type?(0,si.createElement)(yc,wh({},Zj(yc,Ua),{key:Ed,"data-index":Uc,"data-known-size":Pc.size,"data-item-index":Pc.index,style:uv}),cb(Pc.index)):(0,si.createElement)(lc,wh({},Zj(lc,Ua),{key:Ed,"data-index":Uc,"data-known-size":Pc.size,"data-item-index":Pc.index,"data-item-group-index":Pc.groupIndex,style:GH}),mc?La(Pc.index,Pc.groupIndex,Pc.data,Ua):La(Pc.index,Pc.data,Ua))}))}),bD={height:"100%",outline:"none",overflowY:"auto",position:"relative",
WebkitOverflowScrolling:"touch"},$q={width:"100%",height:"100%",position:"absolute",top:0},Mw={width:"100%",position:Ap(),top:0},HH=uh.memo(function(){var a=Ei("HeaderComponent"),d=ii("headerHeight"),k=Ei("headerFooterTag"),N=Hj(function(ka){return d(Ki(ka,"height"))}),ea=Ei("context");return a?(0,si.createElement)(k,{ref:N},(0,si.createElement)(a,Zj(a,ea))):null}),cD=uh.memo(function(){var a=Ei("FooterComponent"),d=ii("footerHeight"),k=Ei("headerFooterTag"),N=Hj(function(ka){return d(Ki(ka,"height"))}),
ea=Ei("context");return a?(0,si.createElement)(k,{ref:N},(0,si.createElement)(a,Zj(a,ea))):null}),dD=function(a){a=a.children;var d=(0,si.useContext)(tv),k=ii("viewportHeight"),N=ii("fixedItemHeight"),ea=Hj(cn(k,function(ka){return Ki(ka,"height")}));return uh.useEffect(function(){d&&(k(d.viewportHeight),N(d.itemHeight))},[d,k,N]),uh.createElement("div",{style:$q,ref:ea,"data-viewport-type":"element"},a)},eD=function(a){a=a.children;var d=(0,si.useContext)(tv),k=ii("windowViewportRect"),N=ii("fixedItemHeight"),
ea=Ei("customScrollParent");ea=Gh(k,ea);return uh.useEffect(function(){d&&(N(d.itemHeight),k({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,k,N]),uh.createElement("div",{ref:ea,style:$q,"data-viewport-type":"window"},a)},Wy=function(a){a=a.children;var d=Ei("TopItemListComponent"),k=Ei("headerHeight");k=wh({},Mw,{marginTop:k+"px"});var N=Ei("context");return(0,si.createElement)(d||"div",{style:k,context:N},a)},qu=hk(Sn,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},uh.memo(function(a){var d=Ei("useWindowScroll"),k=0<Ei("topItemsIndexes").length,N=Ei("customScrollParent"),ea=N||d?eD:dD;return uh.createElement(N||d?lo:Nw,wh({},a),uh.createElement(ea,null,uh.createElement(HH,null),uh.createElement(aD,null),uh.createElement(cD,
null)),k&&uh.createElement(Wy,null,uh.createElement(aD,{showTopList:!0})))})),pq=qu.Component,ii=qu.usePublisher,Ei=qu.useEmitterValue,dt=qu.useEmitter,Nw=uo({usePublisher:ii,useEmitterValue:Ei,useEmitter:dt}),lo=Mp({usePublisher:ii,useEmitterValue:Ei,useEmitter:dt}),Xy={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Yy={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Zy=Math.round,fD=Math.ceil,pj=Math.floor,Ur=Math.min,qq=Math.max,
IH=oi(function(a){var d=a[0],k=d.overscan,N=d.visibleRange,ea=d.listBoundary,ka=a[1];d=ka.scrollTop;var sa=ka.viewportHeight,La=ka.scrollBy,Ua=ka.scrollTo,cb=ka.smoothScrollTargetReached,ib=ka.scrollContainerState,nb=ka.footerHeight;ka=ka.headerHeight;var Pb=a[2],Sb=a[3],Nb=a[4],lc=Nb.propsReady,yc=Nb.didMount,bc=a[5];Nb=bc.windowViewportRect;var qc=bc.windowScrollTo,mc=bc.useWindowScroll,Pc=bc.customScrollParent;bc=bc.windowScrollContainerState;a=a[6];var Uc=fg(0),Ed=fg(0),Ud=fg(Xy),ff=fg({height:0,
width:0}),oe=fg({height:0,width:0}),Ue=Vg(),Bf=Vg(),gf=fg(0),vf=fg(void 0),Rd=fg({row:0,column:0});ig(Pf(gk(yc,Ed,vf),wg(function(wd){return 0!==wd[1]}),zg(function(wd){return{items:Np(0,wd[1]-1,wd[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),Ud);ig(Pf(gk(Ih(Uc),N,Ih(Rd,In),Ih(oe,function(wd,Jd){return wd&&wd.width===Jd.width&&wd.height===Jd.height}),vf),Ph(ff),zg(function(wd){var Jd=wd[0],rd=Jd[0],Md=Jd[1],Te=Md[0],of=Md[1],lg=Jd[2],Fg=Jd[3],wf=Jd[4],Xg=wd[1];wd=lg.row;
var Xf=lg.column;Jd=Fg.height;Md=Fg.width;var jh=Xg.width;if(0===rd||0===jh)return Xy;if(0===Md)return wh({},Yy,{items:Np(0,0,wf)});Xf=qq(1,pj((jh+Xf)/(Md+Xf)));Te=Xf*pj((Te+wd)/(Jd+wd));of=Xf*fD((of+wd)/(Jd+wd))-1;of=Ur(rd-1,qq(of,Xf-1));Te=Np(Ur(of,qq(0,Te)),of,wf);Fg=vo(Xg,lg,Fg,Te);lg=Fg.top;Fg=Fg.bottom;rd=fD(rd/Xf);return{items:Te,offsetTop:lg,offsetBottom:rd*Jd+(rd-1)*wd-Fg,top:lg,bottom:Fg,itemHeight:Jd,itemWidth:Md}})),Ud);ig(Pf(vf,wg(function(wd){return void 0!==wd}),zg(function(wd){return wd.length})),
Uc);ig(Pf(ff,zg(function(wd){return wd.height})),sa);ig(Pf(gk(ff,oe,Ud,Rd),zg(function(wd){wd=vo(wd[0],wd[3],wd[1],wd[2].items);return[wd.top,wd.bottom]}),$h(Tj)),ea);N=Sk(Pf(Ih(Ud),wg(function(wd){return 0<wd.items.length}),Ph(Uc),wg(function(wd){var Jd=wd[0].items;return Jd[Jd.length-1].index===wd[1]-1}),zg(function(wd){return wd[1]-1}),$h()));ea=Sk(Pf(Ih(Ud),wg(function(wd){wd=wd.items;return 0<wd.length&&0===wd[0].index}),Hn(0),$h()));sa=Sk(Pf(Ih(Ud),wg(function(wd){return 0<wd.items.length}),
zg(function(wd){wd=wd.items;return{startIndex:wd[0].index,endIndex:wd[wd.length-1].index}}),$h(Tk)));ig(sa,Sb.scrollSeekRangeChanged);ig(Pf(Ue,Ph(ff,oe,Uc,Rd),zg(function(wd){var Jd=wd[1],rd=wd[2],Md=wd[3],Te=wd[4],of=qi(wd[0]);wd=of.align;var lg=of.behavior,Fg=of.offset;of=of.index;"LAST"===of&&(of=Md-1);Md=wl(Jd,Te,rd,qq(0,of,Ur(Md-1,of)));return"end"===wd?Md=Zy(Md-Jd.height+rd.height):"center"===wd&&(Md=Zy(Md-Jd.height/2+rd.height/2)),Fg&&(Md+=Fg),{top:Md,behavior:lg}})),Ua);yc=Sj(Pf(Ud,zg(function(wd){return wd.offsetBottom+
wd.bottom})),0);return ig(Pf(Nb,zg(function(wd){return{width:wd.visibleWidth,height:wd.visibleHeight}})),ff),wh({data:vf,totalCount:Uc,viewportDimensions:ff,itemDimensions:oe,scrollTop:d,scrollHeight:Bf,overscan:k,scrollBy:La,scrollTo:Ua,scrollToIndex:Ue,smoothScrollTargetReached:cb,windowViewportRect:Nb,windowScrollTo:qc,useWindowScroll:mc,customScrollParent:Pc,windowScrollContainerState:bc,deviation:gf,scrollContainerState:ib,footerHeight:nb,headerHeight:ka,initialItemCount:Ed,gap:Rd},Sb,{gridState:Ud,
totalListHeight:yc},Pb,{startReached:ea,endReached:N,rangeChanged:sa,propsReady:lc},a)},jj(Qy,jo,pu,qv,Tr,Zq,Xq)),Ak=["placeholder"],et=oi(function(){var a=fg(function(cb){return"Item "+cb}),d=fg({}),k=fg(null),N=fg("virtuoso-grid-item"),ea=fg("virtuoso-grid-list"),ka=fg(Wp),sa=fg("div"),La=fg(zi),Ua=function(cb,ib){return void 0===ib&&(ib=null),Sj(Pf(d,zg(function(nb){return nb[cb]}),$h()),ib)};return{context:k,itemContent:a,components:d,computeItemKey:ka,itemClassName:N,listClassName:ea,headerFooterTag:sa,
scrollerRef:La,FooterComponent:Ua("Footer"),HeaderComponent:Ua("Header"),ListComponent:Ua("List","div"),ItemComponent:Ua("Item","div"),ScrollerComponent:Ua("Scroller","div"),ScrollSeekPlaceholder:Ua("ScrollSeekPlaceholder","div")}}),gD=oi(function(a){function d(ea,ka,sa){ig(Pf(ea,Ph(N.components),zg(function(La){var Ua,cb=La[0];La=La[1];return console.warn("react-virtuoso: "+sa+" property is deprecated. Pass components."+ka+" instead."),wh({},La,((Ua={})[ka]=cb,Ua))})),N.components)}var k=a[0],N=
a[1];a={item:Uk(N.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:Vg(),ScrollContainer:Vg(),ListContainer:Vg(),emptyComponent:Vg(),scrollSeek:Vg()};return Ah(a.scrollSeek,function(ea){var ka=ea.placeholder;ea=Lm(ea,Ak);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ka=wh({},(0,N.components)(4),{ScrollSeekPlaceholder:ka});(0,N.components)(0,ka);(0,k.scrollSeekConfiguration)(0,
ea)}),d(a.ItemContainer,"Item","ItemContainer"),d(a.ListContainer,"List","ListContainer"),d(a.ScrollContainer,"Scroller","ScrollContainer"),wh({},k,N,a)},jj(IH,et)),hD=uh.memo(function(){var a=ql("gridState"),d=ql("listClassName"),k=ql("itemClassName"),N=ql("itemContent"),ea=ql("computeItemKey"),ka=ql("isSeeking"),sa=Mo("scrollHeight"),La=ql("ItemComponent"),Ua=ql("ListComponent"),cb=ql("ScrollSeekPlaceholder"),ib=ql("context"),nb=Mo("itemDimensions"),Pb=Mo("gap"),Sb=ql("log"),Nb=Hj(function(lc){sa(lc.parentElement.parentElement.scrollHeight);
var yc=lc.firstChild;yc&&nb(yc.getBoundingClientRect());Pb({row:Am("row-gap",getComputedStyle(lc).rowGap,Sb),column:Am("column-gap",getComputedStyle(lc).columnGap,Sb)})});return(0,si.createElement)(Ua,wh({ref:Nb,className:d},Zj(Ua,ib),{style:{paddingTop:a.offsetTop,paddingBottom:a.offsetBottom}}),a.items.map(function(lc){var yc=ea(lc.index,lc.data,ib);return ka?(0,si.createElement)(cb,wh({key:yc},Zj(cb,ib),{index:lc.index,height:a.itemHeight,width:a.itemWidth})):(0,si.createElement)(La,wh({},Zj(La,
ib),{className:k,"data-index":lc.index,key:yc}),N(lc.index,lc.data,ib))}))}),mh=uh.memo(function(){var a=ql("HeaderComponent"),d=Mo("headerHeight"),k=ql("headerFooterTag"),N=Hj(function(ka){return d(Ki(ka,"height"))}),ea=ql("context");return a?(0,si.createElement)(k,{ref:N},(0,si.createElement)(a,Zj(a,ea))):null}),Ow=uh.memo(function(){var a=ql("FooterComponent"),d=Mo("footerHeight"),k=ql("headerFooterTag"),N=Hj(function(ka){return d(Ki(ka,"height"))}),ea=ql("context");return a?(0,si.createElement)(k,
{ref:N},(0,si.createElement)(a,Zj(a,ea))):null}),jp=function(a){a=a.children;var d=(0,si.useContext)(Kw),k=Mo("itemDimensions"),N=Mo("viewportDimensions"),ea=Hj(function(ka){N(ka.getBoundingClientRect())});return uh.useEffect(function(){d&&(N({height:d.viewportHeight,width:d.viewportWidth}),k({height:d.itemHeight,width:d.itemWidth}))},[d,N,k]),uh.createElement("div",{style:$q,ref:ea},a)},ft=function(a){a=a.children;var d=(0,si.useContext)(Kw),k=Mo("windowViewportRect"),N=Mo("itemDimensions"),ea=ql("customScrollParent");
ea=Gh(k,ea);return uh.useEffect(function(){d&&(N({height:d.itemHeight,width:d.itemWidth}),k({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:d.viewportWidth}))},[d,k,N]),uh.createElement("div",{ref:ea,style:$q},a)},gt=hk(gD,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},uh.memo(function(a){a=wh({},a);var d=ql("useWindowScroll"),k=ql("customScrollParent"),N=k||d?ft:jp;return uh.createElement(k||d?ru:Pw,wh({},a),uh.createElement(N,null,uh.createElement(mh,null),uh.createElement(hD,null),uh.createElement(Ow,null)))})),Mo=gt.usePublisher,ql=gt.useEmitterValue,ht=gt.useEmitter,Pw=uo({usePublisher:Mo,useEmitterValue:ql,useEmitter:ht}),ru=Mp({usePublisher:Mo,useEmitterValue:ql,useEmitter:ht}),iD=oi(function(){var a=fg(function(Ua){return uh.createElement("td",
null,"Item $",Ua)}),d=fg(null),k=fg(null),N=fg(null),ea=fg({}),ka=fg(Wp),sa=fg(zi),La=function(Ua,cb){return void 0===cb&&(cb=null),Sj(Pf(ea,zg(function(ib){return ib[Ua]}),$h()),cb)};return{context:d,itemContent:a,fixedHeaderContent:k,fixedFooterContent:N,components:ea,computeItemKey:ka,scrollerRef:sa,TableComponent:La("Table","table"),TableHeadComponent:La("TableHead","thead"),TableFooterComponent:La("TableFoot","tfoot"),TableBodyComponent:La("TableBody","tbody"),TableRowComponent:La("TableRow",
"tr"),ScrollerComponent:La("Scroller","div"),EmptyPlaceholder:La("EmptyPlaceholder"),ScrollSeekPlaceholder:La("ScrollSeekPlaceholder"),FillerRow:La("FillerRow")}}),jD=oi(function(a){return wh({},a[0],a[1])},jj(Vy,iD)),Tn=function(a){return uh.createElement("tr",null,uh.createElement("td",{style:{height:a.height}}))},Qw=function(a){return uh.createElement("tr",null,uh.createElement("td",{style:{height:a.height,padding:0,border:0}}))},$y=uh.memo(function(){var a=Xj("listState"),d=kp("sizeRanges"),k=
Xj("useWindowScroll"),N=Xj("customScrollParent"),ea=kp("windowScrollContainerState"),ka=kp("scrollContainerState");k=N||k?ea:ka;var sa=Xj("itemContent");ea=Xj("trackItemSizes");N=Vi(d,Xj("itemSize"),ea,k,Xj("log"),void 0,N);d=N.callbackRef;var La=N.ref;N=uh.useState(0);var Ua=N[0],cb=N[1];Sw("deviation",function(bc){Ua!==bc&&(La.current.style.marginTop=bc+"px",cb(bc))});ea=Xj("EmptyPlaceholder");var ib=Xj("ScrollSeekPlaceholder")||Tn;k=Xj("FillerRow")||Qw;N=Xj("TableBodyComponent");var nb=Xj("TableRowComponent"),
Pb=Xj("computeItemKey"),Sb=Xj("isSeeking");ka=Xj("paddingTopAddition");var Nb=Xj("firstItemIndex"),lc=Xj("statefulTotalCount"),yc=Xj("context");if(0===lc&&ea)return(0,si.createElement)(ea,Zj(ea,yc));ea=a.offsetTop+ka+Ua;ka=a.offsetBottom;ea=0<ea?uh.createElement(k,{height:ea,key:"padding-top"}):null;k=0<ka?uh.createElement(k,{height:ka,key:"padding-bottom"}):null;a=a.items.map(function(bc){var qc=bc.originalIndex,mc=Pb(qc+Nb,bc.data,yc);return Sb?(0,si.createElement)(ib,wh({},Zj(ib,yc),{key:mc,index:bc.index,
height:bc.size,type:bc.type||"item"})):(0,si.createElement)(nb,wh({},Zj(nb,yc),{key:mc,"data-index":qc,"data-known-size":bc.size,"data-item-index":bc.index,style:{overflowAnchor:"none"}}),sa(bc.index,bc.data,yc))});return(0,si.createElement)(N,wh({ref:d,"data-test-id":"virtuoso-item-list"},Zj(N,yc)),[ea].concat(a,[k]))}),az=function(a){a=a.children;var d=(0,si.useContext)(tv),k=kp("viewportHeight"),N=kp("fixedItemHeight"),ea=Hj(cn(k,function(ka){return Ki(ka,"height")}));return uh.useEffect(function(){d&&
(k(d.viewportHeight),N(d.itemHeight))},[d,k,N]),uh.createElement("div",{style:$q,ref:ea,"data-viewport-type":"element"},a)},kD=function(a){a=a.children;var d=(0,si.useContext)(tv),k=kp("windowViewportRect"),N=kp("fixedItemHeight"),ea=Xj("customScrollParent");ea=Gh(k,ea);return uh.useEffect(function(){d&&(N(d.itemHeight),k({offsetTop:0,visibleHeight:d.viewportHeight,visibleWidth:100}))},[d,k,N]),uh.createElement("div",{ref:ea,style:$q,"data-viewport-type":"window"},a)},Rw=hk(jD,{required:{},optional:{context:"context",
followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",
fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},
events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},uh.memo(function(a){var d=Xj("useWindowScroll"),k=Xj("customScrollParent"),N=kp("fixedHeaderHeight"),ea=kp("fixedFooterHeight"),ka=Xj("fixedHeaderContent"),sa=Xj("fixedFooterContent"),La=Xj("context");
N=Hj(cn(N,function(nb){return Ki(nb,"height")}));var Ua=Hj(cn(ea,function(nb){return Ki(nb,"height")}));ea=k||d?Vr:vv;d=k||d?kD:az;k=Xj("TableComponent");var cb=Xj("TableHeadComponent"),ib=Xj("TableFooterComponent");ka=ka?uh.createElement(cb,wh({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:N},Zj(cb,La)),ka()):null;sa=sa?uh.createElement(ib,wh({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Ua},Zj(ib,La)),sa()):null;return uh.createElement(ea,wh({},a),uh.createElement(d,
null,uh.createElement(k,wh({style:{borderSpacing:0}},Zj(k,La)),[ka,uh.createElement($y,{key:"TableBody"}),sa])))})),kp=Rw.usePublisher,Xj=Rw.useEmitterValue,Sw=Rw.useEmitter,vv=uo({usePublisher:kp,useEmitterValue:Xj,useEmitter:Sw}),Vr=Mp({usePublisher:kp,useEmitterValue:Xj,useEmitter:Sw}),Tw=Df(ba(22)),Bp=function(a){function d(k){k=a.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+k+" for more information.")||this;if(void 0===
k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}Tp(d,a);return d}(Cq(Error)),bz={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",
darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",
floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",
lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",
mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",
sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},cz=/^#[a-fA-F0-9]{6}$/,No=/^#[a-fA-F0-9]{8}$/,wv=/^#[a-fA-F0-9]{3}$/,Hm=/^#[a-fA-F0-9]{4}$/,su=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,
xv=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,lp=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,Gj=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,it=function(a){return 7===a.length&&a[1]===a[2]&&a[3]===a[4]&&a[5]===a[6]?"#"+a[1]+a[3]+a[5]:a},Wr=kr(lr,lr.length,[]),dz=
ba(598),mp=Df(ba(22)),Un=class{static insertTextFirefox(a,d){a.setRangeText(d,a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:d,inputType:"insertText",isComposing:!1}))}static insert(a,d){const k=a.ownerDocument,N=k.activeElement;N!==a&&a.focus();k.execCommand("insertText",!1,d)||Un.insertTextFirefox(a,d);N===k.body?a.blur():N instanceof HTMLElement&&N!==a&&N.focus()}static set(a,d){a.select();Un.insert(a,d)}static getSelection(a){const {selectionStart:d,
selectionEnd:k}=a;return a.value.slice(d?d:void 0,k?k:void 0)}static wrapSelection(a,d,k){const {selectionStart:N,selectionEnd:ea}=a,ka=Un.getSelection(a);Un.insert(a,d+ka+(null!=k?k:d));a.selectionStart=(N||0)+d.length;a.selectionEnd=(ea||0)+d.length}static replace(a,d,k){let N=0;a.value.replace(d,(...ea)=>{const ka=N+ea[ea.length-2],sa=ea[0].length;a.selectionStart=ka;a.selectionEnd=ka+sa;ea="string"===typeof k?k:k(...ea);Un.insert(a,ea);a.selectionStart=ka;N+=ea.length-sa;return ea})}static findLineEnd(a,
d){const k=a.lastIndexOf("\n",d-1)+1;return"\t"!==a.charAt(k)?d:k+1}static indent(a){var d;const {selectionStart:k,selectionEnd:N,value:ea}=a;var ka=ea.slice(k,N);if((ka=null==(d=/\n/g.exec(ka))?void 0:d.length)&&0<ka){d=ea.lastIndexOf("\n",k-1)+1;var sa=a.value.slice(d,N-1);ka=sa.replace(/^|\n/g,"$\x26  ");sa=ka.length-sa.length;a.setSelectionRange(d,N-1);Un.insert(a,ka);a.setSelectionRange(k+1,N+sa)}else Un.insert(a,"  ")}static unindent(a){const {selectionStart:d,selectionEnd:k,value:N}=a;var ea=
N.lastIndexOf("\n",d-1)+1;const ka=Un.findLineEnd(N,k);var sa=a.value.slice(ea,ka);const La=sa.replace(/(^|\n)(\t| {1,2})/g,"$1");sa=sa.length-La.length;a.setSelectionRange(ea,ka);Un.insert(a,La);ea=(ea=/\t| {1,2}/.exec(N.slice(ea,d)))?ea[0].length:0;a.setSelectionRange(d-ea,Math.max(d-ea,k-sa))}},yv=ba(598),Xr=a=>a.stopPropagation(),Dn=mp.memo(function({font:a,text:d,color:k,fontStyle:N,fontSize:ea,fontWeight:ka,offsetX:sa=0,offsetY:La=0,scale:Ua=1,isEditing:cb=!1,pointerEvents:ib=!1,onBlur:nb,onChange:Pb}){const Sb=
mp.useRef(null),Nb=mp.useRef(!1),lc=mp.useCallback(Uc=>{Pb(Rt.normalizeText(Uc.currentTarget.value))},[Pb]),yc=mp.useCallback(Uc=>{if("Escape"!==Uc.key)if("Tab"===Uc.key&&0===d.length)Uc.preventDefault();else{if("Meta"!==Uc.key&&!Uc.metaKey)Uc.stopPropagation();else if("z"===Uc.key&&Uc.metaKey){document.execCommand(Uc.shiftKey?"redo":"undo",!1);Uc.stopPropagation();Uc.preventDefault();return}"Tab"===Uc.key&&(Uc.preventDefault(),Uc.shiftKey?Un.unindent(Uc.currentTarget):Un.indent(Uc.currentTarget),
null==Pb?void 0:Pb(Rt.normalizeText(Uc.currentTarget.value)))}},[Pb]),bc=mp.useCallback(Uc=>{cb&&(Uc.currentTarget.setSelectionRange(0,0),null==nb?void 0:nb())},[nb]),qc=mp.useCallback(Uc=>{cb&&Nb.current&&document.activeElement===Uc.currentTarget&&Uc.currentTarget.select()},[cb]),mc=mp.useCallback(Uc=>{cb&&Uc.stopPropagation()},[cb]);mp.useEffect(()=>{cb&&requestAnimationFrame(()=>{Nb.current=!0;const Uc=Sb.current;Uc&&(Uc.focus(),Uc.select())})},[cb,nb]);const Pc=mp.useRef(null);mp.useLayoutEffect(()=>
{const Uc=Pc.current;if(Uc){var Ed=kj(d||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:ea,lineHeight:1,fontWeight:ka},4);Uc.style.transform=`scale(${Ua}, ${Ua}) translate(${sa}px, ${La}px)`;Uc.style.width=Ed[0]+1+"px";Uc.style.height=Ed[1]+1+"px"}},[d,ka,ea,La,sa,Ua]);return(0,yv.jsx)("div",{className:"tl-text-label-wrapper",children:(0,yv.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:Pc,style:{font:a,fontStyle:N,fontSize:ea,fontWeight:ka,color:k,pointerEvents:ib?"all":"none",
userSelect:cb?"text":"none"},children:[cb?(0,yv.jsx)("textarea",{ref:Sb,style:{font:a,color:k,fontStyle:N,fontSize:ea,fontWeight:ka},className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:d,color:k,onFocus:qc,onChange:lc,onKeyDown:yc,onBlur:bc,onPointerDown:mc,onContextMenu:Xr,onCopy:Xr,onPaste:Xr,onCut:Xr}):
d,"​"]})})}),on=ba(598),Uw={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Yr=class extends Bn{constructor(){super(...arguments);kb(this,"canEdit",!0);kb(this,"ReactComponent",pe(({events:a,isErasing:d,isBinding:k,isSelected:N,isEditing:ea,onEditingEnd:ka})=>{const {props:{size:[sa,La],stroke:Ua,fill:cb,noFill:ib,strokeWidth:nb,strokeType:Pb,borderRadius:Sb,opacity:Nb,label:lc,italic:yc,fontWeight:bc,fontSize:qc}}=this;var mc=lc||ea?kj(lc,{fontFamily:"var(--ls-font-family)",fontSize:qc,lineHeight:1,fontWeight:bc},
4):[0,0];const Pc=ge.mul(this.props.size,.5);mc=Math.max(.5,Math.min(1,sa/mc[0],La/mc[1]));const Uc=this.getBounds(),Ed=Tw.useMemo(()=>ge.sub(Pc,ge.toFixed([Uc.width/2,Uc.height/2])),[Uc,mc,Pc]),Ud=Tw.useCallback(ff=>{var oe;null==(oe=this.update)?void 0:oe.call(this,{label:ff})},[lc]);return(0,on.jsxs)("div",uf(me({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",children:[(0,on.jsx)(Dn,{font:"20px / 1 var(--ls-font-family)",text:lc,color:Qh(Ua,"text"),offsetX:Ed[0],
offsetY:Ed[1],fontSize:qc,scale:mc,isEditing:ea,onChange:Ud,onBlur:ka,fontStyle:yc?"italic":"normal",fontWeight:bc,pointerEvents:!!lc}),(0,on.jsxs)(dp,{opacity:d?.2:Nb,children:[k&&(0,on.jsx)(ps,{mode:"svg",strokeWidth:nb,size:[sa,La]}),(0,on.jsx)("rect",{className:N||!ib?"tl-hitarea-fill":"tl-hitarea-stroke",x:nb/2,y:nb/2,rx:Sb,ry:Sb,width:Math.max(.01,sa-nb),height:Math.max(.01,La-nb),pointerEvents:"all"}),(0,on.jsx)("rect",{x:nb/2,y:nb/2,rx:Sb,ry:Sb,width:Math.max(.01,sa-nb),height:Math.max(.01,
La-nb),strokeWidth:nb,stroke:Qh(Ua,"stroke"),strokeDasharray:"dashed"===Pb?"8 2":void 0,fill:ib?"none":Qh(cb,"background")})]})]}))}));kb(this,"setScaleLevel",a=>hi(this,null,function*(){this.update({scaleLevel:a,fontSize:Uw[null!=a?a:"md"],strokeWidth:Uw[null!=a?a:"md"]/10});this.onResetBounds()}));kb(this,"ReactIndicator",pe(()=>{const {props:{size:[a,d],borderRadius:k,isLocked:N}}=this;return(0,on.jsx)("g",{children:(0,on.jsx)("rect",{width:a,height:d,rx:k,ry:k,fill:"transparent",strokeDasharray:N?
"8 2":void 0})})}));kb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));void 0!==a.borderRadius&&(a.borderRadius=Math.max(0,a.borderRadius));return fn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};kb(Yr,"id","box");kb(Yr,"defaultProps",{id:"box",parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,
opacity:1,label:""});de([Kf],Yr.prototype,"scaleLevel",1);de([Ig],Yr.prototype,"setScaleLevel",2);var zv=Df(ba(22)),Cp=ba(598),Av={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},jt=class extends wx{constructor(){super(...arguments);kb(this,"canEdit",!0);kb(this,"ReactComponent",pe(({isSelected:a,isErasing:d,events:k,isEditing:N,onEditingEnd:ea})=>{const {size:[ka,sa],stroke:La,fill:Ua,noFill:cb,strokeWidth:ib,strokeType:nb,opacity:Pb,label:Sb,italic:Nb,fontWeight:lc,fontSize:yc}=this.props;var bc=Sb||N?kj(Sb,
{fontFamily:"var(--ls-font-family)",fontSize:yc,lineHeight:1,fontWeight:lc},4):[0,0];const qc=ge.mul(this.props.size,.5);bc=Math.max(.5,Math.min(1,ka/bc[0],sa/bc[1]));const mc=this.getBounds(),Pc=zv.useMemo(()=>ge.sub(qc,ge.toFixed([mc.width/2,mc.height/2])),[mc,bc,qc]),Uc=zv.useCallback(Ed=>{var Ud;null==(Ud=this.update)?void 0:Ud.call(this,{label:Ed})},[Sb]);return(0,Cp.jsxs)("div",uf(me({},k),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-ellipse-container",children:[(0,Cp.jsx)(Dn,
{font:"18px / 1 var(--ls-font-family)",text:Sb,color:Qh(La,"text"),offsetX:Pc[0],offsetY:Pc[1],scale:bc,isEditing:N,onChange:Uc,onBlur:ea,fontStyle:Nb?"italic":"normal",fontSize:yc,fontWeight:lc,pointerEvents:!!Sb}),(0,Cp.jsxs)(dp,uf(me({},k),{opacity:d?.2:Pb,children:[(0,Cp.jsx)("ellipse",{className:a||!cb?"tl-hitarea-fill":"tl-hitarea-stroke",cx:ka/2,cy:sa/2,rx:Math.max(.01,(ka-ib)/2),ry:Math.max(.01,(sa-ib)/2)}),(0,Cp.jsx)("ellipse",{cx:ka/2,cy:sa/2,rx:Math.max(.01,(ka-ib)/2),ry:Math.max(.01,(sa-
ib)/2),strokeWidth:ib,stroke:Qh(La,"stroke"),strokeDasharray:"dashed"===nb?"8 2":void 0,fill:cb?"none":Qh(Ua,"background")})]}))]}))}));kb(this,"setScaleLevel",a=>hi(this,null,function*(){this.update({scaleLevel:a,fontSize:Av[null!=a?a:"md"],strokeWidth:Av[null!=a?a:"md"]/10});this.onResetBounds()}));kb(this,"ReactIndicator",pe(()=>{const {size:[a,d],isLocked:k}=this.props;return(0,Cp.jsx)("g",{children:(0,Cp.jsx)("ellipse",{cx:a/2,cy:d/2,rx:a/2,ry:d/2,strokeWidth:2,fill:"transparent",strokeDasharray:k?
"8 2":"undefined"})})}));kb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return fn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {size:[d,k],stroke:N,fill:ea,noFill:ka,strokeWidth:sa,strokeType:La,opacity:Ua}=this.props;return(0,Cp.jsxs)("g",{opacity:Ua,children:[(0,Cp.jsx)("ellipse",{className:ka?"tl-hitarea-stroke":"tl-hitarea-fill",cx:d/2,cy:k/2,rx:Math.max(.01,(d-sa)/2),ry:Math.max(.01,
(k-sa)/2)}),(0,Cp.jsx)("ellipse",{cx:d/2,cy:k/2,rx:Math.max(.01,(d-sa)/2),ry:Math.max(.01,(k-sa)/2),strokeWidth:sa,stroke:Qh(N,"stroke"),strokeDasharray:"dashed"===La?"8 2":void 0,fill:ka?"none":Qh(ea,"background")})]})}};kb(jt,"id","ellipse");kb(jt,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});de([Kf],jt.prototype,"scaleLevel",1);de([Ig],jt.prototype,
"setScaleLevel",2);var tu=ba(598),Bv=class extends Xv{constructor(){super(...arguments);kb(this,"ReactComponent",pe(({events:a})=>{const d=this.getBounds(),k=Cg(),N=k.selectedShapesArray.some(ka=>k.shapesInGroups([this]).includes(ka)),ea=this.ReactIndicator;return(0,tu.jsxs)(dp,uf(me({},a),{className:"tl-group-container",children:[(0,tu.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,d.width-2),height:Math.max(.01,d.height-2),pointerEvents:"all"}),N&&(0,tu.jsx)("g",{stroke:"var(--color-selectedFill)",
children:(0,tu.jsx)(ea,{})})]}))}));kb(this,"ReactIndicator",pe(()=>{const a=this.getBounds();return(0,tu.jsx)("rect",{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:a.width+16,height:a.height+16,fill:"transparent"})}))}};kb(Bv,"id","group");kb(Bv,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});var Cv=ba(598),Dv={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},qf=class extends Kt{constructor(a={}){super(a);kb(this,"ReactComponent",pe(({events:d,isErasing:k})=>{const {pointsPath:N,
props:{stroke:ea,strokeWidth:ka,opacity:sa}}=this;return(0,Cv.jsx)(dp,uf(me({},d),{opacity:k?.2:1,children:(0,Cv.jsx)("path",{d:N,strokeWidth:16*ka,stroke:Qh(ea,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:sa})}))}));kb(this,"setScaleLevel",d=>hi(this,null,function*(){this.update({scaleLevel:d,strokeWidth:Dv[null!=d?d:"md"]});this.onResetBounds()}));kb(this,"ReactIndicator",pe(()=>{const {pointsPath:d,props:k}=this;return(0,Cv.jsx)("path",{d,fill:"none",
strokeDasharray:k.isLocked?"8 2":"undefined"})}));kb(this,"validateProps",d=>{d=fn(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});ef(this)}get pointsPath(){const {points:a}=this.props;return Gu.getCurvedPathForPoints(a)}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:k,opacity:N}}=this;return(0,Cv.jsx)("path",{d:a,strokeWidth:16*k,stroke:Qh(d,"stroke"),fill:"none",pointerEvents:"all",
strokeLinejoin:"round",strokeLinecap:"round",opacity:N})}};kb(qf,"id","highlighter");kb(qf,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});de([Kf],qf.prototype,"pointsPath",1);de([Kf],qf.prototype,"scaleLevel",1);de([Ig],qf.prototype,"setScaleLevel",2);var gh=Df(ba(22)),kt=ba(598),Vw={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},ar=class extends Bn{constructor(){super(...arguments);
kb(this,"canChangeAspectRatio",!0);kb(this,"canFlip",!1);kb(this,"canEdit",!0);kb(this,"htmlAnchorRef",gh.createRef());kb(this,"setScaleLevel",a=>hi(this,null,function*(){var d;const k=ge.mul(this.props.size,Vw[null!=a?a:"md"]/Vw[null!=(d=this.props.scaleLevel)?d:"md"]);this.update({scaleLevel:a});yield lk();this.update({size:k})}));kb(this,"onResetBounds",a=>{var d;if(this.htmlAnchorRef.current){const k=this.htmlAnchorRef.current.getBoundingClientRect(),[N,ea]=ge.div([k.width,k.height],null!=(d=
null==a?void 0:a.zoom)?d:1);this.update({size:[Math.max(Math.min(N||400,1400),10),Math.max(Math.min(ea||400,1400),10)]})}return this});kb(this,"ReactComponent",pe(({events:a,isErasing:d,isEditing:k})=>{const {props:{html:N,scaleLevel:ea}}=this,ka=vn(),sa=Cg(),La=sa.selectedIds.has(this.id),Ua=ka||La&&!k||"select"!==sa.selectedTool.id,cb=gh.useCallback(nb=>{Ua||nb.stopPropagation()},[Ua]),ib=Vw[null!=ea?ea:"md"];gh.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:sa.viewport.camera.zoom}),
sa.persist(!0))},[]);return(0,kt.jsx)(Io,uf(me({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,kt.jsx)("div",{onWheelCapture:cb,onPointerDown:cb,onPointerUp:cb,className:"tl-html-container",style:{pointerEvents:ka||!k&&!La?"none":"all",overflow:k?"auto":"hidden",width:`calc(100% / ${ib})`,height:`calc(100% / ${ib})`,transform:`scale(${ib})`},children:(0,kt.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:N.trim()}})})}))}));
kb(this,"ReactIndicator",pe(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,kt.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})}));kb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return fn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};kb(ar,"id","html");kb(ar,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});de([Kf],
ar.prototype,"scaleLevel",1);de([Ig],ar.prototype,"setScaleLevel",2);var ez=Df(ba(22)),lt=ba(598),Zr=class extends Bn{constructor(){super(...arguments);kb(this,"frameRef",ez.createRef());kb(this,"canEdit",!0);kb(this,"onIFrameSourceChange",a=>{this.update({url:a})});kb(this,"reload",()=>{var a,d;this.frameRef.current&&(this.frameRef.current.src=null==(d=null==(a=this.frameRef)?void 0:a.current)?void 0:d.src)});kb(this,"ReactComponent",pe(({events:a,isErasing:d,isEditing:k})=>{ez.useRef(null);const N=
Cg();return(0,lt.jsx)(Io,uf(me({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,lt.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:k||N.readOnly?"all":"none",userSelect:"none"},children:this.props.url&&(0,lt.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,lt.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin allow-presentation"})})})}))}));
kb(this,"ReactIndicator",pe(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,lt.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}))}};kb(Zr,"id","iframe");kb(Zr,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});de([Ig],Zr.prototype,"onIFrameSourceChange",2);de([Ig],Zr.prototype,"reload",2);var lD=Df(ba(22)),Ji=ba(598),Ev=class extends xx{constructor(){super(...arguments);kb(this,"ReactComponent",pe(({events:a,
isErasing:d,isBinding:k,asset:N})=>{const {props:{opacity:ea,objectFit:ka,clipping:sa,size:[La,Ua]}}=this,[cb,ib,nb,Pb]=Array.isArray(sa)?sa:[sa,sa,sa,sa],{handlers:Sb}=lD.useContext(gj);return(0,Ji.jsxs)(Io,uf(me({},a),{opacity:d?.2:ea,children:[k&&(0,Ji.jsx)(ps,{mode:"html",strokeWidth:4,size:[La,Ua]}),(0,Ji.jsx)("div",{"data-asset-loaded":!!N,className:"tl-image-shape-container",children:N?(0,Ji.jsx)("img",{src:Sb?Sb.makeAssetUrl(N.src):N.src,draggable:!1,style:{position:"relative",top:-cb,left:-Pb,
width:La+(Pb-ib),height:Ua+(cb-nb),objectFit:ka}}):"Asset is missing"})]}))}));kb(this,"ReactIndicator",pe(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,Ji.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})}))}getShapeSVGJsx({assets:a}){var d,k;const N=this.getBounds(),{assetId:ea,clipping:ka}=this.props;if(a=a.find(sa=>sa.id===ea)){Array.isArray(ka);const sa=null==(k=null==(d=window.logseq)?void 0:d.api)?void 0:k.make_asset_url;return(0,Ji.jsx)("image",
{width:N.width,height:N.height,href:sa?sa(a.src):a.src})}return super.getShapeSVGJsx({})}};kb(Ev,"id","image");kb(Ev,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var Ww=Df(ba(22)),Xw=Df(ba(22)),fz=ba(598),Dp=ba(598),gz={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},mD=Xw.memo(function({style:a,start:d,end:k,decorationStart:N,decorationEnd:ea,scaleLevel:ka}){const sa=ge.dist(d,k);if(2>sa)return null;
const {strokeWidth:La}=a,Ua=1+La*gz[null!=ka?ka:"md"]/10,cb="M"+ge.toFixed(d)+"L"+ge.toFixed(k);ka=Math.min(sa/3,La*gz[null!=ka?ka:"md"]);N=N?Dq(d,k,ka):null;ea=ea?Dq(k,d,ka):null;return(0,Dp.jsxs)(Dp.Fragment,{children:[(0,Dp.jsx)("path",{className:"tl-stroke-hitarea",d:cb}),(0,Dp.jsx)("path",{d:cb,strokeWidth:Ua,stroke:a.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===a.strokeType?"8 4":void 0,pointerEvents:"stroke"}),N&&(0,Dp.jsx)(Bq,{left:N.left,middle:d,right:N.right,
stroke:a.stroke,strokeWidth:Ua}),ea&&(0,Dp.jsx)(Bq,{left:ea.left,middle:k,right:ea.right,stroke:a.stroke,strokeWidth:Ua})]})}),Ep=ba(598),Vn=ba(598),nD={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Oo=class extends Tu{constructor(){super(...arguments);kb(this,"hideSelection",!0);kb(this,"canEdit",!0);kb(this,"ReactComponent",pe(({events:a,isErasing:d,isEditing:k,onEditingEnd:N})=>{const {stroke:ea,handles:{start:ka,end:sa},opacity:La,label:Ua,italic:cb,fontWeight:ib,fontSize:nb,id:Pb}=this.props,Sb=Ua||
k?kj(Ua||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:nb,lineHeight:1,fontWeight:ib},6):[0,0],Nb=ge.med(ka.point,sa.point);var lc=ge.dist(ka.point,sa.point);lc=Math.max(.5,Math.min(1,Math.max(lc/(Sb[1]+128),lc/(Sb[0]+128))));const yc=this.getBounds(),bc=Ww.useMemo(()=>ge.sub(Nb,ge.toFixed([yc.width/2,yc.height/2])),[yc,lc,Nb]),qc=Ww.useCallback(mc=>{var Pc;null==(Pc=this.update)?void 0:Pc.call(this,{label:mc})},[Ua]);return(0,Vn.jsxs)("div",uf(me({},a),{style:{width:"100%",height:"100%",
overflow:"hidden"},className:"tl-line-container",children:[(0,Vn.jsx)(Dn,{font:"20px / 1 var(--ls-font-family)",text:Ua,fontSize:nb,color:Qh(ea,"text"),offsetX:bc[0],offsetY:bc[1],scale:lc,isEditing:k,onChange:qc,onBlur:N,fontStyle:cb?"italic":"normal",fontWeight:ib,pointerEvents:!!Ua}),(0,Vn.jsxs)(dp,{opacity:d?.2:La,id:Pb+"_svg",children:[(0,Vn.jsx)(ns,{id:Pb,bounds:yc,labelSize:Sb,offset:bc,scale:lc}),(0,Vn.jsx)("g",{pointerEvents:"none",mask:Ua||k?`url(#${Pb}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));
kb(this,"setScaleLevel",a=>hi(this,null,function*(){this.update({scaleLevel:a,fontSize:nD[null!=a?a:"md"]});this.onResetBounds()}));kb(this,"ReactIndicator",pe(({isEditing:a})=>{const {id:d,decorations:k,label:N,strokeWidth:ea,fontSize:ka,fontWeight:sa,handles:{start:La,end:Ua},isLocked:cb}=this.props,ib=this.getBounds(),nb=N||a?kj(N,{fontFamily:"var(--ls-font-family)",fontSize:ka,lineHeight:1,fontWeight:sa},6):[0,0],Pb=ge.med(La.point,Ua.point);var Sb=ge.dist(La.point,Ua.point);Sb=Math.max(.5,Math.min(1,
Math.max(Sb/(nb[1]+128),Sb/(nb[0]+128))));const Nb=Ww.useMemo(()=>ge.sub(Pb,ge.toFixed([ib.width/2,ib.height/2])),[ib,Sb,Pb]);return(0,Vn.jsxs)("g",{children:[(0,Vn.jsx)("path",{mask:N?`url(#${d}_clip)`:"",d:im({strokeWidth:ea},La.point,Ua.point,null==k?void 0:k.start,null==k?void 0:k.end),strokeDasharray:cb?"8 2":"undefined"}),N&&!a&&(0,Vn.jsx)("rect",{x:ib.width/2-nb[0]/2*Sb+Nb[0],y:ib.height/2-nb[1]/2*Sb+Nb[1],width:nb[0]*Sb,height:nb[1]*Sb,rx:4*Sb,ry:4*Sb,fill:"transparent"})]})}));kb(this,"validateProps",
a=>fn(this,a))}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx({preview:a}){const {stroke:d,fill:k,strokeWidth:N,strokeType:ea,decorations:ka,label:sa,scaleLevel:La,handles:{start:Ua,end:cb}}=this.props,ib=ge.med(Ua.point,cb.point);return(0,Vn.jsxs)(Vn.Fragment,{children:[(0,Vn.jsx)(mD,{style:{stroke:Qh(d,"text"),fill:k,strokeWidth:N,strokeType:ea},scaleLevel:La,start:Ua.point,end:cb.point,decorationStart:null==ka?void 0:ka.start,decorationEnd:null==ka?void 0:ka.end}),
a&&(0,Vn.jsx)(Vn.Fragment,{children:(0,Vn.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${ib[0]}, ${ib[1]})`,textAnchor:"middle",fill:Qh(d,"text"),stroke:Qh(d,"text"),children:sa})})]})}};kb(Oo,"id","line");kb(Oo,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",
strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});de([Kf],Oo.prototype,"scaleLevel",1);de([Ig],Oo.prototype,"setScaleLevel",2);var Zl=Df(ba(22)),hj=ba(598),$r={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},uu=pe(({type:a,fill:d,opacity:k,children:N})=>{const ea="var(--ls-secondary-background-color)"!==d?Qh(d,"background"):"var(--ls-tertiary-background-color)";d=d&&"var(--ls-secondary-background-color)"!==d?ti(d)?`var(--ls-highlight-color-${d})`:d:"var(--ls-secondary-background-color)";return(0,hj.jsxs)("div",
{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===a?"page":"block"}`,children:[(0,hj.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",style:{opacity:k,background:"P"===a?ea:`linear-gradient(0deg, ${d}, ${ea})`}}),(0,hj.jsx)("div",{className:"relative",children:N})]})}),rl=class extends Bn{constructor(a={}){var d;super(a);kb(this,"hideRotateHandle",!0);kb(this,"canChangeAspectRatio",!0);kb(this,"canFlip",!0);kb(this,"canEdit",!0);kb(this,"persist",null);kb(this,
"initialHeightCalculated",!0);kb(this,"getInnerHeight",null);kb(this,"setCollapsed",k=>hi(this,null,function*(){var N;if("B"===this.props.blockType){if(this.update({compact:k}),this.canResize[1]=!k,!k)this.onResetBounds()}else{const ea=this.props.size[1];this.canResize[1]=!k;this.update({isAutoResizing:!k,collapsed:k,size:[this.props.size[0],k?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:k?ea:this.props.collapsedHeight})}null==(N=this.persist)?void 0:N.call(this)}));kb(this,
"setScaleLevel",k=>hi(this,null,function*(){var N;const ea=ge.mul(this.props.size,$r[null!=k?k:"md"]/$r[null!=(N=this.props.scaleLevel)?N:"md"]);this.update({scaleLevel:k});yield lk();this.update({size:ea})}));kb(this,"onResetBounds",k=>{k=this.getAutoResizeHeight();null!==k&&1<Math.abs(k-this.props.size[1])&&(this.update({size:[this.props.size[0],k]}),this.initialHeightCalculated=!0);return this});kb(this,"onResize",(k,N)=>{var ea;const {bounds:ka,rotation:sa,scale:[La,Ua]}=N;k=[...this.scale];0>
La&&(k[0]*=-1);0>Ua&&(k[1]*=-1);N=ka.height;this.props.isAutoResizing&&(N=null!=(ea=this.getAutoResizeHeight())?ea:N);return this.update({point:[ka.minX,ka.minY],size:[Math.max(1,ka.width),Math.max(1,N)],scale:k,rotation:sa})});kb(this,"PortalComponent",pe(({})=>{const {props:{pageId:k,fill:N,opacity:ea}}=this,{renderers:ka}=Zl.useContext(gj),sa=Cg(),La=Zl.useRef(null),[,Ua]=this.useComponentSize(La,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");
if(null==ka||!ka.Page)return null;const {Page:cb,Block:ib}=ka,[nb,Pb]=Zl.useState(!1);Zl.useEffect(()=>{var Sb,Nb;if(this.props.isAutoResizing){const lc=(null!=(Nb=null==(Sb=this.getInnerHeight)?void 0:Sb.call(this))?Nb:Ua)+this.getHeaderHeight();Ua&&1<Math.abs(lc-this.props.size[1])&&(this.update({size:[this.props.size[0],lc]}),nb&&sa.persist(!0))}},[Ua,this.props.isAutoResizing]);Zl.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();sa.persist(!0)})},[this.initialHeightCalculated]);
Zl.useEffect(()=>{setTimeout(function(){Pb(!0)})},[]);return(0,hj.jsxs)(hj.Fragment,{children:[(0,hj.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>sa.viewport.camera.zoom?"optimizeSpeed":"auto",background:N&&"var(--ls-secondary-background-color)"!==N?ti(N)?`var(--ls-highlight-color-${N})`:N:"var(--ls-secondary-background-color)",opacity:ea}}),(0,hj.jsx)("div",{ref:La,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?
"visible":"auto"},children:(nb||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,hj.jsx)(ib,{blockId:k}):(0,hj.jsx)(cb,{pageName:k}))})]})}));kb(this,"ReactComponent",pe(k=>{var N;const {events:ea,isErasing:ka,isEditing:sa,isBinding:La}=k,{props:{opacity:Ua,pageId:cb,fill:ib,scaleLevel:nb,strokeWidth:Pb,size:Sb}}=this,Nb=Cg(),{renderers:lc,handlers:yc}=Zl.useContext(gj);this.persist=()=>Nb.persist();const bc=vn(),qc=Nb.selectedIds.has(this.id)&&1===Nb.selectedIds.size,
mc=Nb.isIn("logseq-portal.creating")&&!cb,Pc=(bc||qc&&!sa||"select"!==Nb.selectedTool.id)&&!mc,Uc=Zl.useCallback(wd=>{Pc||wd.stopPropagation()},[Pc]),Ed=1===Nb.selectedShapesArray.length&&Nb.selectedShapesArray.some(wd=>"logseq-portal"===wd.type&&wd.props.id!==this.props.id&&cb&&wd.props.pageId===cb),Ud=$r[null!=nb?nb:"md"];Zl.useEffect(()=>this.props.collapsed&&sa?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):
()=>{},[sa,this.props.collapsed]);Zl.useEffect(()=>{if(mc){const wd=[Nb.viewport.bounds.width,Nb.viewport.bounds.height],Jd=Nb.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(Jd[0]>wd[0]-400||Jd[1]>wd[1]-240||1.5<Nb.viewport.camera.zoom||.5>Nb.viewport.camera.zoom)&&Nb.viewport.zoomToBounds(uf(me({},this.bounds),{minY:this.bounds.maxY+25}))}},[Nb.viewport.bounds.height.toFixed(2)]);const ff=Zl.useCallback(wd=>{this.initialHeightCalculated=!1;const Jd=Jj(wd)?"B":"P";this.update({pageId:wd,
size:[400,320],blockType:Jd,compact:"B"===Jd});Nb.selectTool("select");Nb.history.resume();Nb.history.persist()},[]),oe=this.PortalComponent;var Ue=Zl.useMemo(()=>{var wd;if(cb&&"B"===this.props.blockType)return null==(wd=null==yc?void 0:yc.queryBlockByUUID(cb))?void 0:wd.content},[null==yc?void 0:yc.queryBlockByUUID,cb]);Ue="B"===this.props.blockType&&"string"!==typeof Ue;const Bf=(!this.props.collapsed||sa)&&!Ue;if(null==lc||!lc.Page)return null;const {Breadcrumb:gf,PageName:vf}=lc,Rd={width:`calc(100% / ${Ud})`,
height:`calc(100% / ${Ud})`,opacity:ka?.2:1};1!==Ud&&(Rd.transform=`scale(${Ud})`);return(0,hj.jsxs)(Io,uf(me({style:{pointerEvents:"all"}},ea),{children:[La&&(0,hj.jsx)(ps,{mode:"html",strokeWidth:Pb,size:Sb}),(0,hj.jsx)("div",{"data-inner-events":!Pc,onWheelCapture:Uc,onPointerDown:Uc,onPointerUp:Uc,style:{width:"100%",height:"100%",pointerEvents:bc||!sa&&!qc?"none":"all"},children:mc?(0,hj.jsx)(Gv,{onChange:ff,onAddBlock:wd=>{setTimeout(()=>{var Jd,rd,Md;Nb.api.editShape(this);null==(Md=null==
(rd=null==(Jd=window.logseq)?void 0:Jd.api)?void 0:rd.edit_block)?void 0:Md.call(rd,wd)})},placeholder:"Create or search your graph..."}):(0,hj.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":cb,"data-portal-selected":Ed,"data-editing":sa,style:Rd,children:[!this.props.compact&&!Ue&&(0,hj.jsx)(uu,{type:null!=(N=this.props.blockType)?N:"P",fill:ib,opacity:Ua,children:"P"===this.props.blockType?(0,hj.jsx)(vf,{pageName:cb}):(0,hj.jsx)(gf,{blockId:cb})}),
Ue&&(0,hj.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),Bf&&(0,hj.jsx)(oe,me({},k))]})})]}))}));kb(this,"ReactIndicator",pe(()=>{const k=this.getBounds();return(0,hj.jsx)("rect",{width:k.width,height:k.height,fill:"transparent",rx:8,ry:8,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));kb(this,"validateProps",k=>{var N;if(void 0!==k.size){const ea=$r[null!=(N=this.props.scaleLevel)?N:"md"];k.size[0]=Math.max(k.size[0],60*ea);k.size[1]=Math.max(k.size[1],40*ea)}return fn(this,
k)});ef(this);a.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(d=a.size)?void 0:d[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(a){return a?/^\(\(.*\)\)$/.test(a)&&40===a.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}useComponentSize(a,d=""){const [k,N]=Zl.useState([0,0]),ea=Cg();Zl.useEffect(()=>{setTimeout(()=>{if(null==a?0:a.current){const ka=
d?a.current.querySelector(d):a.current;if(ka){const sa=()=>{const {width:Ua,height:cb}=ka.getBoundingClientRect(),ib=ge.div([Ua,cb],ea.viewport.camera.zoom);N(ib);return ib};sa();this.getInnerHeight=()=>sa()[1];const La=new ResizeObserver(()=>{sa()});La.observe(ka);return()=>{La.disconnect()}}}return()=>{}},10)},[a,d]);return k}getHeaderHeight(){var a;const d=$r[null!=(a=this.props.scaleLevel)?a:"md"];return this.props.compact?0:40*d}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+
this.getInnerHeight():null}getShapeSVGJsx({}){var a,d,k;const N=this.getBounds();return(0,hj.jsxs)(hj.Fragment,{children:[(0,hj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?ti(this.props.fill)?`var(--ls-highlight-color-${this.props.fill})`:this.props.fill:"var(--ls-secondary-background-color)",stroke:Qh(this.props.fill,"background"),strokeWidth:null!=(a=this.props.strokeWidth)?a:2,fillOpacity:null!=(d=this.props.opacity)?d:.2,width:N.width,rx:8,ry:8,
height:N.height}),!this.props.compact&&(0,hj.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?Qh(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(k=this.props.opacity)?k:.2,x:1,y:1,width:N.width-2,height:38,rx:8,ry:8}),(0,hj.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${N.width/2}, ${10+N.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",
stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}};kb(rl,"id","logseq-portal");kb(rl,"defaultSearchQuery","");kb(rl,"defaultSearchFilter",null);kb(rl,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});de([Kf],rl.prototype,"collapsed",
1);de([Ig],rl.prototype,"setCollapsed",2);de([Kf],rl.prototype,"scaleLevel",1);de([Ig],rl.prototype,"setScaleLevel",2);var {min:rq,PI:hz}=Math,Wn=hz+1E-4,br=ba(598),iz={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},Qg={easing:a=>Math.sin(a*Math.PI/2),simulatePressure:!0},Yw={easing:a=>a*a,simulatePressure:!1},cr=class extends Kt{constructor(a={}){super(a);kb(this,"ReactComponent",pe(({events:d,isErasing:k})=>{const {props:{opacity:N}}=this;return(0,br.jsx)(dp,uf(me({},d),{opacity:k?.2:N,children:this.getShapeSVGJsx()}))}));
kb(this,"setScaleLevel",d=>hi(this,null,function*(){this.update({scaleLevel:d,strokeWidth:iz[null!=d?d:"md"]});this.onResetBounds()}));kb(this,"ReactIndicator",pe(()=>{const {pointsPath:d}=this;return(0,br.jsx)("path",{d,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));kb(this,"validateProps",d=>{d=fn(this,d);void 0!==d.strokeWidth&&(d.strokeWidth=Math.max(d.strokeWidth,1));return d});ef(this)}get pointsPath(){var a=this.props;if(2>a.points.length)var d="";else d=uf(me({size:1+1.5*a.strokeWidth,
thinning:.65,streamline:.65,smoothing:.65},.5===a.points[1][2]?Qg:Yw),{last:a.isComplete}),a=tk(a.points,d),d=Gu.getSvgPathFromStroke(Fq(a,d));return d}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:d,strokeWidth:k,strokeType:N}}=this;return(0,br.jsx)("path",{pointerEvents:"all",d:a,strokeWidth:k/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:Qh(d,"text"),fill:Qh(d,"text"),strokeDasharray:"dashed"===N?"12 4":void 0})}};
kb(cr,"id","pencil");kb(cr,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});de([Kf],cr.prototype,"pointsPath",1);de([Kf],cr.prototype,"scaleLevel",1);de([Ig],cr.prototype,"setScaleLevel",2);var dr=Df(ba(22)),Ym=ba(598),Zw={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},En=class extends Ar{constructor(){super(...arguments);kb(this,"canEdit",!0);kb(this,"ReactComponent",pe(({events:a,isErasing:d,
isSelected:k,isEditing:N,onEditingEnd:ea})=>{const {offset:[ka,sa],props:{stroke:La,fill:Ua,noFill:cb,strokeWidth:ib,opacity:nb,strokeType:Pb,label:Sb,italic:Nb,fontWeight:lc,fontSize:yc}}=this,bc=this.getVertices(ib/2).join();var qc=Sb||N?kj(Sb,{fontFamily:"var(--ls-font-family)",fontSize:yc,lineHeight:1,fontWeight:lc},4):[0,0];const mc=[this.props.size[0]/2,2*this.props.size[1]/3];qc=Math.max(.5,Math.min(1,this.props.size[0]/(2*qc[0]),this.props.size[1]/(2*qc[1])));const Pc=this.getBounds(),Uc=
dr.useMemo(()=>ge.sub(mc,ge.toFixed([Pc.width/2,Pc.height/2])),[Pc,qc,mc]),Ed=dr.useCallback(Ud=>{var ff;null==(ff=this.update)?void 0:ff.call(this,{label:Ud})},[Sb]);return(0,Ym.jsxs)("div",uf(me({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,Ym.jsx)(Dn,{font:"20px / 1 var(--ls-font-family)",text:Sb,fontSize:yc,color:Qh(La,"text"),offsetX:Uc[0],offsetY:Uc[1]/qc,scale:qc,isEditing:N,onChange:Ed,onBlur:ea,fontStyle:Nb?"italic":"normal",fontWeight:lc,pointerEvents:!!Sb}),(0,Ym.jsx)(dp,
{opacity:d?.2:nb,children:(0,Ym.jsxs)("g",{transform:`translate(${ka}, ${sa})`,children:[(0,Ym.jsx)("polygon",{className:k||!cb?"tl-hitarea-fill":"tl-hitarea-stroke",points:bc}),(0,Ym.jsx)("polygon",{points:bc,stroke:Qh(La,"stroke"),fill:cb?"none":Qh(Ua,"background"),strokeWidth:ib,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Pb?"8 2":void 0})]})})]}))}));kb(this,"setScaleLevel",a=>hi(this,null,function*(){this.update({scaleLevel:a,fontSize:Zw[null!=a?a:"md"],strokeWidth:Zw[null!=a?
a:"md"]/10});this.onResetBounds()}));kb(this,"ReactIndicator",pe(()=>{const {offset:[a,d],props:{strokeWidth:k,isLocked:N}}=this;return(0,Ym.jsx)("g",{children:(0,Ym.jsx)("polygon",{transform:`translate(${a}, ${d})`,points:this.getVertices(k/2).join(),strokeDasharray:N?"8 2":"undefined"})})}));kb(this,"validateProps",a=>{void 0!==a.sides&&(a.sides=Math.max(a.sides,3));return fn(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {offset:[d,k],props:{stroke:N,
fill:ea,noFill:ka,strokeWidth:sa,opacity:La,strokeType:Ua}}=this;a=this.getVertices(sa/2).join();return(0,Ym.jsxs)("g",{transform:`translate(${d}, ${k})`,opacity:La,children:[(0,Ym.jsx)("polygon",{className:ka?"tl-hitarea-stroke":"tl-hitarea-fill",points:a}),(0,Ym.jsx)("polygon",{points:a,stroke:Qh(N,"stroke"),fill:ka?"none":Qh(ea,"background"),strokeWidth:sa,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===Ua?"8 2":void 0})]})}};kb(En,"id","polygon");kb(En,"defaultProps",{id:"polygon",
parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});de([Kf],En.prototype,"scaleLevel",1);de([Ig],En.prototype,"setScaleLevel",2);var Fp=Df(ba(22)),Im=ba(598),vu={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},as=class extends yx{constructor(){super(...arguments);kb(this,"ReactComponent",pe(({events:a,isErasing:d,isEditing:k,onEditingEnd:N})=>{const {props:{opacity:ea,
fontFamily:ka,fontSize:sa,fontWeight:La,italic:Ua,lineHeight:cb,text:ib,stroke:nb,padding:Pb}}=this,Sb=Fp.useRef(null),Nb=Fp.useRef(!1),lc=Fp.useRef(null),yc=Fp.useCallback(Uc=>{const {isSizeLocked:Ed}=this.props;Uc=Rt.normalizeText(Uc.currentTarget.value);Ed?this.update({text:Uc,size:this.getAutoSizedBoundingBox({text:Uc})}):this.update({text:Uc})},[]),bc=Fp.useCallback(Uc=>{if("Escape"!==Uc.key)if("Tab"===Uc.key&&0===ib.length)Uc.preventDefault();else{if("Meta"!==Uc.key&&!Uc.metaKey)Uc.stopPropagation();
else if("z"===Uc.key&&Uc.metaKey){Uc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Uc.stopPropagation();Uc.preventDefault();return}"Tab"===Uc.key&&(Uc.preventDefault(),Uc.shiftKey?Un.unindent(Uc.currentTarget):Un.indent(Uc.currentTarget),this.update({text:Rt.normalizeText(Uc.currentTarget.value)}))}},[]),qc=Fp.useCallback(Uc=>{k&&(null==N?void 0:N())},[N]),mc=Fp.useCallback(Uc=>{k&&Nb.current&&document.activeElement===Uc.currentTarget&&Uc.currentTarget.select()},[k]),Pc=
Fp.useCallback(Uc=>{k&&Uc.stopPropagation()},[k]);Fp.useEffect(()=>{k&&requestAnimationFrame(()=>{Nb.current=!0;const Uc=Sb.current;Uc&&(Uc.focus(),Uc.select())})},[k,N]);Fp.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},[]);return(0,Im.jsx)(Io,uf(me({},a),{opacity:d?.2:ea,children:(0,Im.jsx)("div",{ref:lc,className:"tl-text-shape-wrapper","data-hastext":!!ib,"data-isediting":k,style:{fontFamily:ka,fontStyle:Ua?"italic":"normal",fontSize:sa,fontWeight:La,
padding:Pb,lineHeight:cb,color:Qh(nb,"text")},children:k?(0,Im.jsx)("textarea",{ref:Sb,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:ib,onFocus:mc,onChange:yc,onKeyDown:bc,onBlur:qc,onPointerDown:Pc}):(0,Im.jsxs)(Im.Fragment,{children:[ib,"​"]})})}))}));kb(this,"setScaleLevel",a=>hi(this,null,function*(){this.update({scaleLevel:a,
fontSize:vu[null!=a?a:"md"]});this.onResetBounds()}));kb(this,"ReactIndicator",pe(({isEditing:a})=>{const {props:{borderRadius:d,isLocked:k},bounds:N}=this;return a?null:(0,Im.jsx)("rect",{width:N.width,height:N.height,rx:d,ry:d,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})}));kb(this,"validateProps",a=>fn(this,a));kb(this,"getBounds",()=>{const [a,d]=this.props.point,[k,N]=this.props.size;return{minX:a,minY:d,maxX:a+k,maxY:d+N,width:k,height:N}});kb(this,"onResizeStart",({isSingle:a})=>
{var d;if(!a)return this;this.scale=[...(null!=(d=this.props.scale)?d:[1,1])];return this.update({isSizeLocked:!1})});kb(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getAutoSizedBoundingBox(a={}){const {text:d=this.props.text,fontFamily:k=this.props.fontFamily,fontSize:N=this.props.fontSize,fontWeight:ea=this.props.fontWeight,lineHeight:ka=this.props.lineHeight,padding:sa=
this.props.padding}=a,[La,Ua]=kj(d,{fontFamily:k,fontSize:N,lineHeight:ka,fontWeight:ea},sa);return[La,Ua]}getShapeSVGJsx(){var a=window.navigator.userAgent.toLowerCase();if(a.includes("webkit")&&!a.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:d,stroke:k,fontSize:N,fontFamily:ea}}=this;a=this.getBounds();return(0,Im.jsx)("foreignObject",{width:a.width,height:a.height,children:(0,Im.jsx)("div",{style:{color:Qh(k,"text"),fontSize:N,fontFamily:ea,display:"contents"},children:d})})}};
kb(as,"id","text");kb(as,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});de([Kf],as.prototype,"scaleLevel",1);de([Ig],as.prototype,"setScaleLevel",2);var wu=Df(ba(22)),xu=ba(598),mt=class extends Bn{constructor(){super(...arguments);kb(this,"canFlip",!1);kb(this,"canEdit",
!0);kb(this,"canChangeAspectRatio",!1);kb(this,"ReactComponent",pe(({events:a,isErasing:d,asset:k,isEditing:N})=>{const {props:{opacity:ea}}=this,ka=vn();var sa=Cg();const La=sa.selectedIds.has(this.id),Ua=ka||La&&!N||"select"!==sa.selectedTool.id;sa=wu.useCallback(ib=>{Ua||ib.stopPropagation()},[Ua]);const {handlers:cb}=wu.useContext(gj);return(0,xu.jsx)(Io,uf(me({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:ea}},a),{children:(0,xu.jsx)("div",{onWheelCapture:sa,onPointerDown:sa,onPointerUp:sa,
className:"tl-video-container",style:{pointerEvents:ka||!N&&!La?"none":"all",overflow:N?"auto":"hidden"},children:k&&(0,xu.jsx)("video",{controls:!0,src:cb?cb.makeAssetUrl(k.src):k.src})})}))}));kb(this,"ReactIndicator",pe(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,xu.jsx)("rect",{width:a,height:d,fill:"transparent",strokeDasharray:k?"8 2":"undefined"})}))}};kb(mt,"id","video");kb(mt,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",
clipping:0,isAspectRatioLocked:!0});var um=ba(598),$w=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,ax=class extends Bn{constructor(){super(...arguments);kb(this,"aspectRatio",480/853);kb(this,"canChangeAspectRatio",!1);kb(this,"canFlip",!1);kb(this,"canEdit",!0);kb(this,"onYoutubeLinkChange",a=>{this.update({url:a,size:ax.defaultProps.size})});kb(this,"ReactComponent",pe(({events:a,isErasing:d,isEditing:k})=>{const N=Cg();return(0,um.jsx)(Io,
uf(me({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,um.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:k||N.readOnly?"all":"none",userSelect:"none",background:`url('https://img.youtube.com/vi/${this.embedId}/mqdefault.jpg') no-repeat center/cover`},children:this.embedId?(0,um.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,um.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",
width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,um.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},children:(0,um.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,um.jsxs)("g",
{children:[(0,um.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,um.jsx)("g",{children:(0,um.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,um.jsxs)("g",{fill:"#fff",children:[(0,um.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,um.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))}));kb(this,"ReactIndicator",pe(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,um.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}));kb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[0]*this.aspectRatio,1));return fn(this,a)})}get embedId(){var a,d;const k=this.props.url,
N=k.match($w);return null!=(d=null!=(a=null==N?void 0:N[1])?a:k)?d:""}getShapeSVGJsx(){const a=this.getBounds(),d=this.embedId;return d?(0,um.jsxs)("g",{children:[(0,um.jsx)("image",{width:a.width,height:a.height,href:`https://img.youtube.com/vi/${d}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,um.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,um.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},bs=ax;kb(bs,"id","youtube");kb(bs,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});de([Kf],bs.prototype,"embedId",1);de([Ig],bs.prototype,"onYoutubeLinkChange",2);var cs=Df(ba(22)),sq=ba(598),jz=/https?:\/\/twitter.com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,kz=class extends Bn{constructor(){super(...arguments);kb(this,"canFlip",!1);kb(this,"canEdit",!0);kb(this,"initialHeightCalculated",
!0);kb(this,"getInnerHeight",null);kb(this,"onTwitterLinkChange",a=>{this.update({url:a,size:kz.defaultProps.size})});kb(this,"ReactComponent",pe(({events:a,isErasing:d,isEditing:k})=>{const {renderers:{Tweet:N}}=cs.useContext(gj),ea=Cg(),ka=cs.useRef(null),[,sa]=this.useComponentSize(ka);cs.useEffect(()=>{var La,Ua;const cb=null!=(Ua=null==(La=this.getInnerHeight)?void 0:La.call(this))?Ua:sa;sa&&1<Math.abs(cb-this.props.size[1])&&(this.update({size:[this.props.size[0],cb]}),ea.persist(!0))},[sa]);
cs.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();ea.persist(!0)})},[this.initialHeightCalculated]);return(0,sq.jsx)(Io,uf(me({style:{overflow:"hidden",pointerEvents:"all",opacity:d?.2:1}},a),{children:(0,sq.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:k||ea.readOnly?"all":"none",userSelect:"none"},children:this.embedId?(0,sq.jsx)("div",{ref:ka,children:(0,sq.jsx)(N,{tweetId:this.embedId})}):null})}))}));
kb(this,"ReactIndicator",pe(()=>{const {props:{size:[a,d],isLocked:k}}=this;return(0,sq.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}));kb(this,"onResetBounds",a=>{a=this.getAutoResizeHeight();null!==a&&1<Math.abs(a-this.props.size[1])&&(this.update({size:[this.props.size[0],a]}),this.initialHeightCalculated=!0);return this});kb(this,"onResize",(a,d)=>{var k;const {bounds:N,rotation:ea,scale:[ka,sa]}=d;a=[...this.scale];0>ka&&(a[0]*=-1);0>sa&&(a[1]*=
-1);d=null!=(k=this.getAutoResizeHeight())?k:N.height;return this.update({point:[N.minX,N.minY],size:[Math.max(1,N.width),Math.max(1,d)],scale:a,rotation:ea})});kb(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.min(Math.max(a.size[0],300),550),a.size[1]=Math.max(a.size[1],1));return fn(this,a)})}get embedId(){var a,d;const k=this.props.url,N=k.match(jz);return null!=(d=null!=(a=null==N?void 0:N[1])?a:k)?d:""}useComponentSize(a,d=""){const [k,N]=cs.useState([0,0]),ea=Cg();cs.useEffect(()=>
{if(null==a?0:a.current){const ka=d?a.current.querySelector(d):a.current;if(ka){const sa=()=>{const {width:Ua,height:cb}=ka.getBoundingClientRect(),ib=ge.div([Ua,cb],ea.viewport.camera.zoom);N(ib);return ib};sa();this.getInnerHeight=()=>sa()[1];const La=new ResizeObserver(()=>{sa()});La.observe(ka);return()=>{La.disconnect()}}}return()=>{}},[a,d]);return k}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const a=this.getBounds();return this.embedId?(0,sq.jsxs)("g",
{children:[(0,sq.jsx)("rect",{width:a.width,height:a.height,fill:"#15202b",rx:8,ry:8}),(0,sq.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,sq.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},ds=kz;kb(ds,"id","tweet");kb(ds,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});de([Kf],ds.prototype,"embedId",1);de([Ig],ds.prototype,"onTwitterLinkChange",2);var er=Df(ba(22)),Fv=ba(598),vm=class extends Bn{constructor(){super(...arguments);kb(this,"frameRef",er.createRef());kb(this,"canChangeAspectRatio",!0);kb(this,"canFlip",!0);kb(this,"canEdit",!0);kb(this,"ReactComponent",
pe(({events:a,asset:d,isErasing:k,isEditing:N})=>{er.useRef(null);const {handlers:ea}=er.useContext(gj);Cg();const ka=vn();return(0,Fv.jsx)(Io,uf(me({style:{overflow:"hidden",pointerEvents:"all",opacity:k?.2:1}},a),{children:d?(0,Fv.jsx)("embed",{src:ea?ea.inflateAsset(d.src).url:d.src,className:"relative tl-pdf-container",onWheelCapture:stop,onPointerDown:stop,onPointerUp:stop,style:{width:"100%",height:"100%",pointerEvents:!ka&&N?"all":"none"}}):null}))}));kb(this,"ReactIndicator",pe(()=>{const {props:{size:[a,
d],isLocked:k}}=this;return(0,Fv.jsx)("rect",{width:a,height:d,fill:"transparent",rx:8,ry:8,strokeDasharray:k?"8 2":"undefined"})}))}};kb(vm,"id","pdf");kb(vm,"defaultProps",{id:"pdf",type:"pdf",parentId:"page",point:[0,0],size:[595,842],assetId:""});ba(598);var yu=[Yr,jt,qf,Ev,mt,Oo,cr,En,as,bs,ds,Zr,ar,vm,rl,Bv],pn=class extends Mq{constructor(){super(...arguments);kb(this,"Shape",Yr)}};kb(pn,"id","box");kb(pn,"shortcut","whiteboard/rectangle");var lz=class extends Mq{constructor(){super(...arguments);
kb(this,"Shape",jt)}};kb(lz,"id","ellipse");kb(lz,"shortcut","whiteboard/ellipse");var Zm=class extends Yv{};kb(Zm,"id","erase");kb(Zm,"shortcut","whiteboard/eraser");var np=class extends Uu{constructor(){super(...arguments);kb(this,"Shape",qf);kb(this,"simplify",!0);kb(this,"simplifyTolerance",.618)}};kb(np,"id","highlighter");kb(np,"shortcut","whiteboard/highlighter");var bx=class extends Zv{constructor(){super(...arguments);kb(this,"Shape",Oo)}};kb(bx,"id","line");kb(bx,"shortcut","whiteboard/connector");
var mz=class extends Uu{constructor(){super(...arguments);kb(this,"Shape",cr);kb(this,"simplify",!1)}};kb(mz,"id","pencil");kb(mz,"shortcut","whiteboard/pencil");var oD=class extends Mq{constructor(){super(...arguments);kb(this,"Shape",En)}};kb(oD,"id","polygon");var sl=class extends $v{constructor(){super(...arguments);kb(this,"Shape",as)}};kb(sl,"id","text");kb(sl,"shortcut","whiteboard/text");var fr=class extends Mq{constructor(){super(...arguments);kb(this,"Shape",bs)}};kb(fr,"id","youtube");
var Po=class extends Qi{constructor(){super(...arguments);kb(this,"creatingShape");kb(this,"offset",[0,0]);kb(this,"onEnter",()=>{this.app.history.pause();Mc(()=>{var a=ge.sub(this.app.inputs.originPoint,this.offset);this.app.settings.snapToGrid&&(a=ge.snap(a,8));this.creatingShape=a=new rl({id:fk(),parentId:this.app.currentPage.id,point:a,size:rl.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.app.currentPage.addShapes(a);this.app.setEditingShape(a);this.app.setSelectedShapes([a])})});
kb(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.creatingShape)break;this.app.selectTool("select");break;case "canvas":a.order||this.app.selectTool("select")}});kb(this,"onExit",()=>{var a;this.creatingShape&&(this.app.history.resume(),(null==(a=this.creatingShape)?0:a.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};kb(Po,"id","creating");var cx=class extends Qi{constructor(){super(...arguments);
kb(this,"cursor","crosshair");kb(this,"onPointerDown",a=>{this.tool.transition("creating")})}};kb(cx,"id","idle");var Lh=class extends Br{constructor(){super(...arguments);kb(this,"Shape",rl);kb(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])})}};kb(Lh,"id","logseq-portal");kb(Lh,"shortcut","whiteboard/portal");kb(Lh,"states",[cx,Po]);kb(Lh,"initial","idle");var pD=class extends Mq{constructor(){super(...arguments);kb(this,"Shape",ar)}};kb(pD,"id","youtube");var qD=class extends Mq{constructor(){super(...arguments);
kb(this,"Shape",Zr)}};kb(qD,"id","iframe");var rD=Df(ba(601)),nh=ba(598),zu=new Map(yu.map(a=>[a.id,a])),op=class{constructor(a){kb(this,"shapes");kb(this,"pageId");kb(this,"assets");a&&this.load(a)}load(a){var d;const k=null==(d=null==a?void 0:a.pages)?void 0:d[0];this.pageId=null==k?void 0:k.id;this.assets=a.assets;this.shapes=null==k?void 0:k.shapes.map(N=>{var ea=N.type;if(!ea)throw Error("No shape type provided.");const ka=zu.get(ea);if(!ka)throw Error(`Could not find shape class for ${ea}`);
return new ka(N)}).filter(N=>"group"!==N.type)}generatePreviewJsx(a,d){var k,N;const ea=[...(null!=(k=this.shapes)?k:[]).map(cb=>cb.getRotatedBounds())];(k=null==a?void 0:a.currentView)&&ea.push(k);let ka=Ef.getCommonBounds(ea);if(!ka)return null;ka=Ef.expandBounds(ka,16);ka=d?Ef.ensureRatio(ka,d):ka;const sa=cb=>[(cb[0]-ka.minX).toFixed(2),(cb[1]-ka.minY).toFixed(2)],[La,Ua]=k?sa([k.minX,k.minY]):[0,0];return ka&&(0,nh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":ka.minX.toFixed(2),
"data-common-bound-y":ka.minY.toFixed(2),"data-common-bound-width":ka.width.toFixed(2),"data-common-bound-height":ka.height.toFixed(2),viewBox:[0,0,ka.width,ka.height].join(" "),children:[(0,nh.jsx)("defs",{children:k&&(0,nh.jsxs)(nh.Fragment,{children:[(0,nh.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${La}, ${Ua})`,width:k.width,height:k.height}),(0,nh.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,nh.jsx)("rect",{width:ka.width,height:ka.height,fill:"white"}),(0,nh.jsx)("use",
{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,nh.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==(N=this.shapes)?void 0:N.map(cb=>{var ib,nb;const {bounds:Pb,props:{rotation:Sb}}=cb,[Nb,lc]=sa([Pb.minX,Pb.minY]),yc=+(180*((null!=Sb?Sb:0)+(null!=(ib=Pb.rotation)?ib:0))/Math.PI).toFixed(2),[bc,qc]=[(Pb.width/2).toFixed(2),(Pb.height/2).toFixed(2)];return(0,nh.jsx)("g",{transform:[`translate(${Nb}, ${lc})`,`rotate(${yc}, ${bc}, ${qc})`].join(" "),children:cb.getShapeSVGJsx({assets:null!=
(nb=this.assets)?nb:[]})},cb.id)})}),(0,nh.jsx)("rect",{mask:k?`url(#${this.pageId}-camera-mask)`:"",width:ka.width,height:ka.height,fill:"transparent"}),k&&(0,nh.jsx)("use",{id:"minimap-camera-rect","data-x":La,"data-y":Ua,"data-width":k.width,"data-height":k.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/a.camera.zoom})]})}exportAsSVG(a){return(a=this.generatePreviewJsx(void 0,a))?rD.default.renderToString(a):""}},es=Df(ba(22)),Au=ba(598),nt=es.forwardRef((a,
d)=>{var {value:k,className:N}=a;a=Sf(a,["autoResize","value","className"]);return(0,Au.jsx)("div",{className:"tl-input"+(N?" "+N:""),children:(0,Au.jsxs)("div",{className:"tl-input-sizer",children:[(0,Au.jsx)("div",{className:"tl-input-hidden",children:k}),(0,Au.jsx)("input",me({ref:d,value:k,className:"tl-text-input",type:"text"},a))]})})}),mi=ba(598),fs=({type:a,active:d})=>(0,mi.jsx)("span",{className:"tl-type-tag","data-active":d,children:(0,mi.jsx)("i",{className:`tie tie-${({B:"block",P:"page",
WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",BS:"block-search",PS:"page-search"})[a]}`})}),ot=(a,d)=>(0,mi.jsx)("span",{children:a.split(new RegExp(`(${d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((k,N)=>1===N%2?(0,mi.jsx)("mark",{className:"tl-highlighted",children:k}):k).map((k,N)=>(0,mi.jsx)(Gm.default.Fragment,{children:k},N))}),Qo=(a,d)=>{const {handlers:k}=Gm.default.useContext(gj),[N,ea]=Gm.default.useState(null),ka=Le(a,200);Gm.default.useEffect(()=>{let sa=
!1;if(0<ka.length){const La={"pages?":!0,"blocks?":!0,"files?":!1};"B"===d?La["pages?"]=!1:"P"===d&&(La["blocks?"]=!1);k.search(ka,La).then(Ua=>{sa||ea(Ua)})}else ea(null);return()=>{sa=!0}},[ka,null==k?void 0:k.search]);return N},Gv=pe(({className:a,style:d,placeholder:k,onChange:N,onBlur:ea,onAddBlock:ka})=>{const [sa,La]=Gm.default.useState(rl.defaultSearchQuery),[Ua,cb]=Gm.default.useState(rl.defaultSearchFilter),ib=Gm.default.useRef(null),{handlers:nb,renderers:Pb}=Gm.default.useContext(gj),
Sb=nb.t,Nb=Gm.default.useCallback(oe=>{var Ue;setTimeout(()=>N(oe));null==(Ue=ib.current)?void 0:Ue.blur();oe&&(rl.defaultSearchQuery="",rl.defaultSearchFilter=null)},[]),lc=Gm.default.useCallback(oe=>{if(oe=null==nb?void 0:nb.addNewBlock(oe))Nb(oe),null==ka?void 0:ka(oe);return oe},[ka]),yc=Gm.default.useRef(null),[bc,qc]=Gm.default.useState(0),mc=Qo(sa,Ua),[Pc,Uc]=Gm.default.useState("circle-plus"),[Ed,Ud]=Gm.default.useState(!1);Gm.default.useEffect(()=>{setTimeout(()=>{var oe;null==(oe=ib.current)?
void 0:oe.focus()})},[Ua]);Gm.default.useEffect(()=>{rl.defaultSearchQuery=sa;rl.defaultSearchFilter=Ua},[sa,Ua]);const ff=Gm.default.useMemo(()=>{var oe;const Ue=[],Bf=null==Pb?void 0:Pb.Breadcrumb;if(!Bf||!nb)return[];ka&&Ue.push({actionIcon:"circle-plus",onChosen:()=>!!lc(sa),element:(0,mi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,mi.jsx)(fs,{active:!0,type:"BA"}),0<sa.length?(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsx)("strong",{children:Sb("whiteboard/new-block")}),sa]}):
(0,mi.jsx)("strong",{children:Sb("whiteboard/new-block-no-colon")})]})});(null==(oe=null==mc?void 0:mc.pages)?0:oe.some(gf=>gf.toLowerCase()===sa.toLowerCase()))||!sa||Ue.push({actionIcon:"circle-plus",onChosen:()=>{Nb(sa);return!0},element:(0,mi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,mi.jsx)(fs,{active:!0,type:"PA"}),(0,mi.jsx)("strong",{children:Sb("whiteboard/new-page")}),sa]})},{actionIcon:"circle-plus",onChosen:()=>{null==nb?void 0:nb.addNewWhiteboard(sa);Nb(sa);return!0},
element:(0,mi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,mi.jsx)(fs,{active:!0,type:"WA"}),(0,mi.jsx)("strong",{children:Sb("whiteboard/new-whiteboard")}),sa]})});0===sa.length&&null===Ua&&Ue.push({actionIcon:"search",onChosen:()=>{cb("B");return!0},element:(0,mi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,mi.jsx)(fs,{type:"BS"}),Sb("whiteboard/search-only-blocks")]})},{actionIcon:"search",onChosen:()=>{cb("P");return!0},element:(0,mi.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,mi.jsx)(fs,{type:"PS"}),Sb("whiteboard/search-only-pages")]})});Ua&&"P"!==Ua||!mc||!mc.pages||Ue.push(...mc.pages.map(gf=>({actionIcon:"search",onChosen:()=>{Nb(gf);return!0},element:(0,mi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,mi.jsx)(fs,{type:nb.isWhiteboardPage(gf)?"WP":"P"}),ot(gf,sa)]})})));Ua&&"B"!==Ua||!mc||!mc.blocks||Ue.push(...mc.blocks.filter(gf=>gf.content&&gf.uuid).map(({content:gf,uuid:vf})=>{const Rd=nb.queryBlockByUUID(vf);return{actionIcon:"search",
onChosen:()=>{var wd,Jd,rd;return Rd?(Nb(vf),null==(rd=null==(Jd=null==(wd=window.logseq)?void 0:wd.api)?void 0:Jd.set_blocks_id)?void 0:rd.call(Jd,[vf]),!0):!1},element:Rd?(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,mi.jsx)(fs,{type:"B"}),(0,mi.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,mi.jsx)(Bf,{blockId:vf})})]}),(0,mi.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,mi.jsx)("div",{className:"tl-quick-search-option-placeholder"}),
ot(gf,sa)]})]}):(0,mi.jsx)("div",{className:"tl-quick-search-option-row",children:Sb("whiteboard/cache-outdated")})}}));return Ue},[sa,Ua,mc,null==Pb?void 0:Pb.Breadcrumb,nb]);Gm.default.useEffect(()=>{const oe=Ue=>{var Bf,gf;let vf=bc;"ArrowDown"===Ue.key?vf=Math.min(ff.length-1,bc+1):"ArrowUp"===Ue.key?vf=Math.max(0,bc-1):"Enter"===Ue.key?(null==(Bf=ff[bc])?void 0:Bf.onChosen(),Ue.stopPropagation(),Ue.preventDefault()):"Backspace"===Ue.key&&0===sa.length?cb(null):"Escape"===Ue.key&&Nb("");vf!==
bc&&(Bf=ff[vf],qc(vf),Uc(Bf.actionIcon),Ue.stopPropagation(),Ue.preventDefault(),(Ue=null==(gf=yc.current)?void 0:gf.querySelector(".tl-quick-search-option:nth-child("+(vf+1)+")"))&&(null==Ue?void 0:Ue.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",oe,!0);return()=>{document.removeEventListener("keydown",oe,!0)}},[ff,bc,sa]);return(0,mi.jsxs)("div",{className:"tl-quick-search "+(null!=a?a:""),style:d,children:[(0,mi.jsx)(bH,{icon:Pc,onClick:()=>{var oe;null==(oe=ff[bc])?void 0:
oe.onChosen()}}),(0,mi.jsxs)("div",{className:"tl-quick-search-input-container",children:[Ua&&(0,mi.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,mi.jsx)(fs,{type:Ua}),"B"===Ua?"Search blocks":"Search pages",(0,mi.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>cb(null),children:(0,mi.jsx)(Eh,{name:"x"})})]}),(0,mi.jsx)(nt,{ref:ib,type:"text",value:sa,className:"tl-quick-search-input",placeholder:null!=k?k:"Create or search your graph...",onChange:oe=>
La(oe.target.value),onKeyDown:oe=>{"Enter"===oe.key&&Nb(sa);oe.stopPropagation()},onFocus:()=>{Ud(!0)},onBlur:()=>{Ud(!1);null==ea?void 0:ea()}})]}),0<ff.length&&(0,mi.jsx)("div",{onWheelCapture:oe=>oe.stopPropagation(),className:"tl-quick-search-options",ref:yc,style:{visibility:Ed?"visible":"hidden",pointerEvents:Ed?"all":"none"},children:(0,mi.jsx)(pq,{style:{height:40*Math.min(Math.max(1,ff.length),12)},totalCount:ff.length,itemContent:oe=>{const {actionIcon:Ue,onChosen:Bf,element:gf}=ff[oe];
return(0,mi.jsx)("div",{"data-focused":oe===bc,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{Uc(Ue);qc(oe)},onPointerDownCapture:vf=>{Bf()&&(vf.stopPropagation(),vf.preventDefault())},children:gf},oe)}})})]})}),kk=ba(598),dx=pe(function(a){var {pageId:d,portalType:k,refs:N,side:ea,onRefsChange:ka}=a;a=Sf(a,"pageId portalType shapeType refs side onRefsChange".split(" "));const {handlers:{t:sa}}=My.default.useContext(gj),La=N.length+(d?1:0),Ua=0===N.length,cb=nb=>{nb&&!N.includes(nb)&&
Ua&&ka([...N,nb])},ib=!(!d||!k);return(0,kk.jsx)(Mr,uf(me({},a),{side:ea,align:"start",alignOffset:-6,label:(0,kk.jsx)(ne,{content:sa("whiteboard/link"),sideOffset:14,children:(0,kk.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",children:[(0,kk.jsx)(Eh,{name:0<La?"link":"add-link"}),0<La&&(0,kk.jsx)("div",{className:"tl-shape-links-count",children:La})]})}),children:(0,kk.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":ib,children:[ib&&(0,kk.jsxs)("div",
{className:"tl-shape-links-reference-panel",children:[(0,kk.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,kk.jsx)(Eh,{className:"opacity-50",name:"internal-link"}),sa("whiteboard/references")]}),(0,kk.jsx)(en,{type:k,id:d})]}),(0,kk.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,kk.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,kk.jsx)(Eh,{className:"opacity-50",name:"add-link"}),sa("whiteboard/link-to-any-page-or-block")]}),
Ua&&(0,kk.jsx)(Gv,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:sa("whiteboard/start-typing-to-search"),onChange:cb}),0<N.length&&(0,kk.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:N.map((nb,Pb)=>(0,kk.jsx)(en,{id:nb,type:Jj(nb)?"B":"P",onRemove:()=>{ka(N.filter((Sb,Nb)=>Pb!==Nb))},showContent:!0},nb))})]})]})}))}),rk=Df(ba(22)),[nz]=Vh("ToggleGroup",[nw]),oz=nw(),tq=rk.default.forwardRef((a,d)=>{const {type:k}=a;a=Sf(a,["type"]);if("single"===k)return rk.default.createElement(JH,
Se({},a,{ref:d}));if("multiple"===k)return rk.default.createElement(uD,Se({},a,{ref:d}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[sD,tD]=nz("ToggleGroup"),JH=rk.default.forwardRef((a,d)=>{const {value:k,defaultValue:N,onValueChange:ea=()=>{}}=a,ka=Sf(a,["value","defaultValue","onValueChange"]),[sa,La]=Ic({prop:k,defaultProp:N,onChange:ea});return rk.default.createElement(sD,{scope:a.__scopeToggleGroup,type:"single",value:sa?[sa]:[],onItemActivate:La,onItemDeactivate:rk.default.useCallback(()=>
La(""),[La])},rk.default.createElement(vD,Se({},ka,{ref:d})))}),uD=rk.default.forwardRef((a,d)=>{const {value:k,defaultValue:N,onValueChange:ea=()=>{}}=a,ka=Sf(a,["value","defaultValue","onValueChange"]),[sa=[],La]=Ic({prop:k,defaultProp:N,onChange:ea}),Ua=rk.default.useCallback(ib=>La((nb=[])=>[...nb,ib]),[La]),cb=rk.default.useCallback(ib=>La((nb=[])=>nb.filter(Pb=>Pb!==ib)),[La]);return rk.default.createElement(sD,{scope:a.__scopeToggleGroup,type:"multiple",value:sa,onItemActivate:Ua,onItemDeactivate:cb},
rk.default.createElement(vD,Se({},ka,{ref:d})))}),[KH,Hv]=nz("ToggleGroup"),vD=rk.default.forwardRef((a,d)=>{const {__scopeToggleGroup:k,disabled:N=!1,rovingFocus:ea=!0,orientation:ka,dir:sa,loop:La=!0}=a;var Ua=Sf(a,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));a=oz(k);const cb=Gg(sa);Ua=me({role:"group",dir:cb},Ua);return rk.default.createElement(KH,{scope:k,rovingFocus:ea,disabled:N},ea?rk.default.createElement(fC,Se({asChild:!0},a,{orientation:ka,dir:cb,loop:La}),
rk.default.createElement(Yk.div,Se({},Ua,{ref:d}))):rk.default.createElement(Yk.div,Se({},Ua,{ref:d})))}),LH=rk.default.forwardRef((a,d)=>{var k=tD("ToggleGroupItem",a.__scopeToggleGroup);const N=Hv("ToggleGroupItem",a.__scopeToggleGroup),ea=oz(a.__scopeToggleGroup);k=k.value.includes(a.value);const ka=N.disabled||a.disabled;a=uf(me({},a),{pressed:k,disabled:ka});const sa=rk.default.useRef(null);return N.rovingFocus?rk.default.createElement(gC,Se({asChild:!0},ea,{focusable:!ka,active:k,ref:sa}),rk.default.createElement(wD,
Se({},a,{ref:d}))):rk.default.createElement(wD,Se({},a,{ref:d}))}),wD=rk.default.forwardRef((a,d)=>{const {__scopeToggleGroup:k,value:N}=a,ea=Sf(a,["__scopeToggleGroup","value"]),ka=tD("ToggleGroupItem",k);a={role:"radio","aria-checked":a.pressed,"aria-pressed":void 0};return rk.default.createElement($B,Se({},"single"===ka.type?a:void 0,ea,{ref:d,onPressedChange:sa=>{if(sa)ka.onItemActivate(N);else ka.onItemDeactivate(N)}}))}),pz=tq,Gp=LH,Hp=ba(598),bj=ba(598),xD="EditPdf LogseqPortalViewMode Geometry AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource ArrowMode Links".split(" "),
MH=["YoutubeLink","TwitterLink","IFrameSource","Links","EditPdf"],Xn=new Map,qz={"logseq-portal":["Swatch","LogseqPortalViewMode","ScaleLevel","AutoResizing","Links"],youtube:["YoutubeLink","Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),ellipse:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),
line:["TextStyle","Swatch","ScaleLevel","ArrowMode","Links"],pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:["TextStyle","Swatch","ScaleLevel","AutoResizing","Links"],html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"],pdf:["EditPdf","Links"]},NH=Object.entries(qz).filter(([,a])=>a.includes("NoFill")&&a.includes("Swatch")).map(([a])=>a),OH=pe(()=>{const a=Cg(),{handlers:{t:d}}=sm.default.useContext(gj),k=ab("AutoResizing"),N=k.every(ea=>
ea.props.isAutoResizing);return(0,bj.jsx)(Re,{tooltip:d("whiteboard/auto-resize"),toggle:k.every(ea=>"logseq-portal"===ea.props.type),className:"tl-button",pressed:N,onPressedChange:ea=>{k.forEach(ka=>{if("logseq-portal"===ka.props.type)ka.update({isAutoResizing:ea});else ka.onResetBounds({zoom:a.viewport.camera.zoom})});a.persist()},children:(0,bj.jsx)(Eh,{name:"dimensions"})})}),PH=pe(()=>{const a=Cg();var {handlers:{t:d}}=sm.default.useContext(gj);const k=ab("LogseqPortalViewMode"),N=k.every(ea=>
ea.collapsed);if(!N&&!k.every(ea=>!ea.collapsed))return null;d=(0,bj.jsxs)("div",{className:"flex",children:[N?d("whiteboard/expand"):d("whiteboard/collapse"),(0,bj.jsx)(nl,{action:N?"editor/expand-block-children":"editor/collapse-block-children"})]});return(0,bj.jsx)(Re,{tooltip:d,toggle:k.every(ea=>"logseq-portal"===ea.props.type),className:"tl-button",pressed:N,onPressedChange:()=>a.api.setCollapsed(!N),children:(0,bj.jsx)(Eh,{name:N?"object-expanded":"object-compact"})})}),uq=pe(()=>{const {handlers:{isMobile:a}}=
sm.default.useContext(gj);var d=ab("ScaleLevel");d=1<(new Set(d.map(k=>k.scaleLevel))).size?"":d[0].scaleLevel;return(0,bj.jsx)(So,{scaleLevel:d,compact:a()})}),QH=pe(()=>{const a=Cg(),{handlers:{t:d}}=sm.default.useContext(gj),k=ab("IFrameSource")[0],N=sm.default.useCallback(ka=>{k.onIFrameSourceChange(ka.target.value.trim().toLowerCase());a.persist()},[]),ea=sm.default.useCallback(()=>{k.reload()},[]);return(0,bj.jsxs)("span",{className:"flex gap-3",children:[(0,bj.jsx)(he,{tooltip:d("whiteboard/reload"),
type:"button",onClick:ea,children:(0,bj.jsx)(Eh,{name:"refresh"})}),(0,bj.jsx)(nt,{title:d("whiteboard/website-url"),className:"tl-iframe-src",value:`${k.props.url}`,onChange:N}),(0,bj.jsx)(he,{tooltip:d("whiteboard/open-website-url"),type:"button",onClick:()=>window.open(k.props.url),children:(0,bj.jsx)(Eh,{name:"external-link"})})]})}),RH=pe(()=>{const a=Cg(),{handlers:{t:d}}=sm.default.useContext(gj),k=ab("YoutubeLink")[0],N=sm.default.useCallback(ea=>{k.onYoutubeLinkChange(ea.target.value);a.persist()},
[]);return(0,bj.jsxs)("span",{className:"flex gap-3",children:[(0,bj.jsx)(nt,{title:d("whiteboard/youtube-url"),className:"tl-youtube-link",value:`${k.props.url}`,onChange:N}),(0,bj.jsx)(he,{tooltip:d("whiteboard/open-youtube-url"),type:"button",onClick:()=>{var ea,ka,sa;return null==(sa=null==(ka=null==(ea=window.logseq)?void 0:ea.api)?void 0:ka.open_external_link)?void 0:sa.call(ka,k.props.url)},children:(0,bj.jsx)(Eh,{name:"external-link"})})]})}),SH=pe(()=>{const a=Cg(),{handlers:{t:d}}=sm.default.useContext(gj),
k=ab("TwitterLink")[0],N=sm.default.useCallback(ea=>{k.onTwitterLinkChange(ea.target.value);a.persist()},[]);return(0,bj.jsxs)("span",{className:"flex gap-3",children:[(0,bj.jsx)(nt,{title:d("whiteboard/twitter-url"),className:"tl-twitter-link",value:`${k.props.url}`,onChange:N}),(0,bj.jsx)(he,{tooltip:d("whiteboard/open-twitter-url"),type:"button",onClick:()=>{var ea,ka,sa;return null==(sa=null==(ka=null==(ea=window.logseq)?void 0:ea.api)?void 0:ka.open_external_link)?void 0:sa.call(ka,k.props.url)},
children:(0,bj.jsx)(Eh,{name:"external-link"})})]})}),TH=pe(()=>{const a=Cg(),{handlers:{t:d,setCurrentPdf:k}}=sm.default.useContext(gj),N=a.selectedShapesArray[0];return(0,bj.jsx)(he,{tooltip:d("whiteboard/edit-pdf"),type:"button",onClick:()=>k(a.assets[N.props.assetId].src),children:(0,bj.jsx)(Eh,{name:"edit"})})}),UH=pe(()=>{const a=Cg(),{handlers:{t:d}}=sm.default.useContext(gj);var k=ab("NoFill");const N=sm.default.useCallback(ea=>{a.selectedShapesArray.forEach(ka=>ka.update({noFill:ea}));a.persist()},
[]);k=k.every(ea=>ea.props.noFill);return(0,bj.jsx)(Re,{tooltip:d("whiteboard/fill"),className:"tl-button",pressed:k,onPressedChange:N,children:(0,bj.jsx)(Eh,{name:k?"droplet-off":"droplet"})})}),VH=pe(()=>{const a=Cg(),d=ab("Swatch"),k=sm.default.useCallback(ea=>{a.selectedShapesArray.forEach(ka=>{ka.update({fill:ea,stroke:ea})});a.persist()},[]),N=sm.default.useCallback(ea=>{a.selectedShapesArray.forEach(ka=>{ka.update({opacity:ea})});a.persist()},[]);return(0,bj.jsx)(hn,{popoverSide:"top",color:d[0].props.noFill?
d[0].props.stroke:d[0].props.fill,opacity:d[0].props.opacity,setOpacity:N,setColor:k})}),yD=pe(()=>{const a=Cg(),d=sm.default.useCallback(k=>{a.api.convertShapes(k.currentTarget.dataset.tool)},[]);return(0,bj.jsx)(Ay,{popoverSide:"top",chevron:!1,setGeometry:d})}),WH=pe(()=>{const a=Cg(),{handlers:{t:d}}=sm.default.useContext(gj),k=ab("StrokeType"),N=k.every(ea=>"dashed"===ea.props.strokeType)?"dashed":k.every(ea=>"line"===ea.props.strokeType)?"line":"mixed";return(0,bj.jsx)(ja,{title:d("whiteboard/stroke-type"),
options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:N,onValueChange:ea=>{k.forEach(ka=>{ka.update({strokeType:ea})});a.persist()}})}),XH=pe(()=>{const a=Cg(),{handlers:{t:d}}=sm.default.useContext(gj),k=ab("ArrowMode");var N=k.every(ka=>{var sa;return"arrow"===(null==(sa=ka.props.decorations)?void 0:sa.start)});const ea=k.every(ka=>{var sa;return"arrow"===(null==(sa=ka.props.decorations)?void 0:sa.end)});N=[N?"start":null,ea?"end":null].filter(qg);
return(0,bj.jsx)(Ca,{title:d("whiteboard/arrow-head"),options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:N,onValueChange:ka=>{k.forEach(sa=>{var La=sa.update;var Ua={start:ka.includes("start")?"arrow":null,end:ka.includes("end")?"arrow":null};La.call(sa,{decorations:Ua})});a.persist()}})}),YH=pe(()=>{const a=Cg(),{handlers:{t:d}}=sm.default.useContext(gj),k=ab("TextStyle"),N=k.every(ka=>500<ka.props.fontWeight),ea=k.every(ka=>ka.props.italic);return(0,bj.jsxs)("span",
{className:"flex gap-1",children:[(0,bj.jsx)(Re,{tooltip:d("whiteboard/bold"),className:"tl-button",pressed:N,onPressedChange:ka=>{k.forEach(sa=>{sa.update({fontWeight:ka?700:400});sa.onResetBounds()});a.persist()},children:(0,bj.jsx)(Eh,{name:"bold"})}),(0,bj.jsx)(Re,{tooltip:d("whiteboard/italic"),className:"tl-button",pressed:ea,onPressedChange:ka=>{k.forEach(sa=>{sa.update({italic:ka});sa.onResetBounds()});a.persist()},children:(0,bj.jsx)(Eh,{name:"italic"})})]})}),zD=pe(()=>{var a;const d=Cg(),
k=d.selectedShapesArray[0];return(0,bj.jsx)(dx,{onRefsChange:N=>{k.update({refs:N});d.persist()},refs:null!=(a=k.props.refs)?a:[],shapeType:k.props.type,side:"right",pageId:"logseq-portal"===k.props.type?k.props.pageId:void 0,portalType:"logseq-portal"===k.props.type?k.props.blockType:void 0})});Xn.set("Geometry",yD);Xn.set("AutoResizing",OH);Xn.set("LogseqPortalViewMode",PH);Xn.set("ScaleLevel",uq);Xn.set("YoutubeLink",RH);Xn.set("TwitterLink",SH);Xn.set("IFrameSource",QH);Xn.set("NoFill",UH);Xn.set("Swatch",
VH);Xn.set("StrokeType",WH);Xn.set("ArrowMode",XH);Xn.set("TextStyle",YH);Xn.set("Links",zD);Xn.set("EditPdf",TH);var AD=a=>{var d;return(null!=(d=qz[a])?d:[]).filter(qg)},ZH=a=>{const d=a.map(N=>N.props.type),k=new Set(0<a.length?AD(d[0]):[]);for(let N=1;N<d.length&&0<k.size;N++){const ea=AD(d[N]);k.forEach(ka=>{ea.includes(ka)||k.delete(ka)})}1<a.length&&MH.forEach(N=>{k.has(N)&&k.delete(N)});return Array.from(k).sort((N,ea)=>xD.indexOf(N)-xD.indexOf(ea)).map(N=>Xn.get(N))},Bu=ba(598),$H=pe(({shapes:a,
offsets:d,hidden:k})=>{const N=Cg(),ea=ou.useRef(null),ka=ou.useRef(null);ou.useLayoutEffect(()=>{setTimeout(()=>{const La=ka.current;if(La){var {offsetWidth:Ua,offsetHeight:cb}=La;ea.current=[Ua,cb]}})});ou.useLayoutEffect(()=>{var La;const Ua=ka.current;if(Ua){var cb=null!=(La=ea.current)?La:[0,0];La=0;if(116>d.top){var ib=d.height/2+40;140>d.bottom&&(ib+=d.bottom-140)}else ib=-(d.height/2+40);16>d.left+d.width/2-cb[0]/2?La+=-(d.left+d.width/2-cb[0]/2-16):16>d.right+d.width/2-cb[0]/2&&(La+=d.right+
d.width/2-cb[0]/2-16);var [nb,Pb]=[La,ib];Ua.style.transform=`translateX(${nb}px) translateY(${Pb}px)`}},[d]);if(!N)return null;const sa=ZH(a);return(0,Bu.jsx)(Io,{centered:!0,children:0<sa.length&&(0,Bu.jsx)("div",{ref:ka,className:"tl-toolbar tl-context-bar",style:{visibility:k?"hidden":"visible",pointerEvents:k?"none":"all"},children:sa.map((La,Ua)=>(0,Bu.jsxs)(ou.Fragment,{children:[(0,Bu.jsx)(La,{}),Ua<sa.length-1&&(0,Bu.jsx)(Lr,{className:"tl-toolbar-separator",orientation:"vertical"})]},Ua))})})}),
rz=Df(ba(22)),tl=ba(22),[BD]=Vh("ContextMenu",[Zt]),gr=Zt(),[Iv,ex]=BD("ContextMenu"),sz=(0,tl.forwardRef)((a,d)=>{const {__scopeContextMenu:k,disabled:N=!1}=a,ea=Sf(a,["__scopeContextMenu","disabled"]),ka=ex("ContextMenuTrigger",k),sa=gr(k),La=(0,tl.useRef)({x:0,y:0}),Ua=(0,tl.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(me({width:0,height:0},La.current))}),cb=(0,tl.useRef)(0),ib=(0,tl.useCallback)(()=>window.clearTimeout(cb.current),[]);(0,tl.useEffect)(()=>ib,[ib]);(0,tl.useEffect)(()=>
void(N&&ib()),[N,ib]);return(0,tl.createElement)(tl.Fragment,null,(0,tl.createElement)(Kr,Se({},sa,{virtualRef:Ua})),(0,tl.createElement)(Yk.span,Se({"data-state":ka.open?"open":"closed","data-disabled":N?"":void 0},ea,{ref:d,style:me({WebkitTouchCallout:"none"},a.style),onContextMenu:N?a.onContextMenu:gg(a.onContextMenu,nb=>{ib();La.current={x:nb.clientX,y:nb.clientY};ka.onOpenChange(!0);nb.preventDefault()}),onPointerDown:N?a.onPointerDown:gg(a.onPointerDown,Wb(nb=>{ib();cb.current=window.setTimeout(()=>
{La.current={x:nb.clientX,y:nb.clientY};ka.onOpenChange(!0)},700)})),onPointerMove:N?a.onPointerMove:gg(a.onPointerMove,Wb(ib)),onPointerCancel:N?a.onPointerCancel:gg(a.onPointerCancel,Wb(ib)),onPointerUp:N?a.onPointerUp:gg(a.onPointerUp,Wb(ib))})))}),CD=(0,tl.forwardRef)((a,d)=>{var {__scopeContextMenu:k}=a;const N=Sf(a,["__scopeContextMenu"]),ea=ex("ContextMenuContent",k);k=gr(k);const ka=(0,tl.useRef)(!1);return(0,tl.createElement)(uw,Se({},k,N,{ref:d,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:sa=>
{var La;null===(La=a.onCloseAutoFocus)||void 0===La||La.call(a,sa);!sa.defaultPrevented&&ka.current&&sa.preventDefault();ka.current=!1},onInteractOutside:sa=>{var La;null===(La=a.onInteractOutside)||void 0===La||La.call(a,sa);sa.defaultPrevented||ea.modal||(ka.current=!0)},style:uf(me({},a.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),wm=(0,tl.forwardRef)((a,d)=>{var {__scopeContextMenu:k}=a;a=Sf(a,["__scopeContextMenu"]);k=gr(k);return(0,tl.createElement)(uy,
Se({},k,a,{ref:d}))}),hr=(0,tl.forwardRef)((a,d)=>{var {__scopeContextMenu:k}=a;a=Sf(a,["__scopeContextMenu"]);k=gr(k);return(0,tl.createElement)(rH,Se({},k,a,{ref:d}))}),gs=a=>{const {__scopeContextMenu:d,children:k,onOpenChange:N,dir:ea,modal:ka=!0}=a,[sa,La]=(0,tl.useState)(!1);a=gr(d);const Ua=nj(N),cb=(0,tl.useCallback)(ib=>{La(ib);Ua(ib)},[Ua]);return(0,tl.createElement)(Iv,{scope:d,open:sa,onOpenChange:cb,modal:ka},(0,tl.createElement)(Us,Se({},a,{dir:ea,open:sa,onOpenChange:cb,modal:ka}),
k))},If=ba(598),DD=pe(function({children:a,collisionRef:d}){var k,N,ea,ka,sa,La,Ua,cb,ib,nb,Pb,Sb,Nb,lc,yc,bc,qc;const mc=Cg(),{handlers:Pc}=rz.useContext(gj),Uc=Pc.t,Ed=rz.useRef(null),Ud=oe=>{oe();mc.transition("select")},ff=rz.useMemo(()=>Rf(),[]);return(0,If.jsxs)(gs,{onOpenChange:oe=>{oe&&!mc.isIn("select.contextMenu")?mc.transition("select").selectedTool.transition("contextMenu"):!oe&&mc.isIn("select.contextMenu")&&mc.selectedTool.transition("idle")},children:[(0,If.jsx)(sz,{disabled:mc.editingShape&&
0!==Object.keys(mc.editingShape).length,children:a}),(0,If.jsx)(CD,{className:"tl-menu tl-context-menu",ref:Ed,onEscapeKeyDown:()=>mc.transition("select"),collisionBoundary:d.current,asChild:!0,tabIndex:-1,children:(0,If.jsxs)("div",{children:[1<(null==(k=mc.selectedShapes)?void 0:k.size)&&!mc.readOnly&&(null==(N=mc.selectedShapesArray)?void 0:N.some(oe=>!oe.props.isLocked))&&(0,If.jsxs)(If.Fragment,{children:[(0,If.jsxs)(wm,{children:[(0,If.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,If.jsx)(he,
{tooltip:Uc("whiteboard/align-left"),onClick:()=>Ud(()=>mc.align("left")),children:(0,If.jsx)(Eh,{name:"layout-align-left"})}),(0,If.jsx)(he,{tooltip:Uc("whiteboard/align-center-horizontally"),onClick:()=>Ud(()=>mc.align("centerHorizontal")),children:(0,If.jsx)(Eh,{name:"layout-align-center"})}),(0,If.jsx)(he,{tooltip:Uc("whiteboard/align-right"),onClick:()=>Ud(()=>mc.align("right")),children:(0,If.jsx)(Eh,{name:"layout-align-right"})}),(0,If.jsx)(Lr,{className:"tl-toolbar-separator",orientation:"vertical"}),
(0,If.jsx)(he,{tooltip:Uc("whiteboard/distribute-horizontally"),onClick:()=>Ud(()=>mc.distribute("horizontal")),children:(0,If.jsx)(Eh,{name:"layout-distribute-vertical"})})]}),(0,If.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,If.jsx)(he,{tooltip:Uc("whiteboard/align-top"),onClick:()=>Ud(()=>mc.align("top")),children:(0,If.jsx)(Eh,{name:"layout-align-top"})}),(0,If.jsx)(he,{tooltip:Uc("whiteboard/align-center-vertically"),onClick:()=>Ud(()=>mc.align("centerVertical")),children:(0,If.jsx)(Eh,
{name:"layout-align-middle"})}),(0,If.jsx)(he,{tooltip:Uc("whiteboard/align-bottom"),onClick:()=>Ud(()=>mc.align("bottom")),children:(0,If.jsx)(Eh,{name:"layout-align-bottom"})}),(0,If.jsx)(Lr,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,If.jsx)(he,{tooltip:Uc("whiteboard/distribute-vertically"),onClick:()=>Ud(()=>mc.distribute("vertical")),children:(0,If.jsx)(Eh,{name:"layout-distribute-horizontal"})})]})]}),(0,If.jsx)(hr,{className:"menu-separator"}),(0,If.jsxs)(wm,{className:"tl-menu-item",
onClick:()=>Ud(mc.packIntoRectangle),children:[(0,If.jsx)(Eh,{className:"tl-menu-icon",name:"layout-grid"}),Uc("whiteboard/pack-into-rectangle")]}),(0,If.jsx)(hr,{className:"menu-separator"})]}),0<(null==(ea=mc.selectedShapes)?void 0:ea.size)&&(0,If.jsxs)(If.Fragment,{children:[(0,If.jsxs)(wm,{className:"tl-menu-item",onClick:()=>Ud(mc.api.zoomToSelection),children:[Uc("whiteboard/zoom-to-fit"),(0,If.jsx)(nl,{action:"whiteboard/zoom-to-fit"})]}),(0,If.jsx)(hr,{className:"menu-separator"})]}),(mc.selectedShapesArray.some(oe=>
"group"===oe.type||mc.getParentGroup(oe))||1<mc.selectedShapesArray.length)&&(null==(ka=mc.selectedShapesArray)?void 0:ka.some(oe=>!oe.props.isLocked))&&!mc.readOnly&&(0,If.jsxs)(If.Fragment,{children:[mc.selectedShapesArray.some(oe=>"group"===oe.type||mc.getParentGroup(oe))&&(0,If.jsxs)(wm,{className:"tl-menu-item",onClick:()=>Ud(mc.api.unGroup),children:[(0,If.jsx)(Eh,{className:"tl-menu-icon",name:"ungroup"}),Uc("whiteboard/ungroup"),(0,If.jsx)(nl,{action:"whiteboard/ungroup"})]}),1<mc.selectedShapesArray.length&&
(null==(sa=mc.selectedShapesArray)?void 0:sa.some(oe=>!oe.props.isLocked))&&(0,If.jsxs)(wm,{className:"tl-menu-item",onClick:()=>Ud(mc.api.doGroup),children:[(0,If.jsx)(Eh,{className:"tl-menu-icon",name:"group"}),Uc("whiteboard/group"),(0,If.jsx)(nl,{action:"whiteboard/group"})]}),(0,If.jsx)(hr,{className:"menu-separator"})]}),0<(null==(La=mc.selectedShapes)?void 0:La.size)&&(null==(Ua=mc.selectedShapesArray)?void 0:Ua.some(oe=>!oe.props.isLocked))&&(0,If.jsxs)(If.Fragment,{children:[!mc.readOnly&&
(0,If.jsxs)(wm,{className:"tl-menu-item",onClick:()=>Ud(mc.cut),children:[(0,If.jsx)(Eh,{className:"tl-menu-icon",name:"cut"}),Uc("whiteboard/cut")]}),(0,If.jsxs)(wm,{className:"tl-menu-item",onClick:()=>Ud(mc.copy),children:[(0,If.jsx)(Eh,{className:"tl-menu-icon",name:"copy"}),Uc("whiteboard/copy"),(0,If.jsx)(nl,{action:"editor/copy"})]})]}),!mc.readOnly&&(0,If.jsxs)(wm,{className:"tl-menu-item",onClick:()=>Ud(mc.paste),children:[(0,If.jsx)(Eh,{className:"tl-menu-icon",name:"clipboard"}),Uc("whiteboard/paste"),
(0,If.jsx)("div",{className:"tl-menu-right-slot",children:(0,If.jsx)("span",{className:"keyboard-shortcut",children:(0,If.jsxs)("code",{children:[KA,"+v"]})})})]}),1===(null==(cb=mc.selectedShapes)?void 0:cb.size)&&!mc.readOnly&&(0,If.jsxs)(wm,{className:"tl-menu-item",onClick:()=>Ud(()=>mc.paste(void 0,!0)),children:[Uc("whiteboard/paste-as-link"),(0,If.jsx)("div",{className:"tl-menu-right-slot",children:(0,If.jsx)("span",{className:"keyboard-shortcut",children:(0,If.jsxs)("code",{children:[KA,"+⇧+v"]})})})]}),
0<(null==(ib=mc.selectedShapes)?void 0:ib.size)&&(0,If.jsxs)(If.Fragment,{children:[(0,If.jsx)(hr,{className:"menu-separator"}),(0,If.jsxs)(wm,{className:"tl-menu-item",onClick:()=>Ud(()=>{var oe,Ue;return Pc.exportToImage(mc.currentPageId,{x:mc.selectionBounds.minX+mc.viewport.camera.point[0]-8,y:mc.selectionBounds.minY+mc.viewport.camera.point[1]-8,width:(null==(oe=mc.selectionBounds)?void 0:oe.width)+16,height:(null==(Ue=mc.selectionBounds)?void 0:Ue.height)+16,zoom:mc.viewport.camera.zoom})}),
children:[(0,If.jsx)(Eh,{className:"tl-menu-icon",name:"file-export"}),Uc("whiteboard/export"),(0,If.jsx)("div",{className:"tl-menu-right-slot",children:(0,If.jsx)("span",{className:"keyboard-shortcut"})})]})]}),(0,If.jsx)(hr,{className:"menu-separator"}),(0,If.jsxs)(wm,{className:"tl-menu-item",onClick:()=>Ud(mc.api.selectAll),children:[Uc("whiteboard/select-all"),(0,If.jsx)(nl,{action:"editor/select-parent"})]}),1<(null==(nb=mc.selectedShapes)?void 0:nb.size)&&(0,If.jsx)(wm,{className:"tl-menu-item",
onClick:()=>Ud(mc.api.deselectAll),children:Uc("whiteboard/deselect-all")}),!mc.readOnly&&0<(null==(Pb=mc.selectedShapes)?void 0:Pb.size)&&(null==(Sb=mc.selectedShapesArray)?void 0:Sb.some(oe=>!oe.props.isLocked))&&(0,If.jsxs)(wm,{className:"tl-menu-item",onClick:()=>Ud(()=>mc.setLocked(!0)),children:[(0,If.jsx)(Eh,{className:"tl-menu-icon",name:"lock"}),Uc("whiteboard/lock"),(0,If.jsx)(nl,{action:"whiteboard/lock"})]}),!mc.readOnly&&0<(null==(Nb=mc.selectedShapes)?void 0:Nb.size)&&(null==(lc=mc.selectedShapesArray)?
void 0:lc.some(oe=>oe.props.isLocked))&&(0,If.jsxs)(wm,{className:"tl-menu-item",onClick:()=>Ud(()=>mc.setLocked(!1)),children:[(0,If.jsx)(Eh,{className:"tl-menu-icon",name:"lock-open"}),Uc("whiteboard/unlock"),(0,If.jsx)(nl,{action:"whiteboard/unlock"})]}),0<(null==(yc=mc.selectedShapes)?void 0:yc.size)&&!mc.readOnly&&(null==(bc=mc.selectedShapesArray)?void 0:bc.some(oe=>!oe.props.isLocked))&&(0,If.jsxs)(If.Fragment,{children:[(0,If.jsxs)(wm,{className:"tl-menu-item",onClick:()=>Ud(mc.api.deleteShapes),
children:[(0,If.jsx)(Eh,{className:"tl-menu-icon",name:"backspace"}),Uc("whiteboard/delete"),(0,If.jsx)(nl,{action:"editor/delete"})]}),1<(null==(qc=mc.selectedShapes)?void 0:qc.size)&&!mc.readOnly&&(0,If.jsxs)(If.Fragment,{children:[(0,If.jsx)(hr,{className:"menu-separator"}),(0,If.jsxs)(wm,{className:"tl-menu-item",onClick:()=>Ud(mc.flipHorizontal),children:[(0,If.jsx)(Eh,{className:"tl-menu-icon",name:"flip-horizontal"}),Uc("whiteboard/flip-horizontally")]}),(0,If.jsxs)(wm,{className:"tl-menu-item",
onClick:()=>Ud(mc.flipVertical),children:[(0,If.jsx)(Eh,{className:"tl-menu-icon",name:"flip-vertical"}),Uc("whiteboard/flip-vertically")]})]}),!mc.readOnly&&(0,If.jsxs)(If.Fragment,{children:[(0,If.jsx)(hr,{className:"menu-separator"}),(0,If.jsxs)(wm,{className:"tl-menu-item",onClick:()=>Ud(mc.bringToFront),children:[Uc("whiteboard/move-to-front"),(0,If.jsx)(nl,{action:"whiteboard/bring-to-front"})]}),(0,If.jsxs)(wm,{className:"tl-menu-item",onClick:()=>Ud(mc.sendToBack),children:[Uc("whiteboard/move-to-back"),
(0,If.jsx)(nl,{action:"whiteboard/send-to-back"})]})]}),ff&&(0,If.jsx)(wm,{className:"tl-menu-item",onClick:()=>{1===mc.selectedShapesArray.length?console.log(pc(mc.selectedShapesArray[0].serialized)):console.log(mc.selectedShapesArray.map(oe=>pc(oe.serialized)))},children:Uc("whiteboard/dev-print-shape-props")})]})]})})]})}),tz=Df(ba(22)),uz=ba(598),aI=pe(({shape:a})=>{const d=Cg(),{handlers:k}=tz.default.useContext(gj),N=k.t,ea=tz.default.useMemo(()=>{var ka;const sa=[...(null!=(ka=a.props.refs)?
ka:[])].map(La=>[La,!0]);"logseq-portal"===a.props.type&&a.props.pageId&&sa.unshift([a.props.pageId,!1]);return sa.filter(La=>La[0].toLowerCase()!==d.currentPage.name&&k.getBlockPageName(La[0])!==d.currentPage.name)},[a.props.id,a.props.type,a.props.parentId,a.props.refs]);return 0===ea.length?null:(0,uz.jsx)("div",{className:"tl-quick-links",title:N("whiteboard/shape-quick-links"),children:ea.map(([ka,sa])=>(0,uz.jsx)("div",{className:"tl-quick-links-row",children:(0,uz.jsx)(Ny,{id:ka,showReferenceContent:sa})},
ka))})}),ir=Df(ba(22)),vz=Df(ba(22)),wz={image:[".png",".svg",".jpg",".jpeg",".gif"],video:[".mp4",".webm",".ogg"],pdf:[".pdf"]},fx=(a,d,k)=>hi(void 0,[a,d,k],function*(N,{point:ea,shiftKey:ka,dataTransfer:sa,fromDrop:La},Ua){function cb(rd,Md){return hi(this,null,function*(){const Te=Object.values(N.assets).find(of=>of.src===rd);return Te?Te:{id:fk(),type:Md,src:rd,size:yield cj(Ua.makeAssetUrl(rd),Md)}})}function ib(rd){return hi(this,null,function*(){const Md=rd.filter(Te=>"unknown"!==sc(Te.name)).map(Te=>
hi(this,null,function*(){try{const of=yield Ua.saveAsset(Te);return yield cb(of,sc(Te.name))}catch(of){console.error(of)}return null}));return(yield Promise.all(Md)).filter(qg)})}function nb(rd){return[uf(me({},ar.defaultProps),{html:rd,point:[ea[0],ea[1]]})]}function Pb(rd){return hi(this,null,function*(){return Lc(Nb,lc,qc,bc,mc,yc,ff)(rd)})}function Sb(){return hi(this,null,function*(){const rd=yield navigator.clipboard.read(),Md=Lc(mc,yc,ff);return(yield Promise.all(rd.map(Te=>Md(Te)))).flat().filter(qg)})}
function Nb(rd){return hi(this,null,function*(){var Md=rd.getData("file");if(!Md)return null;const Te=yield cb(Md,"pdf");N.addAssets([Te]);Md=uf(me({},vm.defaultProps),{id:fk(),assetId:Te.id,url:Md,opacity:1});Te.size&&Object.assign(Md,{point:[ea[0]-Te.size[0]/4+16,ea[1]-Te.size[1]/4+16],size:ge.div(Te.size,2)});return[Md]})}function lc(rd){return hi(this,null,function*(){var Md=Array.from(rd.files);return 0<Md.length?(Bf=Md=yield ib(Md),Md.map((Te,of)=>{switch(Te.type){case "video":var lg=mt.defaultProps;
break;case "image":lg=Ev.defaultProps;break;case "pdf":lg=vm.defaultProps;break;default:return null}lg=uf(me({},lg),{id:fk(),assetId:Te.id,opacity:1});Te.size&&Object.assign(lg,{point:[ea[0]-Te.size[0]/4+16*of,ea[1]-Te.size[1]/4+16*of],size:ge.div(Te.size,2)});return lg})):null})}function yc(rd){return hi(this,null,function*(){if(rd.types.includes("text/plain")&&(ka||La))return null;const Md=yield zd(rd,"text/html");return Md?Lc(Pc,nb)(Md):null})}function bc(rd){return hi(this,null,function*(){var Md,
Te,of,lg,Fg,wf,Xg=rd.getData("block-uuid");if(Xg){Xg=Xg.trim();const Xf=null==(of=null==(Te=null==(Md=window.logseq)?void 0:Md.api)?void 0:Te.get_selected_blocks)?void 0:of.call(Te);Md=Xf&&1<(null==Xf?void 0:Xf.length)?Xf.map(jh=>jh.uuid):[Xg];null==(wf=null==(Fg=null==(lg=window.logseq)?void 0:lg.api)?void 0:Fg.set_blocks_id)?void 0:wf.call(Fg,Md);lg=Md.map(jh=>Ud(`((${jh}))`));return(yield Promise.all(lg)).flat().filter(qg).map((jh,zh)=>uf(me({},jh),{point:[ea[0]+(rl.defaultProps.size[0]+16)*zh,
ea[1]]}))}return null})}function qc(rd){return hi(this,null,function*(){var Md=rd.getData("page-name");return Md?(Md=Md.trim(),Ud(`[[${Md}]]`)):null})}function mc(rd){return hi(this,null,function*(){var Md=yield zd(rd,"text/plain");return Md?(Md=Md.trim(),Lc(Uc,Ed)(Md)):null})}function Pc(rd){if(rd=N.api.getClonedShapesFromTldrString(decodeURIComponent(rd),ea)){const {shapes:Md,assets:Te,bindings:of}=rd;gf.push(...Te);vf.push(...of);return Md}return null}function Uc(rd){return hi(this,null,function*(){try{const Te=
new URL(rd);var Md=Te.host&&["http:","https:"].includes(Te.protocol)}catch(Te){Md=!1}return Md&&!ka?$w.test(rd)?[uf(me({},bs.defaultProps),{url:rd,point:[ea[0],ea[1]]})]:jz.test(rd)?[uf(me({},ds.defaultProps),{url:rd,point:[ea[0],ea[1]]})]:[uf(me({},Zr.defaultProps),{url:rd,point:[ea[0],ea[1]]})]:null})}function Ed(rd){return rd.startsWith("\x3ciframe")?[uf(me({},ar.defaultProps),{html:rd,point:[ea[0],ea[1]]})]:null}function Ud(rd){return hi(this,null,function*(){if(/^\(\(.*\)\)$/.test(rd)&&40===
rd.length){var Md=rd.slice(2,-2);if(Jj(Md))return[uf(me({},rl.defaultProps),{point:[ea[0],ea[1]],size:[400,0],pageId:Md,fill:N.settings.color,stroke:N.settings.color,scaleLevel:N.settings.scaleLevel,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(rd))return Md=rd.slice(2,-2),[uf(me({},rl.defaultProps),{point:[ea[0],ea[1]],size:[400,0],pageId:Md,fill:N.settings.color,stroke:N.settings.color,scaleLevel:N.settings.scaleLevel,blockType:"P"})];return null})}function ff(rd){return hi(this,null,function*(){var Md=
yield zd(rd,"text/plain");return Md&&(Md=Md.trim(),Md=null==Ua?void 0:Ua.addNewBlock(Md))?[uf(me({},rl.defaultProps),{size:[400,0],point:[ea[0],ea[1]],pageId:Md,fill:N.settings.color,stroke:N.settings.color,scaleLevel:N.settings.scaleLevel,blockType:"B",compact:!0})]:null})}var oe,Ue;let Bf=[],gf=[];const vf=[];N.cursors.setCursor("progress");let Rd=[];try{sa?Rd.push(...(null!=(oe=yield Pb(sa))?oe:[])):Rd.push(...(null!=(Ue=yield Sb())?Ue:[]))}catch(rd){console.error(rd)}const wd=Rd.map(rd=>uf(me({},
rd),{parentId:N.currentPageId,isLocked:!1,id:Jj(rd.id)?rd.id:fk()})),Jd=null==sa?void 0:sa.types.every(rd=>"Files"===rd);N.wrapUpdate(()=>{var rd=[...Bf,...gf];0<rd.length&&N.createAssets(rd);0<wd.length&&N.createShapes(wd);N.currentPage.updateBindings(Object.fromEntries(vf.map(Md=>[Md.id,Md])));if(1===N.selectedShapesArray.length&&1===wd.length&&La){rd=N.selectedShapesArray[0];const Md=N.getShapeById(wd[0].id);N.createNewLineBinding(rd,Md)}N.setSelectedShapes(wd.map(Md=>Md.id));N.selectedTool.transition("idle");
N.cursors.setCursor("default");(La||Jd)&&N.packIntoRectangle()})}),gx=Df(ba(22)),ED=Df(ba(22)),vq=ba(598),FD=[pn,lz,oD,Zm,np,bx,mz,sl,fr,qD,pD,Lh],GD=a=>{const {renderers:d}=Ut.useContext(gj);return(0,vq.jsx)(d.BacklinksCount,uf(me({},a),{options:{"portal?":!1}}))},HD=()=>{const a=Ut.useRef(null),d=Cg(),k=Ut.useMemo(()=>({ContextBar:$H,BacklinksCount:GD,QuickLinks:aI}),[]);return(0,vq.jsx)(DD,{collisionRef:a,children:(0,vq.jsx)("div",{ref:a,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":d.uuid,
children:(0,vq.jsx)(iG,{components:k,children:(0,vq.jsx)(QC,{})})})})},ID=a=>{var {onPersist:d,readOnly:k,model:N}=a;a=Sf(a,["onPersist","readOnly","model"]);const ea=le(),ka=Vd(),sa=Ke(),La=k?null:jf(),Ua=Ut.useCallback((cb,ib)=>{null==d?void 0:d(cb,ib)},[N]);return(0,vq.jsx)(eG,uf(me({Shapes:yu,Tools:FD,onDrop:ea,onPaste:ka,onCopy:sa,readOnly:k,onCanvasDBClick:La,onPersist:Ua,model:N},a),{children:(0,vq.jsx)(HD,{})}))},JD=function(a){var {renderers:d,handlers:k}=a;a=Sf(a,["renderers","handlers"]);
const N={renderers:Ut.useMemo(()=>Object.fromEntries(Object.entries(d).map(([ea,ka])=>[ea,Ut.memo(ka)])),[]),handlers:k};return(0,vq.jsx)(gj.Provider,{value:N,children:(0,vq.jsx)(ID,me({},a))})}};
'use strict';var Pyd=function(a){return a},Qyd=function(a,b){return $APP.Vh.j(function(c){var d=$APP.Mf(c);c=$APP.G.j(d,$APP.wB);d=$APP.G.j(d,$APP.dE);return new $APP.l(null,2,[$APP.Hl,$APP.t.A(c),$APP.ROb,$APP.Ox.j(d,new $APP.N(null,2,5,$APP.O,[$APP.JC,$APP.ROb],null))],null)},$APP.qg.j(function(c){return $APP.JC.A($APP.dE.A(c))},$APP.eO.C(a,b,new $APP.l(null,1,[$APP.Ks,new $APP.N(null,2,5,$APP.O,[$APP.wB,$APP.dE],null)],null))))},Ryd=function(a){return $APP.eq.F(a,$APP.F([$APP.fq,!0]))},Syd=function(a,
b,c,d){var e=$APP.WE(a);b=new $APP.l(null,2,[$APP.KC,$APP.aqb,$APP.MC,new $APP.l(null,6,[$APP.Hl,$APP.qa(b,"id"),$APP.Ip,$APP.qa(b,"name"),$APP.KF,Ryd($APP.qa(b,"bindings")),$APP.ROb,$APP.qa(b,"nonce"),$APP.SOb,Ryd(c),$APP.OOb,d],null)],null);c=$APP.hw();e=$APP.lF.A(e);e=$APP.m(e)?e:$APP.hw();return new $APP.l(null,5,[$APP.Oq,a,$APP.BE,"whiteboard",$APP.dE,b,$APP.mF,c,$APP.lF,e],null)},Tyd=function(a,b,c,d,e,f){a=Ryd(a.getCleanUpAssets());var g=b.shapes,h=$APP.Vh.j(function(E){return $APP.qa(E,"id")},
g),n=$APP.Eh(h,$APP.Pj.A(g.length));g=$APP.zh($APP.Vh.j(function(E){E=$APP.Mf(E);E=$APP.G.j(E,$APP.Hl);return $APP.P.C(Ryd(b.getShapeById(E).serialized),$APP.$w,$APP.G.j(n,E))},$APP.nz.j(c,d)));d=$APP.zh($APP.Vh.j($APP.Hl,d));var p=$APP.zh($APP.Vh.j($APP.Hl,c)),q=$APP.zh($APP.Km.j($APP.nk,$APP.nz.j(p,d)));c=$APP.zh($APP.qg.j(function(E){E=$APP.Hl.A(E);return q.A?q.A(E):q.call(null,E)},g));var r=$APP.Km.j($APP.nk,$APP.nz.j(d,p)),v=$APP.wA();d=$APP.x(r)?$APP.Vh.j(function(E){return $APP.Ox.j(E,new $APP.N(null,
2,5,$APP.O,[$APP.dE,$APP.JC],null))},function(){var E=new $APP.N(null,1,5,$APP.O,[$APP.ny],null),H=$APP.Oj.j(function(J){return new $APP.N(null,2,5,$APP.O,[$APP.wB,$APP.zi(J)],null)},r);return $APP.lD?$APP.lD(v,E,H):$APP.mD.call(null,v,E,H)}()):null;p=$APP.Oj.j(function(E){return new $APP.N(null,2,5,$APP.O,[$APP.DBb,new $APP.N(null,2,5,$APP.O,[$APP.wB,$APP.zi(E)],null)],null)},r);var y=$APP.nz.j(g,c),A=$APP.x(y)?function(){var E=new $APP.N(null,1,5,$APP.O,[$APP.ny],null),H=$APP.Oj.j(function(J){return new $APP.N(null,
2,5,$APP.O,[$APP.wB,$APP.zi($APP.Hl.A(J))],null)},y);return $APP.lD?$APP.lD(v,E,H):$APP.mD.call(null,v,E,H)}():null;return new $APP.l(null,4,[$APP.PCc,Syd(e,b,a,h),$APP.JSc,$APP.Vh.j(function(E){return $APP.me(q,$APP.t.A($APP.wB.A(E)))?$APP.P.C(E,$APP.mF,$APP.hw()):$APP.CBb(E)},$APP.Vh.j(function(E){E=new $APP.l(null,2,[$APP.KC,$APP.eK,$APP.JC,E],null);E=new $APP.l(null,3,[$APP.kD,new $APP.l(null,1,[$APP.Oq,$APP.Nq.A?$APP.Nq.A(e):$APP.Nq.call(null,e)],null),$APP.uD,new $APP.l(null,1,[$APP.Oq,e],null),
$APP.dE,E],null);var H=$APP.gqb(E,e);return $APP.$l.F($APP.F([E,H]))},g)),$APP.HD,p,$APP.$4b,new $APP.l(null,3,[$APP.BLb,$APP.xb(f),$APP.PAb,f,$APP.tv,new $APP.l(null,5,[$APP.gK,e,$APP.hPb,d,$APP.iPb,c,$APP.jPb,y,$APP.kPb,A],null)],null)],null)},Uyd=function(a,b,c){var d=$APP.Yc($APP.z(b.pages)),e=d.shapes,f=$APP.WE(a);f=$APP.Ox.j(f,new $APP.N(null,3,5,$APP.O,[$APP.dE,$APP.MC,$APP.OOb],null));var g=$APP.Eh(f,$APP.Pj.A($APP.Rc(f)));e=$APP.zh($APP.Jn.j(function(q,r){var v=r.id;return new $APP.l(null,
2,[$APP.Hl,v,$APP.ROb,$APP.B.j(q,$APP.G.j(g,v))?r.nonce:Date.now()],null)},e));var h=$APP.wA();f=function(){var q=$APP.Ox.j($APP.u($APP.pjd),new $APP.N(null,2,5,$APP.O,[h,a],null));return $APP.m(q)?q:$APP.zh($APP.Vh.j(function(r){return $APP.Xq.C(r,$APP.Hl,$APP.t)},Qyd(h,a)))}();b=Tyd(b,d,e,f,a,c);f=$APP.Mf(b);d=$APP.G.j(f,$APP.PCc);b=$APP.G.j(f,$APP.JSc);c=$APP.G.j(f,$APP.HD);f=$APP.G.j(f,$APP.$4b);d=$APP.gl.F(c,new $APP.N(null,1,5,$APP.O,[d],null),$APP.F([b]));var n=$APP.Ox.j(f,new $APP.N(null,
2,5,$APP.O,[$APP.tv,$APP.iPb],null)),p=$APP.Ox.j(f,new $APP.N(null,2,5,$APP.O,[$APP.tv,$APP.hPb],null));n=$APP.m($APP.Xf(function(q){return $APP.B.j("group",$APP.Mm.A(q))},n))?$APP.P.C(f,$APP.lPb,$APP.kv):$APP.m(function(){var q=$APP.Nf(p);return $APP.m(q)?$APP.Wf(function(r){return $APP.B.j("group",$APP.Mm.A(r))},p):q}())?$APP.P.C(f,$APP.lPb,$APP.YDc):$APP.m($APP.Xf(function(q){return $APP.B.j("line",$APP.Mm.A(q))&&$APP.B.j("arrow ",$APP.yo.A($APP.GBc.A(q)))},n))?$APP.P.C(f,$APP.lPb,$APP.ROc):f;
b=$APP.x($APP.gl.j(b,c))?n:$APP.P.C(f,$APP.f1a,!0);$APP.ji.J($APP.pjd,$APP.Mu,new $APP.N(null,2,5,$APP.O,[h,a],null),e);if($APP.me(new $APP.vh(null,new $APP.l(null,1,[$APP.ROc,null],null),null),$APP.lPb.A(b)))return $APP.xA($APP.d5c,new $APP.l(null,2,[$APP.Gx,d,$APP.$4b,b],null));e=$APP.d5c.A($APP.u($APP.tA));$APP.gl.j($APP.Gx.A(e),d);$APP.$l.F($APP.F([b,$APP.$4b.A(e)]));$APP.xA($APP.d5c,$APP.Jf);return null},Vyd=function(a){a=$APP.eO.A(a);return $APP.Km.j($APP.Zpb,a)},Wyd=function(a){var b=$APP.Jx.A($APP.WE(a));
a=Vyd(a);a=$APP.qg.j(function(d){return $APP.B.j(b,$APP.Jx.A($APP.uD.A(d)))},a);var c=$APP.zh($APP.Km.j($APP.ub,$APP.Vh.j(function(d){return $APP.Ox.C(d,new $APP.N(null,2,5,$APP.O,[$APP.vD,$APP.Jx],null),null)},a)));a=$APP.Km.j(function(d){d=$APP.Jx.A(d);return c.A?c.A(d):c.call(null,d)},a);return $APP.x(a)?$APP.z(a):null},Xyd=function(){return $APP.nm(null,function(){return $APP.nm(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.nm(a.text(),function(b){return $APP.nm($APP.Uq($APP.Jf,
b),function(c){return $APP.hm(c)})})})})},Yyd=function(a){var b=$APP.a5a();return($APP.ud(b)||$APP.B.j(1,$APP.Rc(b))&&$APP.B.j(a,$APP.Oq.A($APP.z(b))))&&$APP.xb($APP.Ox.j($APP.u($APP.tA),new $APP.N(null,1,5,$APP.O,[$APP.SXa],null)))},Zyd=function(a){return null!=a?$APP.qm($APP.nm(null,function(){return $APP.nm(Xyd(),function(b){var c=$APP.Mf(b);b=$APP.G.j(c,$APP.jF);c=$APP.G.j(c,$APP.ew);var d=$APP.z(b);b=$APP.POb(d,c);d=$APP.Ypb(d);c=$APP.SOb.A(d);d=$APP.KF.A(d);a.cloneShapesIntoCurrentPage($APP.hj(new $APP.l(null,
3,[$APP.$Ob,b,$APP.SOb,c,$APP.KF,d],null)));b=$APP.UXa();return $APP.hm(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",b)}):null},$yd=function(a){a.cleanup($APP.Vh.j(function(b){return b.id},a.shapes))},czd=function(a,b){b=$APP.eq.F(b,$APP.F([new $APP.l(null,1,[$APP.fq,!0],null)]));b=$APP.Mf(b);var c=$APP.G.j(b,azd),d=$APP.G.j(b,$APP.cH),e=$APP.G.j(b,bzd),f=$APP.wA();return $APP.nm(null,function(){return $APP.nm($APP.m(d)?$APP.ojb(f,a,new $APP.l(null,1,[$APP.Fw,
100],null)):null,function(g){return $APP.nm($APP.m(c)?$APP.tjb(a):null,function(h){return $APP.nm($APP.m(e)?$APP.vjb(a,100):null,function(n){return $APP.hm($APP.hj(new $APP.l(null,3,[$APP.jF,h,$APP.ew,g,$APP.KH,n],null)))})})})})},dzd=function(a){return $APP.mm($APP.GIb($APP.wA(),new $APP.N(null,1,5,$APP.O,[$APP.eq.A(a)],null)),function(b){var c=(c=$APP.x(b))?$APP.z(b):c;return $APP.m(c)?(b=$APP.C.C(c,0,null),$APP.C.C(c,1,null),c=$APP.C.C(c,2,null),$APP.IIb($APP.m(c)?c:b)):null})},ezd=function(){return $APP.FLb(null)},
fzd=function(){return $APP.HLb(null)},wzd=function(a){return $APP.hh([gzd,hzd,izd,jzd,kzd,lzd,mzd,nzd,$APP.PB,ozd,pzd,qzd,rzd,$APP.iY,szd,tzd,uzd,vzd],[function(b){if($APP.Kv(b))var c=$APP.Oq.A($APP.j3a($APP.wA(),$APP.aj(b)));else c=$APP.Oq.A,b=new $APP.N(null,2,5,$APP.O,[$APP.Oq,$APP.Nq.A?$APP.Nq.A(b):$APP.Nq.call(null,b)],null),b=$APP.tD.A?$APP.tD.A(b):$APP.tD.call(null,b),c=c.call($APP.Oq,b);return c},function(b){return $APP.hj($APP.m2b(b))},function(b){return $APP.XE(b,!1)},function(b){return $APP.cYa($APP.m(b)?
$APP.m2b(b):null)},function(b){return $APP.TOb(b)},$APP.Bw,function(b){return $APP.FHb(b,new $APP.l(null,1,[$APP.nO,!1],null))},$APP.iF,czd,dzd,Pyd,function(b,c){return $APP.bw(b,$APP.F([$APP.dw,c]))},function(b){var c=$APP.t,d=c.A,e=$APP.Kz?$APP.Kz():$APP.Lz.call(null),f=$APP.WE(a),g=Wyd(a);b=new $APP.l(null,6,[$APP.vD,$APP.uh($APP.m(g)?g:f,new $APP.N(null,1,5,$APP.O,[$APP.Jx],null)),$APP.wB,e,$APP.tB,$APP.m(b)?b:"",$APP.MD,$APP.Pq,$APP.kD,new $APP.l(null,2,[$APP.Oq,$APP.Nq.A?$APP.Nq.A(a):$APP.Nq.call(null,
a),$APP.lw,a],null),$APP.uD,new $APP.l(null,1,[$APP.Oq,a],null)],null);$APP.nD(new $APP.N(null,1,5,$APP.O,[b],null));return d.call(c,e)},function(b){return $APP.iI.F($APP.F([$APP.Yh.A(b)]))},function(b,c){return $APP.LB(function(){return(0,$APP.U_b)(b,$APP.$l.F($APP.F([$APP.eq.F(c,$APP.F([$APP.fq,!0])),new $APP.l(null,1,[$APP.MJ,!0],null)])))})},function(b,c){return $APP.rB($APP.wA(),$APP.Jx.A($APP.WE(b)),$APP.Yh.A(c))},function(b){var c=$APP.Kv(b)?$APP.Oq.A($APP.j3a($APP.wA(),$APP.aj(b))):null;c=
$APP.m(c)?c:b;var d=$APP.RE(c),e=$APP.iF(c);return $APP.m(d)?$APP.m(e)?$APP.hnb(c,new $APP.l(null,1,[$APP.xJ,b],null)):$APP.wJ($APP.XE(b,!1)):null},function(b){return $APP.hj($APP.d2a($APP.aj(b)))}])},vzd=new $APP.K(null,"queryBlockByUUID","queryBlockByUUID",2091812895),szd=new $APP.K(null,"exportToImage","exportToImage",-154356643),rzd=new $APP.K(null,"addNewBlock","addNewBlock",1426762680),xzd=new $APP.K(null,"KeyboardShortcut","KeyboardShortcut",1250004264),bzd=new $APP.K(null,"files?","files?",
-1267491104),gzd=new $APP.K(null,"getBlockPageName","getBlockPageName",-1656908032),yzd=new $APP.K(null,"renderers","renderers",-1460292282),zzd=new $APP.K(null,"model","model",331153215),izd=new $APP.K(null,"getRedirectPageName","getRedirectPageName",-1858136925),lzd=new $APP.K(null,"isMobile","isMobile",-2043133877),jzd=new $APP.K(null,"setCurrentPdf","setCurrentPdf",-63289336),Azd=new $APP.K(null,"onMount","onMount",-876858467),mzd=new $APP.K(null,"insertFirstPageBlock","insertFirstPageBlock",
-1676658548),pzd=new $APP.K(null,"makeAssetUrl","makeAssetUrl",217779988),Bzd=new $APP.K(null,"onPersist","onPersist",-1848738852),Czd=new $APP.K(null,"Breadcrumb","Breadcrumb",-1351298906),qzd=new $APP.K(null,"copyToClipboard","copyToClipboard",1092115063),uzd=new $APP.K(null,"redirectToPage","redirectToPage",87147838),kzd=new $APP.K(null,"addNewWhiteboard","addNewWhiteboard",554297706),ozd=new $APP.K(null,"saveAsset","saveAsset",-668047853),Dzd=new $APP.K(null,"BacklinksCount","BacklinksCount",
364670631),Ezd=new $APP.K(null,"Block","Block",-1959785792),tzd=new $APP.K(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),Fzd=new $APP.K(null,"Page","Page",-1267059506),azd=new $APP.K(null,"pages?","pages?",-2065014049),Gzd=new $APP.K(null,"PageName","PageName",-164991013),Hzd=new $APP.K(null,"Tweet","Tweet",-452258680),nzd=new $APP.K(null,"isWhiteboardPage","isWhiteboardPage",-134150579),Izd=new $APP.K(null,"BlockReference","BlockReference",-120254741),hzd=new $APP.K(null,"inflateAsset","inflateAsset",
-1449040639);$APP.kda("tldraw");var Jzd=$APP.xm(602);var Kzd,Lzd;$APP.wpd={};Kzd=$APP.LO($APP.qa(Jzd,"App"));$APP.zpd=$APP.qa(Jzd,"generateJSXFromModel");
Lzd=new $APP.l(null,8,[Fzd,$APP.nr($APP.rr,function(a){return(0,$APP.iod)(new $APP.l(null,2,[$APP.gK,$APP.XE($APP.qa(a,"pageName"),!1),$APP.MJ,!0],null))},null,"frontend.extensions.tldraw/page-cp"),Ezd,$APP.nr($APP.rr,function(a){a=$APP.zi($APP.qa(a,"blockId"));var b=$APP.fXa($APP.ohc);a=b.A?b.A(a):b.call(null,a);return $APP.br(a)},null,"frontend.extensions.tldraw/block-cp"),Czd,$APP.nr($APP.rr,function(a){return $APP.br($APP.hR(new $APP.l(null,1,[$APP.NV,!0],null),$APP.wA(),$APP.zi($APP.qa(a,"blockId")),
new $APP.l(null,2,[$APP.V6b,$APP.qa(a,"endSeparator"),$APP.W6b,$APP.qa(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),Hzd,$APP.nr($APP.rr,function(a){return(0,$APP.L5b)($APP.qa(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),Gzd,$APP.nr($APP.rr,function(a){return(0,$APP.UQ)(new $APP.l(null,1,[$APP.NV,!0],null),new $APP.l(null,1,[$APP.Oq,$APP.qa(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),Dzd,function(a){return $APP.$f.j($APP.Cpd,$APP.Vh.j(function(b){return $APP.eq.F($APP.qa(a,
b),$APP.F([new $APP.l(null,1,[$APP.fq,!0],null)]))},new $APP.N(null,3,5,$APP.O,["id","className","options"],null)))},Izd,$APP.nr($APP.rr,function(a){return(0,$APP.X4b)($APP.Jf,$APP.qa(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference"),xzd,$APP.nr($APP.rr,function(a){a=$APP.TO($APP.Yh.A($APP.qa(a,"action")));return"string"===typeof a?$APP.br($APP.NR(a)):$APP.br($APP.ep.j(" | ",$APP.Vh.j($APP.NR,a)))},null,"frontend.extensions.tldraw/keyboard-shortcut")],null);
$APP.xpd=$APP.nr($APP.rr,function(a,b){function c(n){if($APP.m(n)){n.appUndo=ezd;n.appRedo=fzd;var p=$APP.qa(n,"api");return $APP.m(p)?$APP.mm(d?Zyd(p):null,function(){$yd(n.currentPage);$APP.dYa(n,b);return h.A?h.A(n):h.call(null,n)}):null}return null}var d=Yyd(a),e=$APP.aPb(a),f=$APP.xr(null),g=$APP.C.C(f,0,null),h=$APP.C.C(f,1,null);$APP.yr(function(){$APP.m($APP.m(g)?b:g)&&$APP.dYa(g,b);return function(){return $APP.uc}},new $APP.N(null,2,5,$APP.O,[b,g],null));return $APP.m(e)?$APP.W("div",{style:{overscrollBehavior:"none"},
onBlur:function(n){n=$APP.qa(n,"target").tagName;var p=new $APP.vh(null,new $APP.l(null,2,["INPUT",null,"TEXTAREA",null],null),null);n=p.A?p.A(n):p.call(null,n);return $APP.m(n)?$APP.vB():null},onWheel:$APP.Wv,className:"draw tldraw whiteboard relative w-full h-full"},[d&&$APP.xb(g)?$APP.W("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.br($APP.YO("Loading onboarding whiteboard ..."))]):null,$APP.br(function(){var n=new $APP.l(null,6,[yzd,Lzd,$APP.cSa,
wzd(a),Azd,c,$APP.nUc,!0,Bzd,function(p,q){$APP.xA(new $APP.N(null,2,5,$APP.O,[$APP.rWc,$APP.wA()],null),$APP.hw());return $APP.m(!1)?(console.time("tldraw persist"),p=Uyd(a,p,q.replace),console.timeEnd("tldraw persist"),p):Uyd(a,p,q.replace)},zzd,e],null);return Kzd.A?Kzd.A(n):Kzd.call(null,n)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.Sa.aj();
}).call(this);